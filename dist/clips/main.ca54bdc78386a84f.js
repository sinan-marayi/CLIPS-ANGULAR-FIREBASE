(self.webpackChunkClips=self.webpackChunkClips||[]).push([[179],{2011:(it,Ie,V)=>{"use strict";V.d(Ie,{Dh:()=>ve,GT:()=>pe,cc:()=>Me,hO:()=>qe,on:()=>K,pX:()=>te,xv:()=>Ce});var c=V(4650),oe=V(9260),U=V(2122);it=V.hmd(it);const ye=["ngOnDestroy"],te=(me,Ke,nt,Ge={})=>new Proxy(me,{get:(Se,ze)=>nt.runOutsideAngular(()=>{var rt;if(me[ze])return!(null===(rt=Ge?.spy)||void 0===rt)&&rt.get&&Ge.spy.get(ze,me[ze]),me[ze];if(ye.indexOf(ze)>-1)return()=>{};const et=Ke.toPromise().then(O=>{const $=O&&O[ze];return"function"==typeof $?$.bind(O):$&&$.then?$.then(W=>nt.run(()=>W)):nt.run(()=>$)});return new Proxy(()=>{},{get:(O,$)=>et[$],apply:(O,$,W)=>et.then(re=>{var le;const he=re&&re(...W);return!(null===(le=Ge?.spy)||void 0===le)&&le.apply&&Ge.spy.apply(ze,W,he),he})})})}),pe=(me,Ke)=>{Ke.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(Ge=>{Object.defineProperty(me.prototype,Ge,Object.getOwnPropertyDescriptor(nt.prototype||nt,Ge))})})};class _e{constructor(Ke){return Ke}}const ve=new c.OlP("angularfire2.app.options"),Ce=new c.OlP("angularfire2.app.name");function K(me,Ke,nt){const Se="object"==typeof nt&&nt||{};Se.name=Se.name||"string"==typeof nt&&nt||"[DEFAULT]";const rt=oe.Z.apps.filter(et=>et&&et.name===Se.name)[0]||Ke.runOutsideAngular(()=>oe.Z.initializeApp(me,Se));try{JSON.stringify(me)!==JSON.stringify(rt.options)&&ee("error",`${rt.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new _e(rt)}const ee=(me,...Ke)=>{(0,c.X6Q)()&&typeof console<"u"&&console[me](...Ke)},Z={provide:_e,useFactory:K,deps:[ve,c.R0b,[new c.FiY,Ce]]};let qe=(()=>{class me{constructor(nt){oe.Z.registerVersion("angularfire",U.q4.full,"core"),oe.Z.registerVersion("angularfire",U.q4.full,"app-compat"),oe.Z.registerVersion("angular",c.q4F.full,nt.toString())}static initializeApp(nt,Ge){return{ngModule:me,providers:[{provide:ve,useValue:nt},{provide:Ce,useValue:Ge}]}}}return me.\u0275fac=function(nt){return new(nt||me)(c.LFG(c.Lbi))},me.\u0275mod=c.oAB({type:me}),me.\u0275inj=c.cJS({providers:[Z]}),me})();function Me(me,Ke,nt,Ge,Se){const[,ze,rt]=globalThis.\u0275AngularfireInstanceCache.find(et=>et[0]===me)||[];if(ze)return function Ue(me,Ke){try{return me.toString()===Ke.toString()}catch{return me===Ke}}(Se,rt)||(Be("error",`${Ke} was already initialized on the ${nt} Firebase App with different settings.${Tt?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:Se,was:rt})),ze;{const et=Ge();return globalThis.\u0275AngularfireInstanceCache.push([me,et,Se]),et}}const Tt=!!it.hot,Be=(me,...Ke)=>{(0,c.X6Q)()&&typeof console<"u"&&console[me](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(it,Ie,V)=>{"use strict";V.d(Ie,{q4:()=>ps,iC:()=>Ia,fc:()=>df,HU:()=>Jl,vb:()=>Zi,JM:()=>gs});var c=V(4650),oe=V(259),U=V(5861),ye=V(9681),te=V(2090),pe=V(4859),_e=V(1877),ve=V(8766);const Ce="@firebase/installations",K="0.6.0",Z=`w:${K}`,qe="FIS_v2",Ke=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(k){return k instanceof te.ZR&&k.code.includes("request-failed")}function Ge({projectId:k}){return`https://firebaseinstallations.googleapis.com/v1/projects/${k}/installations`}function Se(k){return{token:k.token,requestStatus:2,expiresIn:re(k.expiresIn),creationTime:Date.now()}}function ze(k,R){return rt.apply(this,arguments)}function rt(){return(rt=(0,U.Z)(function*(k,R){const ce=(yield R.json()).error;return Ke.create("request-failed",{requestName:k,serverCode:ce.code,serverMessage:ce.message,serverStatus:ce.status})})).apply(this,arguments)}function et({apiKey:k}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k})}function O(k,{refreshToken:R}){const G=et(k);return G.append("Authorization",function le(k){return`${qe} ${k}`}(R)),G}function $(k){return W.apply(this,arguments)}function W(){return(W=(0,U.Z)(function*(k){const R=yield k();return R.status>=500&&R.status<600?k():R})).apply(this,arguments)}function re(k){return Number(k.replace("s","000"))}function he(k,R){return se.apply(this,arguments)}function se(){return(se=(0,U.Z)(function*({appConfig:k,heartbeatServiceProvider:R},{fid:G}){const ce=Ge(k),Ne=et(k),Ze=R.getImmediate({optional:!0});if(Ze){const Ut=yield Ze.getHeartbeatsHeader();Ut&&Ne.append("x-firebase-client",Ut)}const Bt={method:"POST",headers:Ne,body:JSON.stringify({fid:G,authVersion:qe,appId:k.appId,sdkVersion:Z})},De=yield $(()=>fetch(ce,Bt));if(De.ok){const Ut=yield De.json();return{fid:Ut.fid||G,registrationStatus:2,refreshToken:Ut.refreshToken,authToken:Se(Ut.authToken)}}throw yield ze("Create Installation",De)})).apply(this,arguments)}function ae(k){return new Promise(R=>{setTimeout(R,k)})}const He=/^[cdef][\w-]{21}$/;function Oe(){try{const k=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(k),k[0]=112+k[0]%16;const G=function gt(k){return function we(k){return btoa(String.fromCharCode(...k)).replace(/\+/g,"-").replace(/\//g,"_")}(k).substr(0,22)}(k);return He.test(G)?G:""}catch{return""}}function ut(k){return`${k.appName}!${k.appId}`}const bt=new Map;function at(k,R){const G=ut(k);qt(G,R),function Fn(k,R){const G=function er(){return!Xn&&"BroadcastChannel"in self&&(Xn=new BroadcastChannel("[Firebase] FID Change"),Xn.onmessage=k=>{qt(k.data.key,k.data.fid)}),Xn}();G&&G.postMessage({key:k,fid:R}),function Tr(){0===bt.size&&Xn&&(Xn.close(),Xn=null)}()}(G,R)}function qt(k,R){const G=bt.get(k);if(G)for(const ce of G)ce(R)}let Xn=null;const Wn="firebase-installations-store";let Er=null;function Jn(){return Er||(Er=(0,ve.X3)("firebase-installations-database",1,{upgrade:(k,R)=>{0===R&&k.createObjectStore(Wn)}})),Er}function Pt(k,R){return Br.apply(this,arguments)}function Br(){return(Br=(0,U.Z)(function*(k,R){const G=ut(k),Ne=(yield Jn()).transaction(Wn,"readwrite"),Ze=Ne.objectStore(Wn),mt=yield Ze.get(G);return yield Ze.put(R,G),yield Ne.done,(!mt||mt.fid!==R.fid)&&at(k,R.fid),R})).apply(this,arguments)}function Ai(k){return pr.apply(this,arguments)}function pr(){return(pr=(0,U.Z)(function*(k){const R=ut(k),ce=(yield Jn()).transaction(Wn,"readwrite");yield ce.objectStore(Wn).delete(R),yield ce.done})).apply(this,arguments)}function xn(k,R){return sr.apply(this,arguments)}function sr(){return(sr=(0,U.Z)(function*(k,R){const G=ut(k),Ne=(yield Jn()).transaction(Wn,"readwrite"),Ze=Ne.objectStore(Wn),mt=yield Ze.get(G),Bt=R(mt);return void 0===Bt?yield Ze.delete(G):yield Ze.put(Bt,G),yield Ne.done,Bt&&(!mt||mt.fid!==Bt.fid)&&at(k,Bt.fid),Bt})).apply(this,arguments)}function jn(k){return zn.apply(this,arguments)}function zn(){return(zn=(0,U.Z)(function*(k){let R;const G=yield xn(k.appConfig,ce=>{const Ne=Kn(ce),Ze=Qt(k,Ne);return R=Ze.registrationPromise,Ze.installationEntry});return""===G.fid?{installationEntry:yield R}:{installationEntry:G,registrationPromise:R}})).apply(this,arguments)}function Kn(k){return un(k||{fid:Oe(),registrationStatus:0})}function Qt(k,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(Ke.create("app-offline"))};const G={fid:R.fid,registrationStatus:1,registrationTime:Date.now()},ce=function Gt(k,R){return Hn.apply(this,arguments)}(k,G);return{installationEntry:G,registrationPromise:ce}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:ni(k)}:{installationEntry:R}}function Hn(){return(Hn=(0,U.Z)(function*(k,R){try{const G=yield he(k,R);return Pt(k.appConfig,G)}catch(G){throw nt(G)&&409===G.customData.serverCode?yield Ai(k.appConfig):yield Pt(k.appConfig,{fid:R.fid,registrationStatus:0}),G}})).apply(this,arguments)}function ni(k){return wr.apply(this,arguments)}function wr(){return(wr=(0,U.Z)(function*(k){let R=yield ri(k.appConfig);for(;1===R.registrationStatus;)yield ae(100),R=yield ri(k.appConfig);if(0===R.registrationStatus){const{installationEntry:G,registrationPromise:ce}=yield jn(k);return ce||G}return R})).apply(this,arguments)}function ri(k){return xn(k,R=>{if(!R)throw Ke.create("installation-not-found");return un(R)})}function un(k){return function ki(k){return 1===k.registrationStatus&&k.registrationTime+1e4<Date.now()}(k)?{fid:k.fid,registrationStatus:0}:k}function An(k,R){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,U.Z)(function*({appConfig:k,heartbeatServiceProvider:R},G){const ce=Mn(k,G),Ne=O(k,G),Ze=R.getImmediate({optional:!0});if(Ze){const Ut=yield Ze.getHeartbeatsHeader();Ut&&Ne.append("x-firebase-client",Ut)}const Bt={method:"POST",headers:Ne,body:JSON.stringify({installation:{sdkVersion:Z,appId:k.appId}})},De=yield $(()=>fetch(ce,Bt));if(De.ok)return Se(yield De.json());throw yield ze("Generate Auth Token",De)})).apply(this,arguments)}function Mn(k,{fid:R}){return`${Ge(k)}/${R}/authTokens:generate`}function Cr(k){return ii.apply(this,arguments)}function ii(){return(ii=(0,U.Z)(function*(k,R=!1){let G;const ce=yield xn(k.appConfig,Ze=>{if(!gn(Ze))throw Ke.create("not-registered");const mt=Ze.authToken;if(!R&&Te(mt))return Ze;if(1===mt.requestStatus)return G=jt(k,R),Ze;{if(!navigator.onLine)throw Ke.create("app-offline");const Bt=ke(Ze);return G=tn(k,Bt),Bt}});return G?yield G:ce.authToken})).apply(this,arguments)}function jt(k,R){return dt.apply(this,arguments)}function dt(){return(dt=(0,U.Z)(function*(k,R){let G=yield Vt(k.appConfig);for(;1===G.authToken.requestStatus;)yield ae(100),G=yield Vt(k.appConfig);const ce=G.authToken;return 0===ce.requestStatus?Cr(k,R):ce})).apply(this,arguments)}function Vt(k){return xn(k,R=>{if(!gn(R))throw Ke.create("not-registered");return function ot(k){return 1===k.requestStatus&&k.requestTime+1e4<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function tn(k,R){return nn.apply(this,arguments)}function nn(){return(nn=(0,U.Z)(function*(k,R){try{const G=yield An(k,R),ce=Object.assign(Object.assign({},R),{authToken:G});return yield Pt(k.appConfig,ce),G}catch(G){if(!nt(G)||401!==G.customData.serverCode&&404!==G.customData.serverCode){const ce=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield Pt(k.appConfig,ce)}else yield Ai(k.appConfig);throw G}})).apply(this,arguments)}function gn(k){return void 0!==k&&2===k.registrationStatus}function Te(k){return 2===k.requestStatus&&!function fe(k){const R=Date.now();return R<k.creationTime||k.creationTime+k.expiresIn<R+36e5}(k)}function ke(k){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},k),{authToken:R})}function Dt(){return(Dt=(0,U.Z)(function*(k){const R=k,{installationEntry:G,registrationPromise:ce}=yield jn(R);return ce?ce.catch(console.error):Cr(R).catch(console.error),G.fid})).apply(this,arguments)}function kn(){return(kn=(0,U.Z)(function*(k,R=!1){const G=k;return yield tr(G),(yield Cr(G,R)).token})).apply(this,arguments)}function tr(k){return H.apply(this,arguments)}function H(){return(H=(0,U.Z)(function*(k){const{registrationPromise:R}=yield jn(k);R&&(yield R)})).apply(this,arguments)}function $r(k){return Ke.create("missing-app-config-values",{valueName:k})}const Pi="installations",Gn=k=>{const R=k.getProvider("app").getImmediate(),G=function Pn(k){if(!k||!k.options)throw $r("App Configuration");if(!k.name)throw $r("App Name");const R=["projectId","apiKey","appId"];for(const G of R)if(!k.options[G])throw $r(G);return{appName:k.name,projectId:k.options.projectId,apiKey:k.options.apiKey,appId:k.options.appId}}(R);return{app:R,appConfig:G,heartbeatServiceProvider:(0,ye._getProvider)(R,"heartbeat"),_delete:()=>Promise.resolve()}},qi=k=>{const R=k.getProvider("app").getImmediate(),G=(0,ye._getProvider)(R,Pi).getImmediate();return{getId:()=>function Pe(k){return Dt.apply(this,arguments)}(G),getToken:Ne=>function zt(k){return kn.apply(this,arguments)}(G,Ne)}};(function zi(){(0,ye._registerComponent)(new pe.wA(Pi,Gn,"PUBLIC")),(0,ye._registerComponent)(new pe.wA("installations-internal",qi,"PRIVATE"))})(),(0,ye.registerVersion)(Ce,K),(0,ye.registerVersion)(Ce,K,"esm2017");const si="@firebase/remote-config",Sr=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class sg{constructor(R,G,ce,Ne){this.client=R,this.storage=G,this.storageCache=ce,this.logger=Ne}isCachedDataFresh(R,G){if(!G)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ce=Date.now()-G,Ne=ce<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ce}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${Ne}.`),Ne}fetch(R){var G=this;return(0,U.Z)(function*(){const[ce,Ne]=yield Promise.all([G.storage.getLastSuccessfulFetchTimestampMillis(),G.storage.getLastSuccessfulFetchResponse()]);if(Ne&&G.isCachedDataFresh(R.cacheMaxAgeMillis,ce))return Ne;R.eTag=Ne&&Ne.eTag;const Ze=yield G.client.fetch(R),mt=[G.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ze.status&&mt.push(G.storage.setLastSuccessfulFetchResponse(Ze)),yield Promise.all(mt),Ze})()}}function rd(k=navigator){return k.languages&&k.languages[0]||k.language}class id{constructor(R,G,ce,Ne,Ze,mt){this.firebaseInstallations=R,this.sdkVersion=G,this.namespace=ce,this.projectId=Ne,this.apiKey=Ze,this.appId=mt}fetch(R){var G=this;return(0,U.Z)(function*(){const[ce,Ne]=yield Promise.all([G.firebaseInstallations.getId(),G.firebaseInstallations.getToken()]),mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${G.projectId}/namespaces/${G.namespace}:fetch?key=${G.apiKey}`,Bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},De={sdk_version:G.sdkVersion,app_instance_id:ce,app_instance_id_token:Ne,app_id:G.appId,language_code:rd()},Ut={method:"POST",headers:Bt,body:JSON.stringify(De)},mn=fetch(mt,Ut),Ct=new Promise((Li,Fi)=>{R.signal.addEventListener(()=>{const cl=new Error("The operation was aborted.");cl.name="AbortError",Fi(cl)})});let dr;try{yield Promise.race([mn,Ct]),dr=yield mn}catch(Li){let Fi="fetch-client-network";throw"AbortError"===Li?.name&&(Fi="fetch-timeout"),Sr.create(Fi,{originalErrorMessage:Li?.message})}let Ir=dr.status;const Da=dr.headers.get("ETag")||void 0;let ac,Dr;if(200===dr.status){let Li;try{Li=yield dr.json()}catch(Fi){throw Sr.create("fetch-client-parse",{originalErrorMessage:Fi?.message})}ac=Li.entries,Dr=Li.state}if("INSTANCE_STATE_UNSPECIFIED"===Dr?Ir=500:"NO_CHANGE"===Dr?Ir=304:("NO_TEMPLATE"===Dr||"EMPTY_CONFIG"===Dr)&&(ac={}),304!==Ir&&200!==Ir)throw Sr.create("fetch-status",{httpStatus:Ir});return{status:Ir,eTag:Da,config:ac}})()}}class zy{constructor(R,G){this.client=R,this.storage=G}fetch(R){var G=this;return(0,U.Z)(function*(){const ce=(yield G.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return G.attemptFetch(R,ce)})()}attemptFetch(R,{throttleEndTimeMillis:G,backoffCount:ce}){var Ne=this;return(0,U.Z)(function*(){yield function oi(k,R){return new Promise((G,ce)=>{const Ne=Math.max(R-Date.now(),0),Ze=setTimeout(G,Ne);k.addEventListener(()=>{clearTimeout(Ze),ce(Sr.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,G);try{const Ze=yield Ne.client.fetch(R);return yield Ne.storage.deleteThrottleMetadata(),Ze}catch(Ze){if(!function Hh(k){if(!(k instanceof te.ZR&&k.customData))return!1;const R=Number(k.customData.httpStatus);return 429===R||500===R||503===R||504===R}(Ze))throw Ze;const mt={throttleEndTimeMillis:Date.now()+(0,te.$s)(ce),backoffCount:ce+1};return yield Ne.storage.setThrottleMetadata(mt),Ne.attemptFetch(R,mt)}})()}}class Du{constructor(R,G,ce,Ne,Ze){this.app=R,this._client=G,this._storageCache=ce,this._storage=Ne,this._logger=Ze,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function sd(k,R){const G=k.target.error||void 0;return Sr.create(R,{originalErrorMessage:G&&G?.message})}const Ho="app_namespace_store";class od{constructor(R,G,ce,Ne=function Zy(){return new Promise((k,R)=>{try{const G=indexedDB.open("firebase_remote_config",1);G.onerror=ce=>{R(sd(ce,"storage-open"))},G.onsuccess=ce=>{k(ce.target.result)},G.onupgradeneeded=ce=>{0===ce.oldVersion&&ce.target.result.createObjectStore(Ho,{keyPath:"compositeKey"})}}catch(G){R(Sr.create("storage-open",{originalErrorMessage:G?.message}))}})}()){this.appId=R,this.appName=G,this.namespace=ce,this.openDbPromise=Ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var G=this;return(0,U.Z)(function*(){const ce=yield G.openDbPromise;return new Promise((Ne,Ze)=>{const Bt=ce.transaction([Ho],"readonly").objectStore(Ho),De=G.createCompositeKey(R);try{const Ut=Bt.get(De);Ut.onerror=mn=>{Ze(sd(mn,"storage-get"))},Ut.onsuccess=mn=>{const Ct=mn.target.result;Ne(Ct?Ct.value:void 0)}}catch(Ut){Ze(Sr.create("storage-get",{originalErrorMessage:Ut?.message}))}})})()}set(R,G){var ce=this;return(0,U.Z)(function*(){const Ne=yield ce.openDbPromise;return new Promise((Ze,mt)=>{const De=Ne.transaction([Ho],"readwrite").objectStore(Ho),Ut=ce.createCompositeKey(R);try{const mn=De.put({compositeKey:Ut,value:G});mn.onerror=Ct=>{mt(sd(Ct,"storage-set"))},mn.onsuccess=()=>{Ze()}}catch(mn){mt(Sr.create("storage-set",{originalErrorMessage:mn?.message}))}})})()}delete(R){var G=this;return(0,U.Z)(function*(){const ce=yield G.openDbPromise;return new Promise((Ne,Ze)=>{const Bt=ce.transaction([Ho],"readwrite").objectStore(Ho),De=G.createCompositeKey(R);try{const Ut=Bt.delete(De);Ut.onerror=mn=>{Ze(sd(mn,"storage-delete"))},Ut.onsuccess=()=>{Ne()}}catch(Ut){Ze(Sr.create("storage-delete",{originalErrorMessage:Ut?.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class qh{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,U.Z)(function*(){const G=R.storage.getLastFetchStatus(),ce=R.storage.getLastSuccessfulFetchTimestampMillis(),Ne=R.storage.getActiveConfig(),Ze=yield G;Ze&&(R.lastFetchStatus=Ze);const mt=yield ce;mt&&(R.lastSuccessfulFetchTimestampMillis=mt);const Bt=yield Ne;Bt&&(R.activeConfig=Bt)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function Au(){return og.apply(this,arguments)}function og(){return(og=(0,U.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}!function Go(){(0,ye._registerComponent)(new pe.wA("remote-config",function k(R,{instanceIdentifier:G}){const ce=R.getProvider("app").getImmediate(),Ne=R.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Sr.create("registration-window");if(!(0,te.hl)())throw Sr.create("indexed-db-unavailable");const{projectId:Ze,apiKey:mt,appId:Bt}=ce.options;if(!Ze)throw Sr.create("registration-project-id");if(!mt)throw Sr.create("registration-api-key");if(!Bt)throw Sr.create("registration-app-id");const De=new od(Bt,ce.name,G=G||"firebase"),Ut=new qh(De),mn=new _e.Yd(si);mn.logLevel=_e.in.ERROR;const Ct=new id(Ne,ye.SDK_VERSION,G,Ze,mt,Bt),dr=new zy(Ct,De),Ir=new sg(dr,De,Ut,mn),Da=new Du(ce,Ir,Ut,De,mn);return function nr(k){const R=(0,te.m9)(k);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(Da),Da},"PUBLIC").setMultipleInstances(!0)),(0,ye.registerVersion)(si,"0.4.0"),(0,ye.registerVersion)(si,"0.4.0","esm2017")}();const zs="/firebase-messaging-sw.js",fo="/firebase-cloud-messaging-push-scope",Ws="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Nl="google.c.a.c_id",ku="google.c.a.c_l",ad="google.c.a.ts",ag="google.c.a.e";var po=(()=>{return(k=po||(po={})).PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",po;var k})();function Ss(k){const R=new Uint8Array(k);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ds(k){const G=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ce=atob(G),Ne=new Uint8Array(ce.length);for(let Ze=0;Ze<ce.length;++Ze)Ne[Ze]=ce.charCodeAt(Ze);return Ne}const Ka="fcm_token_details_db",Ri="fcm_token_object_Store";function lg(k){return ug.apply(this,arguments)}function ug(){return ug=(0,U.Z)(function*(k){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ze=>Ze.name).includes(Ka))return null;let R=null;return(yield(0,ve.X3)(Ka,5,{upgrade:(ce=(0,U.Z)(function*(Ne,Ze,mt,Bt){var De;if(Ze<2||!Ne.objectStoreNames.contains(Ri))return;const Ut=Bt.objectStore(Ri),mn=yield Ut.index("fcmSenderId").get(k);if(yield Ut.clear(),mn)if(2===Ze){const Ct=mn;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;R={token:Ct.fcmToken,createTime:null!==(De=Ct.createTime)&&void 0!==De?De:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:Ss(Ct.vapidKey)}}}else if(3===Ze){const Ct=mn;R={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Ss(Ct.auth),p256dh:Ss(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Ss(Ct.vapidKey)}}}else if(4===Ze){const Ct=mn;R={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Ss(Ct.auth),p256dh:Ss(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Ss(Ct.vapidKey)}}}}),function(Ze,mt,Bt,De){return ce.apply(this,arguments)})})).close(),yield(0,ve.Lj)(Ka),yield(0,ve.Lj)("fcm_vapid_details_db"),yield(0,ve.Lj)("undefined"),Mr(R)?R:null;var ce}),ug.apply(this,arguments)}function Mr(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:R}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}const xs="firebase-messaging-store";let Ki=null;function Pu(){return Ki||(Ki=(0,ve.X3)("firebase-messaging-database",1,{upgrade:(k,R)=>{0===R&&k.createObjectStore(xs)}})),Ki}function Za(k){return go.apply(this,arguments)}function go(){return(go=(0,U.Z)(function*(k){const R=Ls(k),ce=yield(yield Pu()).transaction(xs).objectStore(xs).get(R);if(ce)return ce;{const Ne=yield lg(k.appConfig.senderId);if(Ne)return yield Nn(k,Ne),Ne}})).apply(this,arguments)}function Nn(k,R){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,U.Z)(function*(k,R){const G=Ls(k),Ne=(yield Pu()).transaction(xs,"readwrite");return yield Ne.objectStore(xs).put(R,G),yield Ne.done,R})).apply(this,arguments)}function pa(k){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,U.Z)(function*(k){const R=Ls(k),ce=(yield Pu()).transaction(xs,"readwrite");yield ce.objectStore(xs).delete(R),yield ce.done})).apply(this,arguments)}function Ls({appConfig:k}){return k.appId}const xr=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function dn(k,R){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,U.Z)(function*(k,R){const G=yield ud(k),ce=ft(R),Ne={method:"POST",headers:G,body:JSON.stringify(ce)};let Ze;try{Ze=yield(yield fetch(mo(k.appConfig),Ne)).json()}catch(mt){throw xr.create("token-subscribe-failed",{errorInfo:mt?.toString()})}if(Ze.error)throw xr.create("token-subscribe-failed",{errorInfo:Ze.error.message});if(!Ze.token)throw xr.create("token-subscribe-no-token");return Ze.token})).apply(this,arguments)}function dg(k,R){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,U.Z)(function*(k,R){const G=yield ud(k),ce=ft(R.subscriptionOptions),Ne={method:"PATCH",headers:G,body:JSON.stringify(ce)};let Ze;try{Ze=yield(yield fetch(`${mo(k.appConfig)}/${R.token}`,Ne)).json()}catch(mt){throw xr.create("token-update-failed",{errorInfo:mt?.toString()})}if(Ze.error)throw xr.create("token-update-failed",{errorInfo:Ze.error.message});if(!Ze.token)throw xr.create("token-update-no-token");return Ze.token})).apply(this,arguments)}function ju(k,R){return ld.apply(this,arguments)}function ld(){return(ld=(0,U.Z)(function*(k,R){const ce={method:"DELETE",headers:yield ud(k)};try{const Ze=yield(yield fetch(`${mo(k.appConfig)}/${R}`,ce)).json();if(Ze.error)throw xr.create("token-unsubscribe-failed",{errorInfo:Ze.error.message})}catch(Ne){throw xr.create("token-unsubscribe-failed",{errorInfo:Ne?.toString()})}})).apply(this,arguments)}function mo({projectId:k}){return`https://fcmregistrations.googleapis.com/v1/projects/${k}/registrations`}function ud(k){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,U.Z)(function*({appConfig:k,installations:R}){const G=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k.apiKey,"x-goog-firebase-installations-auth":`FIS ${G}`})})).apply(this,arguments)}function ft({p256dh:k,auth:R,endpoint:G,vapidKey:ce}){const Ne={web:{endpoint:G,auth:R,p256dh:k}};return ce!==Ws&&(Ne.web.applicationPubKey=ce),Ne}const In=6048e5;function Uu(k){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,U.Z)(function*(k){const R=yield cd(k.swRegistration,k.vapidKey),G={vapidKey:k.vapidKey,swScope:k.swRegistration.scope,endpoint:R.endpoint,auth:Ss(R.getKey("auth")),p256dh:Ss(R.getKey("p256dh"))},ce=yield Za(k.firebaseDependencies);if(ce){if(Zh(ce.subscriptionOptions,G))return Date.now()>=ce.createTime+In?Ya(k,{token:ce.token,createTime:Date.now(),subscriptionOptions:G}):ce.token;try{yield ju(k.firebaseDependencies,ce.token)}catch(Ne){console.warn(Ne)}return Fl(k.firebaseDependencies,G)}return Fl(k.firebaseDependencies,G)})).apply(this,arguments)}function Pr(k){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,U.Z)(function*(k){const R=yield Za(k.firebaseDependencies);R&&(yield ju(k.firebaseDependencies,R.token),yield pa(k.firebaseDependencies));const G=yield k.swRegistration.pushManager.getSubscription();return!G||G.unsubscribe()})).apply(this,arguments)}function Ya(k,R){return Is.apply(this,arguments)}function Is(){return(Is=(0,U.Z)(function*(k,R){try{const G=yield dg(k.firebaseDependencies,R),ce=Object.assign(Object.assign({},R),{token:G,createTime:Date.now()});return yield Nn(k.firebaseDependencies,ce),G}catch(G){throw yield Pr(k),G}})).apply(this,arguments)}function Fl(k,R){return jl.apply(this,arguments)}function jl(){return(jl=(0,U.Z)(function*(k,R){const ce={token:yield dn(k,R),createTime:Date.now(),subscriptionOptions:R};return yield Nn(k,ce),ce.token})).apply(this,arguments)}function cd(k,R){return dd.apply(this,arguments)}function dd(){return(dd=(0,U.Z)(function*(k,R){return(yield k.pushManager.getSubscription())||k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ds(R)})})).apply(this,arguments)}function Zh(k,R){return R.vapidKey===k.vapidKey&&R.endpoint===k.endpoint&&R.auth===k.auth&&R.p256dh===k.p256dh}function Ul(k){const R={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function Rr(k,R){if(!R.notification)return;k.notification={};const G=R.notification.title;G&&(k.notification.title=G);const ce=R.notification.body;ce&&(k.notification.body=ce);const Ne=R.notification.image;Ne&&(k.notification.image=Ne);const Ze=R.notification.icon;Ze&&(k.notification.icon=Ze)}(R,k),function Ks(k,R){!R.data||(k.data=R.data)}(R,k),function hd(k,R){var G,ce,Ne,Ze,mt;if(!(R.fcmOptions||null!==(G=R.notification)&&void 0!==G&&G.click_action))return;k.fcmOptions={};const Bt=null!==(Ne=null===(ce=R.fcmOptions)||void 0===ce?void 0:ce.link)&&void 0!==Ne?Ne:null===(Ze=R.notification)||void 0===Ze?void 0:Ze.click_action;Bt&&(k.fcmOptions.link=Bt);const De=null===(mt=R.fcmOptions)||void 0===mt?void 0:mt.analytics_label;De&&(k.fcmOptions.analyticsLabel=De)}(R,k),R}function ga(k){return"object"==typeof k&&!!k&&Nl in k}function yo(k,R){const G=[];for(let ce=0;ce<k.length;ce++)G.push(k.charAt(ce)),ce<R.length&&G.push(R.charAt(ce));return G.join("")}function Vl(k){return xr.create("missing-app-config-values",{valueName:k})}yo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qy{constructor(R,G,ce){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ne=function Yy(k){if(!k||!k.options)throw Vl("App Configuration Object");if(!k.name)throw Vl("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:G}=k;for(const ce of R)if(!G[ce])throw Vl(ce);return{appName:k.name,projectId:G.projectId,apiKey:G.apiKey,appId:G.appId,senderId:G.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:Ne,installations:G,analyticsProvider:ce}}_delete(){return Promise.resolve()}}function fd(k){return $u.apply(this,arguments)}function $u(){return($u=(0,U.Z)(function*(k){try{k.swRegistration=yield navigator.serviceWorker.register(zs,{scope:fo}),k.swRegistration.update().catch(()=>{})}catch(R){throw xr.create("failed-service-worker-registration",{browserErrorMessage:R?.message})}})).apply(this,arguments)}function Bl(k,R){return pd.apply(this,arguments)}function pd(){return(pd=(0,U.Z)(function*(k,R){if(!R&&!k.swRegistration&&(yield fd(k)),R||!k.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw xr.create("invalid-sw-registration");k.swRegistration=R}})).apply(this,arguments)}function $l(k,R){return gd.apply(this,arguments)}function gd(){return(gd=(0,U.Z)(function*(k,R){R?k.vapidKey=R:k.vapidKey||(k.vapidKey=Ws)})).apply(this,arguments)}function Gu(){return(Gu=(0,U.Z)(function*(k,R){if(!navigator)throw xr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw xr.create("permission-blocked");return yield $l(k,R?.vapidKey),yield Bl(k,R?.serviceWorkerRegistration),Uu(k)})).apply(this,arguments)}function md(k,R,G){return yd.apply(this,arguments)}function yd(){return(yd=(0,U.Z)(function*(k,R,G){const ce=vd(R);(yield k.firebaseDependencies.analyticsProvider.get()).logEvent(ce,{message_id:G[Nl],message_name:G[ku],message_time:G[ad],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function vd(k){switch(k){case po.NOTIFICATION_CLICKED:return"notification_open";case po.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ma(){return(ma=(0,U.Z)(function*(k,R){const G=R.data;if(!G.isFirebaseMessaging)return;k.onMessageHandler&&G.messageType===po.PUSH_RECEIVED&&("function"==typeof k.onMessageHandler?k.onMessageHandler(Ul(G)):k.onMessageHandler.next(Ul(G)));const ce=G.data;ga(ce)&&"1"===ce[ag]&&(yield md(k,G.messageType,ce))})).apply(this,arguments)}const ya="@firebase/messaging",ai=k=>{const R=new Qy(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",G=>function Yh(k,R){return ma.apply(this,arguments)}(R,G)),R},hs=k=>{const R=k.getProvider("messaging").getImmediate();return{getToken:ce=>function Hu(k,R){return Gu.apply(this,arguments)}(R,ce)}};function _d(){return bd.apply(this,arguments)}function bd(){return(bd=(0,U.Z)(function*(){try{yield(0,te.eu)()}catch{return!1}return typeof window<"u"&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function lr(){(0,ye._registerComponent)(new pe.wA("messaging",ai,"PUBLIC")),(0,ye._registerComponent)(new pe.wA("messaging-internal",hs,"PRIVATE")),(0,ye.registerVersion)(ya,"0.12.0"),(0,ye.registerVersion)(ya,"0.12.0","esm2017")}();const Xa="analytics",ef="firebase_id",_a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ku="https://www.googletagmanager.com/gtag/js",Or=new _e.Yd("@firebase/analytics");function Zu(k){return Promise.all(k.map(R=>R.catch(G=>G)))}function Yu(k,R){const G=document.createElement("script");G.src=`${Ku}?l=${k}&id=${R}`,G.async=!0,document.head.appendChild(G)}function hg(k,R,G,ce,Ne,Ze){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,U.Z)(function*(k,R,G,ce,Ne,Ze){const mt=ce[Ne];try{if(mt)yield R[mt];else{const De=(yield Zu(G)).find(Ut=>Ut.measurementId===Ne);De&&(yield R[De.appId])}}catch(Bt){Or.error(Bt)}k("config",Ne,Ze)})).apply(this,arguments)}function el(k,R,G,ce,Ne){return ba.apply(this,arguments)}function ba(){return(ba=(0,U.Z)(function*(k,R,G,ce,Ne){try{let Ze=[];if(Ne&&Ne.send_to){let mt=Ne.send_to;Array.isArray(mt)||(mt=[mt]);const Bt=yield Zu(G);for(const De of mt){const Ut=Bt.find(Ct=>Ct.measurementId===De),mn=Ut&&R[Ut.appId];if(!mn){Ze=[];break}Ze.push(mn)}}0===Ze.length&&(Ze=Object.values(R)),yield Promise.all(Ze),k("event",ce,Ne||{})}catch(Ze){Or.error(Ze)}})).apply(this,arguments)}function nf(k){const R=window.document.getElementsByTagName("script");for(const G of Object.values(R))if(G.src&&G.src.includes(Ku)&&G.src.includes(k))return G;return null}const gi=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),zl=new class Zs{constructor(R={},G=1e3){this.throttleMetadata=R,this.intervalMillis=G}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,G){this.throttleMetadata[R]=G}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function sf(k){return new Headers({Accept:"application/json","x-goog-api-key":k})}function Wl(k){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,U.Z)(function*(k){var R;const{appId:G,apiKey:ce}=k,Ne={method:"GET",headers:sf(ce)},Ze=_a.replace("{app-id}",G),mt=yield fetch(Ze,Ne);if(200!==mt.status&&304!==mt.status){let Bt="";try{const De=yield mt.json();null!==(R=De.error)&&void 0!==R&&R.message&&(Bt=De.error.message)}catch{}throw gi.create("config-fetch-failed",{httpStatus:mt.status,responseMessage:Bt})}return mt.json()})).apply(this,arguments)}function Hr(k){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,U.Z)(function*(k,R=zl,G){const{appId:ce,apiKey:Ne,measurementId:Ze}=k.options;if(!ce)throw gi.create("no-app-id");if(!Ne){if(Ze)return{measurementId:Ze,appId:ce};throw gi.create("no-api-key")}const mt=R.getThrottleMetadata(ce)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Bt=new ec;return setTimeout((0,U.Z)(function*(){Bt.abort()}),void 0!==G?G:6e4),Xu({appId:ce,apiKey:Ne,measurementId:Ze},mt,Bt,R)})).apply(this,arguments)}function Xu(k,R,G){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,U.Z)(function*(k,{throttleEndTimeMillis:R,backoffCount:G},ce,Ne=zl){var Ze;const{appId:mt,measurementId:Bt}=k;try{yield Kl(ce,R)}catch(De){if(Bt)return Or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Bt} provided in the "measurementId" field in the local Firebase config. [${De?.message}]`),{appId:mt,measurementId:Bt};throw De}try{const De=yield Wl(k);return Ne.deleteThrottleMetadata(mt),De}catch(De){const Ut=De;if(!Ju(Ut)){if(Ne.deleteThrottleMetadata(mt),Bt)return Or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Bt} provided in the "measurementId" field in the local Firebase config. [${Ut?.message}]`),{appId:mt,measurementId:Bt};throw De}const mn=503===Number(null===(Ze=Ut?.customData)||void 0===Ze?void 0:Ze.httpStatus)?(0,te.$s)(G,Ne.intervalMillis,30):(0,te.$s)(G,Ne.intervalMillis),Ct={throttleEndTimeMillis:Date.now()+mn,backoffCount:G+1};return Ne.setThrottleMetadata(mt,Ct),Or.debug(`Calling attemptFetch again in ${mn} millis`),Xu(k,Ct,ce,Ne)}})).apply(this,arguments)}function Kl(k,R){return new Promise((G,ce)=>{const Ne=Math.max(R-Date.now(),0),Ze=setTimeout(G,Ne);k.addEventListener(()=>{clearTimeout(Ze),ce(gi.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}function Ju(k){if(!(k instanceof te.ZR&&k.customData))return!1;const R=Number(k.customData.httpStatus);return 429===R||500===R||503===R||504===R}class ec{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}let Wo,Yl;function Ko(){return(Ko=(0,U.Z)(function*(k,R,G,ce,Ne){if(Ne&&Ne.global)k("event",G,ce);else{const Ze=yield R;k("event",G,Object.assign(Object.assign({},ce),{send_to:Ze}))}})).apply(this,arguments)}function wa(k){Yl=k}function Sd(k){Wo=k}function _o(){return nc.apply(this,arguments)}function nc(){return(nc=(0,U.Z)(function*(){if(!(0,te.hl)())return Or.warn(gi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(k){return Or.warn(gi.create("indexeddb-unavailable",{errorInfo:k?.toString()}).message),!1}return!0})).apply(this,arguments)}function rl(){return(rl=(0,U.Z)(function*(k,R,G,ce,Ne,Ze,mt){var Bt;const De=Hr(k);De.then(Ir=>{G[Ir.measurementId]=Ir.appId,k.options.measurementId&&Ir.measurementId!==k.options.measurementId&&Or.warn(`The measurement ID in the local Firebase config (${k.options.measurementId}) does not match the measurement ID fetched from the server (${Ir.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ir=>Or.error(Ir)),R.push(De);const Ut=_o().then(Ir=>{if(Ir)return ce.getId()}),[mn,Ct]=yield Promise.all([De,Ut]);nf(Ze)||Yu(Ze,mn.measurementId),Yl&&(Ne("consent","default",Yl),wa(void 0)),Ne("js",new Date);const dr=null!==(Bt=mt?.config)&&void 0!==Bt?Bt:{};return dr.origin="firebase",dr.update=!0,null!=Ct&&(dr[ef]=Ct),Ne("config",mn.measurementId,dr),Wo&&(Ne("set",Wo),Sd(void 0)),mn.measurementId})).apply(this,arguments)}class rc{constructor(R){this.app=R}_delete(){return delete fs[this.app.options.appId],Promise.resolve()}}let fs={},Zo=[];const il={};let ol,Ca,sl="dataLayer",Ql=!1;function X0(k,R,G){!function Xy(){const k=[];if((0,te.ru)()&&k.push("This is a browser extension environment."),(0,te.zI)()||k.push("Cookies are not available."),k.length>0){const R=k.map((ce,Ne)=>`(${Ne+1}) ${ce}`).join(" "),G=gi.create("invalid-analytics-context",{errorInfo:R});Or.warn(G.message)}}();const ce=k.options.appId;if(!ce)throw gi.create("no-app-id");if(!k.options.apiKey){if(!k.options.measurementId)throw gi.create("no-api-key");Or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${k.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fs[ce])throw gi.create("already-exists",{id:ce});if(!Ql){!function tf(k){let R=[];Array.isArray(window[k])?R=window[k]:window[k]=R}(sl);const{wrappedGtag:Ze,gtagCore:mt}=function Hl(k,R,G,ce,Ne){let Ze=function(...mt){window[ce].push(arguments)};return window[Ne]&&"function"==typeof window[Ne]&&(Ze=window[Ne]),window[Ne]=function Qu(k,R,G,ce){function Ze(){return(Ze=(0,U.Z)(function*(mt,Bt,De){try{"event"===mt?yield el(k,R,G,Bt,De):"config"===mt?yield hg(k,R,G,ce,Bt,De):"consent"===mt?k("consent","update",De):k("set",Bt)}catch(Ut){Or.error(Ut)}})).apply(this,arguments)}return function Ne(mt,Bt,De){return Ze.apply(this,arguments)}}(Ze,k,R,G),{gtagCore:Ze,wrappedGtag:window[Ne]}}(fs,Zo,il,sl,"gtag");Ca=Ze,ol=mt,Ql=!0}return fs[ce]=function nl(k,R,G,ce,Ne,Ze,mt){return rl.apply(this,arguments)}(k,Zo,il,R,ol,sl,G),new rc(k)}function eb(){return fg.apply(this,arguments)}function fg(){return(fg=(0,U.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}const al="@firebase/analytics";!function Ot(){(0,ye._registerComponent)(new pe.wA(Xa,(R,{options:G})=>X0(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),G),"PUBLIC")),(0,ye._registerComponent)(new pe.wA("analytics-internal",function k(R){try{const G=R.getProvider(Xa).getImmediate();return{logEvent:(ce,Ne,Ze)=>function yi(k,R,G,ce){k=(0,te.m9)(k),function af(k,R,G,ce,Ne){return Ko.apply(this,arguments)}(Ca,fs[k.app.options.appId],R,G,ce).catch(Ne=>Or.error(Ne))}(G,ce,Ne,Ze)}}catch(G){throw gi.create("interop-component-reg-failed",{reason:G})}},"PRIVATE")),(0,ye.registerVersion)(al,"0.9.0"),(0,ye.registerVersion)(al,"0.9.0","esm2017")}();var mr=V(4408),bo=V(7565);const Gr=new class Ds extends bo.v{}(class uf extends mr.o{constructor(R,G){super(R,G),this.scheduler=R,this.work=G}schedule(R,G=0){return G>0?super.schedule(R,G):(this.delay=G,this.state=R,this.scheduler.flush(this),this)}execute(R,G){return G>0||this.closed?super.execute(R,G):this._execute(R,G)}requestAsyncId(R,G,ce=0){return null!=ce&&ce>0||null==ce&&this.delay>0?super.requestAsyncId(R,G,ce):(R.flush(this),0)}});var cr=V(4986),Zt=V(8505),Sa=V(5363),sc=V(9468);const ps=new c.GfV("7.5.0"),ll="__angularfire_symbol__analyticsIsSupportedValue",Yo="__angularfire_symbol__analyticsIsSupported",xa="__angularfire_symbol__remoteConfigIsSupportedValue",Ni="__angularfire_symbol__remoteConfigIsSupported",To="__angularfire_symbol__messagingIsSupportedValue",Ys="__angularfire_symbol__messagingIsSupported";function gs(k,R,G){if(R){if(1===R.length)return R[0];const Ze=R.filter(mt=>mt.app===G);if(1===Ze.length)return Ze[0]}return G.container.getProvider(k).getImmediate({optional:!0})}globalThis[Yo]||(globalThis[Yo]=eb().then(k=>globalThis[ll]=k).catch(()=>globalThis[ll]=!1)),globalThis[Ys]||(globalThis[Ys]=_d().then(k=>globalThis[To]=k).catch(()=>globalThis[To]=!1)),globalThis[Ni]||(globalThis[Ni]=Au().then(k=>globalThis[xa]=k).catch(()=>globalThis[xa]=!1));const Zi=(k,R)=>{const G=R?[R]:(0,oe.C6)(),ce=[];return G.forEach(Ne=>{Ne.container.getProvider(k).instances.forEach(mt=>{ce.includes(mt)||ce.push(mt)})}),ce};function ul(){}class As{constructor(R,G=Gr){this.zone=R,this.delegate=G}now(){return this.delegate.now()}schedule(R,G,ce){const Ne=this.zone;return this.delegate.schedule(function(mt){Ne.runGuarded(()=>{R.apply(this,[mt])})},G,ce)}}class rr{constructor(R){this.zone=R,this.task=null}call(R,G){const ce=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ul,{},ul,ul)),G.pipe((0,Zt.b)({next:ce,complete:ce,error:ce})).subscribe(R).add(ce)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Jl=(()=>{class k{constructor(G){this.ngZone=G,this.outsideAngular=G.runOutsideAngular(()=>new As(Zone.current)),this.insideAngular=G.run(()=>new As(Zone.current,cr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(G){return new(G||k)(c.LFG(c.R0b))},k.\u0275prov=c.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function ks(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function df(k){return k.pipe((0,Sa.Q)(ks().outsideAngular))}function Ia(k){return ks(),function gg(k){return function(G){return(G=G.lift(new rr(k.ngZone))).pipe((0,sc.R)(k.outsideAngular),(0,Sa.Q)(k.insideAngular))}}(ks())(k)}},3327:(it,Ie,V)=>{"use strict";V.r(Ie),V.d(Ie,{defaultOptions:()=>U,fetchFile:()=>K,getCreateFFmpegCore:()=>ve});const U={corePath:`https://unpkg.com/@ffmpeg/core@${V(3681).devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`};var ye=V(5861),te=V(6945),pe=V(3630);const _e=function(){var ee=(0,ye.Z)(function*(Z,qe){(0,te.log)("info",`fetch ${Z}`);const Me=yield(yield fetch(Z)).arrayBuffer();(0,te.log)("info",`${Z} file size = ${Me.byteLength} bytes`);const Ue=new Blob([Me],{type:qe}),Tt=URL.createObjectURL(Ue);return(0,te.log)("info",`${Z} blob URL = ${Tt}`),Tt});return function(qe,Me){return ee.apply(this,arguments)}}(),ve=function(){var ee=(0,ye.Z)(function*({corePath:Z,workerPath:qe,wasmPath:Me}){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){if("string"!=typeof Z)throw Error("corePath should be a string!");const Ke=new URL(Z,"file:///C:/Users/sinu/Documents/Clips/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js").href,nt=yield _e(Ke,"application/javascript"),Ge=yield _e(void 0!==Me?Me:Ke.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),Se=yield _e(void 0!==qe?qe:Ke.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(ze=>{if(globalThis.importScripts(nt),typeof createFFmpegCore>"u")throw Error((0,pe.CREATE_FFMPEG_CORE_IS_NOT_DEFINED)(Ke));(0,te.log)("info","ffmpeg-core.js script loaded"),ze({createFFmpegCore,corePath:nt,wasmPath:Ge,workerPath:Se})}):((0,te.log)("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:nt,wasmPath:Ge,workerPath:Se}))}if("string"!=typeof Z)throw Error("corePath should be a string!");const Ue=new URL(Z,"file:///C:/Users/sinu/Documents/Clips/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js").href,Tt=yield _e(Ue,"application/javascript"),Be=yield _e(void 0!==Me?Me:Ue.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),me=yield _e(void 0!==qe?qe:Ue.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(Ke=>{const nt=document.createElement("script"),Ge=()=>{if(nt.removeEventListener("load",Ge),typeof createFFmpegCore>"u")throw Error((0,pe.CREATE_FFMPEG_CORE_IS_NOT_DEFINED)(Ue));(0,te.log)("info","ffmpeg-core.js script loaded"),Ke({createFFmpegCore,corePath:Tt,wasmPath:Be,workerPath:me})};nt.src=Tt,nt.type="text/javascript",nt.addEventListener("load",Ge),document.getElementsByTagName("head")[0].appendChild(nt)}):((0,te.log)("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:Tt,wasmPath:Be,workerPath:me}))});return function(qe){return ee.apply(this,arguments)}}(),K=function(){var ee=(0,ye.Z)(function*(Z){let qe=Z;return typeof Z>"u"?new Uint8Array:("string"==typeof Z?qe=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(Z)?atob(Z.split(",")[1]).split("").map(Me=>Me.charCodeAt(0)):yield(yield fetch(new URL(Z,"file:///C:/Users/sinu/Documents/Clips/node_modules/@ffmpeg/ffmpeg/src/browser/fetchFile.js").href)).arrayBuffer():(Z instanceof File||Z instanceof Blob)&&(qe=yield(ee=>new Promise((Z,qe)=>{const Me=new FileReader;Me.onload=()=>{Z(Me.result)},Me.onerror=({target:{error:{code:Ue}}})=>{qe(Error(`File could not be read! Code=${Ue}`))},Me.readAsArrayBuffer(ee)}))(Z)),new Uint8Array(qe))});return function(qe){return ee.apply(this,arguments)}}()},6151:it=>{it.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},9639:(it,Ie,V)=>{var c=V(7156).default;const{defaultArgs:oe,baseOptions:U}=V(6151),ye=V(8333),{defaultOptions:te,getCreateFFmpegCore:pe}=V(3327),{version:_e}=V(3681),ve=Error("ffmpeg.wasm is not ready, make sure you have completed load().");it.exports=(Ce={})=>{const{log:K,logger:ee,progress:Z,...qe}={...U,...te,...Ce};let Me=null,Ue=null,Tt=null,Be=null,me=!1,Ke=()=>{},nt=K,Ge=Z,Se=0,ze=0,rt=!1,et=0;const $=(ut,bt)=>{Ke({type:ut,message:bt}),nt&&console.log(`[${ut}] ${bt}`)},W=ut=>{const[bt,at,wt]=ut.split(":");return 60*parseFloat(bt)*60+60*parseFloat(at)+parseFloat(wt)},le=({type:ut,message:bt})=>{$(ut,bt),((ut,bt)=>{if("string"==typeof ut)if(ut.startsWith("  Duration")){const at=ut.split(", ")[0].split(": ")[1],wt=W(at);bt({duration:wt,ratio:et}),(0===Se||Se>wt)&&(Se=wt,rt=!0)}else if(rt&&ut.startsWith("    Stream")){const at=ut.match(/([\d.]+) fps/);if(at){const wt=parseFloat(at[1]);ze=Se*wt}else ze=0;rt=!1}else if(ut.startsWith("frame")||ut.startsWith("size")){const at=ut.split("time=")[1].split(" ")[0],wt=W(at),Rt=ut.match(/frame=\s*(\d+)/);if(ze&&Rt){const qt=parseFloat(Rt[1]);et=Math.min(qt/ze,1)}else et=wt/Se;bt({ratio:et,time:wt})}else ut.startsWith("video:")&&(bt({ratio:1}),Se=0)})(bt,Ge),(ut=>{"FFMPEG_END"===ut&&null!==Tt&&(Tt(),Tt=null,Be=null,me=!1)})(bt)},he=function(){var ut=c(function*(){if($("info","load ffmpeg-core"),null!==Me)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{$("info","loading ffmpeg-core");const{createFFmpegCore:bt,corePath:at,workerPath:wt,wasmPath:Rt}=yield pe(qe);Me=yield bt({mainScriptUrlOrBlob:at,printErr:qt=>le({type:"fferr",message:qt}),print:qt=>le({type:"ffout",message:qt}),locateFile:(qt,Fn)=>{if(typeof window<"u"||typeof WorkerGlobalScope<"u"){if(typeof Rt<"u"&&qt.endsWith("ffmpeg-core.wasm"))return Rt;if(typeof wt<"u"&&qt.endsWith("ffmpeg-core.worker.js"))return wt}return Fn+qt}}),Ue=Me.cwrap(qe.mainName||"proxy_main","number",["number","number"]),$("info","ffmpeg-core loaded")}});return function(){return ut.apply(this,arguments)}}();return $("info",`use ffmpeg.wasm v${_e}`),{setProgress:ut=>{Ge=ut},setLogger:ut=>{Ke=ut},setLogging:ut=>{nt=ut},load:he,isLoaded:()=>null!==Me,run:(...ut)=>{if($("info",`run ffmpeg command: ${ut.join(" ")}`),null===Me)throw ve;if(me)throw Error("ffmpeg.wasm can only run one command at a time");return me=!0,new Promise((bt,at)=>{const wt=[...oe,...ut].filter(Rt=>0!==Rt.length);Tt=bt,Be=at,Ue(...ye(Me,wt))})},exit:()=>{if(null===Me)throw ve;Be&&Be("ffmpeg has exited"),me=!1;try{Me.exit(1)}catch(ut){$(ut.message),Be&&Be(ut)}finally{Me=null,Ue=null,Tt=null,Be=null}},FS:(ut,...bt)=>{if($("info",`run FS.${ut} ${bt.map(at=>"string"==typeof at?at:`<${at.length} bytes binary file>`).join(" ")}`),null===Me)throw ve;{let at=null;try{at=Me.FS[ut](...bt)}catch{throw Error("readdir"===ut?`ffmpeg.FS('readdir', '${bt[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:"readFile"===ut?`ffmpeg.FS('readFile', '${bt[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return at}}}}},260:(it,Ie,V)=>{V(7854);const c=V(9639),{fetchFile:oe}=V(3327);it.exports={createFFmpeg:c,fetchFile:oe}},3630:it=>{it.exports={CREATE_FFMPEG_CORE_IS_NOT_DEFINED:V=>`\ncreateFFmpegCore is not defined. ffmpeg.wasm is unable to find createFFmpegCore after loading ffmpeg-core.js from ${V}. Use another URL when calling createFFmpeg():\n\nconst ffmpeg = createFFmpeg({\n  corePath: 'http://localhost:3000/ffmpeg-core.js',\n});\n`}},6945:it=>{let Ie=!1,V=()=>{};it.exports={logging:Ie,setLogging:ye=>{Ie=ye},setCustomLogger:ye=>{V=ye},log:(ye,te)=>{V({type:ye,message:te}),Ie&&console.log(`[${ye}] ${te}`)}}},8333:it=>{it.exports=(Ie,V)=>{const c=Ie._malloc(V.length*Uint32Array.BYTES_PER_ELEMENT);return V.forEach((oe,U)=>{const ye=Ie.lengthBytesUTF8(oe)+1,te=Ie._malloc(ye);Ie.stringToUTF8(oe,te,ye),Ie.setValue(c+Uint32Array.BYTES_PER_ELEMENT*U,te,"i32")}),[V.length,c]}},2090:(it,Ie,V)=>{"use strict";V.d(Ie,{$s:()=>Vt,BH:()=>Re,G6:()=>ze,L:()=>ve,LL:()=>bt,Pz:()=>He,Sg:()=>Oe,UG:()=>Ue,US:()=>pe,ZB:()=>ee,ZR:()=>ut,aH:()=>we,b$:()=>me,eu:()=>et,hl:()=>rt,jU:()=>Tt,m9:()=>gn,ne:()=>zn,pd:()=>sr,r3:()=>hn,ru:()=>Be,tV:()=>Ce,uI:()=>Me,vZ:()=>Pt,w1:()=>nt,xO:()=>pr,xb:()=>Er,z$:()=>qe,zI:()=>O,zd:()=>xn});const ye=function(Te){const fe=[];let ke=0;for(let ot=0;ot<Te.length;ot++){let Pe=Te.charCodeAt(ot);Pe<128?fe[ke++]=Pe:Pe<2048?(fe[ke++]=Pe>>6|192,fe[ke++]=63&Pe|128):55296==(64512&Pe)&&ot+1<Te.length&&56320==(64512&Te.charCodeAt(ot+1))?(Pe=65536+((1023&Pe)<<10)+(1023&Te.charCodeAt(++ot)),fe[ke++]=Pe>>18|240,fe[ke++]=Pe>>12&63|128,fe[ke++]=Pe>>6&63|128,fe[ke++]=63&Pe|128):(fe[ke++]=Pe>>12|224,fe[ke++]=Pe>>6&63|128,fe[ke++]=63&Pe|128)}return fe},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Te,fe){if(!Array.isArray(Te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ke=fe?this.byteToCharMapWebSafe_:this.byteToCharMap_,ot=[];for(let Pe=0;Pe<Te.length;Pe+=3){const Dt=Te[Pe],zt=Pe+1<Te.length,kn=zt?Te[Pe+1]:0,tr=Pe+2<Te.length,H=tr?Te[Pe+2]:0;let Fe=(15&kn)<<2|H>>6,vt=63&H;tr||(vt=64,zt||(Fe=64)),ot.push(ke[Dt>>2],ke[(3&Dt)<<4|kn>>4],ke[Fe],ke[vt])}return ot.join("")},encodeString(Te,fe){return this.HAS_NATIVE_SUPPORT&&!fe?btoa(Te):this.encodeByteArray(ye(Te),fe)},decodeString(Te,fe){return this.HAS_NATIVE_SUPPORT&&!fe?atob(Te):function(Te){const fe=[];let ke=0,ot=0;for(;ke<Te.length;){const Pe=Te[ke++];if(Pe<128)fe[ot++]=String.fromCharCode(Pe);else if(Pe>191&&Pe<224){const Dt=Te[ke++];fe[ot++]=String.fromCharCode((31&Pe)<<6|63&Dt)}else if(Pe>239&&Pe<365){const tr=((7&Pe)<<18|(63&Te[ke++])<<12|(63&Te[ke++])<<6|63&Te[ke++])-65536;fe[ot++]=String.fromCharCode(55296+(tr>>10)),fe[ot++]=String.fromCharCode(56320+(1023&tr))}else{const Dt=Te[ke++],zt=Te[ke++];fe[ot++]=String.fromCharCode((15&Pe)<<12|(63&Dt)<<6|63&zt)}}return fe.join("")}(this.decodeStringToByteArray(Te,fe))},decodeStringToByteArray(Te,fe){this.init_();const ke=fe?this.charToByteMapWebSafe_:this.charToByteMap_,ot=[];for(let Pe=0;Pe<Te.length;){const Dt=ke[Te.charAt(Pe++)],kn=Pe<Te.length?ke[Te.charAt(Pe)]:0;++Pe;const H=Pe<Te.length?ke[Te.charAt(Pe)]:64;++Pe;const Y=Pe<Te.length?ke[Te.charAt(Pe)]:64;if(++Pe,null==Dt||null==kn||null==H||null==Y)throw Error();ot.push(Dt<<2|kn>>4),64!==H&&(ot.push(kn<<4&240|H>>2),64!==Y&&ot.push(H<<6&192|Y))}return ot},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Te=0;Te<this.ENCODED_VALS.length;Te++)this.byteToCharMap_[Te]=this.ENCODED_VALS.charAt(Te),this.charToByteMap_[this.byteToCharMap_[Te]]=Te,this.byteToCharMapWebSafe_[Te]=this.ENCODED_VALS_WEBSAFE.charAt(Te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Te]]=Te,Te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Te)]=Te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Te)]=Te)}}},ve=function(Te){return function(Te){const fe=ye(Te);return pe.encodeByteArray(fe,!0)}(Te).replace(/\./g,"")},Ce=function(Te){try{return pe.decodeString(Te,!0)}catch(fe){console.error("base64Decode failed: ",fe)}return null};function ee(Te,fe){if(!(fe instanceof Object))return fe;switch(fe.constructor){case Date:return new Date(fe.getTime());case Object:void 0===Te&&(Te={});break;case Array:Te=[];break;default:return fe}for(const ke in fe)!fe.hasOwnProperty(ke)||!Z(ke)||(Te[ke]=ee(Te[ke],fe[ke]));return Te}function Z(Te){return"__proto__"!==Te}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function Ue(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Tt(){return"object"==typeof self&&self.self===self}function Be(){const Te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Te&&void 0!==Te.id}function me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nt(){const Te=qe();return Te.indexOf("MSIE ")>=0||Te.indexOf("Trident/")>=0}function ze(){return!Ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rt(){try{return"object"==typeof indexedDB}catch{return!1}}function et(){return new Promise((Te,fe)=>{try{let ke=!0;const ot="validate-browser-context-for-indexeddb-analytics-module",Pe=self.indexedDB.open(ot);Pe.onsuccess=()=>{Pe.result.close(),ke||self.indexedDB.deleteDatabase(ot),Te(!0)},Pe.onupgradeneeded=()=>{ke=!1},Pe.onerror=()=>{var Dt;fe((null===(Dt=Pe.error)||void 0===Dt?void 0:Dt.message)||"")}}catch(ke){fe(ke)}})}function O(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const he=()=>{try{return function $(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Te=process.env.__FIREBASE_DEFAULTS__;return Te?JSON.parse(Te):void 0})()||(()=>{if(typeof document>"u")return;let Te;try{Te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const fe=Te&&Ce(Te[1]);return fe&&JSON.parse(fe)})()}catch(Te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Te}`)}},we=()=>{var Te;return null===(Te=he())||void 0===Te?void 0:Te.config},He=Te=>{var fe;return null===(fe=he())||void 0===fe?void 0:fe[`_${Te}`]};class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((fe,ke)=>{this.resolve=fe,this.reject=ke})}wrapCallback(fe){return(ke,ot)=>{ke?this.reject(ke):this.resolve(ot),"function"==typeof fe&&(this.promise.catch(()=>{}),1===fe.length?fe(ke):fe(ke,ot))}}}function Oe(Te,fe){if(Te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ot=fe||"demo-project",Pe=Te.iat||0,Dt=Te.sub||Te.user_id;if(!Dt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const zt=Object.assign({iss:`https://securetoken.google.com/${ot}`,aud:ot,iat:Pe,exp:Pe+3600,auth_time:Pe,sub:Dt,user_id:Dt,firebase:{sign_in_provider:"custom",identities:{}}},Te);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(zt)),""].join(".")}class ut extends Error{constructor(fe,ke,ot){super(ke),this.code=fe,this.customData=ot,this.name="FirebaseError",Object.setPrototypeOf(this,ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bt.prototype.create)}}class bt{constructor(fe,ke,ot){this.service=fe,this.serviceName=ke,this.errors=ot}create(fe,...ke){const ot=ke[0]||{},Pe=`${this.service}/${fe}`,Dt=this.errors[fe],zt=Dt?function at(Te,fe){return Te.replace(wt,(ke,ot)=>{const Pe=fe[ot];return null!=Pe?String(Pe):`<${ot}?>`})}(Dt,ot):"Error";return new ut(Pe,`${this.serviceName}: ${zt} (${Pe}).`,ot)}}const wt=/\{\$([^}]+)}/g;function hn(Te,fe){return Object.prototype.hasOwnProperty.call(Te,fe)}function Er(Te){for(const fe in Te)if(Object.prototype.hasOwnProperty.call(Te,fe))return!1;return!0}function Pt(Te,fe){if(Te===fe)return!0;const ke=Object.keys(Te),ot=Object.keys(fe);for(const Pe of ke){if(!ot.includes(Pe))return!1;const Dt=Te[Pe],zt=fe[Pe];if(Br(Dt)&&Br(zt)){if(!Pt(Dt,zt))return!1}else if(Dt!==zt)return!1}for(const Pe of ot)if(!ke.includes(Pe))return!1;return!0}function Br(Te){return null!==Te&&"object"==typeof Te}function pr(Te){const fe=[];for(const[ke,ot]of Object.entries(Te))Array.isArray(ot)?ot.forEach(Pe=>{fe.push(encodeURIComponent(ke)+"="+encodeURIComponent(Pe))}):fe.push(encodeURIComponent(ke)+"="+encodeURIComponent(ot));return fe.length?"&"+fe.join("&"):""}function xn(Te){const fe={};return Te.replace(/^\?/,"").split("&").forEach(ot=>{if(ot){const[Pe,Dt]=ot.split("=");fe[decodeURIComponent(Pe)]=decodeURIComponent(Dt)}}),fe}function sr(Te){const fe=Te.indexOf("?");if(!fe)return"";const ke=Te.indexOf("#",fe);return Te.substring(fe,ke>0?ke:void 0)}function zn(Te,fe){const ke=new Kn(Te,fe);return ke.subscribe.bind(ke)}class Kn{constructor(fe,ke){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ke,this.task.then(()=>{fe(this)}).catch(ot=>{this.error(ot)})}next(fe){this.forEachObserver(ke=>{ke.next(fe)})}error(fe){this.forEachObserver(ke=>{ke.error(fe)}),this.close(fe)}complete(){this.forEachObserver(fe=>{fe.complete()}),this.close()}subscribe(fe,ke,ot){let Pe;if(void 0===fe&&void 0===ke&&void 0===ot)throw new Error("Missing Observer.");Pe=function Gt(Te,fe){if("object"!=typeof Te||null===Te)return!1;for(const ke of fe)if(ke in Te&&"function"==typeof Te[ke])return!0;return!1}(fe,["next","error","complete"])?fe:{next:fe,error:ke,complete:ot},void 0===Pe.next&&(Pe.next=Hn),void 0===Pe.error&&(Pe.error=Hn),void 0===Pe.complete&&(Pe.complete=Hn);const Dt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Pe.error(this.finalError):Pe.complete()}catch{}}),this.observers.push(Pe),Dt}unsubscribeOne(fe){void 0===this.observers||void 0===this.observers[fe]||(delete this.observers[fe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(fe){if(!this.finalized)for(let ke=0;ke<this.observers.length;ke++)this.sendOne(ke,fe)}sendOne(fe,ke){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[fe])try{ke(this.observers[fe])}catch(ot){typeof console<"u"&&console.error&&console.error(ot)}})}close(fe){this.finalized||(this.finalized=!0,void 0!==fe&&(this.finalError=fe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hn(){}function Vt(Te,fe=1e3,ke=2){const ot=fe*Math.pow(ke,Te),Pe=Math.round(.5*ot*(Math.random()-.5)*2);return Math.min(144e5,ot+Pe)}function gn(Te){return Te&&Te._delegate?Te._delegate:Te}},6202:(it,Ie,V)=>{"use strict";var c=V(4650);let oe=null;function U(){return oe}const _e=new c.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ce(){return(0,c.LFG)(ee)}()},providedIn:"platform"}),n})();const K=new c.OlP("Location Initialized");let ee=(()=>{class n extends ve{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Z()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Z()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_e))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function qe(){return new ee((0,c.LFG)(_e))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ue(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Tt(n){return n&&"?"!==n[0]?"?"+n:n}let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Ke)},providedIn:"root"}),n})();const me=new c.OlP("appBaseHref");let Ke=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(_e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Tt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+Tt(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+Tt(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ve),c.LFG(me,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+Tt(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+Tt(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ve),c.LFG(me,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ge=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ue(rt(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Tt(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,rt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Tt,n.joinWithSlash=Me,n.stripTrailingSlash=Ue,n.\u0275fac=function(t){return new(t||n)(c.LFG(Be))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Se(){return new Ge((0,c.LFG)(Be))}()},providedIn:"root"}),n})();function rt(n){return n.replace(/\/index.html$/,"")}var O=(()=>((O=O||{})[O.Decimal=0]="Decimal",O[O.Percent=1]="Percent",O[O.Currency=2]="Currency",O[O.Scientific=3]="Scientific",O))(),W=(()=>((W=W||{})[W.Format=0]="Format",W[W.Standalone=1]="Standalone",W))(),re=(()=>((re=re||{})[re.Narrow=0]="Narrow",re[re.Abbreviated=1]="Abbreviated",re[re.Wide=2]="Wide",re[re.Short=3]="Short",re))(),le=(()=>((le=le||{})[le.Short=0]="Short",le[le.Medium=1]="Medium",le[le.Long=2]="Long",le[le.Full=3]="Full",le))(),he=(()=>((he=he||{})[he.Decimal=0]="Decimal",he[he.Group=1]="Group",he[he.List=2]="List",he[he.PercentSign=3]="PercentSign",he[he.PlusSign=4]="PlusSign",he[he.MinusSign=5]="MinusSign",he[he.Exponential=6]="Exponential",he[he.SuperscriptingExponent=7]="SuperscriptingExponent",he[he.PerMille=8]="PerMille",he[he.Infinity=9]="Infinity",he[he.NaN=10]="NaN",he[he.TimeSeparator=11]="TimeSeparator",he[he.CurrencyDecimal=12]="CurrencyDecimal",he[he.CurrencyGroup=13]="CurrencyGroup",he))();function bt(n,e){return Pt((0,c.cg1)(n)[c.wAp.DateFormat],e)}function at(n,e){return Pt((0,c.cg1)(n)[c.wAp.TimeFormat],e)}function wt(n,e){return Pt((0,c.cg1)(n)[c.wAp.DateTimeFormat],e)}function Rt(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===he.CurrencyDecimal)return t[c.wAp.NumberSymbols][he.Decimal];if(e===he.CurrencyGroup)return t[c.wAp.NumberSymbols][he.Group]}return r}function hn(n){if(!n[c.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[c.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Pt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Br(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const sr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,jn={},zn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Kn=(()=>((Kn=Kn||{})[Kn.Short=0]="Short",Kn[Kn.ShortGMT=1]="ShortGMT",Kn[Kn.Long=2]="Long",Kn[Kn.Extended=3]="Extended",Kn))(),Qt=(()=>((Qt=Qt||{})[Qt.FullYear=0]="FullYear",Qt[Qt.Month=1]="Month",Qt[Qt.Date=2]="Date",Qt[Qt.Hours=3]="Hours",Qt[Qt.Minutes=4]="Minutes",Qt[Qt.Seconds=5]="Seconds",Qt[Qt.FractionalSeconds=6]="FractionalSeconds",Qt[Qt.Day=7]="Day",Qt))(),Gt=(()=>((Gt=Gt||{})[Gt.DayPeriods=0]="DayPeriods",Gt[Gt.Days=1]="Days",Gt[Gt.Months=2]="Months",Gt[Gt.Eras=3]="Eras",Gt))();function Hn(n,e,t,r){let i=function Dt(n){if(kn(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,l=1]=n.split("-").map(d=>+d);return ni(i,s-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(sr))return function zt(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,d=Number(n[5]||0)-r,p=Number(n[6]||0),v=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,l,d,p,v),e}(r)}const e=new Date(n);if(!kn(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=wr(t,e)||e;let d,l=[];for(;e;){if(d=zn.exec(e),!d){l.push(e);break}{l=l.concat(d.slice(1));const E=l.pop();if(!E)break;e=E}}let p=i.getTimezoneOffset();r&&(p=ke(r,p),i=function Pe(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function ot(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(ke(e,i)-i))}(i,r,!0));let v="";return l.forEach(E=>{const D=function fe(n){if(Te[n])return Te[n];let e;switch(n){case"G":case"GG":case"GGG":e=Mn(Gt.Eras,re.Abbreviated);break;case"GGGG":e=Mn(Gt.Eras,re.Wide);break;case"GGGGG":e=Mn(Gt.Eras,re.Narrow);break;case"y":e=An(Qt.FullYear,1,0,!1,!0);break;case"yy":e=An(Qt.FullYear,2,0,!0,!0);break;case"yyy":e=An(Qt.FullYear,3,0,!1,!0);break;case"yyyy":e=An(Qt.FullYear,4,0,!1,!0);break;case"Y":e=gn(1);break;case"YY":e=gn(2,!0);break;case"YYY":e=gn(3);break;case"YYYY":e=gn(4);break;case"M":case"L":e=An(Qt.Month,1,1);break;case"MM":case"LL":e=An(Qt.Month,2,1);break;case"MMM":e=Mn(Gt.Months,re.Abbreviated);break;case"MMMM":e=Mn(Gt.Months,re.Wide);break;case"MMMMM":e=Mn(Gt.Months,re.Narrow);break;case"LLL":e=Mn(Gt.Months,re.Abbreviated,W.Standalone);break;case"LLLL":e=Mn(Gt.Months,re.Wide,W.Standalone);break;case"LLLLL":e=Mn(Gt.Months,re.Narrow,W.Standalone);break;case"w":e=nn(1);break;case"ww":e=nn(2);break;case"W":e=nn(1,!0);break;case"d":e=An(Qt.Date,1);break;case"dd":e=An(Qt.Date,2);break;case"c":case"cc":e=An(Qt.Day,1);break;case"ccc":e=Mn(Gt.Days,re.Abbreviated,W.Standalone);break;case"cccc":e=Mn(Gt.Days,re.Wide,W.Standalone);break;case"ccccc":e=Mn(Gt.Days,re.Narrow,W.Standalone);break;case"cccccc":e=Mn(Gt.Days,re.Short,W.Standalone);break;case"E":case"EE":case"EEE":e=Mn(Gt.Days,re.Abbreviated);break;case"EEEE":e=Mn(Gt.Days,re.Wide);break;case"EEEEE":e=Mn(Gt.Days,re.Narrow);break;case"EEEEEE":e=Mn(Gt.Days,re.Short);break;case"a":case"aa":case"aaa":e=Mn(Gt.DayPeriods,re.Abbreviated);break;case"aaaa":e=Mn(Gt.DayPeriods,re.Wide);break;case"aaaaa":e=Mn(Gt.DayPeriods,re.Narrow);break;case"b":case"bb":case"bbb":e=Mn(Gt.DayPeriods,re.Abbreviated,W.Standalone,!0);break;case"bbbb":e=Mn(Gt.DayPeriods,re.Wide,W.Standalone,!0);break;case"bbbbb":e=Mn(Gt.DayPeriods,re.Narrow,W.Standalone,!0);break;case"B":case"BB":case"BBB":e=Mn(Gt.DayPeriods,re.Abbreviated,W.Format,!0);break;case"BBBB":e=Mn(Gt.DayPeriods,re.Wide,W.Format,!0);break;case"BBBBB":e=Mn(Gt.DayPeriods,re.Narrow,W.Format,!0);break;case"h":e=An(Qt.Hours,1,-12);break;case"hh":e=An(Qt.Hours,2,-12);break;case"H":e=An(Qt.Hours,1);break;case"HH":e=An(Qt.Hours,2);break;case"m":e=An(Qt.Minutes,1);break;case"mm":e=An(Qt.Minutes,2);break;case"s":e=An(Qt.Seconds,1);break;case"ss":e=An(Qt.Seconds,2);break;case"S":e=An(Qt.FractionalSeconds,1);break;case"SS":e=An(Qt.FractionalSeconds,2);break;case"SSS":e=An(Qt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ii(Kn.Short);break;case"ZZZZZ":e=ii(Kn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ii(Kn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ii(Kn.Long);break;default:return null}return Te[n]=e,e}(E);v+=D?D(i,t,p):"''"===E?"'":E.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),v}function ni(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function wr(n,e){const t=function ae(n){return(0,c.cg1)(n)[c.wAp.LocaleId]}(n);if(jn[t]=jn[t]||{},jn[t][e])return jn[t][e];let r="";switch(e){case"shortDate":r=bt(n,le.Short);break;case"mediumDate":r=bt(n,le.Medium);break;case"longDate":r=bt(n,le.Long);break;case"fullDate":r=bt(n,le.Full);break;case"shortTime":r=at(n,le.Short);break;case"mediumTime":r=at(n,le.Medium);break;case"longTime":r=at(n,le.Long);break;case"fullTime":r=at(n,le.Full);break;case"short":const i=wr(n,"shortTime"),s=wr(n,"shortDate");r=ri(wt(n,le.Short),[i,s]);break;case"medium":const l=wr(n,"mediumTime"),d=wr(n,"mediumDate");r=ri(wt(n,le.Medium),[l,d]);break;case"long":const p=wr(n,"longTime"),v=wr(n,"longDate");r=ri(wt(n,le.Long),[p,v]);break;case"full":const E=wr(n,"fullTime"),D=wr(n,"fullDate");r=ri(wt(n,le.Full),[E,D])}return r&&(jn[t][e]=r),r}function ri(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function un(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),s+l}function An(n,e,t=0,r=!1,i=!1){return function(s,l){let d=function Mi(n,e){switch(n){case Qt.FullYear:return e.getFullYear();case Qt.Month:return e.getMonth();case Qt.Date:return e.getDate();case Qt.Hours:return e.getHours();case Qt.Minutes:return e.getMinutes();case Qt.Seconds:return e.getSeconds();case Qt.FractionalSeconds:return e.getMilliseconds();case Qt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||d>-t)&&(d+=t),n===Qt.Hours)0===d&&-12===t&&(d=12);else if(n===Qt.FractionalSeconds)return function ki(n,e){return un(n,3).substring(0,e)}(d,e);const p=Rt(l,he.MinusSign);return un(d,e,p,r,i)}}function Mn(n,e,t=W.Format,r=!1){return function(i,s){return function Cr(n,e,t,r,i,s){switch(t){case Gt.Months:return function Re(n,e,t){const r=(0,c.cg1)(n),s=Pt([r[c.wAp.MonthsFormat],r[c.wAp.MonthsStandalone]],e);return Pt(s,t)}(e,i,r)[n.getMonth()];case Gt.Days:return function He(n,e,t){const r=(0,c.cg1)(n),s=Pt([r[c.wAp.DaysFormat],r[c.wAp.DaysStandalone]],e);return Pt(s,t)}(e,i,r)[n.getDay()];case Gt.DayPeriods:const l=n.getHours(),d=n.getMinutes();if(s){const v=function Wn(n){const e=(0,c.cg1)(n);return hn(e),(e[c.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Br(r):[Br(r[0]),Br(r[1])])}(e),E=function Er(n,e,t){const r=(0,c.cg1)(n);hn(r);const s=Pt([r[c.wAp.ExtraData][0],r[c.wAp.ExtraData][1]],e)||[];return Pt(s,t)||[]}(e,i,r),D=v.findIndex(j=>{if(Array.isArray(j)){const[F,Q]=j,ne=l>=F.hours&&d>=F.minutes,ue=l<Q.hours||l===Q.hours&&d<Q.minutes;if(F.hours<Q.hours){if(ne&&ue)return!0}else if(ne||ue)return!0}else if(j.hours===l&&j.minutes===d)return!0;return!1});if(-1!==D)return E[D]}return function we(n,e,t){const r=(0,c.cg1)(n),s=Pt([r[c.wAp.DayPeriodsFormat],r[c.wAp.DayPeriodsStandalone]],e);return Pt(s,t)}(e,i,r)[l<12?0:1];case Gt.Eras:return function Oe(n,e){return Pt((0,c.cg1)(n)[c.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function ii(n){return function(e,t,r){const i=-1*r,s=Rt(t,he.MinusSign),l=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Kn.Short:return(i>=0?"+":"")+un(l,2,s)+un(Math.abs(i%60),2,s);case Kn.ShortGMT:return"GMT"+(i>=0?"+":"")+un(l,1,s);case Kn.Long:return"GMT"+(i>=0?"+":"")+un(l,2,s)+":"+un(Math.abs(i%60),2,s);case Kn.Extended:return 0===r?"Z":(i>=0?"+":"")+un(l,2,s)+":"+un(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function tn(n){return ni(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function nn(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();i=1+Math.floor((l+s)/7)}else{const s=tn(t),l=function Vt(n){const e=ni(n,0,1).getDay();return ni(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),d=s.getTime()-l.getTime();i=1+Math.round(d/6048e5)}return un(i,n,Rt(r,he.MinusSign))}}function gn(n,e=!1){return function(t,r){return un(tn(t).getFullYear(),n,Rt(r,he.MinusSign),e)}}const Te={};function ke(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function kn(n){return n instanceof Date&&!isNaN(n.valueOf())}const tr=/^(\d+)?\.((\d+)(-(\d+))?)?$/,B=".",Y="0";function or(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}let On=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Rl{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Rl(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===s?void 0:s);else if(null!==s){const d=r.get(s);r.move(d,l),$o(d,i)}});for(let i=0,s=r.length;i<s;i++){const d=r.get(i).context;d.index=i,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{$o(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function $o(n,e){n.context.$implicit=e.item}let nr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new td,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pi("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pi("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class td{constructor(){this.$implicit=null,this.ngIf=null}}function pi(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function oi(n,e){return new c.vHH(2100,!1)}class Hh{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class zy{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const ho=new zy,Wy=new Hh;let Du=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return ho;if((0,c.F4k)(t))return Wy;throw oi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const Zy=new c.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let od=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,s){if(null==t||""===t||t!=t)return null;try{return Hn(t,r,s||this.locale,i??this.defaultTimezone??void 0)}catch(l){throw oi()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16),c.Y36(Zy,24))},n.\u0275pipe=c.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Ws=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Nl(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Pi(n,e,t){return function Pn(n,e,t,r,i,s,l=!1){let d="",p=!1;if(isFinite(n)){let v=function zi(n){let r,i,s,l,d,e=Math.abs(n)+"",t=0;for((i=e.indexOf(B))>-1&&(e=e.replace(B,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Y;s++);if(s===(d=e.length))r=[0],i=1;else{for(d--;e.charAt(d)===Y;)d--;for(i-=s,r=[],l=0;s<=d;s++,l++)r[l]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(v=function qi(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(v));let E=e.minInt,D=e.minFrac,j=e.maxFrac;if(s){const We=s.match(tr);if(null===We)throw new Error(`${s} is not a valid digit info`);const Qe=We[1],Le=We[3],Ae=We[5];null!=Qe&&(E=or(Qe)),null!=Le&&(D=or(Le)),null!=Ae?j=or(Ae):null!=Le&&D>j&&(j=D)}!function si(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let l=s+n.integerLen,d=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let D=l;D<r.length;D++)r[D]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=s+1),r[0]=0;for(let D=1;D<l;D++)r[D]=0}if(d>=5)if(l-1<0){for(let D=0;D>l;D--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,s);i++)r.push(0);let p=0!==s;const v=e+n.integerLen,E=r.reduceRight(function(D,j,F,Q){return Q[F]=(j+=D)<10?j:j-10,p&&(0===Q[F]&&F>=v?Q.pop():p=!1),j>=10?1:0},0);E&&(r.unshift(E),n.integerLen++)}(v,D,j);let F=v.digits,Q=v.integerLen;const ne=v.exponent;let ue=[];for(p=F.every(We=>!We);Q<E;Q++)F.unshift(0);for(;Q<0;Q++)F.unshift(0);Q>0?ue=F.splice(Q,F.length):(ue=F,F=[0]);const Ve=[];for(F.length>=e.lgSize&&Ve.unshift(F.splice(-e.lgSize,F.length).join(""));F.length>e.gSize;)Ve.unshift(F.splice(-e.gSize,F.length).join(""));F.length&&Ve.unshift(F.join("")),d=Ve.join(Rt(t,r)),ue.length&&(d+=Rt(t,i)+ue.join("")),ne&&(d+=Rt(t,he.Exponential)+"+"+ne)}else d=Rt(t,he.Infinity);return d=n<0&&!p?e.negPre+d+e.negSuf:e.posPre+d+e.posSuf,d}(n,function Gn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],l=-1!==i.indexOf(B)?i.split(B):[i.substring(0,i.lastIndexOf(Y)+1),i.substring(i.lastIndexOf(Y)+1)],d=l[0],p=l[1]||"";t.posPre=d.substring(0,d.indexOf("#"));for(let E=0;E<p.length;E++){const D=p.charAt(E);D===Y?t.minFrac=t.maxFrac=E+1:"#"===D?t.maxFrac=E+1:t.posSuf+=D}const v=d.split(",");if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,s){const E=i.length-t.posPre.length-t.posSuf.length,D=s.indexOf("#");t.negPre=s.substring(0,D).replace(/'/g,""),t.negSuf=s.slice(D+E).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function qt(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,O.Percent),Rt(e,he.MinusSign)),e,he.Group,he.Decimal,t,!0).replace(new RegExp("%","g"),Rt(e,he.PercentSign))}(function ku(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw oi()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16))},n.\u0275pipe=c.Yjl({name:"percent",type:n,pure:!0,standalone:!0}),n})();let Cs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function Ri(n){return"server"===n}let Mu=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new cg((0,c.LFG)(_e),window)}),n})();class cg{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ki(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=xs(this.window.history)||xs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function xs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ma extends class Yh extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function te(n){oe||(oe=n)}(new ma)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function qu(){return ya=ya||document.querySelector("base"),ya?ya.getAttribute("href"):null}();return null==t?null:function hs(n){ai=ai||document.createElement("a"),ai.setAttribute("href",n);const e=ai.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ai,ya=null;const lr=new c.OlP("TRANSITION_ID"),bd=[{provide:c.ip1,useFactory:function _d(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=U(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[lr,_e,c.zs3],multi:!0}];let Td=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const zu=new c.OlP("EventManagerPlugins");let Xh=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(zu),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Wu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=U().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let va=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Qa=(()=>{class n extends va{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Jh),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Jh))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_e))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Jh(n){U().remove(n)}const Xa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ef=/%COMP%/g;function Yu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Yu(n,i,t):(i=i.replace(ef,n),t.push(i))}return t}function tf(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ja=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new el(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new nf(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new rf(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Yu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xh),c.LFG(Qa),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class el{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Xa[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Hl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Hl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Xa[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Xa[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,tf(r)):this.eventManager.addEventListener(e,t,tf(r))}}function Hl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class nf extends el{constructor(e,t,r,i){super(e),this.component=r;const s=Yu(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Or(n){return"_ngcontent-%COMP%".replace(ef,n)}(i+"-"+r.id),this.hostAttr=function Zu(n){return"_nghost-%COMP%".replace(ef,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class rf extends el{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Yu(i.id,i.styles,[]);for(let l=0;l<s.length;l++){const d=document.createElement("style");d.textContent=s[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gi=(()=>{class n extends Wu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_e))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Gl=["alt","control","meta","shift"],ql={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zl=(()=>{class n extends Wu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),Gl.forEach(v=>{const E=r.indexOf(v);E>-1&&(r.splice(E,1),l+=v+".")}),l+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=l,p}static matchEventFullKeyCode(t,r){let i=ql[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Gl.forEach(l=>{l!==i&&(0,Zs[l])(t)&&(s+=l+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_e))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ec=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Xu(){ma.makeCurrent()},multi:!0},{provide:_e,useFactory:function Kl(){return(0,c.RDi)(document),document},deps:[]}]),Wo=new c.OlP(""),af=[{provide:c.rWj,useClass:class Qh{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const d=function(p){l=l||p,s--,0==s&&r(l)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?U().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],Ko=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Ta(){return new c.qLn},deps:[]},{provide:zu,useClass:gi,multi:!0,deps:[_e,c.R0b,c.Lbi]},{provide:zu,useClass:zl,multi:!0,deps:[_e]},{provide:Ja,useClass:Ja,deps:[Xh,Qa,c.AFp]},{provide:c.FYo,useExisting:Ja},{provide:va,useExisting:Qa},{provide:Qa,useClass:Qa,deps:[_e]},{provide:Xh,useClass:Xh,deps:[zu,c.R0b]},{provide:class Za{},useClass:Td,deps:[]},[]];let wd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:lr,useExisting:c.AFp},bd]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Wo,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...Ko,...af],imports:[Cs,c.hGG]}),n})(),vo=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_e))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function tl(){return new vo((0,c.LFG)(_e))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Xl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(tv),r},providedIn:"root"}),n})(),tv=(()=>{class n extends Xl{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_e))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ev(n){return new tv(n.get(_e))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var yi=V(2011),Oi=V(7579),al=V(3269),Un=V(8996);function Ot(...n){const e=(0,al.yG)(n);return(0,Un.D)(n,e)}var mr=V(9751),uf=V(6451),bo=V(5363),Ds=V(8421),Gr=V(4482),vi=V(5403);function cr(n,e){return(0,Gr.e)((t,r)=>{let i=null,s=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,vi.x)(r,p=>{i?.unsubscribe();let v=0;const E=s++;(0,Ds.Xf)(n(p,E)).subscribe(i=(0,vi.x)(r,D=>r.next(e?e(p,D,E,v++):D),()=>{i=null,d()}))},()=>{l=!0,d()}))})}var Zt=V(4004),Sa=V(6063);class sc extends Oi.x{constructor(e=1/0,t=1/0,r=Sa.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=l;p+=2)d=p;d&&r.splice(0,d+1)}}}var ps=V(3099);function ll(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,ps.B)({connector:()=>new sc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const xa=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ni(n,e){return(0,Gr.e)((t,r)=>{let i=0;t.subscribe((0,vi.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var To=V(515);function Ys(n){return n<=0?()=>To.E:(0,Gr.e)((e,t)=>{let r=0;e.subscribe((0,vi.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Qo(n){return(0,Gr.e)((e,t)=>{let r=!1;e.subscribe((0,vi.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pg(n=cf){return(0,Gr.e)((e,t)=>{let r=!1;e.subscribe((0,vi.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cf(){return new xa}var oc=V(4671);function gs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ni((i,s)=>n(i,s,r)):oc.y,Ys(1),t?Qo(e):pg(()=>new xa))}var Zi=V(576);function ul(n,e){return(0,Zi.m)(e)?cr(()=>n,e):cr(()=>n)}var As=V(9468),rr=V(2122);V(259);var De=V(5861),Ut=V(9681),mn=V(4859),Ct=V(2090),dr=V(1877);const Ir=new Map,Da={activated:!1,tokenObservers:[]},ac={initialized:!1,enabled:!1};function Dr(n){return Ir.get(n)||Object.assign({},Da)}function Fi(){return ac}class rb{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,De.Z)(function*(){t.stop();try{t.pending=new Ct.BH,yield function rv(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ct.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _i=new Ct.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vg(n){if(!Dr(n).activated)throw _i.create("use-before-activation",{appName:n.name})}function sv(n,e){return _g.apply(this,arguments)}function _g(){return(_g=(0,De.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(e),headers:r};let l,d;try{l=yield fetch(n,s)}catch(D){throw _i.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==l.status)throw _i.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(D){throw _i.create("fetch-parse-error",{originalErrorMessage:D?.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw _i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const v=1e3*Number(p[1]),E=Date.now();return{token:d.token,expireTimeMillis:E+v,issuedAtTimeMillis:E}})).apply(this,arguments)}function ov(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const pf="firebase-app-check-store";let Eg=null;function av(){return Eg||(Eg=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(_i.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(pf,{keyPath:"compositeKey"})}}catch(t){e(_i.create("storage-open",{originalErrorMessage:t?.message}))}}),Eg)}function gf(){return(gf=(0,De.Z)(function*(n,e){const r=(yield av()).transaction(pf,"readwrite"),s=r.objectStore(pf).put({compositeKey:n,value:e});return new Promise((l,d)=>{s.onsuccess=p=>{l()},r.onerror=p=>{var v;d(_i.create("storage-set",{originalErrorMessage:null===(v=p.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const kd=new dr.Yd("@firebase/app-check");function lc(n,e){return(0,Ct.hl)()?function ob(n,e){return function Dd(n,e){return gf.apply(this,arguments)}(function Cg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{kd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function cv(){return Fi().enabled}function Ig(){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,De.Z)(function*(){const n=Fi();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const rs={error:"UNKNOWN_ERROR"};function Ag(n){return Ct.US.encodeString(JSON.stringify(n),!1)}function yf(n){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,De.Z)(function*(n,e=!1){const t=n.app;vg(t);const r=Dr(t);let s,i=r.token;if(i&&!tu(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(tu(p)?i=p:yield lc(t,void 0))}if(!e&&i&&tu(i))return{token:i.token};let d,l=!1;if(cv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=sv(ov(t,yield Ig()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const p=yield r.exchangeTokenPromise;return yield lc(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Dr(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?kd.warn(p.message):kd.error(p),s=p}return i?s?d=tu(i)?{token:i.token,internalError:s}:dv(s):(d={token:i.token},r.token=i,yield lc(t,i)):d=dv(s),l&&vf(t,d),d})).apply(this,arguments)}function eu(n,e){const t=Dr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Md(n){const{app:e}=n,t=Dr(e);let r=t.tokenRefresher;r||(r=function lb(n){const{app:e}=n;return new rb((0,De.Z)(function*(){let r;if(r=Dr(e).token?yield yf(n,!0):yield yf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Dr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vf(n,e){const t=Dr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function tu(n){return n.expireTimeMillis-Date.now()>0}function dv(n){return{token:Ag(rs),error:n}}class _f{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Dr(this.app);for(const t of e)eu(this.app,t.next);return Promise.resolve()}}const Ef="app-check-internal";!function Fg(){(0,Ut._registerComponent)(new mn.wA("app-check",n=>function ub(n,e){return new _f(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ef).initialize()})),(0,Ut._registerComponent)(new mn.wA(Ef,n=>function hv(n){return{getToken:e=>yf(n,e),addTokenListener:e=>function ji(n,e,t,r){const{app:i}=n,s=Dr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&tu(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),Md(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Md(n))}(n,"INTERNAL",e),removeTokenListener:e=>eu(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ut.registerVersion)("@firebase/app-check","0.6.0")}();class wf{constructor(){return(0,rr.vb)("app-check")}}typeof window<"u"&&window;var Aa=V(9260);const Sf=new c.OlP("angularfire2.auth.use-emulator"),xf=new c.OlP("angularfire2.auth.settings"),If=new c.OlP("angularfire2.auth.tenant-id"),Df=new c.OlP("angularfire2.auth.langugage-code"),ru=new c.OlP("angularfire2.auth.use-device-language"),ms=new c.OlP("angularfire.auth.persistence"),Ld=(n,e,t,r,i,s,l,d)=>(0,yi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),l)for(const[v,E]of Object.entries(l))p.settings[v]=E;return d&&p.setPersistence(d),p},[t,r,i,s,l,d]);let Xs=(()=>{class n{constructor(t,r,i,s,l,d,p,v,E,D,j,F){const Q=new Oi.x,ne=Ot(void 0).pipe((0,bo.Q)(l.outsideAngular),cr(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9169)))),(0,Zt.U)(()=>(0,yi.on)(t,s,r)),(0,Zt.U)(ue=>Ld(ue,s,d,v,E,D,p,j)),ll({bufferSize:1,refCount:!1}));if(Ri(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ot(null);else{ne.pipe(gs()).subscribe();const Ve=ne.pipe(cr(Le=>Le.getRedirectResult().then(Ae=>Ae,()=>null)),rr.iC,ll({bufferSize:1,refCount:!1})),We=ne.pipe(cr(Le=>new mr.y(Ae=>({unsubscribe:s.runOutsideAngular(()=>Le.onAuthStateChanged(ct=>Ae.next(ct),ct=>Ae.error(ct),()=>Ae.complete()))})))),Qe=ne.pipe(cr(Le=>new mr.y(Ae=>({unsubscribe:s.runOutsideAngular(()=>Le.onIdTokenChanged(ct=>Ae.next(ct),ct=>Ae.error(ct),()=>Ae.complete()))}))));this.authState=Ve.pipe(ul(We),(0,As.R)(l.outsideAngular),(0,bo.Q)(l.insideAngular)),this.user=Ve.pipe(ul(Qe),(0,As.R)(l.outsideAngular),(0,bo.Q)(l.insideAngular)),this.idToken=this.user.pipe(cr(Le=>Le?(0,Un.D)(Le.getIdToken()):Ot(null))),this.idTokenResult=this.user.pipe(cr(Le=>Le?(0,Un.D)(Le.getIdTokenResult()):Ot(null))),this.credential=(0,uf.T)(Ve,Q,this.authState.pipe(Ni(Le=>!Le))).pipe((0,Zt.U)(Le=>Le?.user?Le:null),(0,As.R)(l.outsideAngular),(0,bo.Q)(l.insideAngular))}return(0,yi.pX)(this,ne,s,{spy:{apply:(ue,Ve,We)=>{(ue.startsWith("signIn")||ue.startsWith("createUser"))&&We.then(Qe=>Q.next(Qe))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(yi.Dh),c.LFG(yi.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(rr.HU),c.LFG(Sf,8),c.LFG(xf,8),c.LFG(If,8),c.LFG(Df,8),c.LFG(ru,8),c.LFG(ms,8),c.LFG(wf,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_b=(()=>{class n{constructor(){Aa.Z.registerVersion("angularfire",rr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Xs]}),n})();var js=V(4986),So=V(8189);function iu(...n){return function Fd(){return(0,So.J)(1)}()((0,Un.D)(n,(0,al.yG)(n)))}function ta(...n){const e=(0,al.yG)(n);return(0,Gr.e)((t,r)=>{(e?iu(n,t,e):iu(n,t)).subscribe(r)})}function jd(){return(0,Gr.e)((n,e)=>{let t,r=!1;n.subscribe((0,vi.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function bb(n,e,t,r,i){return(s,l)=>{let d=t,p=e,v=0;s.subscribe((0,vi.x)(l,E=>{const D=v++;p=d?n(p,E,D):(d=!0,E),r&&l.next(p)},i&&(()=>{d&&l.next(p),l.complete()})))}}function Af(n,e){return(0,Gr.e)(bb(n,e,arguments.length>=2,!0))}function $g(n,e){return n===e}V(9169);var P,g=V(3942),y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},w={},z=z||{},ge=y||self;function Xe(){}function xt(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ft(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Xt="closure_uid_"+(1e9*Math.random()>>>0),bi=0;function Ti(n,e,t){return n.call.apply(n.bind,arguments)}function ka(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Yi(n,e,t){return(Yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ti:ka).apply(null,arguments)}function cc(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ui(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function Ma(){this.s=this.s,this.o=this.o}Ma.prototype.s=!1,Ma.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function on(n){Object.prototype.hasOwnProperty.call(n,Xt)&&n[Xt]||(n[Xt]=++bi)}(this)},Ma.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Gg=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ud(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function kf(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(xt(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let l=0;l<s;l++)n[i+l]=r[l]}else n.push(r)}}function Qi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Qi.prototype.h=function(){this.defaultPrevented=!0};var Eb=function(){if(!ge.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ge.addEventListener("test",Xe,e),ge.removeEventListener("test",Xe,e)}catch{}return n}();function dc(n){return/^[\s\xa0]*$/.test(n)}var Vd=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Pa(n,e){return n<e?-1:n>e?1:0}function hc(){var n=ge.navigator;return n&&(n=n.userAgent)?n:""}function Ra(n){return-1!=hc().indexOf(n)}function bv(n){return bv[" "](n),n}bv[" "]=Xe;var Wg,n,KO=Ra("Opera"),qg=Ra("Trident")||Ra("MSIE"),f1=Ra("Edge"),zg=f1||qg,Tv=Ra("Gecko")&&!(-1!=hc().toLowerCase().indexOf("webkit")&&!Ra("Edge"))&&!(Ra("Trident")||Ra("MSIE"))&&!Ra("Edge"),ZO=-1!=hc().toLowerCase().indexOf("webkit")&&!Ra("Edge");function p1(){var n=ge.document;return n?n.documentMode:void 0}e:{var wb="",Cb=(n=hc(),Tv?/rv:([^\);]+)(\)|;)/.exec(n):f1?/Edge\/([\d\.]+)/.exec(n):qg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ZO?/WebKit\/(\S+)/.exec(n):KO?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Cb&&(wb=Cb?Cb[1]:""),qg){var Sb=p1();if(null!=Sb&&Sb>parseFloat(wb)){Wg=String(Sb);break e}}Wg=wb}var g1={};var Ib=ge.document&&qg&&(p1()||parseInt(Wg,10))||void 0;function Kg(n,e){if(Qi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Tv){e:{try{bv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ei[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Kg.X.h.call(this)}}Ui(Kg,Qi);var Ei={2:"touch",3:"pen",4:"mouse"};Kg.prototype.h=function(){Kg.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Zg="closure_listenable_"+(1e6*Math.random()|0),m1=0;function Db(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++m1,this.ba=this.ea=!1}function Yg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Ab(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function GC(n){const e={};for(const t in n)e[t]=n[t];return e}const qC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<qC.length;s++)t=qC[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ev(n){this.src=n,this.g={},this.h=0}function WC(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Gg(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Yg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function KC(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}Ev.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=KC(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new Db(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var Bd="closure_lm_"+(1e6*Math.random()|0),Qg={};function kb(n,e,t,r,i){if(r&&r.once)return YC(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)kb(n,e[s],t,r,i);return null}return t=Sv(t),n&&n[Zg]?n.N(e,t,Ft(r)?!!r.capture:!!r,i):Mb(n,e,t,!1,r,i)}function Mb(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=Ft(i)?!!i.capture:!!i,d=Rb(n);if(d||(n[Bd]=d=new Ev(n)),(t=d.add(e,t,r,l,s)).proxy)return t;if(r=function ZC(){const e=YO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Eb||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Cv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function YC(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)YC(n,e[s],t,r,i);return null}return t=Sv(t),n&&n[Zg]?n.O(e,t,Ft(r)?!!r.capture:!!r,i):Mb(n,e,t,!0,r,i)}function Pb(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Pb(n,e[s],t,r,i);else r=Ft(r)?!!r.capture:!!r,t=Sv(t),n&&n[Zg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=KC(s=n.g[e],t,r,i))&&(Yg(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Rb(n))&&(e=n.g[e.toString()],n=-1,e&&(n=KC(e,t,r,i)),(t=-1<n?e[n]:null)&&wv(t))}function wv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Zg])WC(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Cv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Rb(e))?(WC(t,n),0==t.h&&(t.src=null,e[Bd]=null)):Yg(n)}}}function Cv(n){return n in Qg?Qg[n]:Qg[n]="on"+n}function YO(n,e){if(n.ba)n=!0;else{e=new Kg(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&wv(n),n=t.call(r,e)}return n}function Rb(n){return(n=n[Bd])instanceof Ev?n:null}var Xg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sv(n){return"function"==typeof n?n:(n[Xg]||(n[Xg]=function(e){return n.handleEvent(e)}),n[Xg])}function Xi(){Ma.call(this),this.i=new Ev(this),this.P=this,this.I=null}function Xr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Qi(e,n);else if(e instanceof Qi)e.target=e.target||n;else{var i=e;zC(e=new Qi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=xv(l,r,!0,e)&&i}if(i=xv(l=e.g=n,r,!0,e)&&i,i=xv(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=xv(l=e.g=t[s],r,!1,e)&&i}function xv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ba&&l.capture==t){var d=l.listener,p=l.ha||l.src;l.ea&&WC(n.i,l),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}Ui(Xi,Ma),Xi.prototype[Zg]=!0,Xi.prototype.removeEventListener=function(n,e,t,r){Pb(this,n,e,t,r)},Xi.prototype.M=function(){if(Xi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Yg(t[r]);delete n.g[e],n.h--}}this.I=null},Xi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Xi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Jg=ge.JSON.stringify;function Iv(){var n=Lb;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var em,Dv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Av,n=>n.reset());class Av{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $d(n){ge.setTimeout(()=>{throw n},0)}function Ob(n,e){em||function v1(){var n=ge.Promise.resolve(void 0);em=function(){n.then(Pf)}}(),Nb||(em(),Nb=!0),Lb.add(n,e)}var Nb=!1,Lb=new class y1{constructor(){this.h=this.g=null}add(e,t){const r=Dv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Pf(){for(var n;n=Iv();){try{n.h.call(n.g)}catch(t){$d(t)}var e=Dv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Nb=!1}function kv(n,e){Xi.call(this),this.h=n||1,this.g=e||ge,this.j=Yi(this.lb,this),this.l=Date.now()}function Fb(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function jb(n,e,t){if("function"==typeof n)t&&(n=Yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:ge.setTimeout(n,e||0)}function QC(n){n.g=jb(()=>{n.g=null,n.i&&(n.i=!1,QC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ui(kv,Xi),(P=kv.prototype).ca=!1,P.R=null,P.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Xr(this,"tick"),this.ca&&(Fb(this),this.start()))}},P.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},P.M=function(){kv.X.M.call(this),Fb(this),delete this.g};class Ub extends Ma{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:QC(this)}M(){super.M(),this.g&&(ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tm(n){Ma.call(this),this.h=n,this.g={}}Ui(tm,Ma);var Vb=[];function XC(n,e,t,r){Array.isArray(t)||(t&&(Vb[0]=t.toString()),t=Vb);for(var i=0;i<t.length;i++){var s=kb(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Bb(n){Ab(n.g,function(e,t){this.g.hasOwnProperty(t)&&wv(e)},n),n.g={}}function $b(){this.g=!0}function Rf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function rm(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return Jg(t)}catch{return e}}(n,t)+(r?" "+r:"")})}tm.prototype.M=function(){tm.X.M.call(this),Bb(this)},tm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$b.prototype.Aa=function(){this.g=!1},$b.prototype.info=function(){};var Hd={},b1=null;function im(){return b1=b1||new Xi}function JC(n){Qi.call(this,Hd.Pa,n)}function sm(n){const e=im();Xr(e,new JC(e))}function eS(n,e){Qi.call(this,Hd.STAT_EVENT,n),this.stat=e}function Ms(n){const e=im();Xr(e,new eS(e,n))}function Hb(n,e){Qi.call(this,Hd.Qa,n),this.size=e}function Gd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ge.setTimeout(function(){n()},e)}Hd.Pa="serverreachability",Ui(JC,Qi),Hd.STAT_EVENT="statevent",Ui(eS,Qi),Hd.Qa="timingevent",Ui(Hb,Qi);var Nf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},tS={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function om(){}function nS(){}om.prototype.h=null;var zb,am={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Gb(){Qi.call(this,"d")}function qb(){Qi.call(this,"c")}function lm(){}function um(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new tm(this),this.O=su,this.T=new kv(n=zg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new qd}function qd(){this.i=null,this.g="",this.h=!1}Ui(Gb,Qi),Ui(qb,Qi),Ui(lm,om),lm.prototype.g=function(){return new XMLHttpRequest},lm.prototype.i=function(){return{}},zb=new lm;var su=45e3,Wb={},Mv={};function rS(n,e,t){n.K=1,n.v=yn(ou(e)),n.s=t,n.P=!0,T1(n,null)}function T1(n,e){n.F=Date.now(),Pv(n),n.A=ou(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Jb(t.i,"t",r),n.C=0,t=n.l.H,n.h=new qd,n.g=uT(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Ub(Yi(n.La,n,n.g),n.N)),XC(n.S,n.g,"readystatechange",n.ib),e=n.H?GC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),sm(),function _1(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),p=0;p<d.length;p++){var v=d[p].split("=");if(1<v.length){var E=v[0];v=v[1];var D=E.split("_");l=2<=D.length&&"type"==D[1]?l+(E+"=")+v+"&":l+(E+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Kb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function E1(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=iS(n,t),i==Mv){4==e&&(n.o=4,Ms(14),r=!1),Rf(n.j,n.m,null,"[Incomplete Response]");break}if(i==Wb){n.o=4,Ms(15),Rf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Rf(n.j,n.m,i,null),Yb(n,i)}Kb(n)&&i!=Mv&&i!=Wb&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ms(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),bm(e),e.K=!0,Ms(11))):(Rf(n.j,n.m,t,"[Invalid Chunked Response]"),zd(n),Ff(n))}function iS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Mv:(t=Number(e.substring(t,r)),isNaN(t)?Wb:(r+=1)+t>e.length?Mv:(e=e.substr(r,t),n.C=r+t,e))}function Pv(n){n.V=Date.now()+n.O,Zb(n,n.O)}function Zb(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Gd(Yi(n.gb,n),e)}function Rv(n){n.B&&(ge.clearTimeout(n.B),n.B=null)}function Ff(n){0==n.l.G||n.I||j1(n.l,n)}function zd(n){Rv(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Fb(n.T),Bb(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Yb(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||dS(t.h,n)))if(!n.J&&dS(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Gf(t),ra(t)}Hf(t),Ms(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Gd(Yi(t.cb,t),6e3));if(1>=M1(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Yd(t,11)}else if((n.J||t.g==n)&&Gf(t),!dc(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const E=v[3];null!=E&&(t.ma=E,t.j.info("VER="+t.ma));const D=v[4];null!=D&&(t.Ca=D,t.j.info("SVER="+t.Ca));const j=v[5];null!=j&&"number"==typeof j&&0<j&&(t.J=r=1.5*j,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const Q=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var s=r.h;s.g||-1==Q.indexOf("spdy")&&-1==Q.indexOf("quic")&&-1==Q.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(tT(s,s.h),s.h=null))}if(r.D){const ne=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.za=ne,zr(r.F,r.D,ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=TS(r,r.H?r.ka:null,r.V),l.J){nT(r.h,l);var d=l,p=r.J;p&&d.setTimeout(p),d.B&&(Rv(d),Pv(d)),r.g=l}else _m(r);0<t.i.length&&vm(t)}else"stop"!=v[0]&&"close"!=v[0]||Yd(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Yd(t,7):ym(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}sm()}catch{}}function Qb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(xt(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function w1(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(xt(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Oa(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(xt(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(P=um.prototype).setTimeout=function(n){this.O=n},P.ib=function(n){n=n.target;const e=this.L;e&&3==fl(n)?e.l():this.La(n)},P.La=function(n){try{if(n==this.g)e:{const E=fl(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>E)&&(3!=E||zg||this.g&&(this.h.h||this.g.fa()||aT(this.g)))){this.I||4!=E||7==e||sm(),Rv(this);var t=this.g.aa();this.Y=t;t:if(Kb(this)){var r=aT(this.g);n="";var i=r.length,s=4==fl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){zd(this),Ff(this);var l="";break t}this.h.i=new ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function nm(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.U,E,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dc(d)){var v=d;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Ms(12),zd(this),Ff(this);break e}Rf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yb(this,t)}this.P?(E1(this,E,l),zg&&this.i&&3==E&&(XC(this.S,this.T,"tick",this.hb),this.T.start())):(Rf(this.j,this.m,l,null),Yb(this,l)),4==E&&zd(this),this.i&&!this.I&&(4==E?j1(this.l,this):(this.i=!1,Pv(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ms(12)):(this.o=0,Ms(13)),zd(this),Ff(this)}}}catch{}},P.hb=function(){if(this.g){var n=fl(this.g),e=this.g.fa();this.C<e.length&&(Rv(this),E1(this,n,e),this.i&&4!=n&&Pv(this))}},P.cancel=function(){this.I=!0,zd(this)},P.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Of(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sm(),Ms(17)),zd(this),this.o=2,Ff(this)):Zb(this,this.V-n)};var sS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wd(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Wd){this.h=void 0!==e?e:n.h,cm(this,n.j),this.s=n.s,this.g=n.g,Ov(this,n.m),this.l=n.l,e=n.i;var t=new dm;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),oS(this,t),this.o=n.o}else n&&(t=String(n).match(sS))?(this.h=!!e,cm(this,t[1]||"",!0),this.s=jf(t[2]||""),this.g=jf(t[3]||"",!0),Ov(this,t[4]),this.l=jf(t[5]||"",!0),oS(this,t[6]||"",!0),this.o=jf(t[7]||"")):(this.h=!!e,this.i=new dm(null,this.h))}function ou(n){return new Wd(n)}function cm(n,e,t){n.j=t?jf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ov(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function oS(n,e,t){e instanceof dm?(n.i=e,function D1(n,e){e&&!n.j&&(fc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(I1(this,r),Jb(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Uf(e,x1)),n.i=new dm(e,n.h))}function zr(n,e,t){n.i.set(e,t)}function yn(n){return zr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Uf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,aS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function aS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Wd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Uf(e,lS,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Uf(e,lS,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Uf(t,"/"==t.charAt(0)?uS:S1,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Uf(t,cS)),n.join("")};var lS=/[#\/\?@]/g,S1=/[#\?:]/g,uS=/[#\?]/g,x1=/[#\?@]/g,cS=/#/g;function dm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function fc(n){n.g||(n.g=new Map,n.h=0,n.i&&function C1(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function I1(n,e){fc(n),e=na(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Xb(n,e){return fc(n),e=na(n,e),n.g.has(e)}function Jb(n,e,t){I1(n,e),0<t.length&&(n.i=null,n.g.set(na(n,e),Ud(t)),n.h+=t.length)}function na(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Nv(n){this.l=n||A1,n=ge.PerformanceNavigationTiming?0<(n=ge.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ge.g&&ge.g.Ga&&ge.g.Ga()&&ge.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(P=dm.prototype).add=function(n,e){fc(this),this.i=null,n=na(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},P.forEach=function(n,e){fc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},P.oa=function(){fc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},P.W=function(n){fc(this);let e=[];if("string"==typeof n)Xb(this,n)&&(e=e.concat(this.g.get(na(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},P.set=function(n,e){return fc(this),this.i=null,Xb(this,n=na(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},P.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},P.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=s;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var A1=10;function k1(n){return!!n.h||!!n.g&&n.g.size>=n.j}function M1(n){return n.h?1:n.g?n.g.size:0}function dS(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function tT(n,e){n.g?n.g.add(e):n.h=e}function nT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function P1(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ud(n.i)}function rT(){}function Vf(){this.g=new rT}function R1(n,e,t){const r=t||"";try{Qb(n,function(i,s){let l=i;Ft(i)&&(l=Jg(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Kd(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function hm(n){this.l=n.ac||null,this.j=n.jb||!1}function fm(n,e){Xi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=iT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nv.prototype.cancel=function(){if(this.i=P1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},rT.prototype.stringify=function(n){return ge.JSON.stringify(n,void 0)},rT.prototype.parse=function(n){return ge.JSON.parse(n,void 0)},Ui(hm,om),hm.prototype.g=function(){return new fm(this.l,this.j)},hm.prototype.i=function(n){return function(){return n}}({}),Ui(fm,Xi);var iT=0;function fS(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function pm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,gm(n)}function gm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(P=fm.prototype).open=function(n,e){if(this.readyState!=iT)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,gm(this)},P.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ge).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},P.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pm(this)),this.readyState=iT},P.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,gm(this)),this.g&&(this.readyState=3,gm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ge.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fS(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},P.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?pm(this):gm(this),3==this.readyState&&fS(this)}},P.Va=function(n){this.g&&(this.response=this.responseText=n,pm(this))},P.Ua=function(n){this.g&&(this.response=n,pm(this))},P.ga=function(){this.g&&pm(this)},P.setRequestHeader=function(n,e){this.v.append(n,e)},P.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},P.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var O1=ge.JSON.parse;function Jr(n){Xi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=pS,this.K=this.L=!1}Ui(Jr,Xi);var pS="",gS=/^https?$/i,mS=["POST","PUT"];function N1(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Lv(n),oT(n)}function Lv(n){n.D||(n.D=!0,Xr(n,"complete"),Xr(n,"error"))}function yS(n){if(n.h&&typeof z<"u"&&(!n.C[1]||4!=fl(n)||2!=n.aa()))if(n.v&&4==fl(n))jb(n.Ha,0,n);else if(Xr(n,"readystatechange"),4==fl(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(sS)[1]||null;if(!i&&ge.self&&ge.self.location){var s=ge.self.location.protocol;i=s.substr(0,s.length-1)}r=!gS.test(i?i.toLowerCase():"")}t=r}if(t)Xr(n,"complete"),Xr(n,"success");else{n.m=6;try{var l=2<fl(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Lv(n)}}finally{oT(n)}}}function oT(n,e){if(n.g){Zd(n);const t=n.g,r=n.C[0]?Xe:null;n.g=null,n.C=null,e||Xr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Zd(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ge.clearTimeout(n.A),n.A=null)}function fl(n){return n.g?n.g.readyState:0}function aT(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case pS:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function mm(n){let e="";return Ab(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function xo(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=mm(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):zr(n,e,t))}function Bf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function vS(n){this.Ca=0,this.i=[],this.j=new $b,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Bf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Bf("baseRetryDelayMs",5e3,n),this.bb=Bf("retryDelaySeedMs",1e4,n),this.$a=Bf("forwardChannelMaxRetries",2,n),this.ta=Bf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Nv(n&&n.concurrentRequestLimit),this.Fa=new Vf,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ym(n){if(Fv(n),3==n.G){var e=n.U++,t=ou(n.F);zr(t,"SID",n.I),zr(t,"RID",e),zr(t,"TYPE","terminate"),$f(n,t),(e=new um(n,n.j,e,void 0)).K=2,e.v=yn(ou(t)),t=!1,ge.navigator&&ge.navigator.sendBeacon&&(t=ge.navigator.sendBeacon(e.v.toString(),"")),!t&&ge.Image&&((new Image).src=e.v,t=!0),t||(e.g=uT(e.l,null),e.g.da(e.v)),e.F=Date.now(),Pv(e)}bS(n)}function ra(n){n.g&&(bm(n),n.g.cancel(),n.g=null)}function Fv(n){ra(n),n.u&&(ge.clearTimeout(n.u),n.u=null),Gf(n),n.h.cancel(),n.m&&("number"==typeof n.m&&ge.clearTimeout(n.m),n.m=null)}function vm(n){k1(n.h)||n.m||(n.m=!0,Ob(n.Ja,n),n.C=0)}function L1(n,e){var t;t=e?e.m:n.U++;const r=ou(n.F);zr(r,"SID",n.I),zr(r,"RID",t),zr(r,"AID",n.T),$f(n,r),n.o&&n.s&&xo(r,n.o,n.s),t=new um(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=F1(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),tT(n.h,t),rS(t,r,e)}function $f(n,e){n.ia&&Ab(n.ia,function(t,r){zr(e,r,t)}),n.l&&Qb({},function(t,r){zr(e,r,t)})}function F1(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Yi(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let v=i[p].h;const E=i[p].g;if(v-=s,0>v)s=Math.max(0,i[p].h-100),d=!1;else try{R1(E,l,"req"+v+"_")}catch{r&&r(E)}}if(d){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function _m(n){n.g||n.u||(n.Z=1,Ob(n.Ia,n),n.A=0)}function Hf(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Gd(Yi(n.Ia,n),_S(n,n.A)),n.A++,0))}function bm(n){null!=n.B&&(ge.clearTimeout(n.B),n.B=null)}function jv(n){n.g=new um(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ou(n.sa);zr(e,"RID","rpc"),zr(e,"SID",n.I),zr(e,"CI",n.L?"0":"1"),zr(e,"AID",n.T),zr(e,"TYPE","xmlhttp"),$f(n,e),n.o&&n.s&&xo(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=yn(ou(e)),t.s=null,t.P=!0,T1(t,n)}function Gf(n){null!=n.v&&(ge.clearTimeout(n.v),n.v=null)}function j1(n,e){var t=null;if(n.g==e){Gf(n),bm(n),n.g=null;var r=2}else{if(!dS(n.h,e))return;t=e.D,nT(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Xr(r=im(),new Hb(r,t)),vm(n)}else _m(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function lT(n,e){return!(M1(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Gd(Yi(n.Ja,n,e),_S(n,n.C)),n.C++,0)))}(n,e)||2==r&&Hf(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Yd(n,5);break;case 4:Yd(n,10);break;case 3:Yd(n,6);break;default:Yd(n,2)}}function _S(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Yd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Yi(n.kb,n);t||(t=new Wd("//www.google.com/images/cleardot.gif"),ge.location&&"http"==ge.location.protocol||cm(t,"https"),yn(t)),function hS(n,e){const t=new $b;if(ge.Image){const r=new Image;r.onload=cc(Kd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cc(Kd,t,r,"TestLoadImage: error",!1,e),r.onabort=cc(Kd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cc(Kd,t,r,"TestLoadImage: timeout",!1,e),ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ms(2);n.G=0,n.l&&n.l.va(e),bS(n),Fv(n)}function bS(n){if(n.G=0,n.la=[],n.l){const e=P1(n.h);(0!=e.length||0!=n.i.length)&&(kf(n.la,e),kf(n.la,n.i),n.h.i.length=0,Ud(n.i),n.i.length=0),n.l.ua()}}function TS(n,e,t){var r=t instanceof Wd?ou(t):new Wd(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Ov(r,r.m);else{var i=ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Wd(null,void 0);r&&cm(s,r),e&&(s.g=e),i&&Ov(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&zr(r,t,e),zr(r,"VER",n.ma),$f(n,r),r}function uT(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jr(t&&n.Da&&!n.ra?new hm({jb:!0}):n.ra)).Ka(n.H),e}function U1(){}function Uv(){if(qg&&!(10<=Number(Ib)))throw Error("Environmental error: no available transport.")}function ia(n,e){Xi.call(this),this.g=new vS(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!dc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new qf(this)}function cT(n){Gb.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function dT(){qb.call(this),this.status=1}function qf(n){this.g=n}(P=Jr.prototype).Ka=function(n){this.L=n},P.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zb.g(),this.C=function Lf(n){return n.h||(n.h=n.i())}(this.u?this.u:zb),this.g.onreadystatechange=Yi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void N1(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=ge.FormData&&n instanceof ge.FormData,!(0<=Gg(mS,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Zd(this),0<this.B&&((this.K=function sT(n){return qg&&function HC(){return function $C(n){var e=g1;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Vd(String(Wg)).split("."),t=Vd("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",s=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Pa(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Pa(0==i[2].length,0==s[2].length)||Pa(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yi(this.qa,this)):this.A=jb(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){N1(this,s)}},P.qa=function(){typeof z<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xr(this,"timeout"),this.abort(8))},P.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xr(this,"complete"),Xr(this,"abort"),oT(this))},P.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oT(this,!0)),Jr.X.M.call(this)},P.Ha=function(){this.s||(this.F||this.v||this.l?yS(this):this.fb())},P.fb=function(){yS(this)},P.aa=function(){try{return 2<fl(this)?this.g.status:-1}catch{return-1}},P.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},P.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),O1(e)}},P.Ea=function(){return this.m},P.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(P=vS.prototype).ma=8,P.G=1,P.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new um(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=GC(s),zC(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=F1(this,i,e),zr(t=ou(this.F),"RID",n),zr(t,"CVER",22),this.D&&zr(t,"X-HTTP-Session-Id",this.D),$f(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(mm(s)))+"&"+e:this.o&&xo(t,this.o,s)),tT(this.h,i),this.Ya&&zr(t,"TYPE","init"),this.O?(zr(t,"$req",e),zr(t,"SID","null"),i.Z=!0,rS(i,t,null)):rS(i,t,e),this.G=2}}else 3==this.G&&(n?L1(this,n):0==this.i.length||k1(this.h)||L1(this))},P.Ia=function(){if(this.u=null,jv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Gd(Yi(this.eb,this),n)}},P.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ms(10),ra(this),jv(this))},P.cb=function(){null!=this.v&&(this.v=null,ra(this),Hf(this),Ms(19))},P.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ms(2)):(this.j.info("Failed to ping google.com"),Ms(1))},(P=U1.prototype).xa=function(){},P.wa=function(){},P.va=function(){},P.ua=function(){},P.Ra=function(){},Uv.prototype.g=function(n,e){return new ia(n,e)},Ui(ia,Xi),ia.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ms(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=TS(n,null,n.V),vm(n)},ia.prototype.close=function(){ym(this.g)},ia.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Jg(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&vm(e)},ia.prototype.M=function(){this.g.l=null,delete this.j,ym(this.g),delete this.g,ia.X.M.call(this)},Ui(cT,Gb),Ui(dT,qb),Ui(qf,U1),qf.prototype.xa=function(){Xr(this.g,"a")},qf.prototype.wa=function(n){Xr(this.g,new cT(n))},qf.prototype.va=function(n){Xr(this.g,new dT)},qf.prototype.ua=function(){Xr(this.g,"b")},Uv.prototype.createWebChannel=Uv.prototype.g,ia.prototype.send=ia.prototype.u,ia.prototype.open=ia.prototype.m,ia.prototype.close=ia.prototype.close,Nf.NO_ERROR=0,Nf.TIMEOUT=8,Nf.HTTP_ERROR=6,tS.COMPLETE="complete",nS.EventType=am,am.OPEN="a",am.CLOSE="b",am.ERROR="c",am.MESSAGE="d",Xi.prototype.listen=Xi.prototype.N,Jr.prototype.listenOnce=Jr.prototype.O,Jr.prototype.getLastError=Jr.prototype.Oa,Jr.prototype.getLastErrorCode=Jr.prototype.Ea,Jr.prototype.getStatus=Jr.prototype.aa,Jr.prototype.getResponseJson=Jr.prototype.Sa,Jr.prototype.getResponseText=Jr.prototype.fa,Jr.prototype.send=Jr.prototype.da,Jr.prototype.setWithCredentials=Jr.prototype.Ka;var hT=w.createWebChannelTransport=function(){return new Uv},QO=w.getStatEventTarget=function(){return im()},ES=w.ErrorCode=Nf,XO=w.EventType=tS,JO=w.Event=Hd,V1=w.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},eN=w.FetchXmlHttpFactory=hm,fT=w.WebChannel=nS,tN=w.XhrIo=Jr;const B1="@firebase/firestore";class ys{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ys.UNAUTHENTICATED=new ys(null),ys.GOOGLE_CREDENTIALS=new ys("google-credentials-uid"),ys.FIRST_PARTY=new ys("first-party-uid"),ys.MOCK_USER=new ys("mock-user");let Io="9.15.0";const pl=new dr.Yd("@firebase/firestore");function pT(){return pl.logLevel}function Et(n,...e){if(pl.logLevel<=dr.in.DEBUG){const t=e.map(gT);pl.debug(`Firestore (${Io}): ${n}`,...t)}}function li(n,...e){if(pl.logLevel<=dr.in.ERROR){const t=e.map(gT);pl.error(`Firestore (${Io}): ${n}`,...t)}}function au(n,...e){if(pl.logLevel<=dr.in.WARN){const t=e.map(gT);pl.warn(`Firestore (${Io}): ${n}`,...t)}}function gT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Lt(n="Unexpected state"){const e=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: `+n;throw li(e),new Error(e)}function Yt(n,e){n||Lt()}function Nt(n,e){return n}const Je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends Ct.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ji{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Tm{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ys.UNAUTHENTICATED))}shutdown(){}}class mT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wf{constructor(e){this.t=e,this.currentUser=ys.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Ji;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ji,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const v=l;e.enqueueRetryable((0,De.Z)(function*(){yield v.promise,yield s(r.currentUser)}))},p=v=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(v=>p(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ji)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Yt("string"==typeof r.accessToken),new Tm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Yt(null===e||"string"==typeof e),new ys(e)}}class yT{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ys.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Yt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Vv{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new yT(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ys.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CS{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.A;return this.A=s.token,Et("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Yt("string"==typeof t.token),this.A=t.token,new vT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _T(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class bT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_T(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function vn(n,e){return n<e?-1:n>e?1:0}function Kf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function H1(n){return n+"\0"}class Wr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yt(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yt(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new yt(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yt(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wr.fromMillis(Date.now())}static fromDate(e){return Wr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Wr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?vn(this.nanoseconds,e.nanoseconds):vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Jt(e)}static min(){return new Jt(new Wr(0,0))}static max(){return new Jt(new Wr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Em{constructor(e,t,r){void 0===t?t=0:t>e.length&&Lt(),void 0===r?r=e.length-t:r>e.length-t&&Lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Em.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Em?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qn extends Em{construct(e,t,r){return new qn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new yt(Je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new qn(t)}static emptyPath(){return new qn([])}}const xS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ui extends Em{construct(e,t,r){return new ui(e,t,r)}static isValidIdentifier(e){return xS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ui.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ui(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new yt(Je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new yt(Je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new yt(Je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(s(),i++)}if(s(),l)throw new yt(Je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ui(t)}static emptyPath(){return new ui([])}}class It{constructor(e){this.path=e}static fromPath(e){return new It(qn.fromString(e))}static fromName(e){return new It(qn.fromString(e).popFirst(5))}static empty(){return new It(qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new qn(e.slice()))}}class wm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function TT(n){return n.fields.find(e=>2===e.kind)}function Zf(n){return n.fields.filter(e=>2!==e.kind)}wm.UNKNOWN_ID=-1;class Yf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Cm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Cm(0,Js.min())}}function DS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Jt.fromTimestamp(1e9===r?new Wr(t+1,0):new Wr(t,r));return new Js(i,It.empty(),e)}function AS(n){return new Js(n.readTime,n.key,-1)}class Js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Js(Jt.min(),It.empty(),-1)}static max(){return new Js(Jt.max(),It.empty(),-1)}}function ET(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=It.comparator(n.documentKey,e.documentKey),0!==t?t:vn(n.largestBatchId,e.largestBatchId))}const wT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function pc(n){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,De.Z)(function*(n){if(n.code!==Je.FAILED_PRECONDITION||n.message!==wT)throw n;Et("LocalStore","Unexpectedly lost primary lease")}),Bv.apply(this,arguments)}class Ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ye((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ye?t:Ye.resolve(t)}catch(t){return Ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ye.reject(t)}static resolve(e){return new Ye((t,r)=>{t(e)})}static reject(e){return new Ye((t,r)=>{r(e)})}static waitFor(e){return new Ye((t,r)=>{let i=0,s=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++s,l&&s===i&&t()},p=>r(p))}),l=!0,s===i&&t()})}static or(e){let t=Ye.resolve(!1);for(const r of e)t=t.next(i=>i?Ye.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Ye((r,i)=>{const s=e.length,l=new Array(s);let d=0;for(let p=0;p<s;p++){const v=p;t(e[v]).next(E=>{l[v]=E,++d,d===s&&r(l)},E=>i(E))}})}static doWhile(e,t){return new Ye((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class $v{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ji,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Sm(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=ST(r.target.error);this.P.reject(new Sm(e,i))}}static open(e,t,r,i){try{return new $v(t,e.transaction(i,r))}catch(s){throw new Sm(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Et("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new nN(t)}}class Vi{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Vi.D((0,Ct.z$)())&&li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Et("SimpleDb","Removing database:",e),mc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ct.hl)())return!1;if(Vi.N())return!0;const e=(0,Ct.z$)(),t=Vi.D(e),r=0<t&&t<10,i=Vi.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,De.Z)(function*(){return t.db||(Et("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new Sm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new yt(Je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new yt(Je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Sm(e,d))},s.onupgradeneeded=l=>{Et("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Et("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,De.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.F(e);const p=$v.open(s.db,e,l?"readonly":"readwrite",r),v=i(p).next(E=>(p.V(),E)).catch(E=>(p.abort(E),Ye.reject(E))).toPromise();return v.catch(()=>{}),yield p.v,v}catch(p){const v=p,E="FirebaseError"!==v.name&&d<3;if(Et("SimpleDb","Transaction failed with error:",v.message,"Retrying:",E),s.close(),!E)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class CT{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return mc(this.q.delete())}}class Sm extends yt{constructor(e,t){super(Je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gc(n){return"IndexedDbTransactionError"===n.name}class nN{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Et("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Et("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mc(r)}add(e){return Et("SimpleDb","ADD",this.store.name,e,e),mc(this.store.add(e))}get(e){return mc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Et("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Et("SimpleDb","DELETE",this.store.name,e),mc(this.store.delete(e))}count(){return Et("SimpleDb","COUNT",this.store.name),mc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(l,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new Ye((s,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ye((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Et("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,l,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new Ye((r,i)=>{t.onerror=s=>{const l=ST(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}H(e,t){const r=[];return new Ye((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const p=new CT(d),v=t(d.primaryKey,d.value,p);if(v instanceof Ye){const E=v.catch(D=>(p.done(),Ye.reject(D)));r.push(E)}p.isDone?i():null===p.G?d.continue():d.continue(p.G)}}).next(()=>Ye.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function mc(n){return new Ye((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ST(r.target.error);t(i)}})}let MS=!1;function ST(n){const e=Vi.D((0,Ct.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new yt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return MS||(MS=!0,setTimeout(()=>{throw r},0)),r}}return n}class q1{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Et("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,De.Z)(function*(){t.task=null;try{Et("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){gc(r)?Et("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield pc(r)}yield t.nt(6e4)}))}}class xT{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,De.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return Ye.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Et("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(d=>{i-=d,r.add(l)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,s)).next(d=>(Et("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=AS(s);ET(l,r)>0&&(r=l)}),new Js(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Do=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class z1{constructor(e,t,r,i,s,l,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Na{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Na("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Na&&e.projectId===this.projectId&&e.database===this.database}}function Hv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function W1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qd(n){return null==n}function Gv(n){return 0===n&&1/n==-1/0}function IT(n){return"number"==typeof n&&Number.isInteger(n)&&!Gv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Bi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Bi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Bi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bi.EMPTY_BYTE_STRING=new Bi("");const RS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ml(n){if(Yt(!!n),"string"==typeof n){let e=0;const t=RS.exec(n);if(Yt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function yl(n){return"string"==typeof n?Bi.fromBase64String(n):Bi.fromUint8Array(n)}function Qf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Xf(n){const e=n.mapValue.fields.__previous_value__;return Qf(e)?Xf(e):e}function xm(n){const e=ml(n.mapValue.fields.__local_write_time__.timestampValue);return new Wr(e.seconds,e.nanos)}const vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Im={nullValue:"NULL_VALUE"};function Xd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qf(n)?4:NS(n)?9007199254740991:10:Lt()}function _l(n,e){if(n===e)return!0;const t=Xd(n);if(t!==Xd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xm(n).isEqual(xm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=ml(r.timestampValue),l=ml(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,yl(n.bytesValue).isEqual(yl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ir(r.geoPointValue.latitude)===ir(i.geoPointValue.latitude)&&ir(r.geoPointValue.longitude)===ir(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ir(r.integerValue)===ir(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=ir(r.doubleValue),l=ir(i.doubleValue);return s===l?Gv(s)===Gv(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return Kf(n.arrayValue.values||[],e.arrayValue.values||[],_l);case 10:return function(r,i){const s=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Hv(s)!==Hv(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===l[d]||!_l(s[d],l[d])))return!1;return!0}(n,e);default:return Lt()}var i}function lu(n,e){return void 0!==(n.values||[]).find(t=>_l(t,e))}function yc(n,e){if(n===e)return 0;const t=Xd(n),r=Xd(e);if(t!==r)return vn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return vn(n.booleanValue,e.booleanValue);case 2:return function(i,s){const l=ir(i.integerValue||i.doubleValue),d=ir(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return K1(n.timestampValue,e.timestampValue);case 4:return K1(xm(n),xm(e));case 5:return vn(n.stringValue,e.stringValue);case 6:return function(i,s){const l=yl(i),d=yl(s);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),d=s.split("/");for(let p=0;p<l.length&&p<d.length;p++){const v=vn(l[p],d[p]);if(0!==v)return v}return vn(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const l=vn(ir(i.latitude),ir(s.latitude));return 0!==l?l:vn(ir(i.longitude),ir(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const l=i.values||[],d=s.values||[];for(let p=0;p<l.length&&p<d.length;++p){const v=yc(l[p],d[p]);if(v)return v}return vn(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===vl.mapValue&&s===vl.mapValue)return 0;if(i===vl.mapValue)return 1;if(s===vl.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),p=s.fields||{},v=Object.keys(p);d.sort(),v.sort();for(let E=0;E<d.length&&E<v.length;++E){const D=vn(d[E],v[E]);if(0!==D)return D;const j=yc(l[d[E]],p[v[E]]);if(0!==j)return j}return vn(d.length,v.length)}(n.mapValue,e.mapValue);default:throw Lt()}}function K1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return vn(n,e);const t=ml(n),r=ml(e),i=vn(t.seconds,r.seconds);return 0!==i?i:vn(t.nanos,r.nanos)}function Jf(n){return OS(n)}function OS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ml(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?yl(n.bytesValue).toBase64():"referenceValue"in n?It.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const l of r.values||[])s?s=!1:i+=",",i+=OS(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",l=!0;for(const d of i)l?l=!1:s+=",",s+=`${d}:${OS(r.fields[d])}`;return s+"}"}(n.mapValue):Lt();var e}function Jd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function DT(n){return!!n&&"integerValue"in n}function Dm(n){return!!n&&"arrayValue"in n}function AT(n){return!!n&&"nullValue"in n}function qv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zv(n){return!!n&&"mapValue"in n}function eh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=eh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function NS(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Z1(n){return"nullValue"in n?Im:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Jd(Na.empty(),It.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Lt()}function Y1(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Jd(Na.empty(),It.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?vl:Lt()}function LS(n,e){const t=yc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function FS(n,e){const t=yc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class vc{constructor(e,t){this.position=e,this.inclusive=t}}function Am(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?It.comparator(It.fromName(l.referenceValue),t.key):yc(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function _c(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_l(n.position[t],e.position[t]))return!1;return!0}class Q1{}class Dn extends Q1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new sa(e,t,r):"array-contains"===t?new rp(e,r):"in"===t?new nh(e,r):"not-in"===t?new ip(e,r):"array-contains-any"===t?new sp(e,r):new Dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new kT(e,r):new np(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yc(t,this.value)):null!==t&&Xd(this.value)===Xd(t)&&this.matchesComparison(yc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class hr extends Q1{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new hr(e,t)}matches(e){return ep(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ep(n){return"and"===n.op}function km(n){return"or"===n.op}function jS(n){return La(n)&&ep(n)}function La(n){for(const e of n.filters)if(e instanceof hr)return!1;return!0}function tp(n){if(n instanceof Dn)return n.field.canonicalString()+n.op.toString()+Jf(n.value);{const e=n.filters.map(t=>tp(t)).join(",");return`${n.op}(${e})`}}function vs(n,e){return n instanceof Dn?(t=n,(r=e)instanceof Dn&&t.op===r.op&&t.field.isEqual(r.field)&&_l(t.value,r.value)):n instanceof hr?function(t,r){return r instanceof hr&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,l)=>i&&vs(s,r.filters[l]),!0)}(n,e):void Lt();var t,r}function bc(n,e){const t=n.filters.concat(e);return hr.create(t,n.op)}function Mm(n){return n instanceof Dn?`${(e=n).field.canonicalString()} ${e.op} ${Jf(e.value)}`:n instanceof hr?function(e){return e.op.toString()+" {"+e.getFilters().map(Mm).join(" ,")+"}"}(n):"Filter";var e}class sa extends Dn{constructor(e,t,r){super(e,t,r),this.key=It.fromName(r.referenceValue)}matches(e){const t=It.comparator(e.key,this.key);return this.matchesComparison(t)}}class kT extends Dn{constructor(e,t){super(e,"in",t),this.keys=th(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class np extends Dn{constructor(e,t){super(e,"not-in",t),this.keys=th(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function th(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>It.fromName(r.referenceValue))}class rp extends Dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dm(t)&&lu(t.arrayValue,this.value)}}class nh extends Dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lu(this.value.arrayValue,t)}}class ip extends Dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!lu(this.value.arrayValue,t)}}class sp extends Dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lu(this.value.arrayValue,r))}}class Fa{constructor(e,t="asc"){this.field=e,this.dir=t}}function op(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yr{constructor(e,t){this.comparator=e,this.root=t||is.EMPTY}insert(e,t){return new yr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,is.BLACK,null,null))}remove(e){return new yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,is.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pm(this.root,e,this.comparator,!0)}}class Pm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class is{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??is.RED,this.left=i??is.EMPTY,this.right=s??is.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new is(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return is.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return is.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Lt();const e=this.left.check();if(e!==this.right.check())throw Lt();return e+(this.isRed()?0:1)}}is.EMPTY=null,is.RED=!0,is.BLACK=!1,is.EMPTY=new class{constructor(){this.size=0}get key(){throw Lt()}get value(){throw Lt()}get color(){throw Lt()}get left(){throw Lt()}get right(){throw Lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new is(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(e){this.comparator=e,this.data=new yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new MT(this.data.getIterator())}getIteratorFrom(e){return new MT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fr(this.comparator);return t.data=e,t}}class MT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rh(n){return n.hasNext()?n.getNext():void 0}class eo{constructor(e){this.fields=e,e.sort(ui.comparator)}static empty(){return new eo([])}unionWith(e){let t=new fr(ui.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new eo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eh(t)}setAll(e){let t=ui.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=eh(l):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());zv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _l(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){gl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ss(eh(this.value))}}function PT(n){const e=[];return gl(n.fields,(t,r)=>{const i=new ui([t]);if(zv(r)){const s=PT(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new eo(e)}class Ar{constructor(e,t,r,i,s,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Ar(e,0,Jt.min(),Jt.min(),Jt.min(),ss.empty(),0)}static newFoundDocument(e,t,r,i){return new Ar(e,1,t,Jt.min(),r,i,0)}static newNoDocument(e,t){return new Ar(e,2,t,Jt.min(),Jt.min(),ss.empty(),0)}static newUnknownDocument(e,t){return new Ar(e,3,t,Jt.min(),Jt.min(),ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class X1{constructor(e,t=null,r=[],i=[],s=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=d,this.ft=null}}function RT(n,e=null,t=[],r=[],i=null,s=null,l=null){return new X1(n,e,t,r,i,s,l)}function Tc(n){const e=Nt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>tp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Qd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Jf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Jf(r)).join(",")),e.ft=t}return e.ft}function Rm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!op(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vs(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_c(n.startAt,e.startAt)&&_c(n.endAt,e.endAt)}function Om(n){return It.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ap(n,e){return n.filters.filter(t=>t instanceof Dn&&t.field.isEqual(e))}function Wv(n,e,t){let r=Im,i=!0;for(const s of ap(n,e)){let l=Im,d=!0;switch(s.op){case"<":case"<=":l=Z1(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=Im}LS({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];LS({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function US(n,e,t){let r=vl,i=!0;for(const s of ap(n,e)){let l=vl,d=!0;switch(s.op){case">=":case">":l=Y1(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=vl}FS({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];FS({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class oa{constructor(e,t=null,r=[],i=[],s=null,l="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=p,this.dt=null,this._t=null}}function Nm(n,e,t,r,i,s,l,d){return new oa(n,e,t,r,i,s,l,d)}function Ec(n){return new oa(n)}function VS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function lp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ih(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Kv(n){return null!==n.collectionGroup}function wc(n){const e=Nt(n);if(null===e.dt){e.dt=[];const t=ih(e),r=lp(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Fa(t)),e.dt.push(new Fa(ui.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Fa(ui.keyField(),s))}}}return e.dt}function _s(n){const e=Nt(n);if(!e._t)if("F"===e.limitType)e._t=RT(e.path,e.collectionGroup,wc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of wc(e))t.push(new Fa(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new vc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new vc(e.startAt.position,e.startAt.inclusive):null;e._t=RT(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Zv(n,e){e.getFirstInequalityField(),ih(n);const t=n.filters.concat([e]);return new oa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Lm(n,e,t){return new oa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sh(n,e){return Rm(_s(n),_s(e))&&n.limitType===e.limitType}function OT(n){return`${Tc(_s(n))}|lt:${n.limitType}`}function NT(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Mm(r)).join(", ")}]`),Qd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Jf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Jf(r)).join(",")),`Target(${t})`}(_s(n))}; limitType=${n.limitType})`}function Yv(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):It.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of wc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,l){const d=Am(i,s,l);return i.inclusive?d<=0:d<0}(t.startAt,wc(t),r)||t.endAt&&!function(i,s,l){const d=Am(i,s,l);return i.inclusive?d>=0:d>0}(t.endAt,wc(t),r)));var t,r}function LT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FT(n){return(e,t)=>{let r=!1;for(const i of wc(n)){const s=BS(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function BS(n,e,t){const r=n.field.isKeyField()?It.comparator(e.key,t.key):function(i,s,l){const d=s.data.field(i),p=l.data.field(i);return null!==d&&null!==p?yc(d,p):Lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Lt()}}function $S(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gv(e)?"-0":e}}function jT(n){return{integerValue:""+n}}function UT(n,e){return IT(e)?jT(e):$S(n,e)}class up{constructor(){this._=void 0}}function Qv(n,e,t){return n instanceof oh?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Cc?BT(n,e):n instanceof Sc?$T(n,e):function(r,i){const s=VT(r,i),l=J1(s)+J1(r.gt);return DT(s)&&DT(r.gt)?jT(l):$S(r.yt,l)}(n,e)}function HS(n,e,t){return n instanceof Cc?BT(n,e):n instanceof Sc?$T(n,e):t}function VT(n,e){return n instanceof ah?DT(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class oh extends up{}class Cc extends up{constructor(e){super(),this.elements=e}}function BT(n,e){const t=GS(e);for(const r of n.elements)t.some(i=>_l(i,r))||t.push(r);return{arrayValue:{values:t}}}class Sc extends up{constructor(e){super(),this.elements=e}}function $T(n,e){let t=GS(e);for(const r of n.elements)t=t.filter(i=>!_l(i,r));return{arrayValue:{values:t}}}class ah extends up{constructor(e,t){super(),this.yt=e,this.gt=t}}function J1(n){return ir(n.integerValue||n.doubleValue)}function GS(n){return Dm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fm{constructor(e,t){this.field=e,this.transform=t}}class ek{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Xv{}function zS(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new lh(n.key,En.none()):new ja(n.key,n.data,En.none());{const t=n.data,r=ss.empty();let i=new fr(ui.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?r.delete(s):r.set(s,l),i=i.add(s)}return new uu(n.key,r,new eo(i.toArray()),En.none())}}function WS(n,e,t){n instanceof ja?function(r,i,s){const l=r.value.clone(),d=GT(r.fieldTransforms,i,s.transformResults);l.setAll(d),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof uu?function(r,i,s){if(!jm(r.precondition,i))return void i.convertToUnknownDocument(s.version);const l=GT(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(ZS(r)),d.setAll(l),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Um(n,e,t,r){return n instanceof ja?function(i,s,l,d){if(!jm(i.precondition,s))return l;const p=i.value.clone(),v=YS(i.fieldTransforms,d,s);return p.setAll(v),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof uu?function(i,s,l,d){if(!jm(i.precondition,s))return l;const p=YS(i.fieldTransforms,d,s),v=s.data;return v.setAll(ZS(i)),v.setAll(p),s.convertToFoundDocument(s.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(l=t,jm(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function KS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=VT(r.transform,i||null);null!=s&&(null===t&&(t=ss.empty()),t.set(r.field,s))}return t||null}function HT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Kf(t,r,(i,s)=>function qS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Cc&&r instanceof Cc||t instanceof Sc&&r instanceof Sc?Kf(t.elements,r.elements,_l):t instanceof ah&&r instanceof ah?_l(t.gt,r.gt):t instanceof oh&&r instanceof oh);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ja extends Xv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class uu extends Xv{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function GT(n,e,t){const r=new Map;Yt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,d=e.data.field(s.field);r.set(s.field,HS(l,d,t[i]))}return r}function YS(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,Qv(s,l,e))}return r}class lh extends Xv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QS extends Xv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qT{constructor(e){this.count=e}}var ci,Tn;function XS(n){switch(n){default:return Lt();case Je.CANCELLED:case Je.UNKNOWN:case Je.DEADLINE_EXCEEDED:case Je.RESOURCE_EXHAUSTED:case Je.INTERNAL:case Je.UNAVAILABLE:case Je.UNAUTHENTICATED:return!1;case Je.INVALID_ARGUMENT:case Je.NOT_FOUND:case Je.ALREADY_EXISTS:case Je.PERMISSION_DENIED:case Je.FAILED_PRECONDITION:case Je.ABORTED:case Je.OUT_OF_RANGE:case Je.UNIMPLEMENTED:case Je.DATA_LOSS:return!0}}function JS(n){if(void 0===n)return li("GRPC error has no .code"),Je.UNKNOWN;switch(n){case ci.OK:return Je.OK;case ci.CANCELLED:return Je.CANCELLED;case ci.UNKNOWN:return Je.UNKNOWN;case ci.DEADLINE_EXCEEDED:return Je.DEADLINE_EXCEEDED;case ci.RESOURCE_EXHAUSTED:return Je.RESOURCE_EXHAUSTED;case ci.INTERNAL:return Je.INTERNAL;case ci.UNAVAILABLE:return Je.UNAVAILABLE;case ci.UNAUTHENTICATED:return Je.UNAUTHENTICATED;case ci.INVALID_ARGUMENT:return Je.INVALID_ARGUMENT;case ci.NOT_FOUND:return Je.NOT_FOUND;case ci.ALREADY_EXISTS:return Je.ALREADY_EXISTS;case ci.PERMISSION_DENIED:return Je.PERMISSION_DENIED;case ci.FAILED_PRECONDITION:return Je.FAILED_PRECONDITION;case ci.ABORTED:return Je.ABORTED;case ci.OUT_OF_RANGE:return Je.OUT_OF_RANGE;case ci.UNIMPLEMENTED:return Je.UNIMPLEMENTED;case ci.DATA_LOSS:return Je.DATA_LOSS;default:return Lt()}}(Tn=ci||(ci={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";class bs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return W1(this.inner)}size(){return this.innerSize}}const Ua=new yr(It.comparator);function Kr(){return Ua}const zT=new yr(It.comparator);function cp(...n){let e=zT;for(const t of n)e=e.insert(t.key,t);return e}function ex(n){let e=zT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bl(){return Vm()}function tx(){return Vm()}function Vm(){return new bs(n=>n.toString(),(n,e)=>n.isEqual(e))}const WT=new yr(It.comparator),Bm=new fr(It.comparator);function wn(...n){let e=Bm;for(const t of n)e=e.add(t);return e}const nx=new fr(vn);function Jv(){return nx}class dp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,hp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dp(Jt.min(),i,Jv(),Kr(),wn())}}class hp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hp(r,t,wn(),wn(),wn())}}class uh{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class rx{constructor(e,t){this.targetId=e,this.Et=t}}class KT{constructor(e,t,r=Bi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class ZT{constructor(){this.At=0,this.Rt=e_(),this.bt=Bi.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=wn(),t=wn(),r=wn();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Lt()}}),new hp(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=e_()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class YT{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Kr(),this.qt=$m(),this.Ut=new fr(vn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:Lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const s=i.target;if(Om(s))if(0===r){const l=new It(s.path);this.Qt(t,l,Ar.newNoDocument(l,Jt.min()))}else Yt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((s,l)=>{const d=this.Yt(l);if(d){if(s.current&&Om(d.target)){const p=new It(d.target.path);null!==this.Lt.get(p)||this.te(l,p)||this.Qt(l,p,Ar.newNoDocument(p,e))}s.St&&(t.set(l,s.Ct()),s.xt())}});let r=wn();this.qt.forEach((s,l)=>{let d=!0;l.forEachWhile(p=>{const v=this.Yt(p);return!v||2===v.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.Lt.forEach((s,l)=>l.setReadTime(e));const i=new dp(e,t,this.Ut,this.Lt,r);return this.Lt=Kr(),this.qt=$m(),this.Ut=new fr(vn),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new ZT,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new fr(vn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Et("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new ZT),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function $m(){return new yr(It.comparator)}function e_(){return new yr(It.comparator)}const ix={asc:"ASCENDING",desc:"DESCENDING"},sx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ox={and:"AND",or:"OR"};class ax{constructor(e,t){this.databaseId=e,this.wt=t}}function ch(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QT(n,e){return n.wt?e.toBase64():e.toUint8Array()}function lx(n,e){return ch(n,e.toTimestamp())}function wi(n){return Yt(!!n),Jt.fromTimestamp(function(e){const t=ml(e);return new Wr(t.seconds,t.nanos)}(n))}function XT(n,e){return(t=n,new qn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ux(n){const e=qn.fromString(n);return Yt(sE(e)),e}function Hm(n,e){return XT(n.databaseId,e.path)}function Tl(n,e){const t=ux(e);if(t.get(1)!==n.databaseId.projectId)throw new yt(Je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new yt(Je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new It(dx(t))}function JT(n,e){return XT(n.databaseId,e)}function cx(n){const e=ux(n);return 4===e.length?qn.emptyPath():dx(e)}function Gm(n){return new qn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dx(n){return Yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function hx(n,e,t){return{name:Hm(n,e),fields:t.value.mapValue.fields}}function fx(n,e,t){const r=Tl(n,e.name),i=wi(e.updateTime),s=e.createTime?wi(e.createTime):Jt.min(),l=new ss({mapValue:{fields:e.fields}}),d=Ar.newFoundDocument(r,i,s,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function qm(n,e){let t;if(e instanceof ja)t={update:hx(n,e.key,e.value)};else if(e instanceof lh)t={delete:Hm(n,e.key)};else if(e instanceof uu)t={update:hx(n,e.key,e.data),updateMask:_x(e.fieldMask)};else{if(!(e instanceof QS))return Lt();t={verify:Hm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const l=s.transform;if(l instanceof oh)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Cc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Sc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ah)return{fieldPath:s.field.canonicalString(),increment:l.gt};throw Lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:lx(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Lt()),t;var i}function eE(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?En.updateTime(wi(i.updateTime)):void 0!==i.exists?En.exists(i.exists):En.none():En.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,l){let d=null;"setToServerValue"in l?(Yt("REQUEST_TIME"===l.setToServerValue),d=new oh):"appendMissingElements"in l?d=new Cc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Sc(l.removeAllFromArray.values||[]):"increment"in l?d=new ah(s,l.increment):Lt();const p=ui.fromServerFormat(l.fieldPath);return new Fm(p,d)}(n,i)):[];var i;if(e.update){const i=Tl(n,e.update.name),s=new ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new eo((e.updateMask.fieldPaths||[]).map(v=>ui.fromServerFormat(v)));return new uu(i,s,l,t,r)}return new ja(i,s,t,r)}if(e.delete){const i=Tl(n,e.delete);return new lh(i,t)}if(e.verify){const i=Tl(n,e.verify);return new QS(i,t)}return Lt()}function px(n,e){return{documents:[JT(n,e.path)]}}function tE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=JT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=JT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0!==p.length)return iE(hr.create(p,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(v=>{return{field:dh((E=v).field),direction:mx(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(v=e.limit,n.wt||Qd(v)?v:{value:v});var v,d,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function nE(n){let e=cx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Yt(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=function(E){const D=rE(E);return D instanceof hr&&jS(D)?D.getFilters():[D]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(E=>{return new Fa(hh((D=E).field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(E){let D;return D="object"==typeof E?E.value:E,Qd(D)?null:D}(t.limit));let p=null;var E;t.startAt&&(p=new vc((E=t.startAt).values||[],!!E.before));let v=null;return t.endAt&&(v=function(E){return new vc(E.values||[],!E.before)}(t.endAt)),Nm(e,i,l,s,d,"F",p,v)}function rE(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=hh(e.unaryFilter.field);return Dn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=hh(e.unaryFilter.field);return Dn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=hh(e.unaryFilter.field);return Dn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=hh(e.unaryFilter.field);return Dn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Lt()}}(n):void 0!==n.fieldFilter?Dn.create(hh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return hr.create(e.compositeFilter.filters.map(t=>rE(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Lt()}}(e.compositeFilter.op))}(n):Lt();var e}function mx(n){return ix[n]}function yx(n){return sx[n]}function vx(n){return ox[n]}function dh(n){return{fieldPath:n.canonicalString()}}function hh(n){return ui.fromServerFormat(n.fieldPath)}function iE(n){return n instanceof Dn?function(e){if("=="===e.op){if(qv(e.value))return{unaryFilter:{field:dh(e.field),op:"IS_NAN"}};if(AT(e.value))return{unaryFilter:{field:dh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qv(e.value))return{unaryFilter:{field:dh(e.field),op:"IS_NOT_NAN"}};if(AT(e.value))return{unaryFilter:{field:dh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dh(e.field),op:yx(e.op),value:e.value}}}(n):n instanceof hr?function(e){const t=e.getFilters().map(r=>iE(r));return 1===t.length?t[0]:{compositeFilter:{op:vx(e.op),filters:t}}}(n):Lt()}function _x(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bx(e)),e=ik(n.get(t),e);return bx(e)}function ik(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function bx(n){return n+"\x01\x01"}function Us(n){const e=n.length;if(Yt(e>=2),2===e)return Yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&Lt(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:Lt()}s=l+2}return new qn(r)}const sk=["userId","batchId"];function fp(n,e){return[n,Ci(e)]}function ok(n,e,t){return[n,Ci(e),t]}const Tx={},Ex=["prefixPath","collectionGroup","readTime","documentId"],rN=["prefixPath","collectionGroup","documentId"],ln=["collectionGroup","readTime","prefixPath","documentId"],ak=["canonicalId","targetId"],lk=["targetId","path"],uk=["path","targetId"],pp=["collectionId","parent"],ck=["indexId","uid"],t_=["uid","sequenceNumber"],n_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],di=["indexId","uid","orderedDocumentKey"],iN=["userId","collectionPath","documentId"],wx=["userId","collectionPath","largestBatchId"],Cx=["userId","collectionGroup","largestBatchId"],Sx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xx=[...Sx,"documentOverlays"],oE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aE=oE,Ix=[...aE,"indexConfiguration","indexState","indexEntries"];class lE extends kS{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function os(n,e){const t=Nt(n);return Vi.M(t.se,e)}class uE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&WS(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Um(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Um(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tx();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let d=this.applyToLocalView(l,s.mutatedFields);d=t.has(i.key)?null:d;const p=zS(l,d);null!==p&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(Jt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),wn())}isEqual(e){return this.batchId===e.batchId&&Kf(this.mutations,e.mutations,(t,r)=>HT(t,r))&&Kf(this.baseMutations,e.baseMutations,(t,r)=>HT(t,r))}}class fh{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Yt(e.mutations.length===r.length);let i=WT;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new fh(e,t,r,i)}}class cE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xc{constructor(e,t,r,i,s=Jt.min(),l=Jt.min(),d=Bi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new xc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Dx{constructor(e){this.ie=e}}function dE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:zm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Hm(i=n.ie,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:ch(i,s.version.toTimestamp()),createTime:ch(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ic(e.version)};else{if(!e.isUnknownDocument())return Lt();r.unknownDocument={path:t.path.toArray(),version:Ic(e.version)}}var i,s;return r}function zm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ic(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ph(n){const e=new Wr(n.seconds,n.nanoseconds);return Jt.fromTimestamp(e)}function Va(n,e){const t=(e.baseMutations||[]).map(s=>eE(n.ie,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>eE(n.ie,s)),i=Wr.fromMillis(e.localWriteTimeMs);return new uE(e.batchId,i,t,r)}function cu(n){const e=ph(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ph(n.lastLimboFreeSnapshotVersion):Jt.min();let r;var i;return void 0!==n.query.documents?(Yt(1===(i=n.query).documents.length),r=_s(Ec(cx(i.documents[0])))):r=_s(nE(n.query)),new xc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Bi.fromBase64String(n.resumeToken))}function Ax(n,e){const t=Ic(e.snapshotVersion),r=Ic(e.lastLimboFreeSnapshotVersion);let i;i=Om(e.target)?px(n.ie,e.target):tE(n.ie,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function hE(n){const e=nE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Lm(e,e.limit,"L"):e}function fE(n,e){return new cE(e.largestBatchId,eE(n.ie,e.overlayMutation))}function pE(n,e){const t=e.path.lastSegment();return[n,Ci(e.path.popLast()),t]}function gE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ic(r.readTime),documentKey:Ci(r.documentKey.path),largestBatchId:r.largestBatchId}}class kx{getBundleMetadata(e,t){return Mx(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ph(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Mx(e).put({bundleId:(r=t).id,createTime:Ic(wi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return mE(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:hE(i.bundledQuery),readTime:ph(i.readTime)};var i})}saveNamedQuery(e,t){return mE(e).put({name:(r=t).name,readTime:Ic(wi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Mx(n){return os(n,"bundles")}function mE(n){return os(n,"namedQueries")}class i_{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new i_(e,t.uid||"")}getOverlay(e,t){return Wm(e).get(pE(this.userId,t)).next(r=>r?fE(this.yt,r):null)}getOverlays(e,t){const r=bl();return Ye.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const d=new cE(t,l);i.push(this.oe(e,d))}),Ye.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ci(l.getCollectionPath())));const s=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(Wm(e).Y("collectionPathOverlayIndex",d))}),Ye.waitFor(s)}getOverlaysForCollection(e,t,r){const i=bl(),s=Ci(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Wm(e).W("collectionPathOverlayIndex",l).next(d=>{for(const p of d){const v=fE(this.yt,p);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=bl();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wm(e).Z({index:"collectionGroupOverlayIndex",range:d},(p,v,E)=>{const D=fE(this.yt,v);s.size()<i||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):E.done()}).next(()=>s)}oe(e,t){return Wm(e).put(function(r,i,s){const[l,d,p]=pE(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:qm(r.ie,s.mutation)}}(this.yt,this.userId,t))}}function Wm(n){return os(n,"documentOverlays")}class gp{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ir(e.integerValue));else if("doubleValue"in e){const r=ir(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Gv(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(yl(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?NS(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Lt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),It.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function sN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function dk(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=sN(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}gp.Ie=new gp;class oN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=dk(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=dk(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Px{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class s_{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Km{constructor(){this.$e=new oN,this.Be=new Px(this.$e),this.Le=new s_(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class gh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gh(this.indexId,this.documentKey,this.arrayValue,r)}}function du(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=mp(n.arrayValue,e.arrayValue),0!==t?t:(t=mp(n.directionalValue,e.directionalValue),0!==t?t:It.comparator(n.documentKey,e.documentKey)))}function mp(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hk{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){Yt(e.collectionGroup===this.collectionId);const t=TT(e);if(void 0!==t&&!this.We(t))return!1;const r=Zf(e);let i=0,s=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const l=r[i];if(!this.ze(this.Qe,l)||!this.He(this.Ke[s++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(s>=this.Ke.length||!this.He(this.Ke[s++],l))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Rx(n){var e,t;if(Yt(n instanceof Dn||n instanceof hr),n instanceof Dn){if(n instanceof nh){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Dn.create(n.field,"==",s)))||[];return hr.create(i,"or")}return n}const r=n.filters.map(i=>Rx(i));return hr.create(r,n.op)}function fk(n){if(0===n.getFilters().length)return[];const e=bE(Rx(n));return Yt(_E(e)),yE(e)||vE(e)?[e]:e.getFilters()}function yE(n){return n instanceof Dn}function vE(n){return n instanceof hr&&jS(n)}function _E(n){return yE(n)||vE(n)||function(e){if(e instanceof hr&&km(e)){for(const t of e.getFilters())if(!yE(t)&&!vE(t))return!1;return!0}return!1}(n)}function bE(n){if(Yt(n instanceof Dn||n instanceof hr),n instanceof Dn)return n;if(1===n.filters.length)return bE(n.filters[0]);const e=n.filters.map(r=>bE(r));let t=hr.create(e,n.op);return t=o_(t),_E(t)?t:(Yt(t instanceof hr),Yt(ep(t)),Yt(t.filters.length>1),t.filters.reduce((r,i)=>TE(r,i)))}function TE(n,e){let t;return Yt(n instanceof Dn||n instanceof hr),Yt(e instanceof Dn||e instanceof hr),t=n instanceof Dn?e instanceof Dn?hr.create([n,e],"and"):yp(n,e):e instanceof Dn?yp(e,n):function(r,i){if(Yt(r.filters.length>0&&i.filters.length>0),ep(r)&&ep(i))return bc(r,i.getFilters());const s=km(r)?r:i,l=km(r)?i:r,d=s.filters.map(p=>TE(p,l));return hr.create(d,"or")}(n,e),o_(t)}function yp(n,e){if(ep(e))return bc(e,n.getFilters());{const t=e.filters.map(r=>TE(n,r));return hr.create(t,"or")}}function o_(n){if(Yt(n instanceof Dn||n instanceof hr),n instanceof Dn)return n;const e=n.getFilters();if(1===e.length)return o_(e[0]);if(La(n))return n;const t=e.map(i=>o_(i)),r=[];return t.forEach(i=>{i instanceof Dn?r.push(i):i instanceof hr&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:hr.create(r,n.op)}class Ox{constructor(){this.Je=new EE}addToCollectionParentIndex(e,t){return this.Je.add(t),Ye.resolve()}getCollectionParents(e,t){return Ye.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Ye.resolve()}deleteFieldIndex(e,t){return Ye.resolve()}getDocumentsMatchingTarget(e,t){return Ye.resolve(null)}getIndexType(e,t){return Ye.resolve(0)}getFieldIndexes(e,t){return Ye.resolve([])}getNextCollectionGroupToUpdate(e){return Ye.resolve(null)}getMinOffset(e,t){return Ye.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,t){return Ye.resolve(Js.min())}updateCollectionGroup(e,t,r){return Ye.resolve()}updateIndexEntries(e,t){return Ye.resolve()}}class EE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new fr(qn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fr(qn.comparator)).toArray()}}const Zm=new Uint8Array(0);class pk{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new EE,this.Xe=new bs(r=>Tc(r),(r,i)=>Rm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const s={collectionId:r,parent:Ci(i)};return wE(e).put(s)}return Ye.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[H1(t),""],!1,!0);return wE(e).W(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(Us(l.parent))}return r})}addFieldIndex(e,t){const r=vp(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const s=r.add(i);if(t.indexState){const l=Qm(e);return s.next(d=>{l.put(gE(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=vp(e),i=Qm(e),s=Ym(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ym(e);let i=!0;const s=new Map;return Ye.forEach(this.Ze(t),l=>this.tn(e,l).next(d=>{i&&(i=!!d),s.set(l,d)})).next(()=>{if(i){let l=wn();const d=[];return Ye.forEach(s,(p,v)=>{var E;Et("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Qe=>`${Qe.fieldPath}:${Qe.kind}`).join(",")}`} to execute ${Tc(t)}`);const D=function(Qe,Le){const Ae=TT(Le);if(void 0===Ae)return null;for(const ct of ap(Qe,Ae.fieldPath))switch(ct.op){case"array-contains-any":return ct.value.arrayValue.values||[];case"array-contains":return[ct.value]}return null}(v,p),j=function(Qe,Le){const Ae=new Map;for(const ct of Zf(Le))for(const kt of ap(Qe,ct.fieldPath))switch(kt.op){case"==":case"in":Ae.set(ct.fieldPath.canonicalString(),kt.value);break;case"not-in":case"!=":return Ae.set(ct.fieldPath.canonicalString(),kt.value),Array.from(Ae.values())}return null}(v,p),F=function(Qe,Le){const Ae=[];let ct=!0;for(const kt of Zf(Le)){const _n=0===kt.kind?Wv(Qe,kt.fieldPath,Qe.startAt):US(Qe,kt.fieldPath,Qe.startAt);Ae.push(_n.value),ct&&(ct=_n.inclusive)}return new vc(Ae,ct)}(v,p),Q=function(Qe,Le){const Ae=[];let ct=!0;for(const kt of Zf(Le)){const _n=0===kt.kind?US(Qe,kt.fieldPath,Qe.endAt):Wv(Qe,kt.fieldPath,Qe.endAt);Ae.push(_n.value),ct&&(ct=_n.inclusive)}return new vc(Ae,ct)}(v,p),ne=this.en(p,v,F),ue=this.en(p,v,Q),Ve=this.nn(p,v,j),We=this.sn(p.indexId,D,ne,F.inclusive,ue,Q.inclusive,Ve);return Ye.forEach(We,Qe=>r.J(Qe,t.limit).next(Le=>{Le.forEach(Ae=>{const ct=It.fromSegments(Ae.documentKey);l.has(ct)||(l=l.add(ct),d.push(ct))})}))}).next(()=>d)}return Ye.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:fk(hr.create(e.filters,"and")).map(r=>RT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,s,l,d){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),v=p/(null!=t?t.length:1),E=[];for(let D=0;D<p;++D){const j=t?this.rn(t[D/v]):Zm,F=this.on(e,j,r[D%v],i),Q=this.un(e,j,s[D%v],l),ne=d.map(ue=>this.on(e,j,ue,!0));E.push(...this.createRange(F,Q,ne))}return E}on(e,t,r,i){const s=new gh(e,It.empty(),t,r);return i?s:s.Ue()}un(e,t,r,i){const s=new gh(e,It.empty(),t,r);return i?s.Ue():s}tn(e,t){const r=new hk(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const d of s)r.je(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return Ye.forEach(i,s=>this.tn(e,s).next(l=>{l?0!==r&&l.fields.length<function(d){let p=new fr(ui.comparator),v=!1;for(const E of d.filters)for(const D of E.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?v=!0:p=p.add(D.field));for(const E of d.orderBy)E.field.isKeyField()||(p=p.add(E.field));return p.size+(v?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new Km;for(const i of Zf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.qe(i.kind);gp.Ie.ue(s,l)}return r.Fe()}rn(e){const t=new Km;return gp.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Km;return gp.Ie.ue(Jd(this.databaseId,t),r.qe(function(i){const s=Zf(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new Km);let s=0;for(const l of Zf(e)){const d=r[s++];for(const p of i)if(this.hn(t,l.fieldPath)&&Dm(d))i=this.ln(i,l,d);else{const v=p.qe(l.kind);gp.Ie.ue(d,v)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const d of i){const p=new Km;p.seed(d.Fe()),gp.Ie.ue(l,p.qe(t.kind)),s.push(p)}return s}hn(e,t){return!!e.filters.find(r=>r instanceof Dn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=vp(e),i=Qm(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const l=[];return Ye.forEach(s,d=>i.get([d.indexId,this.uid]).next(p=>{l.push(function(v,E){const D=E?new Cm(E.sequenceNumber,new Js(ph(E.readTime),new It(Us(E.documentKey)),E.largestBatchId)):Cm.empty(),j=v.fields.map(([F,Q])=>new Yf(ui.fromServerFormat(F),Q));return new wm(v.indexId,v.collectionGroup,j,D)}(d,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:vn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=vp(e),s=Qm(e);return this.dn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>Ye.forEach(d,p=>s.put(gE(p.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return Ye.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?Ye.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),Ye.forEach(d,p=>this._n(e,i,p).next(v=>{const E=this.wn(s,p);return v.isEqual(E)?Ye.resolve():this.mn(e,s,p,v,E)}))))})}gn(e,t,r,i){return Ym(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return Ym(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=Ym(e);let s=new fr(du);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,d)=>{s=s.add(new gh(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}wn(e,t){let r=new fr(du);const i=this.cn(t,e);if(null==i)return r;const s=TT(t);if(null!=s){const l=e.data.field(s.fieldPath);if(Dm(l))for(const d of l.arrayValue.values||[])r=r.add(new gh(t.indexId,e.key,this.rn(d),i))}else r=r.add(new gh(t.indexId,e.key,Zm,i));return r}mn(e,t,r,i,s){Et("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,p,v,E,D){const j=d.getIterator(),F=p.getIterator();let Q=rh(j),ne=rh(F);for(;Q||ne;){let ue=!1,Ve=!1;if(Q&&ne){const We=v(Q,ne);We<0?Ve=!0:We>0&&(ue=!0)}else null!=Q?Ve=!0:ue=!0;ue?(E(ne),ne=rh(F)):Ve?(D(Q),Q=rh(j)):(Q=rh(j),ne=rh(F))}}(i,s,du,d=>{l.push(this.gn(e,t,r,d))},d=>{l.push(this.yn(e,t,r,d))}),Ye.waitFor(l)}dn(e){let t=1;return Qm(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>du(l,d)).filter((l,d,p)=>!d||0!==du(l,p[d-1]));const i=[];i.push(e);for(const l of r){const d=du(l,e),p=du(l,t);if(0===d)i[0]=e.Ue();else if(d>0&&p<0)i.push(l),i.push(l.Ue());else if(p>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2){if(this.pn(i[l],i[l+1]))return[];s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Zm,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Zm,[]]))}return s}pn(e,t){return du(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(CE)}getMinOffset(e,t){return Ye.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||Lt())).next(CE)}}function wE(n){return os(n,"collectionParents")}function Ym(n){return os(n,"indexEntries")}function vp(n){return os(n,"indexConfiguration")}function Qm(n){return os(n,"indexState")}function CE(n){Yt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;ET(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Js(e.readTime,e.documentKey,t)}const SE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class to{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new to(e,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Nx(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let d=0;const p=r.Z({range:l},(E,D,j)=>(d++,j.delete()));s.push(p.next(()=>{Yt(1===d)}));const v=[];for(const E of t.mutations){const D=ok(e,E.key.path,t.batchId);s.push(i.delete(D)),v.push(E.key)}return Ye.waitFor(s).next(()=>v)}function a_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Lt();e=n.noDocument}return JSON.stringify(e).length}to.DEFAULT_COLLECTION_PERCENTILE=10,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,to.DEFAULT=new to(41943040,to.DEFAULT_COLLECTION_PERCENTILE,to.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),to.DISABLED=new to(-1,0,0);class _p{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){Yt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new _p(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).Z({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=bp(e),l=hu(e);return l.add({}).next(d=>{Yt("number"==typeof d);const p=new uE(d,t,r,i),v=function(j,F,Q){const ne=Q.baseMutations.map(Ve=>qm(j.ie,Ve)),ue=Q.mutations.map(Ve=>qm(j.ie,Ve));return{userId:F,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:ne,mutations:ue}}(this.yt,this.userId,p),E=[];let D=new fr((j,F)=>vn(j.canonicalString(),F.canonicalString()));for(const j of i){const F=ok(this.userId,j.key.path,d);D=D.add(j.key.path.popLast()),E.push(l.put(v)),E.push(s.put(F,Tx))}return D.forEach(j=>{E.push(this.indexManager.addToCollectionParentIndex(e,j))}),e.addOnCommittedListener(()=>{this.In[d]=p.keys()}),Ye.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return hu(e).get(t).next(r=>r?(Yt(r.userId===this.userId),Va(this.yt,r)):null)}Tn(e,t){return this.In[t]?Ye.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return hu(e).Z({index:"userMutationsIndex",range:i},(l,d,p)=>{d.userId===this.userId&&(Yt(d.batchId>=r),s=Va(this.yt,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).W("userMutationsIndex",t).next(r=>r.map(i=>Va(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=fp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return bp(e).Z({range:i},(l,d,p)=>{const[v,E,D]=l,j=Us(E);if(v===this.userId&&t.path.isEqual(j))return hu(e).get(D).next(F=>{if(!F)throw Lt();Yt(F.userId===this.userId),s.push(Va(this.yt,F))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(vn);const i=[];return t.forEach(s=>{const l=fp(this.userId,s.path),d=IDBKeyRange.lowerBound(l),p=bp(e).Z({range:d},(v,E,D)=>{const[j,F,Q]=v,ne=Us(F);j===this.userId&&s.path.isEqual(ne)?r=r.add(Q):D.done()});i.push(p)}),Ye.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=fp(this.userId,r),l=IDBKeyRange.lowerBound(s);let d=new fr(vn);return bp(e).Z({range:l},(p,v,E)=>{const[D,j,F]=p,Q=Us(j);D===this.userId&&r.isPrefixOf(Q)?Q.length===i&&(d=d.add(F)):E.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(hu(e).get(s).next(l=>{if(null===l)throw Lt();Yt(l.userId===this.userId),r.push(Va(this.yt,l))}))}),Ye.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Nx(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Ye.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ye.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return bp(e).Z({range:r},(s,l,d)=>{if(s[0]===this.userId){const p=Us(s[1]);i.push(p)}else d.done()}).next(()=>{Yt(0===i.length)})})}containsKey(e,t){return Lx(e,this.userId,t)}Rn(e){return Fx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Lx(n,e,t){const r=fp(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return bp(n).Z({range:s,X:!0},(d,p,v)=>{const[E,D,j]=d;E===e&&D===i&&(l=!0),v.done()}).next(()=>l)}function hu(n){return os(n,"mutations")}function bp(n){return os(n,"documentMutations")}function Fx(n){return os(n,"mutationQueues")}class mh{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new mh(0)}static vn(){return new mh(-1)}}class gk{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new mh(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Jt.fromTimestamp(new Wr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Tp(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Yt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Tp(e).Z((l,d)=>{const p=cu(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>Ye.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Tp(e).Z((r,i)=>{const s=cu(i);t(s)})}Vn(e){return jx(e).get("targetGlobalKey").next(t=>(Yt(null!==t),t))}Sn(e,t){return jx(e).put("targetGlobalKey",t)}Dn(e,t){return Tp(e).put(Ax(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Tc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Tp(e).Z({range:i,index:"queryTargetsIndex"},(l,d,p)=>{const v=cu(d);Rm(t,v.target)&&(s=v,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Dc(e);return t.forEach(l=>{const d=Ci(l.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),Ye.waitFor(i)}removeMatchingKeys(e,t,r){const i=Dc(e);return Ye.forEach(t,s=>{const l=Ci(s.path);return Ye.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Dc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Dc(e);let s=wn();return i.Z({range:r,X:!0},(l,d,p)=>{const v=Us(l[1]),E=new It(v);s=s.add(E)}).next(()=>s)}containsKey(e,t){const r=Ci(t.path),i=IDBKeyRange.bound([r],[H1(r)],!1,!0);let s=0;return Dc(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,d],p,v)=>{0!==l&&(s++,v.done())}).next(()=>s>0)}ne(e,t){return Tp(e).get(t).next(r=>r?cu(r):null)}}function Tp(n){return os(n,"targets")}function jx(n){return os(n,"targetGlobal")}function Dc(n){return os(n,"targetDocuments")}function Ux([n,e],[t,r]){const i=vn(n,t);return 0===i?vn(e,r):i}class Vx{constructor(e){this.xn=e,this.buffer=new fr(Ux),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ux(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Bx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Et("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,De.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){gc(r)?Et("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield pc(r)}yield t.Fn(3e5)}))}}class mk{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ye.resolve(Do.at);const r=new Vx(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector","Garbage collection skipped; disabled"),Ye.resolve(SE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SE):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,s,l,d,p,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(v=Date.now(),pT()<=dr.in.DEBUG&&Et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-E}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(v-p)+`ms\nTotal Duration: ${v-E}ms`),Ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class yk{constructor(e,t){this.db=e,this.garbageCollector=new mk(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Xm(e,r)}removeReference(e,t,r){return Xm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Xm(e,t)}Gn(e,t){return function(r,i){let s=!1;return Fx(r).tt(l=>Lx(r,l,i).next(d=>(d&&(s=!0),Ye.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(l,d)=>{if(d<=t){const p=this.Gn(e,l).next(v=>{if(!v)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Jt.min()),Dc(e).delete([0,Ci(l.path)])))});i.push(p)}}).next(()=>Ye.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Xm(e,t)}Kn(e,t){const r=Dc(e);let i,s=Do.at;return r.Z({index:"documentTargetsIndex"},([l,d],{path:p,sequenceNumber:v})=>{0===l?(s!==Do.at&&t(new It(Us(i)),s),s=v,i=p):s=Do.at}).next(()=>{s!==Do.at&&t(new It(Us(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xm(n,e){return Dc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ci(e.path),sequenceNumber:r}));var r}class $x{constructor(){this.changes=new bs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vk{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ac(e).put(r)}removeEntry(e,t,r){return Ac(e).delete(function(i,s){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],zm(s),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Ar.newInvalidDocument(t);return Ac(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yh(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:Ar.newInvalidDocument(t)};return Ac(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yh(t))},(i,s)=>{r={document:this.jn(t,s),size:a_(s)}}).next(()=>r)}getEntries(e,t){let r=Kr();return this.zn(e,t,(i,s)=>{const l=this.jn(i,s);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Kr(),i=new yr(It.comparator);return this.zn(e,t,(s,l)=>{const d=this.jn(s,l);r=r.insert(s,d),i=i.insert(s,a_(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return Ye.resolve();let i=new fr(qx);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(yh(i.first()),yh(i.last())),l=i.getIterator();let d=l.getNext();return Ac(e).Z({index:"documentKeyIndex",range:s},(p,v,E)=>{const D=It.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&qx(d,D)<0;)r(d,null),d=l.getNext();d&&d.isEqual(D)&&(r(d,v),d=l.hasNext()?l.getNext():null),d?E.j(yh(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),zm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ac(e).W(IDBKeyRange.bound(i,s,!0)).next(l=>{let d=Kr();for(const p of l){const v=this.jn(It.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(v.key,v)}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Kr();const l=Gx(t,r),d=Gx(t,Js.max());return Ac(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(p,v,E)=>{const D=this.jn(It.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);s=s.insert(D.key,D),s.size===i&&E.done()}).next(()=>s)}newChangeBuffer(e){return new xE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return l_(e).get("remoteDocumentGlobalKey").next(t=>(Yt(!!t),t))}Qn(e,t){return l_(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function r_(n,e){let t;if(e.document)t=fx(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=It.fromSegments(e.noDocument.path),i=ph(e.noDocument.readTime);t=Ar.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Lt();{const r=It.fromSegments(e.unknownDocument.path),i=ph(e.unknownDocument.version);t=Ar.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Wr(r[0],r[1]);return Jt.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Jt.min()))return r}return Ar.newInvalidDocument(e)}}function Hx(n){return new vk(n)}class xE extends $x{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new bs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new fr((s,l)=>vn(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,d.readTime)),l.isValidDocument()){const p=dE(this.Yn.yt,l);i=i.add(s.path.popLast()),r+=a_(p)-d.size,t.push(this.Yn.addEntry(e,s,p))}else if(r-=d.size,this.trackRemovals){const p=dE(this.Yn.yt,l.convertToNoDocument(Jt.min()));t.push(this.Yn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),Ye.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,l)=>{this.Xn.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function l_(n){return os(n,"remoteDocumentGlobal")}function Ac(n){return os(n,"remoteDocumentsV14")}function yh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gx(n,e){const t=e.documentKey.path.toArray();return[n,zm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qx(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=vn(t[s],r[s]),i)return i;return i=vn(t.length,r.length),i||(i=vn(t[t.length-2],r[r.length-2]),i||vn(t[t.length-1],r[r.length-1]))}class IE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zx{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Um(r.mutation,i,eo.empty(),Wr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,wn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=wn()){const i=bl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=cp();return s.forEach((d,p)=>{l=l.insert(d,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=bl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,wn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let s=Kr();const l=Vm(),d=Vm();return t.forEach((p,v)=>{const E=r.get(v.key);i.has(v.key)&&(void 0===E||E.mutation instanceof uu)?s=s.insert(v.key,v):void 0!==E&&(l.set(v.key,E.mutation.getFieldMask()),Um(E.mutation,v,E.mutation.getFieldMask(),Wr.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((v,E)=>l.set(v,E)),t.forEach((v,E)=>{var D;return d.set(v,new IE(E,null!==(D=l.get(v))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Vm();let i=new yr((l,d)=>l-d),s=wn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(p=>{const v=t.get(p);if(null===v)return;let E=r.get(p)||eo.empty();E=d.applyToLocalView(v,E),r.set(p,E);const D=(i.get(d.batchId)||wn()).add(p);i=i.insert(d.batchId,D)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),v=p.key,E=p.value,D=tx();E.forEach(j=>{if(!s.has(j)){const F=zS(t.get(j),r.get(j));null!==F&&D.set(j,F),s=s.add(j)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,D))}return Ye.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return It.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Kv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Ye.resolve(bl());let d=-1,p=s;return l.next(v=>Ye.forEach(v,(E,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(E)?Ye.resolve():this.remoteDocumentCache.getEntry(e,E).next(j=>{p=p.insert(E,j)}))).next(()=>this.populateOverlays(e,v,s)).next(()=>this.computeViews(e,p,v,wn())).next(E=>({batchId:d,changes:ex(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new It(t)).next(r=>{let i=cp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=cp();return this.indexManager.getCollectionParents(e,i).next(l=>Ye.forEach(l,d=>{const p=(v=t,E=d.child(i),new oa(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,E;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(v=>{v.forEach((E,D)=>{s=s.insert(E,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((d,p)=>{const v=p.getKey();null===i.get(v)&&(i=i.insert(v,Ar.newInvalidDocument(v)))});let l=cp();return i.forEach((d,p)=>{const v=s.get(d);void 0!==v&&Um(v.mutation,p,eo.empty(),Wr.now()),Yv(t,p)&&(l=l.insert(d,p))}),l})}}class Wx{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Ye.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:wi(r.createTime)}),Ye.resolve()}getNamedQuery(e,t){return Ye.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:hE(r.bundledQuery),readTime:wi(r.readTime)}),Ye.resolve();var r}}class Ep{constructor(){this.overlays=new yr(It.comparator),this.es=new Map}getOverlay(e,t){return Ye.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bl();return Ye.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.oe(e,t,s)}),Ye.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),Ye.resolve()}getOverlaysForCollection(e,t,r){const i=bl(),s=t.length+1,l=new It(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return Ye.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new yr((v,E)=>v-E);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let E=s.get(v.largestBatchId);null===E&&(E=bl(),s=s.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const d=bl(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,E)=>d.set(v,E)),!(d.size()>=i)););return Ye.resolve(d)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new cE(t,r));let s=this.es.get(t);void 0===s&&(s=wn(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class u_{constructor(){this.ns=new fr(as.ss),this.rs=new fr(as.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new as(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new as(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new It(new qn([])),r=new as(t,e),i=new as(t,e+1),s=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),s.push(l.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new It(new qn([])),r=new as(t,e),i=new as(t,e+1);let s=wn();return this.rs.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new as(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class as{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return It.comparator(e.key,t.key)||vn(e._s,t._s)}static os(e,t){return vn(e._s,t._s)||It.comparator(e.key,t.key)}}class aN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new fr(as.ss)}checkEmpty(e){return Ye.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const l=new uE(s,t,r,i);this.mutationQueue.push(l);for(const d of i)this.gs=this.gs.add(new as(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Ye.resolve(l)}lookupMutationBatch(e,t){return Ye.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return Ye.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ye.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new as(t,0),i=new as(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],l=>{const d=this.ys(l._s);s.push(d)}),Ye.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(vn);return t.forEach(i=>{const s=new as(i,0),l=new as(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,l],d=>{r=r.add(d._s)})}),Ye.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;It.isDocumentKey(s)||(s=s.child(""));const l=new as(new It(s),0);let d=new fr(vn);return this.gs.forEachWhile(p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(d=d.add(p._s)),!0)},l),Ye.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Yt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return Ye.forEach(t.mutations,i=>{const s=new as(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new as(t,0),i=this.gs.firstAfterOrEqual(r);return Ye.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ye.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Kx{constructor(e){this.Es=e,this.docs=new yr(It.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ye.resolve(r?r.document.mutableCopy():Ar.newInvalidDocument(t))}getEntries(e,t){let r=Kr();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ar.newInvalidDocument(i))}),Ye.resolve(r)}getAllFromCollection(e,t,r){let i=Kr();const s=new It(t.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:d,value:{document:p}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||ET(AS(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return Ye.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Lt()}As(e,t){return Ye.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DE(this)}getSize(e){return Ye.resolve(this.size)}}class DE extends $x{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),Ye.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class _k{constructor(e){this.persistence=e,this.Rs=new bs(t=>Tc(t),Rm),this.lastRemoteSnapshotVersion=Jt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new u_,this.targetCount=0,this.vs=mh.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),Ye.resolve()}getLastRemoteSnapshotVersion(e){return Ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ye.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),Ye.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new mh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Ye.resolve()}updateTargetData(e,t){return this.Dn(t),Ye.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ye.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(l),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),Ye.waitFor(s).next(()=>i)}getTargetCount(e){return Ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return Ye.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),Ye.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),Ye.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return Ye.resolve(r)}containsKey(e,t){return Ye.resolve(this.Ps.containsKey(t))}}class c_{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Do(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new _k(this),this.indexManager=new Ox,this.remoteDocumentCache=new Kx(r=>this.referenceDelegate.xs(r)),this.yt=new Dx(t),this.Ns=new Wx(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ep,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new aN(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Et("MemoryPersistence","Starting transaction:",e);const i=new bk(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return Ye.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class bk extends kS{constructor(e){super(),this.currentSequenceNumber=e}}class Jm{constructor(e){this.persistence=e,this.Fs=new u_,this.$s=null}static Bs(e){return new Jm(e)}get Ls(){if(this.$s)return this.$s;throw Lt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),Ye.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),Ye.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Ye.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ye.forEach(this.Ls,r=>{const i=It.fromPath(r);return this.qs(e,i).next(s=>{s||t.removeEntry(i,Jt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Ye.or([()=>Ye.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class AE{constructor(e){this.yt=e}$(e,t,r,i){const s=new $v("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sk,{unique:!0}),d.createObjectStore("documentMutations"),kE(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=Ye.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),kE(e)),l=l.next(()=>function(d){const p=d.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Jt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",v)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,p){return p.store("mutations").W().next(v=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sk,{unique:!0});const E=p.store("mutations"),D=v.map(j=>E.put(j));return Ye.waitFor(D)})}(e,s))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Us(s))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(s))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(s))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:iN});p.createIndex("collectionPathOverlayIndex",wx,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",Cx,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:Ex});p.createIndex("documentKeyIndex",rN),p.createIndex("collectionGroupIndex",ln)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,s))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:ck}).createIndex("sequenceNumberIndex",t_,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:n_}).createIndex("documentKeyIndex",di,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=a_(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>Ye.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>Ye.forEach(d,p=>{Yt(p.userId===s.userId);const v=Va(this.yt,p);return Nx(e,s.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((l,d)=>{const p=new qn(l),v=[0,Ci(p)];s.push(t.get(v).next(E=>E?Ye.resolve():t.put({targetId:0,path:Ci(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Ye.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:pp});const r=t.store("collectionParents"),i=new EE,s=l=>{if(i.add(l)){const d=l.lastSegment(),p=l.popLast();return r.put({collectionId:d,parent:Ci(p)})}};return t.store("remoteDocuments").Z({X:!0},(l,d)=>{const p=new qn(l);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,d,p],v)=>{const E=Us(d);return s(E.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=cu(i),l=Ax(this.yt,s);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,l)=>{const d=t.store("remoteDocumentsV14"),p=(v=l,v.document?new It(qn.fromString(v.document.name).popFirst(5)):v.noDocument?It.fromSegments(v.noDocument.path):v.unknownDocument?It.fromSegments(v.unknownDocument.path):Lt()).path.toArray();var v;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(E))}).next(()=>Ye.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Hx(this.yt),s=new c_(Jm.Bs,this.yt.ie);return r.W().next(l=>{const d=new Map;return l.forEach(p=>{var v;let E=null!==(v=d.get(p.userId))&&void 0!==v?v:wn();Va(this.yt,p).keys().forEach(D=>E=E.add(D)),d.set(p.userId,E)}),Ye.forEach(d,(p,v)=>{const E=new ys(v),D=i_.re(this.yt,E),j=s.getIndexManager(E),F=_p.re(E,this.yt,j,s.referenceDelegate);return new zx(i,F,D,j).recalculateAndSaveOverlaysForDocumentKeys(new lE(t,Do.at),p).next()})})}}function kE(n){n.createObjectStore("targetDocuments",{keyPath:lk}).createIndex("documentTargetsIndex",uk,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ak,{unique:!0}),n.createObjectStore("targetGlobal")}const d_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class h_{constructor(e,t,r,i,s,l,d,p,v,E,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=l,this.document=d,this.Js=v,this.Ys=E,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=j=>Promise.resolve(),!h_.C())throw new yt(Je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yk(this,i),this.ii=t+"main",this.yt=new Dx(p),this.ri=new Vi(this.ii,this.Xs,new AE(this.yt)),this.Cs=new gk(this.referenceDelegate,this.yt),this.remoteDocumentCache=Hx(this.yt),this.Ns=new kx,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===E&&li("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new yt(Je.FAILED_PRECONDITION,d_);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Do(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,De.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,De.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,De.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>f_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(gc(e))return Et("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Et("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return wp(e).get("owner").next(t=>Ye.resolve(this.mi(t)))}gi(e){return f_(e).delete(this.clientId)}yi(){var e=this;return(0,De.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=os(r,"clientMetadata");return i.W().next(s=>{const l=e.Ii(s,18e5),d=s.filter(p=>-1===l.indexOf(p));return Ye.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Ye.resolve(!0):wp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new yt(Je.FAILED_PRECONDITION,d_);return!1}}return!(!this.networkEnabled||!this.inForeground)||f_(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Et("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,De.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new lE(t,Do.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>f_(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return _p.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pk(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return i_.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Et("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.Xs)?Ix:14===l?aE:13===l?oE:12===l?xx:11===l?Sx:void Lt();var l;let d;return this.ri.runTransaction(e,i,s,p=>(d=new lE(p,this.Ss?this.Ss.next():Do.at),"readwrite-primary"===t?this.fi(d).next(v=>!!v||this.di(d)).next(v=>{if(!v)throw li(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new yt(Je.FAILED_PRECONDITION,wT);return r(d)}).next(v=>this.wi(d).next(()=>v)):this.Vi(d).next(()=>r(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(e){return wp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new yt(Je.FAILED_PRECONDITION,d_)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wp(e).put("owner",t)}static C(){return Vi.C()}_i(e){const t=wp(e);return t.get("owner").next(r=>this.mi(r)?(Et("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ye.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(li(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ct.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Et("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return li("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){li("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wp(n){return os(n,"owner")}function f_(n){return os(n,"clientMetadata")}function ME(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class PE{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=wn(),i=wn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new PE(e,t.fromCache,r,i)}}class Zx{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(VS(t))return Ye.resolve(null);let r=_s(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Lm(t,null,"F"),r=_s(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=wn(...s);return this.Ni.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const v=this.Fi(t,d);return this.$i(t,v,l,p.readTime)?this.ki(e,Lm(t,null,"F")):this.Bi(e,v,t,p)}))})))}Oi(e,t,r,i){return VS(t)||i.isEqual(Jt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const l=this.Fi(t,s);return this.$i(t,l,r,i)?this.Mi(e,t):(pT()<=dr.in.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),NT(t)),this.Bi(e,l,t,DS(i,-1)))})}Fi(e,t){let r=new fr(FT(e));return t.forEach((i,s)=>{Yv(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return pT()<=dr.in.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",NT(t)),this.Ni.getDocumentsMatchingQuery(e,t,Js.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class Yx{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new yr(vn),this.Ui=new bs(s=>Tc(s),Rm),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zx(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function Tk(n,e,t,r){return new Yx(n,e,t,r)}function RE(n,e){return OE.apply(this,arguments)}function OE(){return OE=(0,De.Z)(function*(n,e){const t=Nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],d=[];let p=wn();for(const v of i){l.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}for(const v of s){d.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:d}))})})}),OE.apply(this,arguments)}function Ek(n,e){const t=Nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,d,p,v){const E=p.batch,D=E.keys();let j=Ye.resolve();return D.forEach(F=>{j=j.next(()=>v.getEntry(d,F)).next(Q=>{const ne=p.docVersions.get(F);Yt(null!==ne),Q.version.compareTo(ne)<0&&(E.applyToRemoteDocument(Q,p),Q.isValidDocument()&&(Q.setReadTime(p.commitVersion),v.addEntry(Q)))})}),j.next(()=>l.mutationQueue.removeMutationBatch(d,E))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=wn();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(d=d.add(l.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function wk(n){const e=Nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function lN(n,e){const t=Nt(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const d=[];e.targetChanges.forEach((E,D)=>{const j=i.get(D);if(!j)return;d.push(t.Cs.removeMatchingKeys(s,E.removedDocuments,D).next(()=>t.Cs.addMatchingKeys(s,E.addedDocuments,D)));let F=j.withSequenceNumber(s.currentSequenceNumber);var Q,ne,ue;e.targetMismatches.has(D)?F=F.withResumeToken(Bi.EMPTY_BYTE_STRING,Jt.min()).withLastLimboFreeSnapshotVersion(Jt.min()):E.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(E.resumeToken,r)),i=i.insert(D,F),ne=F,ue=E,(0===(Q=j).resumeToken.approximateByteSize()||ne.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(s,F))});let p=Kr(),v=wn();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,E))}),d.push(Qx(s,l,e.documentUpdates).next(E=>{p=E.Wi,v=E.zi})),!r.isEqual(Jt.min())){const E=t.Cs.getLastRemoteSnapshotVersion(s).next(D=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(E)}return Ye.waitFor(d).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,v)).next(()=>p)}).then(s=>(t.qi=i,s))}function Qx(n,e,t){let r=wn(),i=wn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=Kr();return t.forEach((d,p)=>{const v=s.get(d);p.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Jt.min())?(e.removeEntry(d,p.readTime),l=l.insert(d,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||0===p.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(p),l=l.insert(d,p)):Et("LocalStore","Ignoring outdated watch update for ",d,". Current version:",v.version," Watch version:",p.version)}),{Wi:l,zi:i}})}function Ck(n,e){const t=Nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vh(n,e){const t=Nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,Ye.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new xc(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function _h(n,e,t){return p_.apply(this,arguments)}function p_(){return p_=(0,De.Z)(function*(n,e,t){const r=Nt(n),i=r.qi.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!gc(l))throw l;Et("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),p_.apply(this,arguments)}function g_(n,e,t){const r=Nt(n);let i=Jt.min(),s=wn();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,p,v){const E=Nt(d),D=E.Ui.get(v);return void 0!==D?Ye.resolve(E.qi.get(D)):E.Cs.getTargetData(p,v)}(r,l,_s(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,d.targetId).next(p=>{s=p})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Jt.min(),t?s:wn())).next(d=>(eI(r,LT(e),d),{documents:d,Hi:s})))}function Xx(n,e){const t=Nt(n),r=Nt(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ne(s,e).next(l=>l?l.target:null))}function Jx(n,e){const t=Nt(n),r=t.Ki.get(e)||Jt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,DS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(eI(t,e,i),i))}function eI(n,e,t){let r=n.Ki.get(e)||Jt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function NE(){return NE=(0,De.Z)(function*(n,e,t,r){const i=Nt(n);let s=wn(),l=Kr();for(const v of t){const E=e.Ji(v.metadata.name);v.document&&(s=s.add(E));const D=e.Yi(v);D.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(E,D)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield vh(i,(v=r,_s(Ec(qn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>Qx(v,d,l).next(E=>(d.apply(v),E)).next(E=>i.Cs.removeMatchingKeysForTargetId(v,p.targetId).next(()=>i.Cs.addMatchingKeys(v,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,E.Wi,E.zi)).next(()=>E.Wi)))}),NE.apply(this,arguments)}function xk(n,e){return bh.apply(this,arguments)}function bh(){return bh=(0,De.Z)(function*(n,e,t=wn()){const r=yield vh(n,_s(hE(e.bundledQuery))),i=Nt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=wi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(s,e);const d=r.withResumeToken(Bi.EMPTY_BYTE_STRING,l);return i.qi=i.qi.insert(d.targetId,d),i.Cs.updateTargetData(s,d).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),bh.apply(this,arguments)}function LE(n,e){return`firestore_clients_${n}_${e}`}function FE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function m_(n,e){return`firestore_targets_${n}_${e}`}class ey{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new yt(i.error.code,i.error.message))),l?new ey(e,t,i.state,s):(li("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new yt(r.error.code,r.error.message))),s?new Cp(e,r.state,i):(li("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ty{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Jv();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=IT(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new ty(e,s):(li("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jE{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jE(t.clientId,t.onlineState):(li("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tI{constructor(){this.activeTargetIds=Jv()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y_{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new yr(vn),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=LE(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new tI),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,De.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(LE(e.persistenceKey,i));if(s){const l=ty.Zi(i,s);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(m_(this.persistenceKey,e));if(r){const i=Cp.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(m_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Et("SharedClientState","READ",e,t),t}setItem(e,t){Et("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Et("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Et("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void li("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,De.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let l=Do.at;if(null!=s)try{const d=JSON.parse(s);Yt("number"==typeof d),l=d}catch(d){li("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==Do.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new ey(this.currentUser,e,t,r),s=FE(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=FE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=m_(this.persistenceKey,e),s=new Cp(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return ty.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return ey.Zi(new ys(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Cp.Zi(i,t)}yr(e){return jE.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,De.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Et("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),l=[],d=[];return s.forEach(p=>{i.has(p)||l.push(p)}),i.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Br(l,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Jv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class UE{constructor(){this.Lr=new tI,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new tI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ik{Ur(e){}shutdown(){}}class nI{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Dk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ny{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Ak extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const l=this.ho(e,t);Et("RestConnection","Sending: ",l,r);const d={};return this.lo(d,i,s),this.fo(e,l,d,r).then(p=>(Et("RestConnection","Received: ",p),p),p=>{throw au("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",r),p})}_o(e,t,r,i,s,l){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Io,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${Dk[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,l)=>{const d=new tN;d.setWithCredentials(!0),d.listenOnce(XO.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ES.NO_ERROR:const v=d.getResponseJson();Et("Connection","XHR received:",JSON.stringify(v)),s(v);break;case ES.TIMEOUT:Et("Connection",'RPC "'+e+'" timed out'),l(new yt(Je.DEADLINE_EXCEEDED,"Request time out"));break;case ES.HTTP_ERROR:const E=d.getStatus();if(Et("Connection",'RPC "'+e+'" failed with status:',E,"response text:",d.getResponseText()),E>0){let D=d.getResponseJson();Array.isArray(D)&&(D=D[0]);const j=D?.error;if(j&&j.status&&j.message){const F=function(Q){const ne=Q.toLowerCase().replace(/_/g,"-");return Object.values(Je).indexOf(ne)>=0?ne:Je.UNKNOWN}(j.status);l(new yt(F,j.message))}else l(new yt(Je.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new yt(Je.UNAVAILABLE,"Connection failed."));break;default:Lt()}}finally{Et("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);d.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=hT(),l=QO(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new eN({})),this.lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const p=i.join("");Et("Connection","Creating WebChannel: "+p,d);const v=s.createWebChannel(p,d);let E=!1,D=!1;const j=new ny({Hr:Q=>{D?Et("Connection","Not sending because WebChannel is closed:",Q):(E||(Et("Connection","Opening WebChannel transport."),v.open(),E=!0),Et("Connection","WebChannel sending:",Q),v.send(Q))},Jr:()=>v.close()}),F=(Q,ne,ue)=>{Q.listen(ne,Ve=>{try{ue(Ve)}catch(We){setTimeout(()=>{throw We},0)}})};return F(v,fT.EventType.OPEN,()=>{D||Et("Connection","WebChannel transport opened.")}),F(v,fT.EventType.CLOSE,()=>{D||(D=!0,Et("Connection","WebChannel transport closed"),j.io())}),F(v,fT.EventType.ERROR,Q=>{D||(D=!0,au("Connection","WebChannel transport errored:",Q),j.io(new yt(Je.UNAVAILABLE,"The operation could not be completed")))}),F(v,fT.EventType.MESSAGE,Q=>{var ne;if(!D){const ue=Q.data[0];Yt(!!ue);const Ve=ue,We=Ve.error||(null===(ne=Ve[0])||void 0===ne?void 0:ne.error);if(We){Et("Connection","WebChannel received error:",We);const Qe=We.status;let Le=function(ct){const kt=ci[ct];if(void 0!==kt)return JS(kt)}(Qe),Ae=We.message;void 0===Le&&(Le=Je.INTERNAL,Ae="Unknown error status: "+Qe+" with message "+We.message),D=!0,j.io(new yt(Le,Ae)),v.close()}else Et("Connection","WebChannel received:",ue),j.ro(ue)}}),F(l,JO.STAT_EVENT,Q=>{Q.stat===V1.PROXY?Et("Connection","Detected buffering proxy"):Q.stat===V1.NOPROXY&&Et("Connection","Detected no buffering proxy")}),setTimeout(()=>{j.so()},0),j}}function v_(){return typeof window<"u"?window:null}function Ao(){return typeof document<"u"?document:null}function ry(n){return new ax(n,!0)}class Sp{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class xp{constructor(e,t,r,i,s,l,d,p){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Sp(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,De.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,De.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,De.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===Je.RESOURCE_EXHAUSTED?(li(t.toString()),li("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===Je.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new yt(Je.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,De.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kk extends xp{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.yt=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function nk(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:Lt(),i=e.targetChange.targetIds||[],s=function(p,v){return p.wt?(Yt(void 0===v||"string"==typeof v),Bi.fromBase64String(v||"")):(Yt(void 0===v||v instanceof Uint8Array),Bi.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(p){const v=void 0===p.code?Je.UNKNOWN:JS(p.code);return new yt(v,p.message||"")}(l);t=new KT(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Tl(n,r.document.name),s=wi(r.document.updateTime),l=r.document.createTime?wi(r.document.createTime):Jt.min(),d=new ss({mapValue:{fields:r.document.fields}}),p=Ar.newFoundDocument(i,s,l,d);t=new uh(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Tl(n,r.document),s=r.readTime?wi(r.readTime):Jt.min(),l=Ar.newNoDocument(i,s);t=new uh([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Tl(n,r.document);t=new uh([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Lt();{const r=e.filter,s=new qT(r.count||0);t=new rx(r.targetId,s)}}var p;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return Jt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Jt.min():s.readTime?wi(s.readTime):Jt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Gm(this.yt),t.addTarget=function(i,s){let l;const d=s.target;return l=Om(d)?{documents:px(i,d)}:{query:tE(i,d)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=QT(i,s.resumeToken):s.snapshotVersion.compareTo(Jt.min())>0&&(l.readTime=ch(i,s.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function gx(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Gm(this.yt),t.removeTarget=e,this.Bo(t)}}class Mk extends xp{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function rk(n,e){return n&&n.length>0?(Yt(void 0!==e),n.map(t=>function(r,i){let s=wi(r.updateTime?r.updateTime:i);return s.isEqual(Jt.min())&&(s=wi(i)),new ek(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.Zo(r,t)}return Yt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Gm(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>qm(this.yt,r))};this.Bo(t)}}class Pk extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new yt(Je.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new yt(Je.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection._o(e,t,r,s,l,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new yt(Je.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class Rk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(li(t),this.ou=!1):Et("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Ok{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(d=>{r.enqueueAndForget((0,De.Z)(function*(){var p;Ba(l)&&(Et("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,De.Z)(function*(v){const E=Nt(v);E._u.add(4),yield kc(E),E.gu.set("Unknown"),E._u.delete(4),yield Dp(E)}),function(v){return p.apply(this,arguments)})(l))}))}),this.gu=new Rk(r,i)}}function Dp(n){return b_.apply(this,arguments)}function b_(){return b_=(0,De.Z)(function*(n){if(Ba(n))for(const e of n.wu)yield e(!0)}),b_.apply(this,arguments)}function kc(n){return T_.apply(this,arguments)}function T_(){return T_=(0,De.Z)(function*(n){for(const e of n.wu)yield e(!1)}),T_.apply(this,arguments)}function E_(n,e){const t=Nt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),C_(t)?sy(t):kp(t).ko()&&rI(t,e))}function iy(n,e){const t=Nt(n),r=kp(t);t.du.delete(e),r.ko()&&w_(t,e),0===t.du.size&&(r.ko()?r.Fo():Ba(t)&&t.gu.set("Unknown"))}function rI(n,e){n.yu.Ot(e.targetId),kp(n).zo(e)}function w_(n,e){n.yu.Ot(e),kp(n).Ho(e)}function sy(n){n.yu=new YT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),kp(n).start(),n.gu.uu()}function C_(n){return Ba(n)&&!kp(n).No()&&n.du.size>0}function Ba(n){return 0===Nt(n)._u.size}function S_(n){n.yu=void 0}function Nk(n){return VE.apply(this,arguments)}function VE(){return VE=(0,De.Z)(function*(n){n.du.forEach((e,t)=>{rI(n,e)})}),VE.apply(this,arguments)}function Lk(n,e){return BE.apply(this,arguments)}function BE(){return BE=(0,De.Z)(function*(n,e){S_(n),C_(n)?(n.gu.hu(e),sy(n)):n.gu.set("Unknown")}),BE.apply(this,arguments)}function iI(n,e,t){return oy.apply(this,arguments)}function oy(){return oy=(0,De.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof KT&&2===e.state&&e.cause)try{yield(r=(0,De.Z)(function*(i,s){const l=s.cause;for(const d of s.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.du.delete(d),i.yu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ay(n,r)}else if(e instanceof uh?n.yu.Kt(e):e instanceof rx?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Jt.min()))try{const r=yield wk(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const l=i.yu.Zt(s);return l.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const v=i.du.get(p);v&&i.du.set(p,v.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach(d=>{const p=i.du.get(d);if(!p)return;i.du.set(d,p.withResumeToken(Bi.EMPTY_BYTE_STRING,p.snapshotVersion)),w_(i,d);const v=new xc(p.target,d,1,p.sequenceNumber);rI(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Et("RemoteStore","Failed to raise snapshot:",r),yield ay(n,r)}var r}),oy.apply(this,arguments)}function ay(n,e,t){return x_.apply(this,arguments)}function x_(){return x_=(0,De.Z)(function*(n,e,t){if(!gc(e))throw e;n._u.add(1),yield kc(n),n.gu.set("Offline"),t||(t=()=>wk(n.localStore)),n.asyncQueue.enqueueRetryable((0,De.Z)(function*(){Et("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Dp(n)}))}),x_.apply(this,arguments)}function $E(n,e){return e().catch(t=>ay(n,t,e))}function Th(n){return HE.apply(this,arguments)}function HE(){return HE=(0,De.Z)(function*(n){const e=Nt(n),t=fu(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;sI(e);)try{const i=yield Ck(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,oI(e,i)}catch(i){yield ay(e,i)}aI(e)&&GE(e)}),HE.apply(this,arguments)}function sI(n){return Ba(n)&&n.fu.length<10}function oI(n,e){n.fu.push(e);const t=fu(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function aI(n){return Ba(n)&&!fu(n).No()&&n.fu.length>0}function GE(n){fu(n).start()}function lI(n){return Ts.apply(this,arguments)}function Ts(){return Ts=(0,De.Z)(function*(n){fu(n).eu()}),Ts.apply(this,arguments)}function Ap(n){return qE.apply(this,arguments)}function qE(){return qE=(0,De.Z)(function*(n){const e=fu(n);for(const t of n.fu)e.Xo(t.mutations)}),qE.apply(this,arguments)}function Fk(n,e,t){return uI.apply(this,arguments)}function uI(){return uI=(0,De.Z)(function*(n,e,t){const r=n.fu.shift(),i=fh.from(r,e,t);yield $E(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Th(n)}),uI.apply(this,arguments)}function uN(n,e){return I_.apply(this,arguments)}function I_(){return I_=(0,De.Z)(function*(n,e){var t;e&&fu(n).Yo&&(yield(t=(0,De.Z)(function*(r,i){if(XS(s=i.code)&&s!==Je.ABORTED){const l=r.fu.shift();fu(r).Mo(),yield $E(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Th(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),aI(n)&&GE(n)}),I_.apply(this,arguments)}function zE(n,e){return Eh.apply(this,arguments)}function Eh(){return Eh=(0,De.Z)(function*(n,e){const t=Nt(n);t.asyncQueue.verifyOperationInProgress(),Et("RemoteStore","RemoteStore received new credentials");const r=Ba(t);t._u.add(3),yield kc(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Dp(t)}),Eh.apply(this,arguments)}function WE(n,e){return ly.apply(this,arguments)}function ly(){return ly=(0,De.Z)(function*(n,e){const t=Nt(n);e?(t._u.delete(2),yield Dp(t)):e||(t._u.add(2),yield kc(t),t.gu.set("Unknown"))}),ly.apply(this,arguments)}function kp(n){return n.pu||(n.pu=function(e,t,r){const i=Nt(e);return i.su(),new kk(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:Nk.bind(null,n),Zr:Lk.bind(null,n),Wo:iI.bind(null,n)}),n.wu.push(function(){var e=(0,De.Z)(function*(t){t?(n.pu.Mo(),C_(n)?sy(n):n.gu.set("Unknown")):(yield n.pu.stop(),S_(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function fu(n){return n.Iu||(n.Iu=function(e,t,r){const i=Nt(e);return i.su(),new Mk(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:lI.bind(null,n),Zr:uN.bind(null,n),tu:Ap.bind(null,n),Zo:Fk.bind(null,n)}),n.wu.push(function(){var e=(0,De.Z)(function*(t){t?(n.Iu.Mo(),yield Th(n)):(yield n.Iu.stop(),n.fu.length>0&&(Et("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class KE{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,d=new KE(e,t,l,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yt(Je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mp(n,e){if(li("AsyncQueue",`${e}: ${n}`),gc(n))return new yt(Je.UNAVAILABLE,`${e}: ${n}`);throw n}class Pp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||It.comparator(t.key,r.key):(t,r)=>It.comparator(t.key,r.key),this.keyedMap=cp(),this.sortedSet=new yr(this.comparator)}static emptySet(e){return new Pp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Pp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class D_{constructor(){this.Tu=new yr(It.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Lt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class wh{constructor(e,t,r,i,s,l,d,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,s){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new wh(e,t,Pp.emptySet(t),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class cI{constructor(){this.Au=void 0,this.listeners=[]}}class A_{constructor(){this.queries=new bs(e=>OT(e),sh),this.onlineState="Unknown",this.Ru=new Set}}function uy(n,e){return dI.apply(this,arguments)}function dI(){return dI=(0,De.Z)(function*(n,e){const t=Nt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new cI),i)try{s.Au=yield t.onListen(r)}catch(l){const d=Mp(l,`Initialization of query '${NT(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&YE(t)}),dI.apply(this,arguments)}function k_(n,e){return ZE.apply(this,arguments)}function ZE(){return ZE=(0,De.Z)(function*(n,e){const t=Nt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ZE.apply(this,arguments)}function hI(n,e){const t=Nt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Pu(i)&&(r=!0);l.Au=i}}r&&YE(t)}function Rp(n,e,t){const r=Nt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function YE(n){n.Ru.forEach(e=>{e.next()})}class M_{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new wh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=wh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class QE{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class jk{constructor(e){this.yt=e}Ji(e){return Tl(this.yt,e)}Yi(e){return e.metadata.exists?fx(this.yt,e.document,!1):Ar.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return wi(e)}}class Uk{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Vk(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=qn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new jk(this.yt);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||wn()).add(s);t.set(l,d)}}return t}complete(){var e=this;return(0,De.Z)(function*(){const t=yield function Sk(n,e,t,r){return NE.apply(this,arguments)}(e.localStore,new jk(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield xk(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Vk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fI{constructor(e){this.key=e}}class pI{constructor(e){this.key=e}}class gI{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=wn(),this.mutatedKeys=wn(),this.Gu=FT(e),this.Qu=new Pp(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new D_,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,D)=>{const j=i.get(E),F=Yv(this.query,D)?D:null,Q=!!j&&this.mutatedKeys.has(j.key),ne=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let ue=!1;j&&F?j.data.isEqual(F.data)?Q!==ne&&(r.track({type:3,doc:F}),ue=!0):this.Hu(j,F)||(r.track({type:2,doc:F}),ue=!0,(p&&this.Gu(F,p)>0||v&&this.Gu(F,v)<0)&&(d=!0)):!j&&F?(r.track({type:0,doc:F}),ue=!0):j&&!F&&(r.track({type:1,doc:j}),ue=!0,(p||v)&&(d=!0)),ue&&(F?(l=l.add(F),s=ne?s.add(E):s.delete(E)):(l=l.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const E="F"===this.query.limitType?l.last():l.first();l=l.delete(E.key),s=s.delete(E.key),r.track({type:1,doc:E})}return{Qu:l,zu:r,$i:d,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((v,E)=>function(D,j){const F=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lt()}};return F(D)-F(j)}(v.type,E.type)||this.Gu(v.doc,E.doc)),this.Ju(r);const l=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.Uu;return this.Uu=d,0!==s.length||p?{snapshot:new wh(this.query,e.Qu,i,s,e.mutatedKeys,0===d,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new D_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=wn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new pI(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new fI(r))}),t}tc(e){this.qu=e.Hi,this.Ku=wn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return wh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class mI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yI{constructor(e){this.key=e,this.nc=!1}}class Bk{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new bs(d=>OT(d),sh),this.rc=new Map,this.oc=new Set,this.uc=new yr(It.comparator),this.cc=new Map,this.ac=new u_,this.hc={},this.lc=new Map,this.fc=mh.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function vI(n,e){return P_.apply(this,arguments)}function P_(){return P_=(0,De.Z)(function*(n,e){const t=j_(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const l=yield vh(t.localStore,_s(e));t.isPrimaryClient&&E_(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield XE(t,e,r,"current"===d,l.resumeToken)}return i}),P_.apply(this,arguments)}function XE(n,e,t,r,i){return JE.apply(this,arguments)}function JE(){return JE=(0,De.Z)(function*(n,e,t,r,i){n._c=(D,j,F)=>{return(Q=(0,De.Z)(function*(ne,ue,Ve,We){let Qe=ue.view.Wu(Ve);Qe.$i&&(Qe=yield g_(ne.localStore,ue.query,!1).then(({documents:ct})=>ue.view.Wu(ct,Qe)));const Le=We&&We.targetChanges.get(ue.targetId),Ae=ue.view.applyChanges(Qe,ne.isPrimaryClient,Le);return AI(ne,ue.targetId,Ae.Xu),Ae.snapshot}),function(ne,ue,Ve,We){return Q.apply(this,arguments)})(n,D,j,F);var Q};const s=yield g_(n.localStore,e,!0),l=new gI(e,s.Hi),d=l.Wu(s.documents),p=hp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(d,n.isPrimaryClient,p);AI(n,t,v.Xu);const E=new mI(e,t,l);return n.ic.set(e,E),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),JE.apply(this,arguments)}function _I(n,e){return ew.apply(this,arguments)}function ew(){return ew=(0,De.Z)(function*(n,e){const t=Nt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!sh(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield _h(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),iy(t.remoteStore,r.targetId),cy(t,r.targetId)}).catch(pc))):(cy(t,r.targetId),yield _h(t.localStore,r.targetId,!0))}),ew.apply(this,arguments)}function R_(){return R_=(0,De.Z)(function*(n,e,t){const r=U_(n);try{const i=yield function(s,l){const d=Nt(s),p=Wr.now(),v=l.reduce((j,F)=>j.add(F.key),wn());let E,D;return d.persistence.runTransaction("Locally write mutations","readwrite",j=>{let F=Kr(),Q=wn();return d.Gi.getEntries(j,v).next(ne=>{F=ne,F.forEach((ue,Ve)=>{Ve.isValidDocument()||(Q=Q.add(ue))})}).next(()=>d.localDocuments.getOverlayedDocuments(j,F)).next(ne=>{E=ne;const ue=[];for(const Ve of l){const We=KS(Ve,E.get(Ve.key).overlayedDocument);null!=We&&ue.push(new uu(Ve.key,We,PT(We.value.mapValue),En.exists(!0)))}return d.mutationQueue.addMutationBatch(j,p,ue,l)}).next(ne=>{D=ne;const ue=ne.applyToLocalDocumentSet(E,Q);return d.documentOverlayCache.saveOverlays(j,ne.batchId,ue)})}).then(()=>({batchId:D.batchId,changes:ex(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,d){let p=s.hc[s.currentUser.toKey()];p||(p=new yr(vn)),p=p.insert(l,d),s.hc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield El(r,i.changes),yield Th(r.remoteStore)}catch(i){const s=Mp(i,"Failed to persist write");t.reject(s)}}),R_.apply(this,arguments)}function tw(n,e){return O_.apply(this,arguments)}function O_(){return O_=(0,De.Z)(function*(n,e){const t=Nt(n);try{const r=yield lN(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.cc.get(s);l&&(Yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Yt(l.nc):i.removedDocuments.size>0&&(Yt(l.nc),l.nc=!1))}),yield El(t,r,e)}catch(r){yield pc(r)}}),O_.apply(this,arguments)}function TI(n,e,t){const r=Nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,l)=>{const d=l.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(s,l){const d=Nt(s);d.onlineState=l;let p=!1;d.queries.forEach((v,E)=>{for(const D of E.listeners)D.bu(l)&&(p=!0)}),p&&YE(d)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $k(n,e,t){return EI.apply(this,arguments)}function EI(){return EI=(0,De.Z)(function*(n,e,t){const r=Nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let l=new yr(It.comparator);l=l.insert(s,Ar.newNoDocument(s,Jt.min()));const d=wn().add(s),p=new dp(Jt.min(),new Map,new fr(vn),l,d);yield tw(r,p),r.uc=r.uc.remove(s),r.cc.delete(e),Op(r)}else yield _h(r.localStore,e,!1).then(()=>cy(r,e,t)).catch(pc)}),EI.apply(this,arguments)}function wI(n,e){return CI.apply(this,arguments)}function CI(){return CI=(0,De.Z)(function*(n,e){const t=Nt(n),r=e.batch.batchId;try{const i=yield Ek(t.localStore,e);DI(t,r,null),II(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield El(t,i)}catch(i){yield pc(i)}}),CI.apply(this,arguments)}function cN(n,e,t){return SI.apply(this,arguments)}function SI(){return SI=(0,De.Z)(function*(n,e,t){const r=Nt(n);try{const i=yield function(s,l){const d=Nt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return d.mutationQueue.lookupMutationBatch(p,l).next(E=>(Yt(null!==E),v=E.keys(),d.mutationQueue.removeMutationBatch(p,E))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,v,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v)).next(()=>d.localDocuments.getDocuments(p,v))})}(r.localStore,e);DI(r,e,t),II(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield El(r,i)}catch(i){yield pc(i)}}),SI.apply(this,arguments)}function xI(){return xI=(0,De.Z)(function*(n,e){const t=Nt(n);Ba(t.remoteStore)||Et("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const l=Nt(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Mp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),xI.apply(this,arguments)}function II(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function DI(n,e,t){const r=Nt(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function cy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||dy(n,r)})}function dy(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(iy(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Op(n))}function AI(n,e,t){for(const r of t)r instanceof fI?(n.ac.addReference(r.key,e),kI(n,r)):r instanceof pI?(Et("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||dy(n,r.key)):Lt()}function kI(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Et("SyncEngine","New document in limbo: "+t),n.oc.add(r),Op(n))}function Op(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new It(qn.fromString(e)),r=n.fc.next();n.cc.set(r,new yI(t)),n.uc=n.uc.insert(t,r),E_(n.remoteStore,new xc(_s(Ec(t.path)),r,2,Do.at))}}function El(n,e,t){return N_.apply(this,arguments)}function N_(){return N_=(0,De.Z)(function*(n,e,t){const r=Nt(n),i=[],s=[],l=[];var d;r.ic.isEmpty()||(r.ic.forEach((d,p)=>{l.push(r._c(p,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const E=PE.Ci(p.targetId,v);s.push(E)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(d=(0,De.Z)(function*(p,v){const E=Nt(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>Ye.forEach(v,j=>Ye.forEach(j.Si,F=>E.persistence.referenceDelegate.addReference(D,j.targetId,F)).next(()=>Ye.forEach(j.Di,F=>E.persistence.referenceDelegate.removeReference(D,j.targetId,F)))))}catch(D){if(!gc(D))throw D;Et("LocalStore","Failed to update sequence numbers: "+D)}for(const D of v){const j=D.targetId;if(!D.fromCache){const F=E.qi.get(j),ne=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);E.qi=E.qi.insert(j,ne)}}}),function(p,v){return d.apply(this,arguments)})(r.localStore,s))}),N_.apply(this,arguments)}function hN(n,e){return hy.apply(this,arguments)}function hy(){return hy=(0,De.Z)(function*(n,e){const t=Nt(n);if(!t.currentUser.isEqual(e)){Et("SyncEngine","User change. New user:",e.toKey());const r=yield RE(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(d=>{d.reject(new yt(Je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield El(t,r.ji)}var i}),hy.apply(this,arguments)}function MI(n,e){const t=Nt(n),r=t.cc.get(e);if(r&&r.nc)return wn().add(r.key);{let i=wn();const s=t.rc.get(e);if(!s)return i;for(const l of s){const d=t.ic.get(l);i=i.unionWith(d.view.ju)}return i}}function Hk(n,e){return L_.apply(this,arguments)}function L_(){return L_=(0,De.Z)(function*(n,e){const t=Nt(n),r=yield g_(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&AI(t,e.targetId,i.Xu),i}),L_.apply(this,arguments)}function fN(n,e){return PI.apply(this,arguments)}function PI(){return PI=(0,De.Z)(function*(n,e){const t=Nt(n);return Jx(t.localStore,e).then(r=>El(t,r))}),PI.apply(this,arguments)}function Gk(n,e,t,r){return nw.apply(this,arguments)}function nw(){return nw=(0,De.Z)(function*(n,e,t,r){const i=Nt(n),s=yield function(l,d){const p=Nt(l),v=Nt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>v.Tn(E,d).next(D=>D?p.localDocuments.getDocuments(E,D):Ye.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===t?yield Th(i.remoteStore):"acknowledged"===t||"rejected"===t?(DI(i,e,r||null),II(i,e),d=e,Nt(Nt(i.localStore).mutationQueue).An(d)):Lt(),yield El(i,s)):Et("SyncEngine","Cannot apply mutation batch with id: "+e)}),nw.apply(this,arguments)}function rw(){return rw=(0,De.Z)(function*(n,e){const t=Nt(n);if(j_(t),U_(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield qk(t,r.toArray());t.dc=!0,yield WE(t.remoteStore,!0);for(const s of i)E_(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(cy(t,l),_h(t.localStore,l,!0))),iy(t.remoteStore,l)}),yield i,yield qk(t,r),function(s){const l=Nt(s);l.cc.forEach((d,p)=>{iy(l.remoteStore,p)}),l.ac.fs(),l.cc=new Map,l.uc=new yr(It.comparator)}(t),t.dc=!1,yield WE(t.remoteStore,!1)}}),rw.apply(this,arguments)}function qk(n,e,t){return RI.apply(this,arguments)}function RI(){return RI=(0,De.Z)(function*(n,e,t){const r=Nt(n),i=[],s=[];for(const l of e){let d;const p=r.rc.get(l);if(p&&0!==p.length){d=yield vh(r.localStore,_s(p[0]));for(const v of p){const E=r.ic.get(v),D=yield Hk(r,E);D.snapshot&&s.push(D.snapshot)}}else{const v=yield Xx(r.localStore,l);d=yield vh(r.localStore,v),yield XE(r,zk(v),l,!1,d.resumeToken)}i.push(d)}return r.sc.Wo(s),i}),RI.apply(this,arguments)}function zk(n){return Nm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Wk(n){const e=Nt(n);return Nt(Nt(e.localStore).persistence).vi()}function Kk(n,e,t,r){return iw.apply(this,arguments)}function iw(){return iw=(0,De.Z)(function*(n,e,t,r){const i=Nt(n);if(i.dc)return void Et("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield Jx(i.localStore,LT(s[0])),d=dp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Bi.EMPTY_BYTE_STRING);yield El(i,l,d);break}case"rejected":yield _h(i.localStore,e,!0),cy(i,e,r);break;default:Lt()}}),iw.apply(this,arguments)}function pN(n,e,t){return sw.apply(this,arguments)}function sw(){return sw=(0,De.Z)(function*(n,e,t){const r=j_(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Et("SyncEngine","Adding an already active target "+i);continue}const s=yield Xx(r.localStore,i),l=yield vh(r.localStore,s);yield XE(r,zk(s),l.targetId,!1,l.resumeToken),E_(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield _h(r.localStore,i,!1).then(()=>{iy(r.remoteStore,i),cy(r,i)}).catch(pc))}}),sw.apply(this,arguments)}function j_(n){const e=Nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$k.bind(null,e),e.sc.Wo=hI.bind(null,e.eventManager),e.sc.wc=Rp.bind(null,e.eventManager),e}function U_(n){const e=Nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cN.bind(null,e),e}class aa{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,De.Z)(function*(){t.yt=ry(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Tk(this.persistence,new Zx,e.initialUser,this.yt)}yc(e){return new c_(Jm.Bs,this.yt)}gc(e){return new UE}terminate(){var e=this;return(0,De.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class OI extends aa{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield U_(r.Ac.syncEngine),yield Th(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Tk(this.persistence,new Zx,e.initialUser,this.yt)}Tc(e,t){return new Bx(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new xT(t,this.persistence);return new q1(e.asyncQueue,r)}yc(e){const t=ME(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?to.withCacheSize(this.cacheSizeBytes):to.DEFAULT;return new h_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,v_(),Ao(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new UE}}class ow extends OI{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof y_&&(r.sharedClientState.syncEngine={Fr:Gk.bind(null,i),$r:Kk.bind(null,i),Br:pN.bind(null,i),vi:Wk.bind(null,i),Mr:fN.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,De.Z)(function*(l){yield function F_(n,e){return rw.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}gc(e){const t=v_();if(!y_.C(t))throw new yt(Je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ME(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new y_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class aw{initialize(e,t){var r=this;return(0,De.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>TI(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=hN.bind(null,r.syncEngine),yield WE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new A_}createDatastore(e){const t=ry(e.databaseInfo.databaseId),r=new Ak(e.databaseInfo);return new Pk(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>TI(this.syncEngine,d,0),l=nI.C()?new nI:new Ik,new Ok(t,r,i,s,l);var t,r,i,s,l}createSyncEngine(e,t){return function(r,i,s,l,d,p,v){const E=new Bk(r,i,s,l,d,p);return v&&(E.dc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,De.Z)(function*(t){const r=Nt(t);Et("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield kc(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function no(n,e,t){if(!t)throw new yt(Je.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NI(n,e,t,r){if(!0===e&&!0===r)throw new yt(Je.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function V_(n){if(!It.isDocumentKey(n))throw new yt(Je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LI(n){if(It.isDocumentKey(n))throw new yt(Je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function B_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Lt()}function Rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new yt(Je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=B_(n);throw new yt(Je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lw(n,e){if(e<=0)throw new yt(Je.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const uw=new Map;class FI{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new yt(Je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new yt(Je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,NI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Np{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new yt(Je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new yt(Je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FI(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new zf;switch(t.type){case"gapi":return new Vv(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new yt(Je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=uw.get(e);t&&(Et("ComponentProvider","Removing Datastore"),uw.delete(e),t.terminate())}(this),Promise.resolve()}}class Nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nr(this.firestore,e,this._key)}}class ls{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ls(this.firestore,e,this._query)}}class wl extends ls{constructor(e,t,r){super(e,t,Ec(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nr(this.firestore,null,new It(e))}withConverter(e){return new wl(this.firestore,e,this._path)}}function $_(n,e,...t){if(n=(0,Ct.m9)(n),no("collection","path",e),n instanceof Np){const r=qn.fromString(e,...t);return LI(r),new wl(n,null,r)}{if(!(n instanceof Nr||n instanceof wl))throw new yt(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qn.fromString(e,...t));return LI(r),new wl(n.firestore,null,r)}}function fy(n,e,...t){if(n=(0,Ct.m9)(n),1===arguments.length&&(e=bT.R()),no("doc","path",e),n instanceof Np){const r=qn.fromString(e,...t);return V_(r),new Nr(n,null,new It(r))}{if(!(n instanceof Nr||n instanceof wl))throw new yt(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qn.fromString(e,...t));return V_(r),new Nr(n.firestore,n instanceof wl?n.converter:null,new It(r))}}function H_(n,e){return n=(0,Ct.m9)(n),e=(0,Ct.m9)(e),(n instanceof Nr||n instanceof wl)&&(e instanceof Nr||e instanceof wl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $a(n,e){return n=(0,Ct.m9)(n),e=(0,Ct.m9)(e),n instanceof ls&&e instanceof ls&&n.firestore===e.firestore&&sh(n._query,e._query)&&n.converter===e.converter}function jI(n,e=10240){let t=0;return{read:()=>(0,De.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,De.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Zk{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Ji,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,De.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,De.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new QE(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,De.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,De.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class UI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,De.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new yt(Je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,De.Z)(function*(s,l){const d=Nt(s),p=Gm(d.yt)+"/documents",v={documents:l.map(F=>Hm(d.yt,F))},E=yield d._o("BatchGetDocuments",p,v,l.length),D=new Map;E.forEach(F=>{const Q=function tk(n,e){return"found"in e?function(t,r){Yt(!!r.found);const i=Tl(t,r.found.name),s=wi(r.found.updateTime),l=r.found.createTime?wi(r.found.createTime):Jt.min(),d=new ss({mapValue:{fields:r.found.fields}});return Ar.newFoundDocument(i,s,l,d)}(n,e):"missing"in e?function(t,r){Yt(!!r.missing),Yt(!!r.readTime);const i=Tl(t,r.missing),s=wi(r.readTime);return Ar.newNoDocument(i,s)}(n,e):Lt()}(d.yt,F);D.set(Q.key.toString(),Q)});const j=[];return l.forEach(F=>{const Q=D.get(F.toString());Yt(!!Q),j.push(Q)}),j}),function(s,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new lh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,De.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=It.fromPath(i);e.mutations.push(new QS(s,e.precondition(s)))}),yield(r=(0,De.Z)(function*(i,s){const l=Nt(i),d=Gm(l.yt)+"/documents",p={writes:s.map(v=>qm(l.yt,v))};yield l.ao("Commit",d,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Lt();t=Jt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new yt(Je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Jt.min())?En.exists(!1):En.updateTime(t):En.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Jt.min()))throw new yt(Je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return En.updateTime(t)}return En.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class yN{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new Sp(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,De.Z)(function*(){const t=new UI(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Qd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!XS(t)}return!1}}class VI{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ys.UNAUTHENTICATED,this.clientId=bT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,De.Z)(function*(d){Et("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Et("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,De.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new yt(Je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Mp(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function BI(n,e){return G_.apply(this,arguments)}function G_(){return G_=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Et("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,De.Z)(function*(s){r.isEqual(s)||(yield RE(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),G_.apply(this,arguments)}function Xk(n,e){return py.apply(this,arguments)}function py(){return py=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield q_(n);Et("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>zE(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>zE(e.remoteStore,s)),n.onlineComponents=e}),py.apply(this,arguments)}function q_(n){return z_.apply(this,arguments)}function z_(){return z_=(0,De.Z)(function*(n){return n.offlineComponents||(Et("FirestoreClient","Using default OfflineComponentProvider"),yield BI(n,new aa)),n.offlineComponents}),z_.apply(this,arguments)}function gy(n){return W_.apply(this,arguments)}function W_(){return W_=(0,De.Z)(function*(n){return n.onlineComponents||(Et("FirestoreClient","Using default OnlineComponentProvider"),yield Xk(n,new aw)),n.onlineComponents}),W_.apply(this,arguments)}function hw(n){return q_(n).then(e=>e.persistence)}function Ch(n){return q_(n).then(e=>e.localStore)}function Lp(n){return gy(n).then(e=>e.remoteStore)}function K_(n){return gy(n).then(e=>e.syncEngine)}function Sh(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,De.Z)(function*(n){const e=yield gy(n),t=e.eventManager;return t.onListen=vI.bind(null,e.syncEngine),t.onUnlisten=_I.bind(null,e.syncEngine),t}),Z_.apply(this,arguments)}function tM(n,e,t={}){const r=new Ji;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,s,l,d,p){const v=new dw({next:D=>{s.enqueueAndForget(()=>k_(i,E));const j=D.docs.has(l);!j&&D.fromCache?p.reject(new yt(Je.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&D.fromCache&&d&&"server"===d.source?p.reject(new yt(Je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new M_(Ec(l.path),v,{includeMetadataChanges:!0,Nu:!0});return uy(i,E)}(yield Sh(n),n.asyncQueue,e,t,r)})),r.promise}function GI(n,e,t={}){const r=new Ji;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,s,l,d,p){const v=new dw({next:D=>{s.enqueueAndForget(()=>k_(i,E)),D.fromCache&&"server"===d.source?p.reject(new yt(Je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),E=new M_(l,v,{includeMetadataChanges:!0,Nu:!0});return uy(i,E)}(yield Sh(n),n.asyncQueue,e,t,r)})),r.promise}class bN{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Sp(this,"async_queue_retry"),this.Wc=()=>{const t=Ao();t&&Et("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Ao();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Ao();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Ji;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,De.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!gc(t))throw t;Et("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,li("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=KE.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&Lt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,De.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function qI(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class TN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ji,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Lr extends Np{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bN,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||pw(this),this._firestoreClient.terminate()}}function Si(n){return n._firestoreClient||pw(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pw(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new z1(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new VI(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Y_(n,e,t){const r=new Ji;return n.asyncQueue.enqueue((0,De.Z)(function*(){try{yield BI(n,t),yield Xk(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(l=s).name?l.code===Je.FAILED_PRECONDITION||l.code===Je.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;au("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var l})).then(()=>r.promise)}function sM(n){if(n._initialized||n._terminated)throw new yt(Je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pu(Bi.fromBase64String(e))}catch(t){throw new yt(Je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pu(Bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new yt(Je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ui(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ih{constructor(e){this._methodName=e}}class Q_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yt(Je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yt(Je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vn(this._lat,e._lat)||vn(this._long,e._long)}}const oM=/^__.*__$/;class WI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new uu(e,this.data,this.fieldMask,t,this.fieldTransforms):new ja(e,this.data,t,this.fieldTransforms)}}class _w{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lt()}}class X_{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new X_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return ww(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(bw(this.sa)&&oM.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class aM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||ry(e)}da(e,t,r,i=!1){return new X_({sa:e,methodName:t,fa:r,path:ui.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Pc(n){const e=n._freezeSettings(),t=ry(n._databaseId);return new aM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Fp(n,e,t,r,i,s={}){const l=n.da(s.merge||s.mergeFields?2:0,e,t,i);YI("Data must be an object, but it was:",l,r);const d=cM(r,l);let p,v;if(s.merge)p=new eo(l.fieldMask),v=l.fieldTransforms;else if(s.mergeFields){const E=[];for(const D of s.mergeFields){const j=QI(e,D,t);if(!l.contains(j))throw new yt(Je.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);hM(E,j)||E.push(j)}p=new eo(E),v=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,v=l.fieldTransforms;return new WI(new ss(d),p,v)}class J_ extends Ih{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof J_}}function Tw(n,e,t){return new X_({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class my extends Ih{_toFieldTransform(e){return new Fm(e.path,new oh)}isEqual(e){return e instanceof my}}class lM extends Ih{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Tw(this,e,!0),r=this._a.map(s=>Dh(s,t)),i=new Cc(r);return new Fm(e.path,i)}isEqual(e){return this===e}}class uM extends Ih{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Tw(this,e,!0),r=this._a.map(s=>Dh(s,t)),i=new Sc(r);return new Fm(e.path,i)}isEqual(e){return this===e}}class IN extends Ih{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new ah(e.yt,UT(e.yt,this.wa));return new Fm(e.path,t)}isEqual(e){return this===e}}function KI(n,e,t,r){const i=n.da(1,e,t);YI("Data must be an object, but it was:",i,r);const s=[],l=ss.empty();gl(r,(p,v)=>{const E=e0(e,p,t);v=(0,Ct.m9)(v);const D=i.ca(E);if(v instanceof J_)s.push(E);else{const j=Dh(v,D);null!=j&&(s.push(E),l.set(E,j))}});const d=new eo(s);return new _w(l,d,i.fieldTransforms)}function Ew(n,e,t,r,i,s){const l=n.da(1,e,t),d=[QI(e,r,t)],p=[i];if(s.length%2!=0)throw new yt(Je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<s.length;j+=2)d.push(QI(e,s[j])),p.push(s[j+1]);const v=[],E=ss.empty();for(let j=d.length-1;j>=0;--j)if(!hM(v,d[j])){const F=d[j];let Q=p[j];Q=(0,Ct.m9)(Q);const ne=l.ca(F);if(Q instanceof J_)v.push(F);else{const ue=Dh(Q,ne);null!=ue&&(v.push(F),E.set(F,ue))}}const D=new eo(v);return new _w(E,D,l.fieldTransforms)}function ZI(n,e,t,r=!1){return Dh(t,n.da(r?4:3,e))}function Dh(n,e){if(dM(n=(0,Ct.m9)(n)))return YI("Unsupported field value:",e,n),cM(n,e);if(n instanceof Ih)return function(t,r){if(!bw(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const l of t){let d=Dh(l,r.aa(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Ct.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return UT(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Wr.fromDate(t);return{timestampValue:ch(r.yt,i)}}if(t instanceof Wr){const i=new Wr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ch(r.yt,i)}}if(t instanceof Q_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pu)return{bytesValue:QT(r.yt,t._byteString)};if(t instanceof Nr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:XT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${B_(t)}`)}(n,e)}function cM(n,e){const t={};return W1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gl(n,(r,i)=>{const s=Dh(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function dM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wr||n instanceof Q_||n instanceof pu||n instanceof Nr||n instanceof Ih)}function YI(n,e,t){if(!dM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=B_(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function QI(n,e,t){if((e=(0,Ct.m9)(e))instanceof Cl)return e._internalPath;if("string"==typeof e)return e0(n,e);throw ww("Field path arguments must be of type string or ",n,!1,void 0,t)}const DN=new RegExp("[~\\*/\\[\\]]");function e0(n,e,t){if(e.search(DN)>=0)throw ww(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cl(...e.split("."))._internalPath}catch{throw ww(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ww(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new yt(Je.INVALID_ARGUMENT,d+n+p)}function hM(n,e){return n.some(t=>t.isEqual(e))}class t0{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new AN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class AN extends t0{data(){return super.data()}}function Cw(n,e){return"string"==typeof e?e0(n,e):e instanceof Cl?e._internalPath:e._delegate._internalPath}function fM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new yt(Je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class o{}class a extends o{}function u(n,e,...t){let r=[];e instanceof o&&r.push(e),r=r.concat(t),function(i){const s=i.filter(d=>d instanceof m).length,l=i.filter(d=>d instanceof h).length;if(s>1||s>0&&l>0)throw new yt(Je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class h extends a{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new h(e,t,r)}_apply(e){const t=this._parse(e);return Fr(e._query,t),new ls(e.firestore,e.converter,Zv(e._query,t))}_parse(e){const t=Pc(e.firestore);return function(i,s,l,d,p,v,E){let D;if(p.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new yt(Je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){Yn(E,v);const j=[];for(const F of E)j.push(cn(d,i,F));D={arrayValue:{values:j}}}else D=cn(d,i,E)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||Yn(E,v),D=ZI(l,"where",E,"in"===v||"not-in"===v);return Dn.create(p,v,D)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class m extends o{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new m(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:hr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const l=i.getFlattenedFilters();for(const d of l)Fr(s,d),s=Zv(s,d)}(e._query,t),new ls(e.firestore,e.converter,Zv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class A extends a{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new A(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new yt(Je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new yt(Je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Fa(i,s);return function(d,p){if(null===lp(d)){const v=ih(d);null!==v&&Rc(0,v,p.field)}}(r,l),l}(e._query,this._field,this._direction);return new ls(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new oa(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class q extends a{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new q(e,t,r)}_apply(e){return new ls(e.firestore,e.converter,Lm(e._query,this._limit,this._limitType))}}class $e extends a{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $e(e,t,r)}_apply(e){const t=pt(e,this.type,this._docOrFields,this._inclusive);return new ls(e.firestore,e.converter,(i=t,new oa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class At extends a{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new At(e,t,r)}_apply(e){const t=pt(e,this.type,this._docOrFields,this._inclusive);return new ls(e.firestore,e.converter,(i=t,new oa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function pt(n,e,t,r){if(t[0]=(0,Ct.m9)(t[0]),t[0]instanceof t0)return function(i,s,l,d,p){if(!d)throw new yt(Je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const E of wc(i))if(E.field.isKeyField())v.push(Jd(s,d.key));else{const D=d.data.field(E.field);if(Qf(D))throw new yt(Je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const j=E.field.canonicalString();throw new yt(Je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${j}' (used as the orderBy) does not exist.`)}v.push(D)}return new vc(v,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Pc(n.firestore);return function(s,l,d,p,v,E){const D=s.explicitOrderBy;if(v.length>D.length)throw new yt(Je.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const j=[];for(let F=0;F<v.length;F++){const Q=v[F];if(D[F].field.isKeyField()){if("string"!=typeof Q)throw new yt(Je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof Q}`);if(!Kv(s)&&-1!==Q.indexOf("/"))throw new yt(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${Q}' contains a slash.`);const ne=s.path.child(qn.fromString(Q));if(!It.isDocumentKey(ne))throw new yt(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const ue=new It(ne);j.push(Jd(l,ue))}else{const ne=ZI(d,p,Q);j.push(ne)}}return new vc(j,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function cn(n,e,t){if("string"==typeof(t=(0,Ct.m9)(t))){if(""===t)throw new yt(Je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kv(e)&&-1!==t.indexOf("/"))throw new yt(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qn.fromString(t));if(!It.isDocumentKey(r))throw new yt(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jd(n,new It(r))}if(t instanceof Nr)return Jd(n,t._key);throw new yt(Je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${B_(t)}.`)}function Yn(n,e){if(!Array.isArray(n)||0===n.length)throw new yt(Je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new yt(Je.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Fr(n,e){if(e.isInequality()){const r=ih(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new yt(Je.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=lp(n);null!==s&&Rc(0,i,s)}const t=function(r,i){for(const s of r)for(const l of s.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new yt(Je.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Rc(n,e,t){if(!t.isEqual(e))throw new yt(Je.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class yy{convertValue(e,t="none"){switch(Xd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Lt()}}convertObject(e,t){const r={};return gl(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Q_(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xf(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xm(e));default:return null}}convertTimestamp(e){const t=ml(e);return new Wr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qn.fromString(e);Yt(sE(r));const i=new Na(r.get(1),r.get(3)),s=new It(r.popFirst(5));return i.isEqual(t)||li(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function jp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Sw extends yy{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,t)}}class gu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ha extends t0{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ah extends Ha{data(e={}){return super.data(e)}}class Sl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new gu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ah(this._firestore,this._userDataWriter,r.key,r,new gu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yt(Je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Ah(r._firestore,r._userDataWriter,l.doc.key,l.doc,new gu(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new Ah(r._firestore,r._userDataWriter,l.doc.key,l.doc,new gu(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),v=s.indexOf(l.doc.key)),{type:xw(l.type),doc:d,oldIndex:p,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xw(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lt()}}function kN(n,e){return n instanceof Ha&&e instanceof Ha?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sl&&e instanceof Sl&&n._firestore===e._firestore&&$a(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Up extends yy{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,t)}}function MN(n,e,t){n=Rn(n,Nr);const r=Rn(n.firestore,Lr),i=jp(n.converter,e,t);return r0(r,[Fp(Pc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,En.none())])}function PN(n,e,t,...r){n=Rn(n,Nr);const i=Rn(n.firestore,Lr),s=Pc(i);let l;return l="string"==typeof(e=(0,Ct.m9)(e))||e instanceof Cl?Ew(s,"updateDoc",n._key,e,t,r):KI(s,"updateDoc",n._key,e),r0(i,[l.toMutation(n._key,En.exists(!0))])}function RN(n,...e){var t,r,i;n=(0,Ct.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||qI(e[l])||(s=e[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if(qI(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,v,E;if(n instanceof Nr)v=Rn(n.firestore,Lr),E=Ec(n._key.path),p={next:D=>{e[l]&&e[l](pM(v,n,D))},error:e[l+1],complete:e[l+2]};else{const D=Rn(n,ls);v=Rn(D.firestore,Lr),E=D._query;const j=new Up(v);p={next:F=>{e[l]&&e[l](new Sl(v,j,D,F))},error:e[l+1],complete:e[l+2]},fM(n._query)}return function(D,j,F,Q){const ne=new dw(Q),ue=new M_(j,ne,F);return D.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return uy(yield Sh(D),ue)})),()=>{ne.bc(),D.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return k_(yield Sh(D),ue)}))}}(Si(v),E,d,p)}function r0(n,e){return function(t,r){const i=new Ji;return t.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function bI(n,e,t){return R_.apply(this,arguments)}(yield K_(t),r,i)})),i.promise}(Si(n),e)}function pM(n,e,t){const r=t.docs.get(e._key),i=new Up(n);return new Ha(n,i,e._key,r,new gu(t.hasPendingWrites,t.fromCache),e.converter)}const B3={maxAttempts:5};class ON{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pc(e)}set(e,t,r){this._verifyNotCommitted();const i=Vp(e,this._firestore),s=jp(i.converter,t,r),l=Fp(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,En.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Vp(e,this._firestore);let l;return l="string"==typeof(t=(0,Ct.m9)(t))||t instanceof Cl?Ew(this._dataReader,"WriteBatch.update",s._key,t,r,i):KI(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vp(e,this._firestore);return this._mutations=this._mutations.concat(new lh(t._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new yt(Je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vp(n,e){if((n=(0,Ct.m9)(n)).firestore!==e)throw new yt(Je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $3 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Pc(e)}get(e){const t=Vp(e,this._firestore),r=new Sw(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Lt();const s=i[0];if(s.isFoundDocument())return new t0(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new t0(this._firestore,r,t._key,null,t.converter);throw Lt()})}set(e,t,r){const i=Vp(e,this._firestore),s=jp(i.converter,t,r),l=Fp(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=Vp(e,this._firestore);let l;return l="string"==typeof(t=(0,Ct.m9)(t))||t instanceof Cl?Ew(this._dataReader,"Transaction.update",s._key,t,r,i):KI(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=Vp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vp(e,this._firestore),r=new Up(this._firestore);return super.get(e).then(i=>new Ha(this._firestore,r,t._key,i._document,new gu(!1,!1),t.converter))}}function gM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new yt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function LN(){if(typeof Uint8Array>"u")throw new yt("unimplemented","Uint8Arrays are not available in this environment.")}function FN(){if(!function PS(){return typeof atob<"u"}())throw new yt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Io=Ut.SDK_VERSION,(0,Ut._registerComponent)(new mn.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),l=new Lr(new Wf(t.getProvider("auth-internal")),new CS(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new yt(Je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(d.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Ut.registerVersion)(B1,"3.8.0",n),(0,Ut.registerVersion)(B1,"3.8.0","esm2017")}();class Iw{constructor(e){this._delegate=e}static fromBase64String(e){return FN(),new Iw(pu.fromBase64String(e))}static fromUint8Array(e){return LN(),new Iw(pu.fromUint8Array(e))}toBase64(){return FN(),this._delegate.toBase64()}toUint8Array(){return LN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mM(n){return function Q3(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class X3{enableIndexedDbPersistence(e,t){return function xh(n,e){sM(n=Rn(n,Lr));const t=Si(n),r=n._freezeSettings(),i=new aw;return Y_(t,i,new OI(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function zI(n){sM(n=Rn(n,Lr));const e=Si(n),t=n._freezeSettings(),r=new aw;return Y_(e,r,new ow(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gw(n){if(n._initialized&&!n._terminated)throw new yt(Je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ji;return n._queue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{yield(t=(0,De.Z)(function*(r){if(!Vi.C())return Promise.resolve();const i=r+"main";yield Vi.delete(i)}),function(r){return t.apply(this,arguments)})(ME(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class jN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Na||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&au("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function cw(n,e,t,r={}){var i;const s=(n=Rn(n,Np))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&au("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=ys.MOCK_USER;else{l=(0,Ct.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new yt(Je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ys(p)}n._authCredentials=new mT(new Tm(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function mw(n){return function Jk(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield hw(n),t=yield Lp(n);return e.setNetworkEnabled(!0),function(r){const i=Nt(r);return i._u.delete(0),Dp(i)}(t)}))}(Si(n=Rn(n,Lr)))}(this._delegate)}disableNetwork(){return function yw(n){return function eM(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield hw(n),t=yield Lp(n);return e.setNetworkEnabled(!1),(r=(0,De.Z)(function*(i){const s=Nt(i);s._u.add(0),yield kc(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Si(n=Rn(n,Lr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,NI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iM(n){return function(e){const t=new Ji;return e.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function dN(n,e){return xI.apply(this,arguments)}(yield K_(e),t)})),t.promise}(Si(n=Rn(n,Lr)))}(this._delegate)}onSnapshotsInSync(e){return function V3(n,e){return function nM(n,e){const t=new dw(e);return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield Sh(n),i=t,Nt(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield Sh(n),i=t,void Nt(r).Ru.delete(i);var r,i}))}}(Si(n=Rn(n,Lr)),qI(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new yt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new s0(this,$_(this._delegate,e))}catch(t){throw ko(t,"collection()","Firestore.collection()")}}doc(e){try{return new xl(this,fy(this._delegate,e))}catch(t){throw ko(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Mo(this,function Mc(n,e){if(n=Rn(n,Np),no("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new yt(Je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ls(n,null,(t=e,new oa(qn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ko(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function H3(n,e,t){n=Rn(n,Lr);const r=Object.assign(Object.assign({},B3),t);return function(i){if(i.maxAttempts<1)throw new yt(Je.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,l){const d=new Ji;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){const p=yield function $I(n){return gy(n).then(e=>e.datastore)}(i);new yN(i.asyncQueue,p,l,s,d).run()})),d.promise}(Si(n),i=>e(new $3(n,i)),r)}(this._delegate,t=>e(new UN(this,t)))}batch(){return Si(this._delegate),new VN(new ON(this._delegate,e=>r0(this._delegate,e)))}loadBundle(e){return function CN(n,e){const t=Si(n=Rn(n,Lr)),r=new TN;return function rM(n,e,t,r){const i=function(s,l){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,v){if(p instanceof Uint8Array)return jI(p,v);if(p instanceof ArrayBuffer)return jI(new Uint8Array(p),v);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new Zk(p,l);var p}(t,ry(e));n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){!function gN(n,e,t){const r=Nt(n);var i;(i=(0,De.Z)(function*(s,l,d){try{const p=yield l.getMetadata();if(yield function(j,F){const Q=Nt(j),ne=wi(F.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",ue=>Q.Ns.getBundleMetadata(ue,F.id)).then(ue=>!!ue&&ue.createTime.compareTo(ne)>=0)}(s.localStore,p))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(j=p).totalDocuments,bytesLoaded:j.totalBytes,totalDocuments:j.totalDocuments,totalBytes:j.totalBytes}),Promise.resolve(new Set);d._updateProgress(Vk(p));const v=new Uk(p,s.localStore,l.yt);let E=yield l.mc();for(;E;){const j=yield v.Fu(E);j&&d._updateProgress(j),E=yield l.mc()}const D=yield v.complete();return yield El(s,D.Lu,void 0),yield function(j,F){const Q=Nt(j);return Q.persistence.runTransaction("Save bundle","readwrite",ne=>Q.Ns.saveBundleMetadata(ne,F))}(s.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Bu)}catch(p){return au("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var j}),function(s,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield K_(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function SN(n,e){return function _N(n,e){return n.asyncQueue.enqueue((0,De.Z)(function*(){return function(t,r){const i=Nt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield Ch(n),e)}))}(Si(n=Rn(n,Lr)),e).then(t=>t?new ls(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Mo(this,t):null)}}class XI extends yy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iw(new pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xl.forKey(t,this.firestore,null)}}class UN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new XI(e)}get(e){const t=_y(e);return this._delegate.get(t).then(r=>new Dw(this._firestore,new Ha(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=_y(e);return r?(gM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=_y(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=_y(e);return this._delegate.delete(t),this}}class VN{constructor(e){this._delegate=e}set(e,t,r){const i=_y(e);return r?(gM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=_y(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=_y(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vy{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ah(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Aw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=vy.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new vy(e,new XI(e),t),i.set(t,s)),s}}vy.INSTANCES=new WeakMap;class xl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new yt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xl(t,new Nr(t._delegate,r,new It(e)))}static forKey(e,t,r){return new xl(t,new Nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new s0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new s0(this.firestore,$_(this._delegate,e))}catch(t){throw ko(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ct.m9)(e))instanceof Nr&&H_(this._delegate,e)}set(e,t){t=gM("DocumentReference.set",t);try{return t?MN(this._delegate,e,t):MN(this._delegate,e)}catch(r){throw ko(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?PN(this._delegate,e):PN(this._delegate,e,t,...r)}catch(i){throw ko(i,"updateDoc()","DocumentReference.update()")}}delete(){return function j3(n){return r0(Rn(n.firestore,Lr),[new lh(n._key,En.none())])}(this._delegate)}onSnapshot(...e){const t=BN(e),r=$N(e,i=>new Dw(this.firestore,new Ha(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return RN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function R3(n){n=Rn(n,Nr);const e=Rn(n.firestore,Lr),t=Si(e),r=new Up(e);return function vN(n,e){const t=new Ji;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,s,l){try{const d=yield function(p,v){const E=Nt(p);return E.persistence.runTransaction("read document","readonly",D=>E.localDocuments.getDocument(D,v))}(i,s);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new yt(Je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=Mp(d,`Failed to get document '${s} from cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield Ch(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ha(e,r,n._key,i,new gu(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function O3(n){n=Rn(n,Nr);const e=Rn(n.firestore,Lr);return tM(Si(e),n._key,{source:"server"}).then(t=>pM(e,n,t))}(this._delegate):function P3(n){n=Rn(n,Nr);const e=Rn(n.firestore,Lr);return tM(Si(e),n._key).then(t=>pM(e,n,t))}(this._delegate),t.then(r=>new Dw(this.firestore,new Ha(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xl(this.firestore,this._delegate.withConverter(e?vy.getInstance(this.firestore,e):null))}}function ko(n,e,t){return n.message=n.message.replace(e,t),n}function BN(n){for(const e of n)if("object"==typeof e&&!mM(e))return e;return{}}function $N(n,e){var t,r;let i;return i=mM(n[0])?n[0]:mM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Dw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kN(this._delegate,e._delegate)}}class Aw extends Dw{data(e){const t=this._delegate.data(e);return function $1(n,e){n||Lt()}(void 0!==t),t}}class Mo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XI(e)}where(e,t,r){try{return new Mo(this.firestore,u(this._delegate,function f(n,e,t){const r=e,i=Cw("where",n);return h._create(i,r,t)}(e,t,r)))}catch(i){throw ko(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Mo(this.firestore,u(this._delegate,function N(n,e="asc"){const t=e,r=Cw("orderBy",n);return A._create(r,t)}(e,t)))}catch(r){throw ko(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Mo(this.firestore,u(this._delegate,function J(n){return lw("limit",n),q._create("limit",n,"F")}(e)))}catch(t){throw ko(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Mo(this.firestore,u(this._delegate,function xe(n){return lw("limitToLast",n),q._create("limitToLast",n,"L")}(e)))}catch(t){throw ko(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Mo(this.firestore,u(this._delegate,function lt(...n){return $e._create("startAt",n,!0)}(...e)))}catch(t){throw ko(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Mo(this.firestore,u(this._delegate,function St(...n){return $e._create("startAfter",n,!1)}(...e)))}catch(t){throw ko(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Mo(this.firestore,u(this._delegate,function Kt(...n){return At._create("endBefore",n,!1)}(...e)))}catch(t){throw ko(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Mo(this.firestore,u(this._delegate,function rn(...n){return At._create("endAt",n,!0)}(...e)))}catch(t){throw ko(t,"endAt()","Query.endAt()")}}isEqual(e){return $a(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function L3(n){n=Rn(n,ls);const e=Rn(n.firestore,Lr),t=Si(e),r=new Up(e);return function HI(n,e){const t=new Ji;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,s,l){try{const d=yield g_(i,s,!0),p=new gI(s,d.Hi),v=p.Wu(d.documents),E=p.applyChanges(v,!1);l.resolve(E.snapshot)}catch(d){const p=Mp(d,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(i,s,l){return r.apply(this,arguments)})(yield Ch(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Sl(e,r,n,i))}(this._delegate):"server"===e?.source?function F3(n){n=Rn(n,ls);const e=Rn(n.firestore,Lr),t=Si(e),r=new Up(e);return GI(t,n._query,{source:"server"}).then(i=>new Sl(e,r,n,i))}(this._delegate):function N3(n){n=Rn(n,ls);const e=Rn(n.firestore,Lr),t=Si(e),r=new Up(e);return fM(n._query),GI(t,n._query).then(i=>new Sl(e,r,n,i))}(this._delegate),t.then(r=>new yM(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=BN(e),r=$N(e,i=>new yM(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return RN(this._delegate,t,r)}withConverter(e){return new Mo(this.firestore,this._delegate.withConverter(e?vy.getInstance(this.firestore,e):null))}}class e${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Aw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Mo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Aw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new e$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Aw(this._firestore,r))})}isEqual(e){return kN(this._delegate,e._delegate)}}class s0 extends Mo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xl(this.firestore,e):null}doc(e){try{return new xl(this.firestore,void 0===e?fy(this._delegate):fy(this._delegate,e))}catch(t){throw ko(t,"doc()","CollectionReference.doc()")}}add(e){return function U3(n,e){const t=Rn(n.firestore,Lr),r=fy(n),i=jp(n.converter,e);return r0(t,[Fp(Pc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new xl(this.firestore,t))}isEqual(e){return H_(this._delegate,e._delegate)}withConverter(e){return new s0(this.firestore,this._delegate.withConverter(e?vy.getInstance(this.firestore,e):null))}}function _y(n){return Rn(n,Nr)}class vM{constructor(...e){this._delegate=new Cl(...e)}static documentId(){return new vM(ui.keyField().canonicalString())}isEqual(e){return(e=(0,Ct.m9)(e))instanceof Cl&&this._delegate._internalPath.isEqual(e._internalPath)}}class by{constructor(e){this._delegate=e}static serverTimestamp(){const e=function q3(){return new my("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new by(e)}static delete(){const e=function G3(){return new J_("deleteField")}();return e._methodName="FieldValue.delete",new by(e)}static arrayUnion(...e){const t=function z3(...n){return new lM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new by(t)}static arrayRemove(...e){const t=function W3(...n){return new uM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new by(t)}static increment(e){const t=function K3(n){return new IN("increment",n)}(e);return t._methodName="FieldValue.increment",new by(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const t$={Firestore:jN,GeoPoint:Q_,Timestamp:Wr,Blob:Iw,Transaction:UN,WriteBatch:VN,DocumentReference:xl,DocumentSnapshot:Dw,Query:Mo,QueryDocumentSnapshot:Aw,QuerySnapshot:yM,CollectionReference:s0,FieldPath:vM,FieldValue:by,setLogLevel:function J3(n){!function wS(n){pl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function HN(n,e){return function i$(n,e=js.z){return new mr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function _M(n,e){return HN(n,e).pipe((0,Zt.U)(t=>({payload:t,type:"query"})))}function JI(n,e){return _M(n,e).pipe(ta(void 0),jd(),(0,Zt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const p=i.find(E=>E.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(E=>E.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function GN(n,e,t){return JI(n,t).pipe(Af((r,i)=>function o$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function a$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return bM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return bM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function Tb(n,e=oc.y){return n=n??$g,(0,Gr.e)((t,r)=>{let i,s=!0;t.subscribe((0,vi.x)(r,l=>{const d=e(l);(s||!n(i,d))&&(s=!1,i=d,r.next(l))}))})}(),(0,Zt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function bM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function qN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function r$(n){(function n$(n,e){n.INTERNAL.registerComponent(new mn.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},t$)))})(n,(e,t)=>new jN(e,t,new X3)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(g.Z);class zN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=JI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Zt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ta(void 0),jd(),Ni(([r,i])=>i.length>0||!r),(0,Zt.U)(([r,i])=>i),rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Af((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qN(e);return GN(this.query,t,this.afs.schedulers.outsideAngular).pipe(rr.iC)}valueChanges(e={}){return _M(this.query,this.afs.schedulers.outsideAngular).pipe((0,Zt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),rr.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(rr.iC)}add(e){return this.ref.add(e)}doc(e){return new WN(this.ref.doc(e),this.afs)}}class WN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=YN(r,t);return new zN(i,s,this.afs)}snapshotChanges(){return function s$(n,e){return HN(n,e).pipe(ta(void 0),jd(),(0,Zt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(rr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Zt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Un.D)(this.ref.get(e)).pipe(rr.iC)}}class l${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?JI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Zt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ni(t=>t.length>0),rr.iC):JI(this.query,this.afs.schedulers.outsideAngular).pipe(rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Af((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qN(e);return GN(this.query,t,this.afs.schedulers.outsideAngular).pipe(rr.iC)}valueChanges(e={}){return _M(this.query,this.afs.schedulers.outsideAngular).pipe((0,Zt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),rr.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(rr.iC)}}const KN=new c.OlP("angularfire2.enableFirestorePersistence"),ZN=new c.OlP("angularfire2.firestore.persistenceSettings"),u$=new c.OlP("angularfire2.firestore.settings"),c$=new c.OlP("angularfire2.firestore.use-emulator");function YN(n,e=(t=>t)){return{query:e(n),ref:n}}let TM=(()=>{class n{constructor(t,r,i,s,l,d,p,v,E,D,j,F,Q,ne,ue,Ve,We){this.schedulers=p;const Qe=(0,yi.on)(t,d,r),Le=E;D&&Ld(Qe,d,j,Q,ne,ue,F,Ve),[this.firestore,this.persistenceEnabled$]=(0,yi.cc)(`${Qe.name}.firestore`,"AngularFirestore",Qe.name,()=>{const Ae=d.runOutsideAngular(()=>Qe.firestore());if(s&&Ae.settings(s),Le&&Ae.useEmulator(...Le),i&&!Ri(l)){const ct=()=>{try{return(0,Un.D)(Ae.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(kt){return typeof console<"u"&&console.warn(kt),Ot(!1)}};return[Ae,d.runOutsideAngular(ct)]}return[Ae,Ot(!1)]},[s,Le,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=YN(i,r),d=this.schedulers.ngZone.run(()=>s);return new zN(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new l$(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new WN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(yi.Dh),c.LFG(yi.xv,8),c.LFG(KN,8),c.LFG(u$,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(rr.HU),c.LFG(ZN,8),c.LFG(c$,8),c.LFG(Xs,8),c.LFG(Sf,8),c.LFG(xf,8),c.LFG(If,8),c.LFG(Df,8),c.LFG(ru,8),c.LFG(ms,8),c.LFG(wf,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QN=(()=>{class n{constructor(){Aa.Z.registerVersion("angularfire",rr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:KN,useValue:!0},{provide:ZN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[TM]}),n})();class mu extends Oi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:d$}=Array,{getPrototypeOf:h$,prototype:f$,keys:p$}=Object;function XN(n){if(1===n.length){const e=n[0];if(d$(e))return{args:e,keys:null};if(function g$(n){return n&&"object"==typeof n&&h$(n)===f$}(e)){const t=p$(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:m$}=Array;function EM(n){return(0,Zt.U)(e=>function y$(n,e){return m$(e)?n(...e):n(e)}(n,e))}function JN(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var v$=V(9672);function eD(...n){const e=(0,al.yG)(n),t=(0,al.jO)(n),{args:r,keys:i}=XN(n);if(0===r.length)return(0,Un.D)([],e);const s=new mr.y(function _$(n,e,t=oc.y){return r=>{eL(e,()=>{const{length:i}=n,s=new Array(i);let l=i,d=i;for(let p=0;p<i;p++)eL(e,()=>{const v=(0,Un.D)(n[p],e);let E=!1;v.subscribe((0,vi.x)(r,D=>{s[p]=D,E||(E=!0,d--),d||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>JN(i,l):oc.y));return t?s.pipe(EM(t)):s}function eL(n,e,t){n?(0,v$.f)(t,n,e):e()}function tL(n){return new mr.y(e=>{(0,Ds.Xf)(n()).subscribe(e)})}var nL=V(9635);function kw(n,e){const t=(0,Zi.m)(n)?n:()=>n,r=i=>i.error(t());return new mr.y(e?i=>e.schedule(r,0,i):r)}var rL=V(727);function wM(){return(0,Gr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,vi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class iL extends mr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Gr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rL.w0;const t=this.getSubject();e.add(this.source.subscribe((0,vi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rL.w0.EMPTY)}return e}refCount(){return wM()(this)}}var Vs=V(5577);function Ty(n,e){return(0,Zi.m)(e)?(0,Vs.z)(n,e,1):(0,Vs.z)(n,1)}var ro=V(8505);function Bp(n){return(0,Gr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,vi.x)(t,void 0,void 0,l=>{s=(0,Ds.Xf)(n(l,Bp(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function CM(n){return n<=0?()=>To.E:(0,Gr.e)((e,t)=>{let r=[];e.subscribe((0,vi.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sL(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ni((i,s)=>n(i,s,r)):oc.y,CM(1),t?Qo(e):pg(()=>new xa))}function oL(n){return(0,Zt.U)(()=>n)}function SM(n){return(0,Gr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ln="primary",Mw=Symbol("RouteTitle");class T${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function o0(n){return new T$(n)}function E$(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],d=n[s];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Oc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!aL(n[i],e[i]))return!1;return!0}function aL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function lL(n){return Array.prototype.concat.apply([],n)}function uL(n){return n.length>0?n[n.length-1]:null}function Bs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function $p(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Un.D)(Promise.resolve(n)):Ot(n)}const S$={exact:function hL(n,e,t){if(!wy(n.segments,e.segments)||!tD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!hL(n.children[r],e.children[r],t))return!1;return!0},subset:fL},cL={exact:function x$(n,e){return Oc(n,e)},subset:function I$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>aL(n[t],e[t]))},ignored:()=>!0};function dL(n,e,t){return S$[t.paths](n.root,e.root,t.matrixParams)&&cL[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function fL(n,e,t){return pL(n,e,e.segments,t)}function pL(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!wy(i,t)||e.hasChildren()||!tD(i,t,r))}if(n.segments.length===t.length){if(!wy(n.segments,t)||!tD(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!fL(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(wy(n.segments,i)&&tD(n.segments,i,r)&&n.children[Ln])&&pL(n.children[Ln],e,s,r)}}function tD(n,e,t){return e.every((r,i)=>cL[t](n[i].parameters,r.parameters))}class Ey{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=o0(this.queryParams)),this._queryParamMap}toString(){return k$.serialize(this)}}class Vn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Bs(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nD(this)}}class Pw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=o0(this.parameters)),this._parameterMap}toString(){return vL(this)}}function wy(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let gL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new IM},providedIn:"root"}),n})();class IM{parse(e){const t=new U$(e);return new Ey(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Rw(e.root,!0)}`,r=function R$(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${rD(t)}=${rD(i)}`).join("&"):`${rD(t)}=${rD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function M$(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const k$=new IM;function nD(n){return n.segments.map(e=>vL(e)).join("/")}function Rw(n,e){if(!n.hasChildren())return nD(n);if(e){const t=n.children[Ln]?Rw(n.children[Ln],!1):"",r=[];return Bs(n.children,(i,s)=>{s!==Ln&&r.push(`${s}:${Rw(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function A$(n,e){let t=[];return Bs(n.children,(r,i)=>{i===Ln&&(t=t.concat(e(r,i)))}),Bs(n.children,(r,i)=>{i!==Ln&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ln?[Rw(n.children[Ln],!1)]:[`${i}:${Rw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ln]?`${nD(n)}/${t[0]}`:`${nD(n)}/(${t.join("//")})`}}function mL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rD(n){return mL(n).replace(/%3B/gi,";")}function DM(n){return mL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iD(n){return decodeURIComponent(n)}function yL(n){return iD(n.replace(/\+/g,"%20"))}function vL(n){return`${DM(n.path)}${function P$(n){return Object.keys(n).map(e=>`;${DM(e)}=${DM(n[e])}`).join("")}(n.parameters)}`}const O$=/^[^\/()?;=#]+/;function sD(n){const e=n.match(O$);return e?e[0]:""}const N$=/^[^=?&#]+/,F$=/^[^&#]+/;class U${constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vn([],{}):new Vn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ln]=new Vn(e,t)),r}parseSegment(){const e=sD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(e),new Pw(iD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=sD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=sD(this.remaining);i&&(r=i,this.capture(r))}e[iD(t)]=iD(r)}parseQueryParam(e){const t=function L$(n){const e=n.match(N$);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function j$(n){const e=n.match(F$);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=yL(t),s=yL(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=sD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ln);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[Ln]:new Vn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,!1)}}function AM(n){return n.segments.length>0?new Vn([],{[Ln]:n}):n}function oD(n){const e={};for(const r of Object.keys(n.children)){const s=oD(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function V$(n){if(1===n.numberOfChildren&&n.children[Ln]){const e=n.children[Ln];return new Vn(n.segments.concat(e.segments),e.children)}return n}(new Vn(n.segments,e))}function Cy(n){return n instanceof Ey}function H$(n,e,t,r,i){if(0===t.length)return a0(e.root,e.root,e.root,r,i);const s=function TL(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new bL(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Bs(s.outlets,(p,v)=>{d[v]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new bL(t,e,r)}(t);return s.toRoot()?a0(e.root,e.root,new Vn([],{}),r,i):function l(p){const v=function q$(n,e,t,r){if(n.isAbsolute)return new l0(e.root,!0,0);if(-1===r)return new l0(t,t===e.root,0);return function EL(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new c.vHH(4005,!1);i=r.segments.length}return new l0(r,!1,i-s)}(t,r+(Ow(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),E=v.processChildren?Lw(v.segmentGroup,v.index,s.commands):MM(v.segmentGroup,v.index,s.commands);return a0(e.root,v.segmentGroup,E,r,i)}(n.snapshot?._lastPathIndex)}function Ow(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Nw(n){return"object"==typeof n&&null!=n&&n.outlets}function a0(n,e,t,r,i){let l,s={};r&&Bs(r,(p,v)=>{s[v]=Array.isArray(p)?p.map(E=>`${E}`):`${p}`}),l=n===e?t:_L(n,e,t);const d=AM(oD(l));return new Ey(d,s,i)}function _L(n,e,t){const r={};return Bs(n.children,(i,s)=>{r[s]=i===e?t:_L(i,e,t)}),new Vn(n.segments,r)}class bL{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ow(r[0]))throw new c.vHH(4003,!1);const i=r.find(Nw);if(i&&i!==uL(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class l0{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function MM(n,e,t){if(n||(n=new Vn([],{})),0===n.segments.length&&n.hasChildren())return Lw(n,e,t);const r=function W$(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],d=t[r];if(Nw(d))break;const p=`${d}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&v&&"object"==typeof v&&void 0===v.outlets){if(!CL(p,v,l))return s;r+=2}else{if(!CL(p,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Vn(n.segments.slice(0,r.pathIndex),{});return s.children[Ln]=new Vn(n.segments.slice(r.pathIndex),n.children),Lw(s,0,i)}return r.match&&0===i.length?new Vn(n.segments,{}):r.match&&!n.hasChildren()?PM(n,e,t):r.match?Lw(n,0,i):PM(n,e,t)}function Lw(n,e,t){if(0===t.length)return new Vn(n.segments,{});{const r=function z$(n){return Nw(n[0])?n[0].outlets:{[Ln]:n}}(t),i={};return Bs(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=MM(n.children[l],e,s))}),Bs(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new Vn(n.segments,i)}}function PM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Nw(s)){const p=K$(s.outlets);return new Vn(r,p)}if(0===i&&Ow(t[0])){r.push(new Pw(n.segments[e].path,wL(t[0]))),i++;continue}const l=Nw(s)?s.outlets[Ln]:`${s}`,d=i<t.length-1?t[i+1]:null;l&&d&&Ow(d)?(r.push(new Pw(l,wL(d))),i+=2):(r.push(new Pw(l,{})),i++)}return new Vn(r,{})}function K$(n){const e={};return Bs(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=PM(new Vn([],{}),0,t))}),e}function wL(n){const e={};return Bs(n,(t,r)=>e[r]=`${t}`),e}function CL(n,e,t){return n==t.path&&Oc(e,t.parameters)}class kh{constructor(e,t){this.id=e,this.url=t}}class RM extends kh{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Hp extends kh{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class aD extends kh{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class SL extends kh{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Z$ extends kh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y$ extends kh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q$ extends kh{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class X$ extends kh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J$ extends kh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eH{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class tH{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nH{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rH{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iH{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sH{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xL{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class IL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=OM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=OM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=NM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return NM(e,this._root).map(t=>t.value)}}function OM(n,e){if(n===e.value)return e;for(const t of e.children){const r=OM(n,t);if(r)return r}return null}function NM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=NM(n,t);if(r.length)return r.unshift(e),r}return[]}class Mh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function u0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class DL extends IL{constructor(e,t){super(e),this.snapshot=t,LM(this,e)}toString(){return this.snapshot.toString()}}function AL(n,e){const t=function aH(n,e){const l=new lD([],{},{},"",{},Ln,e,null,n.root,-1,{});return new ML("",new Mh(l,[]))}(n,e),r=new mu([new Pw("",{})]),i=new mu({}),s=new mu({}),l=new mu({}),d=new mu(""),p=new Nc(r,i,l,d,s,Ln,e,t.root);return p.snapshot=t.root,new DL(new Mh(p,[]),t)}class Nc{constructor(e,t,r,i,s,l,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,Zt.U)(v=>v[Mw]))??Ot(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Zt.U)(e=>o0(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Zt.U)(e=>o0(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kL(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function lH(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class lD{constructor(e,t,r,i,s,l,d,p,v,E,D,j){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=d,this.title=this.data?.[Mw],this.routeConfig=p,this._urlSegment=v,this._lastPathIndex=E,this._correctedLastPathIndex=j??E,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=o0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=o0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ML extends IL{constructor(e,t){super(t),this.url=e,LM(this,t)}toString(){return PL(this._root)}}function LM(n,e){e.value._routerState=n,e.children.forEach(t=>LM(n,t))}function PL(n){const e=n.children.length>0?` { ${n.children.map(PL).join(", ")} } `:"";return`${n.value}${e}`}function FM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Oc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Oc(e.params,t.params)||n.params.next(t.params),function w$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Oc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Oc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function jM(n,e){const t=Oc(n.params,e.params)&&function D$(n,e){return wy(n,e)&&n.every((t,r)=>Oc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||jM(n.parent,e.parent))}function Fw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cH(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Fw(n,r,i);return Fw(n,r)})}(n,e,t);return new Mh(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>Fw(n,d)),l}}const r=function dH(n){return new Nc(new mu(n.url),new mu(n.params),new mu(n.queryParams),new mu(n.fragment),new mu(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Fw(n,s));return new Mh(r,i)}}const UM="ngNavigationCancelingError";function RL(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Cy(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=OL(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function OL(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[UM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function NL(n){return LL(n)&&Cy(n.url)}function LL(n){return n&&n[UM]}class hH{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jw,this.attachRef=null}}let jw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hH,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uD=!1;let VM=(()=>{class n{constructor(t,r,i,s,l){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=i||Ln,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,uD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,uD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,uD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,uD);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new fH(t,d,i.injector);if(r&&function pH(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,p)}else this.activated=i.createComponent(l,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(jw),c.Y36(c.s_b),c.$8M("name"),c.Y36(c.sBO),c.Y36(c.lqb))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class fH{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Nc?this.route:e===jw?this.childContexts:this.parent.get(e,t)}}let BM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[VM],encapsulation:2}),n})();function FL(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function HM(n){const e=n.children&&n.children.map(HM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ln&&(t.component=BM),t}function Il(n){return n.outlet||Ln}function jL(n,e){const t=n.filter(r=>Il(r)===e);return t.push(...n.filter(r=>Il(r)!==e)),t}function Uw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _H{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),FM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=u0(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),Bs(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=u0(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=u0(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=u0(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new sH(s.value.snapshot))}),e.children.length&&this.forwardEvent(new rH(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(FM(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),FM(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=Uw(i.snapshot),p=d?.get(c._Vd)??null;l.attachRef=null,l.route=i,l.resolver=p,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class UL{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cD{constructor(e,t){this.component=e,this.route=t}}function bH(n,e,t){const r=n._root;return Vw(r,e?e._root:null,t,[r.value])}function c0(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function Vw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=u0(e);return n.children.forEach(l=>{(function EH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function wH(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!wy(n.url,e.url);case"pathParamsOrQueryParamsChange":return!wy(n.url,e.url)||!Oc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jM(n,e)||!Oc(n.queryParams,e.queryParams);default:return!jM(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new UL(r)):(s.data=l.data,s._resolvedData=l._resolvedData),Vw(n,e,s.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new cD(d.outlet.component,l))}else l&&Bw(e,d,i),i.canActivateChecks.push(new UL(r)),Vw(n,null,s.component?d?d.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),Bs(s,(l,d)=>Bw(l,t.getContext(d),i)),i}function Bw(n,e,t){const r=u0(n),i=n.value;Bs(r,(s,l)=>{Bw(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new cD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function $w(n){return"function"==typeof n}function GM(n){return n instanceof xa||"EmptyError"===n?.name}const dD=Symbol("INITIAL_VALUE");function d0(){return cr(n=>eD(n.map(e=>e.pipe(Ys(1),ta(dD)))).pipe((0,Zt.U)(e=>{for(const t of e)if(!0!==t){if(t===dD)return dD;if(!1===t||t instanceof Ey)return t}return!0}),Ni(e=>e!==dD),Ys(1)))}function VL(n){return(0,nL.z)((0,ro.b)(e=>{if(Cy(e))throw RL(0,e)}),(0,Zt.U)(e=>!0===e))}const qM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BL(n,e,t,r,i){const s=zM(n,e,t);return s.matched?function VH(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ot(i.map(l=>{const d=c0(l,n);return $p(function AH(n){return n&&$w(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(d0(),VL()):Ot(!0)}(r=FL(e,r),e,t).pipe((0,Zt.U)(l=>!0===l?s:{...qM})):Ot(s)}function zM(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||E$)(t,n,e);if(!i)return{...qM};const s={};Bs(i.posParams,(d,p)=>{s[p]=d.path});const l=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function hD(n,e,t,r,i="corrected"){if(t.length>0&&function HH(n,e,t){return t.some(r=>fD(n,e,r)&&Il(r)!==Ln)}(n,t,r)){const l=new Vn(e,function $H(n,e,t,r){const i={};i[Ln]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Il(s)!==Ln){const l=new Vn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Il(s)]=l}return i}(n,e,r,new Vn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function GH(n,e,t){return t.some(r=>fD(n,e,r))}(n,t,r)){const l=new Vn(n.segments,function BH(n,e,t,r,i,s){const l={};for(const d of r)if(fD(n,t,d)&&!i[Il(d)]){const p=new Vn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[Il(d)]=p}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new Vn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function fD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $L(n,e,t,r){return!!(Il(n)===r||r!==Ln&&fD(e,t,n))&&("**"===n.path||zM(e,n,t).matched)}function HL(n,e,t){return 0===e.length&&!n.children[t]}const pD=!1;class gD{constructor(e){this.segmentGroup=e||null}}class GL{constructor(e){this.urlTree=e}}function Hw(n){return kw(new gD(n))}function qL(n){return kw(new GL(n))}class KH{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=hD(this.urlTree.root,[],[],this.config).segmentGroup,t=new Vn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ln).pipe((0,Zt.U)(s=>this.createUrlTree(oD(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bp(s=>{if(s instanceof GL)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof gD?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ln).pipe((0,Zt.U)(i=>this.createUrlTree(oD(i),e.queryParams,e.fragment))).pipe(Bp(i=>{throw i instanceof gD?this.noMatchError(i):i}))}noMatchError(e){return new c.vHH(4002,pD)}createUrlTree(e,t,r){const i=AM(e);return new Ey(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Zt.U)(s=>new Vn([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Un.D)(i).pipe(Ty(s=>{const l=r.children[s],d=jL(t,s);return this.expandSegmentGroup(e,d,l,s).pipe((0,Zt.U)(p=>({segment:p,outlet:s})))}),Af((s,l)=>(s[l.outlet]=l.segment,s),{}),sL())}expandSegment(e,t,r,i,s,l){return(0,Un.D)(r).pipe(Ty(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,s,l).pipe(Bp(v=>{if(v instanceof gD)return Ot(null);throw v}))),gs(d=>!!d),Bp((d,p)=>{if(GM(d))return HL(t,i,s)?Ot(new Vn([],{})):Hw(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,s,l,d){return $L(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):Hw(t):Hw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?qL(s):this.lineralizeSegments(r,s).pipe((0,Vs.z)(l=>{const d=new Vn(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:d,consumedSegments:p,remainingSegments:v,positionalParamSegments:E}=zM(t,i,s);if(!d)return Hw(t);const D=this.applyRedirectCommands(p,i.redirectTo,E);return i.redirectTo.startsWith("/")?qL(D):this.lineralizeSegments(i,D).pipe((0,Vs.z)(j=>this.expandSegment(e,t,r,j.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=FL(r,e),r.loadChildren?(r._loadedRoutes?Ot({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Zt.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Vn(i,{})))):Ot(new Vn(i,{}))):BL(t,r,i,e).pipe(cr(({matched:l,consumedSegments:d,remainingSegments:p})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Vs.z)(E=>{const D=E.injector??e,j=E.routes,{segmentGroup:F,slicedSegments:Q}=hD(t,d,p,j),ne=new Vn(F.segments,F.children);if(0===Q.length&&ne.hasChildren())return this.expandChildren(D,j,ne).pipe((0,Zt.U)(Qe=>new Vn(d,Qe)));if(0===j.length&&0===Q.length)return Ot(new Vn(d,{}));const ue=Il(r)===s;return this.expandSegment(D,ne,j,Q,ue?Ln:s,!0).pipe((0,Zt.U)(We=>new Vn(d.concat(We.segments),We.children)))})):Hw(t)))}getChildConfig(e,t,r){return t.children?Ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function UH(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ot(!0):Ot(i.map(l=>{const d=c0(l,n);return $p(function SH(n){return n&&$w(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(d0(),VL())}(e,t,r).pipe((0,Vs.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ro.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function zH(n){return kw(OL(pD,3))}())):Ot({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ot(r);if(i.numberOfChildren>1||!i.children[Ln])return kw(new c.vHH(4e3,pD));i=i.children[Ln]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Ey(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Bs(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[s]=t[d]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return Bs(t.children,(d,p)=>{l[p]=this.createSegmentGroup(e,d,r,i)}),new Vn(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new c.vHH(4001,pD);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class YH{}class JH{constructor(e,t,r,i,s,l,d,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d,this.urlSerializer=p}recognize(){const e=hD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ln).pipe((0,Zt.U)(t=>{if(null===t)return null;const r=new lD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ln,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Mh(r,t),s=new ML(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=kL(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Un.D)(Object.keys(r.children)).pipe(Ty(i=>{const s=r.children[i],l=jL(t,i);return this.processSegmentGroup(e,l,s,i)}),Af((i,s)=>i&&s?(i.push(...s),i):null),function b$(n,e=!1){return(0,Gr.e)((t,r)=>{let i=0;t.subscribe((0,vi.x)(r,s=>{const l=n(s,i++);(l||e)&&r.next(s),!l&&r.complete()}))})}(i=>null!==i),Qo(null),sL(),(0,Zt.U)(i=>{if(null===i)return null;const s=zL(i);return function e4(n){n.sort((e,t)=>e.value.outlet===Ln?-1:t.value.outlet===Ln?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,Un.D)(t).pipe(Ty(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,s)),gs(l=>!!l),Bp(l=>{if(GM(l))return HL(r,i,s)?Ot([]):Ot(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!$L(t,r,i,s))return Ot(null);let l;if("**"===t.path){const d=i.length>0?uL(i).parameters:{},p=KL(r)+i.length;l=Ot({snapshot:new lD(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YL(t),Il(t),t.component??t._loadedComponent??null,t,WL(r),p,QL(t),p),consumedSegments:[],remainingSegments:[]})}else l=BL(r,t,i,e).pipe((0,Zt.U)(({matched:d,consumedSegments:p,remainingSegments:v,parameters:E})=>{if(!d)return null;const D=KL(r)+p.length;return{snapshot:new lD(p,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YL(t),Il(t),t.component??t._loadedComponent??null,t,WL(r),D,QL(t),D),consumedSegments:p,remainingSegments:v}}));return l.pipe(cr(d=>{if(null===d)return Ot(null);const{snapshot:p,consumedSegments:v,remainingSegments:E}=d;e=t._injector??e;const D=t._loadedInjector??e,j=function t4(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:F,slicedSegments:Q}=hD(r,v,E,j.filter(ue=>void 0===ue.redirectTo),this.relativeLinkResolution);if(0===Q.length&&F.hasChildren())return this.processChildren(D,j,F).pipe((0,Zt.U)(ue=>null===ue?null:[new Mh(p,ue)]));if(0===j.length&&0===Q.length)return Ot([new Mh(p,[])]);const ne=Il(t)===s;return this.processSegment(D,j,F,Q,ne?Ln:s).pipe((0,Zt.U)(ue=>null===ue?null:[new Mh(p,ue)]))}))}}function n4(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function zL(n){const e=[],t=new Set;for(const r of n){if(!n4(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=zL(r.children);e.push(new Mh(r.value,i))}return e.filter(r=>!t.has(r))}function WL(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function KL(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function YL(n){return n.data||{}}function QL(n){return n.resolve||{}}function XL(n){return"string"==typeof n.title||null===n.title}function WM(n){return cr(e=>{const t=n(e);return t?(0,Un.D)(t).pipe((0,Zt.U)(()=>e)):Ot(e)})}let JL=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ln);return r}getResolvedTitleForRoute(t){return t.data[Mw]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(eF)},providedIn:"root"}),n})(),eF=(()=>{class n extends JL{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vo))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class c4{}class h4 extends class d4{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const yD=new c.OlP("",{providedIn:"root",factory:()=>({})}),KM=new c.OlP("ROUTES");let ZM=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=$p(t.loadComponent()).pipe((0,ro.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),SM(()=>{this.componentLoaders.delete(t)})),i=new iL(r,()=>new Oi.x).pipe(wM());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ot({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Zt.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,v,E=!1;Array.isArray(d)?v=d:(p=d.create(t).injector,v=lL(p.get(KM,[],c.XFs.Self|c.XFs.Optional)));return{routes:v.map(HM),injector:p}}),SM(()=>{this.childrenLoaders.delete(r)})),l=new iL(s,()=>new Oi.x).pipe(wM());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return $p(t()).pipe((0,Vs.z)(r=>r instanceof c.YKP||Array.isArray(r)?Ot(r):(0,Un.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3),c.LFG(c.Sil))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class p4{}class g4{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function m4(n){throw n}function y4(n,e,t){return e.parse("/")}const v4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function nF(){const n=(0,c.f3M)(gL),e=(0,c.f3M)(jw),t=(0,c.f3M)(Ge),r=(0,c.f3M)(c.zs3),i=(0,c.f3M)(c.Sil),s=(0,c.f3M)(KM,{optional:!0})??[],l=(0,c.f3M)(yD,{optional:!0})??{},d=(0,c.f3M)(eF),p=(0,c.f3M)(JL,{optional:!0}),v=(0,c.f3M)(p4,{optional:!0}),E=(0,c.f3M)(c4,{optional:!0}),D=new xi(null,n,e,t,r,i,lL(s));return v&&(D.urlHandlingStrategy=v),E&&(D.routeReuseStrategy=E),D.titleStrategy=p??d,function b4(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,D),D}let xi=(()=>{class n{constructor(t,r,i,s,l,d,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Oi.x,this.errorHandler=m4,this.malformedUriErrorHandler=y4,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ot(void 0),this.urlHandlingStrategy=new g4,this.routeReuseStrategy=new h4,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(ZM),this.configLoader.onLoadEndListener=j=>this.triggerEvent(new tH(j)),this.configLoader.onLoadStartListener=j=>this.triggerEvent(new eH(j)),this.ngModule=l.get(c.h0i),this.console=l.get(c.c2e);const D=l.get(c.R0b);this.isNgZoneEnabled=D instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function C$(){return new Ey(new Vn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=AL(this.currentUrlTree,this.rootComponentType),this.transitions=new mu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ni(i=>0!==i.id),(0,Zt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),cr(i=>{let s=!1,l=!1;return Ot(i).pipe((0,ro.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),cr(d=>{const p=this.browserUrlTree.toString(),v=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return rF(d.source)&&(this.browserUrlTree=d.extractedUrl),Ot(d).pipe(cr(D=>{const j=this.transitions.getValue();return r.next(new RM(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),j!==this.transitions.getValue()?To.E:Promise.resolve(D)}),function ZH(n,e,t,r){return cr(i=>function WH(n,e,t,r,i){return new KH(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Zt.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ro.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},i.urlAfterRedirects=D.urlAfterRedirects}),function i4(n,e,t,r,i,s){return(0,Vs.z)(l=>function XH(n,e,t,r,i,s,l="emptyOnly",d="legacy"){return new JH(n,e,t,r,i,l,d,s).recognize().pipe(cr(p=>null===p?function QH(n){return new mr.y(e=>e.error(n))}(new YH):Ot(p)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,s).pipe((0,Zt.U)(d=>({...l,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ro.b)(D=>{if(i.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(F,D)}this.browserUrlTree=D.urlAfterRedirects}const j=new Z$(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(j)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:j,extractedUrl:F,source:Q,restoredState:ne,extras:ue}=d,Ve=new RM(j,this.serializeUrl(F),Q,ne);r.next(Ve);const We=AL(F,this.rootComponentType).snapshot;return Ot(i={...d,targetSnapshot:We,urlAfterRedirects:F,extras:{...ue,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),To.E}),(0,ro.b)(d=>{const p=new Y$(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,Zt.U)(d=>i={...d,guards:bH(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function MH(n,e){return(0,Vs.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?Ot({...t,guardsResult:!0}):function PH(n,e,t,r){return(0,Un.D)(n).pipe((0,Vs.z)(i=>function jH(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ot(s.map(d=>{const p=Uw(e)??i,v=c0(d,p);return $p(function DH(n){return n&&$w(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):p.runInContext(()=>v(n,e,t,r))).pipe(gs())})).pipe(d0()):Ot(!0)}(i.component,i.route,t,e,r)),gs(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Vs.z)(d=>d&&function CH(n){return"boolean"==typeof n}(d)?function RH(n,e,t,r){return(0,Un.D)(e).pipe(Ty(i=>iu(function NH(n,e){return null!==n&&e&&e(new nH(n)),Ot(!0)}(i.route.parent,r),function OH(n,e){return null!==n&&e&&e(new iH(n)),Ot(!0)}(i.route,r),function FH(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function TH(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>tL(()=>Ot(l.guards.map(p=>{const v=Uw(l.node)??t,E=c0(p,v);return $p(function IH(n){return n&&$w(n.canActivateChild)}(E)?E.canActivateChild(r,n):v.runInContext(()=>E(r,n))).pipe(gs())})).pipe(d0())));return Ot(s).pipe(d0())}(n,i.path,t),function LH(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ot(!0);const i=r.map(s=>tL(()=>{const l=Uw(e)??t,d=c0(s,l);return $p(function xH(n){return n&&$w(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(gs())}));return Ot(i).pipe(d0())}(n,i.route,t))),gs(i=>!0!==i,!0))}(r,s,n,e):Ot(d)),(0,Zt.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,ro.b)(d=>{if(i.guardsResult=d.guardsResult,Cy(d.guardsResult))throw RL(0,d.guardsResult);const p=new Q$(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),Ni(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),WM(d=>{if(d.guards.canActivateChecks.length)return Ot(d).pipe((0,ro.b)(p=>{const v=new X$(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}),cr(p=>{let v=!1;return Ot(p).pipe(function s4(n,e){return(0,Vs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ot(t);let s=0;return(0,Un.D)(i).pipe(Ty(l=>function o4(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!XL(i)&&(s[Mw]=i.title),function a4(n,e,t,r){const i=function l4(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ot({});const s={};return(0,Un.D)(i).pipe((0,Vs.z)(l=>function u4(n,e,t,r){const i=Uw(e)??r,s=c0(n,i);return $p(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[l],e,t,r).pipe(gs(),(0,ro.b)(d=>{s[l]=d}))),CM(1),oL(s),Bp(l=>GM(l)?To.E:kw(l)))}(s,n,e,r).pipe((0,Zt.U)(l=>(n._resolvedData=l,n.data=kL(n,t).resolve,i&&XL(i)&&(n.data[Mw]=i.title),null)))}(l.route,r,n,e)),(0,ro.b)(()=>s++),CM(1),(0,Vs.z)(l=>s===i.length?Ot(t):To.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ro.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,ro.b)(p=>{const v=new J$(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}))}),WM(d=>{const p=v=>{const E=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,ro.b)(D=>{v.component=D}),(0,Zt.U)(()=>{})));for(const D of v.children)E.push(...p(D));return E};return eD(p(d.targetSnapshot.root)).pipe(Qo(),Ys(1))}),WM(()=>this.afterPreactivation()),(0,Zt.U)(d=>{const p=function uH(n,e,t){const r=Fw(n,e._root,t?t._root:void 0);return new DL(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:p}}),(0,ro.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,Zt.U)(r=>(new _H(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,ro.b)({next(){s=!0},complete(){s=!0}}),SM(()=>{s||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Bp(d=>{if(l=!0,LL(d)){NL(d)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new aD(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(p),NL(d)){const v=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||rF(i.source)};this.scheduleNavigation(v,"imperative",null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new SL(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(d))}catch(v){i.reject(v)}}return To.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(HM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:p}=r,v=i||this.routerState.root,E=p?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D={...this.currentUrlTree.queryParams,...s};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),H$(v,this.currentUrlTree,t,D,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Cy(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function T4(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new c.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...v4}:!1===r?{..._4}:r,Cy(t))return dL(this.currentUrlTree,t,i);const s=this.parseUrl(t);return dL(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Hp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,l){if(this.disposed)return Promise.resolve(!1);let d,p,v;l?(d=l.resolve,p=l.reject,v=l.promise):v=new Promise((j,F)=>{d=j,p=F});const E=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),D=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:E,targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:d,reject:p,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(j=>Promise.reject(j))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new aD(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:function(){return nF()},providedIn:"root"}),n})();function rF(n){return"imperative"!==n}let YM=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Oi.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xi),c.Y36(Nc),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})(),h0=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Oi.x,this.subscription=t.events.subscribe(s=>{s instanceof Hp&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,l){return!!(0!==t||r||i||s||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xi),c.Y36(Nc),c.Y36(Be))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})(),iF=(()=>{class n{constructor(t,r,i,s,l,d){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=l,this.linkWithHref=d,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(p=>{p instanceof Hp&&this.update()})}ngAfterContentInit(){Ot(this.links.changes,this.linksWithHrefs.changes,Ot(null)).pipe((0,So.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Un.D)(t).pipe((0,So.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function E4(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xi),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(YM,8),c.Y36(h0,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,YM,5),c.Suo(i,h0,5)),2&t){let s;c.iGM(s=c.CRH())&&(r.links=s),c.iGM(s=c.CRH())&&(r.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[c.TTD]}),n})();class sF{}let w4=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ni(t=>t instanceof Hp),Ty(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,c.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,d=s._loadedInjector??l;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(l,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,Un.D)(i).pipe((0,So.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ot(null);const s=i.pipe((0,Vs.z)(l=>null===l?Ot(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Un.D)([s,l]).pipe((0,So.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xi),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(sF),c.LFG(ZM))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QM=new c.OlP("");let oF=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof RM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function f0(n,e){return{\u0275kind:n,\u0275providers:e}}function XM(n){return[{provide:KM,multi:!0,useValue:n}]}function lF(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(xi),i=n.get(uF);1===n.get(JM)&&r.initialNavigation(),n.get(cF,null,c.XFs.Optional)?.setUpPreloading(),n.get(QM,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const uF=new c.OlP("",{factory:()=>new Oi.x}),JM=new c.OlP("",{providedIn:"root",factory:()=>1});const cF=new c.OlP("");function I4(n){return f0(0,[{provide:cF,useExisting:w4},{provide:sF,useExisting:n}])}const dF=new c.OlP("ROUTER_FORROOT_GUARD"),D4=[Ge,{provide:gL,useClass:IM},{provide:xi,useFactory:nF},jw,{provide:Nc,useFactory:function aF(n){return n.routerState.root},deps:[xi]},ZM];function A4(){return new c.PXZ("Router",xi)}let TD=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[D4,[],XM(t),{provide:dF,useFactory:R4,deps:[[xi,new c.FiY,new c.tp0]]},{provide:yD,useValue:r||{}},r?.useHash?{provide:Be,useClass:nt}:{provide:Be,useClass:Ke},{provide:QM,useFactory:()=>{const n=(0,c.f3M)(xi),e=(0,c.f3M)(Mu),t=(0,c.f3M)(yD);return t.scrollOffset&&e.setOffset(t.scrollOffset),new oF(n,e,t)}},r?.preloadingStrategy?I4(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:A4},r?.initialNavigation?O4(r):[],[{provide:hF,useFactory:lF},{provide:c.tb,multi:!0,useExisting:hF}]]}}static forChild(t){return{ngModule:n,providers:[XM(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(dF,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[BM]}),n})();function R4(n){return"guarded"}function O4(n){return["disabled"===n.initialNavigation?f0(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(xi);return()=>{e.setUpLocationChangeListener()}}},{provide:JM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?f0(2,[{provide:JM,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(K,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const l=e.get(xi),d=e.get(uF);(function i(s){e.get(xi).events.pipe(Ni(d=>d instanceof Hp||d instanceof aD||d instanceof SL),(0,Zt.U)(d=>d instanceof Hp||d instanceof aD&&(0===d.code||1===d.code)&&null),Ni(d=>null!==d),Ys(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),l.afterPreactivation=()=>(s(!0),r||d.closed?Ot(void 0):d),l.initialNavigation()}))}}]).\u0275providers:[]]}const hF=new c.OlP("");let L4=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container","mx-auto","mt-4"]],template:function(t,r){1&t&&(c.TgZ(0,"p",0),c._uU(1," This is a basic about page to demonstrate basic routing capabilities. "),c.qZA())}}),n})();var F4=V(9226),be=V.n(F4),j4=V(1421),Mt=V.n(j4),U4=V(1234),Cn=V.n(U4),V4=V(8099),B4=V.n(V4),$4=V(745),fF=V.n($4),H4=V(3629),pF=V.n(H4),G4=V(3871),ED=V.n(G4),gF="http://example.com";function Gp(){return Gp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gp.apply(this,arguments)}var eP=function(){function n(){this.listeners={}}var e=n.prototype;return e.on=function(r,i){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(i)},e.off=function(r,i){if(!this.listeners[r])return!1;var s=this.listeners[r].indexOf(i);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(s,1),s>-1},e.trigger=function(r){var i=this.listeners[r];if(i)if(2===arguments.length)for(var s=i.length,l=0;l<s;++l)i[l].call(this,arguments[1]);else for(var d=Array.prototype.slice.call(arguments,1),p=i.length,v=0;v<p;++v)i[v].apply(this,d)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(i){r.push(i)})},n}();function K4(n){for(var e=function(e){return be().atob?be().atob(e):Buffer.from(e,"base64").toString("binary")}(n),t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}class Z4 extends eP{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const Y4=String.fromCharCode(9),tP=function(n){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(n||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},yu=function(n){const e={};if(!n)return e;const t=n.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let i,r=t.length;for(;r--;)""!==t[r]&&(i=/([^=]*)=(.*)/.exec(t[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),e[i[0]]=i[1]);return e};class X4 extends eP{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,r;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((s,l)=>{const d=l(e);return d===e?s:s.concat([d])},[e]).forEach(s=>{for(let l=0;l<this.customParsers.length;l++)if(this.customParsers[l].call(this,s))return;if(0===s.indexOf("#EXT"))if(s=s.replace("\r",""),t=/^#EXTM3U/.exec(s),t)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),t)return r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void this.trigger("data",r);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),t)return r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),void this.trigger("data",r);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),t)return r=Gp(tP(t[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",r);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),t)return r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-MAP:(.*)$/.exec(s),t){if(r={type:"tag",tagType:"map"},t[1]){const l=yu(t[1]);l.URI&&(r.uri=l.URI),l.BYTERANGE&&(r.byterange=tP(l.BYTERANGE))}this.trigger("data",r)}else if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),t){if(r={type:"tag",tagType:"stream-inf"},t[1]){if(r.attributes=yu(t[1]),r.attributes.RESOLUTION){const l=r.attributes.RESOLUTION.split("x"),d={};l[0]&&(d.width=parseInt(l[0],10)),l[1]&&(d.height=parseInt(l[1],10)),r.attributes.RESOLUTION=d}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}this.trigger("data",r)}else{if(t=/^#EXT-X-MEDIA:(.*)$/.exec(s),t)return r={type:"tag",tagType:"media"},t[1]&&(r.attributes=yu(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-ENDLIST/.exec(s),t)this.trigger("data",{type:"tag",tagType:"endlist"});else{if(t=/^#EXT-X-DISCONTINUITY/.exec(s),!t)return t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),t?(r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),void this.trigger("data",r)):(t=/^#EXT-X-KEY:(.*)$/.exec(s),t?(r={type:"tag",tagType:"key"},t[1]&&(r.attributes=yu(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r)):(t=/^#EXT-X-START:(.*)$/.exec(s),t?(r={type:"tag",tagType:"start"},t[1]&&(r.attributes=yu(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void this.trigger("data",r)):(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),t?(r={type:"tag",tagType:"cue-out-cont"},r.data=t[1]?t[1]:"",void this.trigger("data",r)):(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),t?(r={type:"tag",tagType:"cue-out"},r.data=t[1]?t[1]:"",void this.trigger("data",r)):(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(s),t?(r={type:"tag",tagType:"cue-in"},r.data=t[1]?t[1]:"",void this.trigger("data",r)):(t=/^#EXT-X-SKIP:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"skip"},r.attributes=yu(t[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(Y4)),void this.trigger("data",r)):(t=/^#EXT-X-PART:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"part"},r.attributes=yu(t[1]),["DURATION"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=parseFloat(r.attributes[l]))}),["INDEPENDENT","GAP"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=/YES/.test(r.attributes[l]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=tP(r.attributes.BYTERANGE)),void this.trigger("data",r)):(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"server-control"},r.attributes=yu(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=parseFloat(r.attributes[l]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=/YES/.test(r.attributes[l]))}),void this.trigger("data",r)):(t=/^#EXT-X-PART-INF:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"part-inf"},r.attributes=yu(t[1]),["PART-TARGET"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=parseFloat(r.attributes[l]))}),void this.trigger("data",r)):(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"preload-hint"},r.attributes=yu(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(l){if(r.attributes.hasOwnProperty(l)){r.attributes[l]=parseInt(r.attributes[l],10);const d="BYTERANGE-LENGTH"===l?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[d]=r.attributes[l],delete r.attributes[l]}}),void this.trigger("data",r)):(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"rendition-report"},r.attributes=yu(t[1]),["LAST-MSN","LAST-PART"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=parseInt(r.attributes[l],10))}),void this.trigger("data",r)):void this.trigger("data",{type:"tag",data:s.slice(4)}))))))))))));this.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else this.trigger("data",{type:"comment",text:s.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))}addParser({expression:e,customType:t,dataParser:r,segment:i}){"function"!=typeof r&&(r=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:r(s),customType:t,segment:i}),!0})}addTagMapper({expression:e,map:t}){this.tagMappers.push(i=>e.test(i)?t(i):i)}}const p0=function(n){const e={};return Object.keys(n).forEach(function(t){e[(n=>n.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()))(t)]=n[t]}),e},nP=function(n){const{serverControl:e,targetDuration:t,partTargetDuration:r}=n;if(!e)return;const i="#EXT-X-SERVER-CONTROL",s="holdBack",l="partHoldBack",d=t&&3*t,p=r&&2*r;t&&!e.hasOwnProperty(s)&&(e[s]=d,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${d}).`})),d&&e[s]<d&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${d})`}),e[s]=d),r&&!e.hasOwnProperty(l)&&(e[l]=3*r,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[l]}).`})),r&&e[l]<p&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${e[l]}) to partTargetDuration * 2 (${p}).`}),e[l]=p)};class e6 extends eP{constructor(){super(),this.lineStream=new Z4,this.parseStream=new X4,this.lineStream.pipe(this.parseStream);const e=this,t=[];let i,s,r={},l=!1;const d=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let E=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let D=0,j=0;this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&i&&(r.map=i),!r.key&&s&&(r.key=s),!r.timeline&&"number"==typeof E&&(r.timeline=E),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(F){let Q,ne;({tag(){({version(){F.version&&(this.manifest.version=F.version)},"allow-cache"(){this.manifest.allowCache=F.allowed,"allowed"in F||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const ue={};"length"in F&&(r.byterange=ue,ue.length=F.length,"offset"in F||(F.offset=D)),"offset"in F&&(r.byterange=ue,ue.offset=F.offset),D=ue.offset+ue.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),F.duration>0&&(r.duration=F.duration),0===F.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(F.attributes)if("NONE"!==F.attributes.METHOD){if(F.attributes.URI)return"com.apple.streamingkeydelivery"===F.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:F.attributes})):"com.microsoft.playready"===F.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:F.attributes.URI})):"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===F.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(F.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===F.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==F.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):F.attributes.KEYID&&"0x"===F.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:F.attributes.KEYFORMAT,keyId:F.attributes.KEYID.substring(2)},pssh:K4(F.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(F.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:F.attributes.METHOD||"AES-128",uri:F.attributes.URI},void(typeof F.attributes.IV<"u"&&(s.iv=F.attributes.IV)));this.trigger("warn",{message:"ignoring key declaration without URI"})}else s=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(F.number)?this.manifest.mediaSequence=F.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+F.number})},"discontinuity-sequence"(){isFinite(F.number)?(this.manifest.discontinuitySequence=F.number,E=F.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+F.number})},"playlist-type"(){/VOD|EVENT/.test(F.playlistType)?this.manifest.playlistType=F.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+F.playlist})},map(){i={},F.uri&&(i.uri=F.uri),F.byterange&&(i.byterange=F.byterange),s&&(i.key=s)},"stream-inf"(){this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||p,F.attributes?(r.attributes||(r.attributes={}),Gp(r.attributes,F.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||p,!(F.attributes&&F.attributes.TYPE&&F.attributes["GROUP-ID"]&&F.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const ue=this.manifest.mediaGroups[F.attributes.TYPE];ue[F.attributes["GROUP-ID"]]=ue[F.attributes["GROUP-ID"]]||{},Q=ue[F.attributes["GROUP-ID"]],ne={default:/yes/i.test(F.attributes.DEFAULT)},ne.autoselect=!!ne.default||/yes/i.test(F.attributes.AUTOSELECT),F.attributes.LANGUAGE&&(ne.language=F.attributes.LANGUAGE),F.attributes.URI&&(ne.uri=F.attributes.URI),F.attributes["INSTREAM-ID"]&&(ne.instreamId=F.attributes["INSTREAM-ID"]),F.attributes.CHARACTERISTICS&&(ne.characteristics=F.attributes.CHARACTERISTICS),F.attributes.FORCED&&(ne.forced=/yes/i.test(F.attributes.FORCED)),Q[F.attributes.NAME]=ne},discontinuity(){E+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=F.dateTimeString,this.manifest.dateTimeObject=F.dateTimeObject),r.dateTimeString=F.dateTimeString,r.dateTimeObject=F.dateTimeObject},targetduration(){!isFinite(F.duration)||F.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+F.duration}):(this.manifest.targetDuration=F.duration,nP.call(this,this.manifest))},start(){F.attributes&&!isNaN(F.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:F.attributes["TIME-OFFSET"],precise:F.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=F.data},"cue-out-cont"(){r.cueOutCont=F.data},"cue-in"(){r.cueIn=F.data},skip(){this.manifest.skip=p0(F.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",F.attributes,["SKIPPED-SEGMENTS"])},part(){l=!0;const ue=this.manifest.segments.length,Ve=p0(F.attributes);r.parts=r.parts||[],r.parts.push(Ve),Ve.byterange&&(Ve.byterange.hasOwnProperty("offset")||(Ve.byterange.offset=j),j=Ve.byterange.offset+Ve.byterange.length),this.warnOnMissingAttributes_(`#EXT-X-PART #${r.parts.length-1} for segment #${ue}`,F.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((Qe,Le)=>{Qe.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${Le} lacks required attribute(s): LAST-PART`})})},"server-control"(){const ue=this.manifest.serverControl=p0(F.attributes);ue.hasOwnProperty("canBlockReload")||(ue.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),nP.call(this,this.manifest),ue.canSkipDateranges&&!ue.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const ue=this.manifest.segments.length,Ve=p0(F.attributes),We=Ve.type&&"PART"===Ve.type;r.preloadHints=r.preloadHints||[],r.preloadHints.push(Ve),Ve.byterange&&(Ve.byterange.hasOwnProperty("offset")||(Ve.byterange.offset=We?j:0,We&&(j=Ve.byterange.offset+Ve.byterange.length)));const Qe=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${Qe} for segment #${ue}`,F.attributes,["TYPE","URI"]),Ve.type)for(let Le=0;Le<r.preloadHints.length-1;Le++){const Ae=r.preloadHints[Le];!Ae.type||Ae.type===Ve.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${Qe} for segment #${ue} has the same TYPE ${Ve.type} as preload hint #${Le}`})}},"rendition-report"(){const ue=p0(F.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(ue);const Ve=this.manifest.renditionReports.length-1,We=["LAST-MSN","URI"];l&&We.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${Ve}`,F.attributes,We)},"part-inf"(){this.manifest.partInf=p0(F.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",F.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),nP.call(this,this.manifest)}}[F.tagType]||d).call(e)},uri(){r.uri=F.uri,t.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),s&&(r.key=s),r.timeline=E,i&&(r.map=i),j=0,r={}},comment(){},custom(){F.segment?(r.custom=r.custom||{},r.custom[F.customType]=F.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[F.customType]=F.data)}})[F.type].call(e)})}warnOnMissingAttributes_(e,t,r){const i=[];r.forEach(function(s){t.hasOwnProperty(s)||i.push(s)}),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var qp={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},t6=["video","audio","text"],mF=["Video","Audio","Text"],rP=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,r,i){return"avc1."+("00"+Number(r).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})},Lc=function(e){void 0===e&&(e="");var t=e.split(","),r=[];return t.forEach(function(i){var s;i=i.trim(),t6.forEach(function(l){var d=qp[l].exec(i.toLowerCase());if(d&&!(d.length<=1)){s=l;var p=i.substring(0,d[1].length),v=i.replace(p,"");r.push({type:p,details:v,mediaType:l})}}),s||r.push({type:i,details:"",mediaType:"unknown"})}),r},yF=function(e){return void 0===e&&(e=""),qp.audio.test(e.trim().toLowerCase())},Gw=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map(function(s){return rP(s.trim())}),r="video";1===t.length&&yF(t[0])?r="audio":1===t.length&&function(e){return void 0===e&&(e=""),qp.text.test(e.trim().toLowerCase())}(t[0])&&(r="application");var i="mp4";return t.every(function(s){return qp.mp4.test(s)})?i="mp4":t.every(function(s){return qp.webm.test(s)})?i="webm":t.every(function(s){return qp.ogg.test(s)})&&(i="ogg"),r+"/"+i+';codecs="'+e+'"'}},wD=function(e){return void 0===e&&(e=""),be().MediaSource&&be().MediaSource.isTypeSupported&&be().MediaSource.isTypeSupported(Gw(e))||!1},iP=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var r=0;r<mF.length;r++)if(qp["muxer"+mF[r]].test(t))return!0;return!1})},vF="mp4a.40.2",o6=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,a6=/^application\/dash\+xml/i,_F=function(e){return o6.test(e)?"hls":a6.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},TF=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},en=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!function(e){return TF(e)}(e)&&!(e instanceof ArrayBuffer)&&(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},$s=be().BigInt||Number,sP=[$s("0x1"),$s("0x100"),$s("0x10000"),$s("0x1000000"),$s("0x100000000"),$s("0x10000000000"),$s("0x1000000000000"),$s("0x100000000000000"),$s("0x10000000000000000")],h6=(function(){var n=new Uint16Array([65484]);new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}(),function(e,t){var r=void 0===t?{}:t,i=r.signed,s=void 0!==i&&i,l=r.le,d=void 0!==l&&l;e=en(e);var p=d?"reduce":"reduceRight",E=(e[p]?e[p]:Array.prototype[p]).call(e,function(j,F,Q){var ne=d?Q:Math.abs(Q+1-e.length);return j+$s(F)*sP[ne]},$s(0));if(s){var D=sP[e.length]/$s(2)-$s(1);(E=$s(E))>D&&(E-=D,E-=D,E-=$s(2))}return Number(E)}),wF=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r},hi=function(e,t,r){var i=void 0===r?{}:r,s=i.offset,l=void 0===s?0:s,d=i.mask,p=void 0===d?[]:d;return e=en(e),(t=en(t)).length&&e.length-l>=t.length&&(t.every?t.every:Array.prototype.every).call(t,function(E,D){return E===(p[D]?p[D]&e[l+D]:e[l+D])})},CF="http://example.com";const oP=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=be().location&&be().location.href||"");var r="function"==typeof be().URL,i=/^\/\//.test(e),s=!be().location&&!/\/\//i.test(e);if(r?e=new(be().URL)(e,be().location||CF):/\/\//i.test(e)||(e=ED().buildAbsoluteURL(be().location&&be().location.href||"",e)),r){var l=new URL(t,e);return s?l.href.slice(CF.length):i?l.href.slice(l.protocol.length):l.href}return ED().buildAbsoluteURL(e,t)};var b6=V(978);const SF=n=>!!n&&"object"==typeof n,io=(...n)=>n.reduce((e,t)=>("object"!=typeof t||Object.keys(t).forEach(r=>{e[r]=Array.isArray(e[r])&&Array.isArray(t[r])?e[r].concat(t[r]):SF(e[r])&&SF(t[r])?io(e[r],t[r]):t[r]}),e),{}),xF=n=>Object.keys(n).map(e=>n[e]),CD=n=>n.reduce((e,t)=>e.concat(t),[]),IF=n=>{if(!n.length)return[];const e=[];for(let t=0;t<n.length;t++)e.push(n[t]);return e};const qw=({baseUrl:n="",source:e="",range:t="",indexRange:r=""})=>{const i={uri:e,resolvedUri:oP(n||"",e)};if(t||r){const l=(t||r).split("-");let v,d=be().BigInt?be().BigInt(l[0]):parseInt(l[0],10),p=be().BigInt?be().BigInt(l[1]):parseInt(l[1],10);d<Number.MAX_SAFE_INTEGER&&"bigint"==typeof d&&(d=Number(d)),p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),v="bigint"==typeof p||"bigint"==typeof d?be().BigInt(p)-be().BigInt(d)+be().BigInt(1):p-d+1,"bigint"==typeof v&&v<Number.MAX_SAFE_INTEGER&&(v=Number(v)),i.byterange={length:v,offset:d}}return i},DF=n=>(n&&"number"!=typeof n&&(n=parseInt(n,10)),isNaN(n)?null:n),S6={static(n){const{duration:e,timescale:t=1,sourceDuration:r,periodDuration:i}=n,s=DF(n.endNumber),l=e/t;return"number"==typeof s?{start:0,end:s}:"number"==typeof i?{start:0,end:i/l}:{start:0,end:r/l}},dynamic(n){const{NOW:e,clientOffset:t,availabilityStartTime:r,timescale:i=1,duration:s,periodStart:l=0,minimumUpdatePeriod:d=0,timeShiftBufferDepth:p=1/0}=n,v=DF(n.endNumber),E=(e+t)/1e3,D=r+l,Q=Math.ceil((E+d-D)*i/s),ne=Math.floor((E-D-p)*i/s),ue=Math.floor((E-D)*i/s);return{start:Math.max(0,ne),end:"number"==typeof v?v:Math.min(Q,ue)}}},aP=n=>{const{type:e,duration:t,timescale:r=1,periodDuration:i,sourceDuration:s}=n,{start:l,end:d}=S6[e](n),p=((n,e)=>{const t=[];for(let r=n;r<e;r++)t.push(r);return t})(l,d).map((n=>e=>{const{duration:t,timescale:r=1,periodStart:i,startNumber:s=1}=n;return{number:s+e,duration:t/r,timeline:i,time:e*t}})(n));if("static"===e){const v=p.length-1;p[v].duration=("number"==typeof i?i:s)-t/r*v}return p},AF=n=>{const{baseUrl:e,initialization:t={},sourceDuration:r,indexRange:i="",periodStart:s,presentationTime:l,number:d=0,duration:p}=n;if(!e)throw new Error("NO_BASE_URL");const v=qw({baseUrl:e,source:t.sourceURL,range:t.range}),E=qw({baseUrl:e,source:e,indexRange:i});if(E.map=v,p){const D=aP(n);D.length&&(E.duration=D[0].duration,E.timeline=D[0].timeline)}else r&&(E.duration=r,E.timeline=s);return E.presentationTime=l||s,E.number=d,[E]},lP=(n,e,t)=>{const r=n.sidx.map?n.sidx.map:null,i=n.sidx.duration,s=n.timeline||0,l=n.sidx.byterange,d=l.offset+l.length,p=e.timescale,v=e.references.filter(ue=>1!==ue.referenceType),E=[],D=n.endList?"static":"dynamic",j=n.sidx.timeline;let ne,F=j,Q=n.mediaSequence||0;ne="bigint"==typeof e.firstOffset?be().BigInt(d)+e.firstOffset:d+e.firstOffset;for(let ue=0;ue<v.length;ue++){const Ve=e.references[ue],We=Ve.referencedSize,Qe=Ve.subsegmentDuration;let Le;Le="bigint"==typeof ne?ne+be().BigInt(We)-be().BigInt(1):ne+We-1;const kt=AF({baseUrl:t,timescale:p,timeline:s,periodStart:j,presentationTime:F,number:Q,duration:Qe,sourceDuration:i,indexRange:`${ne}-${Le}`,type:D})[0];r&&(kt.map=r),E.push(kt),ne+="bigint"==typeof ne?be().BigInt(We):We,F+=Qe/p,Q++}return n.segments=E,n},I6=["AUDIO","SUBTITLES"],kF=n=>((n,e)=>xF(n.reduce((t,r)=>(r.forEach(i=>{t[(({timeline:e})=>e)(i)]=i}),t),{})))(n).sort((e,t)=>e.timeline>t.timeline?1:-1),MF=n=>{let e=[];return function(e,t,r){t.forEach(function(i){for(var s in e.mediaGroups[i])for(var l in e.mediaGroups[i][s])r(e.mediaGroups[i][s][l])})}(n,I6,(t,r,i,s)=>{e=e.concat(t.playlists||[])}),e},PF=({playlist:n,mediaSequence:e})=>{n.mediaSequence=e,n.segments.forEach((t,r)=>{t.number=n.mediaSequence+r})},SD=n=>n&&n.uri+"-"+(n=>{let e;return e="bigint"==typeof n.offset||"bigint"==typeof n.length?be().BigInt(n.offset)+be().BigInt(n.length)-be().BigInt(1):n.offset+n.length-1,`${n.offset}-${e}`})(n.byterange),uP=n=>xF(n.reduce((t,r)=>{const i=r.attributes.id+(r.attributes.lang||"");return t[i]?(r.segments&&(r.segments[0]&&(r.segments[0].discontinuity=!0),t[i].segments.push(...r.segments)),r.attributes.contentProtection&&(t[i].attributes.contentProtection=r.attributes.contentProtection)):(t[i]=r,t[i].attributes.timelineStarts=[]),t[i].attributes.timelineStarts.push({start:r.attributes.periodStart,timeline:r.attributes.periodStart}),t},{})).map(t=>(t.discontinuityStarts=((n,e)=>n.reduce((t,r,i)=>(r.discontinuity&&t.push(i),t),[]))(t.segments||[]),t)),cP=(n,e)=>{const t=SD(n.sidx),r=t&&e[t]&&e[t].sidx;return r&&lP(n,r,n.sidx.resolvedUri),n},P6=(n,e={})=>{if(!Object.keys(e).length)return n;for(const t in n)n[t]=cP(n[t],e);return n},j6=({attributes:n,segments:e,sidx:t,discontinuityStarts:r})=>{const i={attributes:{NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:r,timelineStarts:n.timelineStarts,segments:e};return n.frameRate&&(i.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(i.contentProtection=n.contentProtection),t&&(i.sidx=t),i},U6=({attributes:n})=>"video/mp4"===n.mimeType||"video/webm"===n.mimeType||"video"===n.contentType,V6=({attributes:n})=>"audio/mp4"===n.mimeType||"audio/webm"===n.mimeType||"audio"===n.contentType,B6=({attributes:n})=>"text/vtt"===n.mimeType||"text"===n.contentType,RF=n=>n?Object.keys(n).reduce((e,t)=>e.concat(n[t].playlists),[]):[],H6=({dashPlaylists:n,locations:e,sidxMapping:t={},previousManifest:r})=>{if(!n.length)return{};const{sourceDuration:i,type:s,suggestedPresentationDelay:l,minimumUpdatePeriod:d}=n[0].attributes,p=uP(n.filter(U6)).map(j6),v=uP(n.filter(V6)),E=uP(n.filter(B6)),D=n.map(We=>We.attributes.captionServices).filter(Boolean),j={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:i,playlists:P6(p,t)};d>=0&&(j.minimumUpdatePeriod=1e3*d),e&&(j.locations=e),"dynamic"===s&&(j.suggestedPresentationDelay=l);const Q=v.length?((n,e={},t=!1)=>{let r;const i=n.reduce((s,l)=>{const d=l.attributes.role&&l.attributes.role.value||"",p=l.attributes.lang||"";let v=l.attributes.label||"main";p&&!l.attributes.label&&(v=`${l.attributes.lang}${d?` (${d})`:""}`),s[v]||(s[v]={language:p,autoselect:!0,default:"main"===d,playlists:[],uri:""});const E=cP((({attributes:n,segments:e,sidx:t,mediaSequence:r,discontinuitySequence:i,discontinuityStarts:s},l)=>{const d={attributes:{NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuitySequence:i,discontinuityStarts:s,timelineStarts:n.timelineStarts,mediaSequence:r,segments:e};return n.contentProtection&&(d.contentProtection=n.contentProtection),t&&(d.sidx=t),l&&(d.attributes.AUDIO="audio",d.attributes.SUBTITLES="subs"),d})(l,t),e);return s[v].playlists.push(E),typeof r>"u"&&"main"===d&&(r=l,r.default=!0),s},{});return r||(i[Object.keys(i)[0]].default=!0),i})(v,t,0===j.playlists.length):null,ne=E.length?((n,e={})=>n.reduce((t,r)=>{const i=r.attributes.lang||"text";return t[i]||(t[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),t[i].playlists.push(cP((({attributes:n,segments:e,mediaSequence:t,discontinuityStarts:r,discontinuitySequence:i})=>{typeof e>"u"&&(e=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);const s={NAME:n.id,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1};return n.codecs&&(s.CODECS=n.codecs),{attributes:s,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:r,discontinuitySequence:i,mediaSequence:t,segments:e}})(r),e)),t},{}))(E,t):null,ue=p.concat(RF(Q),RF(ne)),Ve=ue.map(({timelineStarts:We})=>We);return j.timelineStarts=kF(Ve),((n,e)=>{n.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:r}){return r===t.timeline}),t.segments&&t.segments.forEach((r,i)=>{r.number=i})})})(ue,j.timelineStarts),Q&&(j.mediaGroups.AUDIO.audio=Q),ne&&(j.mediaGroups.SUBTITLES.subs=ne),D.length&&(j.mediaGroups["CLOSED-CAPTIONS"].cc=(n=>n.reduce((e,t)=>(t&&t.forEach(r=>{const{channel:i,language:s}=r;e[s]={autoselect:!1,default:!1,instreamId:i,language:s},r.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(e[s].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(e[s]["3D"]=r["3D"])}),e),{}))(D)),r?(({oldManifest:n,newManifest:e})=>{const t=n.playlists.concat(MF(n)),r=e.playlists.concat(MF(e));return e.timelineStarts=kF([n.timelineStarts,e.timelineStarts]),(({oldPlaylists:n,newPlaylists:e,timelineStarts:t})=>{e.forEach(r=>{r.discontinuitySequence=t.findIndex(function({timeline:p}){return p===r.timeline});const i=((n,e)=>{for(let t=0;t<n.length;t++)if(n[t].attributes.NAME===e)return n[t];return null})(n,r.attributes.NAME);if(!i||r.sidx)return;const s=r.segments[0],l=i.segments.findIndex(function(p){return Math.abs(p.presentationTime-s.presentationTime)<.016666666666666666});if(-1===l)return PF({playlist:r,mediaSequence:i.mediaSequence+i.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),void((!i.segments.length&&r.timeline>i.timeline||i.segments.length&&r.timeline>i.segments[i.segments.length-1].timeline)&&r.discontinuitySequence--);i.segments[l].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),PF({playlist:r,mediaSequence:i.segments[l].number})})})({oldPlaylists:t,newPlaylists:r,timelineStarts:e.timelineStarts}),e})({oldManifest:r,newManifest:j}):j},G6=(n,e,t)=>{const{NOW:r,clientOffset:i,availabilityStartTime:s,timescale:l=1,periodStart:d=0,minimumUpdatePeriod:p=0}=n;return Math.ceil((((r+i)/1e3+p-(s+d))*l-e)/t)},OF=(n,e)=>{const{type:t,minimumUpdatePeriod:r=0,media:i="",sourceDuration:s,timescale:l=1,startNumber:d=1,periodStart:p}=n,v=[];let E=-1;for(let D=0;D<e.length;D++){const j=e[D],F=j.d,Q=j.r||0,ne=j.t||0;let ue;if(E<0&&(E=ne),ne&&ne>E&&(E=ne),Q<0){const Qe=D+1;ue=Qe===e.length?"dynamic"===t&&r>0&&i.indexOf("$Number$")>0?G6(n,E,F):(s*l-E)/F:(e[Qe].t-E)/F}else ue=Q+1;const Ve=d+v.length+ue;let We=d+v.length;for(;We<Ve;)v.push({number:We,duration:F/l,time:E,timeline:p}),E+=F,We++}return v},q6=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,NF=(n,e)=>n.replace(q6,(n=>(e,t,r,i)=>{if("$$"===e)return"$";if(typeof n[t]>"u")return e;const s=""+n[t];return"RepresentationID"===t||(i=r?parseInt(i,10):1,s.length>=i)?s:`${new Array(i-s.length+1).join("0")}${s}`})(e)),K6=(n,e)=>{const t={RepresentationID:n.id,Bandwidth:n.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=n,i=qw({baseUrl:n.baseUrl,source:NF(r.sourceURL,t),range:r.range});return((n,e)=>n.duration||e?n.duration?aP(n):OF(n,e):[{number:n.startNumber||1,duration:n.sourceDuration,time:0,timeline:n.periodStart}])(n,e).map(l=>{t.Number=l.number,t.Time=l.time;const d=NF(n.media||"",t),E=n.periodStart+(l.time-(n.presentationTimeOffset||0))/(n.timescale||1);return{uri:d,timeline:l.timeline,duration:l.duration,resolvedUri:oP(n.baseUrl||"",d),map:i,number:l.number,presentationTime:E}})},Y6=(n,e)=>{const{duration:t,segmentUrls:r=[],periodStart:i}=n;if(!t&&!e||t&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");const s=r.map(p=>((n,e)=>{const{baseUrl:t,initialization:r={}}=n,i=qw({baseUrl:t,source:r.sourceURL,range:r.range}),s=qw({baseUrl:t,source:e.media,range:e.mediaRange});return s.map=i,s})(n,p));let l;return t&&(l=aP(n)),e&&(l=OF(n,e)),l.map((p,v)=>{if(s[v]){const E=s[v],D=n.timescale||1,j=n.presentationTimeOffset||0;return E.timeline=p.timeline,E.duration=p.duration,E.number=p.number,E.presentationTime=i+(p.time-j)/D,E}}).filter(p=>p)},Q6=({attributes:n,segmentInfo:e})=>{let t,r;e.template?(r=K6,t=io(n,e.template)):e.base?(r=AF,t=io(n,e.base)):e.list&&(r=Y6,t=io(n,e.list));const i={attributes:n};if(!r)return i;const s=r(t,e.segmentTimeline);if(t.duration){const{duration:l,timescale:d=1}=t;t.duration=l/d}else t.duration=s.length?s.reduce((l,d)=>Math.max(l,Math.ceil(d.duration)),0):0;return i.attributes=t,i.segments=s,e.base&&t.indexRange&&(i.sidx=s[0],i.segments=[]),i},es=(n,e)=>IF(n.childNodes).filter(({tagName:t})=>t===e),dP=n=>n.textContent.trim(),m0=n=>{const d=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(n);if(!d)return 0;const[p,v,E,D,j,F]=d.slice(1);return 31536e3*parseFloat(p||0)+2592e3*parseFloat(v||0)+86400*parseFloat(E||0)+3600*parseFloat(D||0)+60*parseFloat(j||0)+parseFloat(F||0)},LF={mediaPresentationDuration:n=>m0(n),availabilityStartTime:n=>(n=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),Date.parse(n)))(n)/1e3,minimumUpdatePeriod:n=>m0(n),suggestedPresentationDelay:n=>m0(n),type:n=>n,timeShiftBufferDepth:n=>m0(n),start:n=>m0(n),width:n=>parseInt(n,10),height:n=>parseInt(n,10),bandwidth:n=>parseInt(n,10),frameRate:n=>(n=>parseFloat(n.split("/").reduce((e,t)=>e/t)))(n),startNumber:n=>parseInt(n,10),timescale:n=>parseInt(n,10),presentationTimeOffset:n=>parseInt(n,10),duration(n){const e=parseInt(n,10);return isNaN(e)?m0(n):e},d:n=>parseInt(n,10),t:n=>parseInt(n,10),r:n=>parseInt(n,10),DEFAULT:n=>n},so=n=>n&&n.attributes?IF(n.attributes).reduce((e,t)=>(e[t.name]=(LF[t.name]||LF.DEFAULT)(t.value),e),{}):{},tG={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},xD=(n,e)=>e.length?CD(n.map(function(t){return e.map(function(r){return oP(t,dP(r))})})):n,hP=n=>{const e=es(n,"SegmentTemplate")[0],t=es(n,"SegmentList")[0],r=t&&es(t,"SegmentURL").map(D=>io({tag:"SegmentURL"},so(D))),i=es(n,"SegmentBase")[0],s=t||e,l=s&&es(s,"SegmentTimeline")[0],d=t||i||e,p=d&&es(d,"Initialization")[0],v=e&&so(e);v&&p?v.initialization=p&&so(p):v&&v.initialization&&(v.initialization={sourceURL:v.initialization});const E={template:v,segmentTimeline:l&&es(l,"S").map(D=>so(D)),list:t&&io(so(t),{segmentUrls:r,initialization:so(p)}),base:i&&io(so(i),{initialization:so(p)})};return Object.keys(E).forEach(D=>{E[D]||delete E[D]}),E},sG=(n,e,t)=>r=>{const i=so(r),s=xD(e,es(r,"BaseURL")),l=es(r,"Role")[0],d={role:so(l)};let p=io(n,i,d);const v=es(r,"Accessibility")[0],E=(n=>"urn:scte:dash:cc:cea-608:2015"===n.schemeIdUri?("string"!=typeof n.value?[]:n.value.split(";")).map(t=>{let r,i;return i=t,/^CC\d=/.test(t)?[r,i]=t.split("="):/^CC\d$/.test(t)&&(r=t),{channel:r,language:i}}):"urn:scte:dash:cc:cea-708:2015"===n.schemeIdUri?("string"!=typeof n.value?[]:n.value.split(";")).map(t=>{const r={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[i,s=""]=t.split("=");r.channel=i,r.language=t,s.split(",").forEach(l=>{const[d,p]=l.split(":");"lang"===d?r.language=p:"er"===d?r.easyReader=Number(p):"war"===d?r.aspectRatio=Number(p):"3D"===d&&(r["3D"]=Number(p))})}else r.language=t;return r.channel&&(r.channel="SERVICE"+r.channel),r}):void 0)(so(v));E&&(p=io(p,{captionServices:E}));const D=es(r,"Label")[0];if(D&&D.childNodes.length){const ue=D.childNodes[0].nodeValue.trim();p=io(p,{label:ue})}const j=(n=>n.reduce((e,t)=>{const r=so(t);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());const i=tG[r.schemeIdUri];if(i){e[i]={attributes:r};const s=es(t,"cenc:pssh")[0];if(s){const l=dP(s);e[i].pssh=l&&function _6(n){for(var e=function(e){return be().atob?be().atob(e):Buffer.from(e,"base64").toString("binary")}(n),t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(l)}}return e},{}))(es(r,"ContentProtection"));Object.keys(j).length&&(p=io(p,{contentProtection:j}));const F=hP(r),Q=es(r,"Representation"),ne=io(t,F);return CD(Q.map(((n,e,t)=>r=>{const i=es(r,"BaseURL"),s=xD(e,i),l=io(n,so(r)),d=hP(r);return s.map(p=>({segmentInfo:io(t,d),attributes:io(l,{baseUrl:p})}))})(p,s,ne)))},oG=(n,e)=>(t,r)=>{const i=xD(e,es(t.node,"BaseURL")),s=io(n,{periodStart:t.attributes.start});"number"==typeof t.attributes.duration&&(s.periodDuration=t.attributes.duration);const l=es(t.node,"AdaptationSet"),d=hP(t.node);return CD(l.map(sG(s,i,d)))},FF=n=>{if(""===n)throw new Error("DASH_EMPTY_MANIFEST");const e=new b6.DOMParser;let t,r;try{t=e.parseFromString(n,"application/xml"),r=t&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return r};var pP,hG=V(7459),fG=V.n(hG),pG=en([73,68,51]),zw=function n(e,t){return void 0===t&&(t=0),(e=en(e)).length-t<10||!hi(e,pG,{offset:t})?t:(t+=function(e,t){void 0===t&&(t=0);var i=(e=en(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10}(e,t),n(e,t))},fP=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?wF(e):e}),gP=function(e){e=en(e);for(var t=[],r=0;e.length>r;){var i=e[r],s=0,l=0,d=e[++l];for(l++;128&d;)s=(127&d)<<7,d=e[l],l++;s+=127&d;for(var p=0;p<pP.length;p++){var v=pP[p];if(i===v.id){t.push((0,v.parser)(e.subarray(l,l+s)));break}}r+=s+l}return t};pP=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var r=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,en(e));try{return decodeURIComponent(escape(t))}catch{}return t}(e.subarray(t.size+1,t.size+1+r)),t.size+=r}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=gP(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:gP(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var la=function n(e,t,r){void 0===r&&(r=!1),t=function(e){return Array.isArray(e)?e.map(function(t){return fP(t)}):[fP(e)]}(t),e=en(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var l=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,d=e.subarray(s+4,s+8);if(0===l)break;var p=s+l;if(p>e.length){if(r)break;p=e.length}var v=e.subarray(s+8,p);hi(d,t[0])&&(1===t.length?i.push(v):i.push.apply(i,n(v,t.slice(1),r))),s=p}return i},ei={EBML:en([26,69,223,163]),DocType:en([66,130]),Segment:en([24,83,128,103]),SegmentInfo:en([21,73,169,102]),Tracks:en([22,84,174,107]),Track:en([174]),TrackNumber:en([215]),DefaultDuration:en([35,227,131]),TrackEntry:en([174]),TrackType:en([131]),FlagDefault:en([136]),CodecID:en([134]),CodecPrivate:en([99,162]),VideoTrack:en([224]),AudioTrack:en([225]),Cluster:en([31,67,182,117]),Timestamp:en([231]),TimestampScale:en([42,215,177]),BlockGroup:en([160]),BlockDuration:en([155]),Block:en([161]),SimpleBlock:en([163])},mP=[128,64,32,16,8,4,2,1],Sy=function(e,t,r,i){void 0===r&&(r=!0),void 0===i&&(i=!1);var s=function(e){for(var t=1,r=0;r<mP.length&&!(e&mP[r]);r++)t++;return t}(e[t]),l=e.subarray(t,t+s);return r&&((l=Array.prototype.slice.call(e,t,t+s))[0]^=mP[s-1]),{length:s,value:h6(l,{signed:i}),bytes:l}},jF=function n(e){return"string"==typeof e?e.match(/.{1,2}/g).map(function(t){return n(t)}):"number"==typeof e?function(e,t){var i=(void 0===t?{}:t).le,s=void 0!==i&&i;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var l=function(e){return Math.ceil(function(e){return e.toString(2).length}(e)/8)}(e=$s(e)),d=new Uint8Array(new ArrayBuffer(l)),p=0;p<l;p++){var v=s?p:Math.abs(p+1-d.length);d[v]=Number(e/sP[p]&$s(255)),e<0&&(d[v]=Math.abs(~d[v]),d[v]-=0===p?1:2)}return d}(e):e},TG=function n(e,t,r){if(r>=t.length)return t.length;var i=Sy(t,r,!1);if(hi(e.bytes,i.bytes))return r;var s=Sy(t,r+i.length);return n(e,t,r+s.length+s.value+i.length)},Ii=function n(e,t){t=function(e){return Array.isArray(e)?e.map(function(t){return jF(t)}):[jF(e)]}(t),e=en(e);var r=[];if(!t.length)return r;for(var i=0;i<e.length;){var s=Sy(e,i,!1),l=Sy(e,i+s.length),d=i+s.length+l.length;127===l.value&&(l.value=TG(s,e,d),l.value!==e.length&&(l.value-=d));var v=e.subarray(d,d+l.value>e.length?e.length:d+l.value);hi(t[0],s.bytes)&&(1===t.length?r.push(v):r=r.concat(n(v,t.slice(1)))),i+=s.length+l.length+v.length}return r},SG=en([0,0,0,1]),xG=en([0,0,1]),IG=en([0,0,3]),DG=function(e){for(var t=[],r=1;r<e.length-2;)hi(e.subarray(r,r+3),IG)&&(t.push(r+2),r++),r++;if(0===t.length)return e;var i=e.length-t.length,s=new Uint8Array(i),l=0;for(r=0;r<i;l++,r++)l===t[0]&&(l++,t.shift()),s[r]=e[l];return s},UF=function(e,t,r,i){void 0===i&&(i=1/0),e=en(e),r=[].concat(r);for(var l,s=0,d=0;s<e.length&&(d<i||l);){var p=void 0;if(hi(e.subarray(s),SG)?p=4:hi(e.subarray(s),xG)&&(p=3),p){if(d++,l)return DG(e.subarray(l,s));var v=void 0;"h264"===t?v=31&e[s+p]:"h265"===t&&(v=e[s+p]>>1&63),-1!==r.indexOf(v)&&(l=s+p),s+=p+("h264"===t?1:2)}else s++}return e.subarray(0,0)},Po={webm:en([119,101,98,109]),matroska:en([109,97,116,114,111,115,107,97]),flac:en([102,76,97,67]),ogg:en([79,103,103,83]),ac3:en([11,119]),riff:en([82,73,70,70]),avi:en([65,86,73]),wav:en([87,65,86,69]),"3gp":en([102,116,121,112,51,103]),mp4:en([102,116,121,112]),fmp4:en([115,116,121,112]),mov:en([102,116,121,112,113,116]),moov:en([109,111,111,118]),moof:en([109,111,111,102])},v0={aac:function(e){var t=zw(e);return hi(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=zw(e);return hi(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Ii(e,[ei.EBML,ei.DocType])[0];return hi(t,Po.webm)},mkv:function(e){var t=Ii(e,[ei.EBML,ei.DocType])[0];return hi(t,Po.matroska)},mp4:function(e){return!v0["3gp"](e)&&!v0.mov(e)&&(!!(hi(e,Po.mp4,{offset:4})||hi(e,Po.fmp4,{offset:4})||hi(e,Po.moof,{offset:4})||hi(e,Po.moov,{offset:4}))||void 0)},mov:function(e){return hi(e,Po.mov,{offset:4})},"3gp":function(e){return hi(e,Po["3gp"],{offset:4})},ac3:function(e){var t=zw(e);return hi(e,Po.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=zw(e);return hi(e,Po.flac,{offset:t})},ogg:function(e){return hi(e,Po.ogg)},avi:function(e){return hi(e,Po.riff)&&hi(e,Po.avi,{offset:8})},wav:function(e){return hi(e,Po.riff)&&hi(e,Po.wav,{offset:8})},h264:function(e){return function(e,t,r){return UF(e,"h264",7,3)}(e).length},h265:function(e){return function(e,t,r){return UF(e,"h265",[32,33],3)}(e).length}},yP=Object.keys(v0).filter(function(n){return"ts"!==n&&"h264"!==n&&"h265"!==n}).concat(["ts","h264","h265"]);yP.forEach(function(n){var e=v0[n];v0[n]=function(t){return e(en(t))}});var MG=v0,vP=function(e){e=en(e);for(var t=0;t<yP.length;t++){var r=yP[t];if(MG[r](e))return r}return""},ID=V(6277);const Ph={},zp=function(n,e){return Ph[n]=Ph[n]||[],e&&(Ph[n]=Ph[n].concat(e)),Ph[n]},BF=function(n,e){const t=zp(n).indexOf(e);return!(t<=-1||(Ph[n]=Ph[n].slice(),Ph[n].splice(t,1),0))},DD={prefixed:!0},AD=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],$F=AD[0];let Kw;for(let n=0;n<AD.length;n++)if(AD[n][1]in Mt()){Kw=AD[n];break}if(Kw){for(let n=0;n<Kw.length;n++)DD[$F[n]]=Kw[n];DD.prefixed=Kw[0]!==$F[0]}let ua=[];const Zn=function HF(n){let t,e="info";const r=function(...i){t("log",e,i)};return t=((n,e)=>(t,r,i)=>{const s=e.levels[r],l=new RegExp(`^(${s})$`);if("log"!==t&&i.unshift(t.toUpperCase()+":"),i.unshift(n+":"),ua){ua.push([].concat(i));const p=ua.length-1e3;ua.splice(0,p>0?p:0)}if(!be().console)return;let d=be().console[t];!d&&"debug"===t&&(d=be().console.info||be().console.log),d&&s&&l.test(t)&&d[Array.isArray(i)?"apply":"call"](be().console,i)})(n,r),r.createLogger=i=>HF(n+": "+i),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},r.level=i=>{if("string"==typeof i){if(!r.levels.hasOwnProperty(i))throw new Error(`"${i}" in not a valid log level`);e=i}return e},(r.history=()=>ua?[].concat(ua):[]).filter=i=>(ua||[]).filter(s=>new RegExp(`.*${i}.*`).test(s[0])),r.history.clear=()=>{ua&&(ua.length=0)},r.history.disable=()=>{null!==ua&&(ua.length=0,ua=null)},r.history.enable=()=>{null===ua&&(ua=[])},r.error=(...i)=>t("error",e,i),r.warn=(...i)=>t("warn",e,i),r.debug=(...i)=>t("debug",e,i),r}("VIDEOJS"),GF=Zn.createLogger,LG=Object.prototype.toString,qF=function(n){return Fc(n)?Object.keys(n):[]};function _0(n,e){qF(n).forEach(t=>e(n[t],t))}function zF(n,e,t=0){return qF(n).reduce((r,i)=>e(r,n[i],i),t)}function Fc(n){return!!n&&"object"==typeof n}function b0(n){return Fc(n)&&"[object Object]"===LG.call(n)&&n.constructor===Object}function Zr(...n){const e={};return n.forEach(t=>{!t||_0(t,(r,i)=>{b0(r)?(b0(e[i])||(e[i]={}),e[i]=Zr(e[i],r)):e[i]=r})}),e}function kD(n,e,t,r=!0){const i=l=>Object.defineProperty(n,e,{value:l,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const l=t();return i(l),l}};return r&&(s.set=i),Object.defineProperty(n,e,s)}var FG=Object.freeze({__proto__:null,each:_0,reduce:zF,isObject:Fc,isPlain:b0,merge:Zr,defineLazyProperty:kD});let KF,_P=!1,WF=null,jc=!1,ZF=!1,T0=!1,E0=!1,Uc=!1,bP=null,MD=null,YF=null,PD=!1,RD=!1,OD=!1,ND=!1;const Zw=Boolean(C0()&&("ontouchstart"in be()||be().navigator.maxTouchPoints||be().DocumentTouch&&be().document instanceof be().DocumentTouch)),w0=be().navigator&&be().navigator.userAgentData;if(w0&&(jc="Android"===w0.platform,T0=Boolean(w0.brands.find(n=>"Microsoft Edge"===n.brand)),E0=Boolean(w0.brands.find(n=>"Chromium"===n.brand)),Uc=!T0&&E0,bP=MD=(w0.brands.find(n=>"Chromium"===n.brand)||{}).version||null,RD="Windows"===w0.platform),!E0){const n=be().navigator&&be().navigator.userAgent||"";_P=/iPod/i.test(n),WF=function(){const e=n.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),jc=/Android/i.test(n),KF=function(){const e=n.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return t&&r?parseFloat(e[1]+"."+e[2]):t||null}(),ZF=/Firefox/i.test(n),T0=/Edg/i.test(n),E0=/Chrome/i.test(n)||/CriOS/i.test(n),Uc=!T0&&E0,bP=MD=function(){const e=n.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),YF=function(){const e=/MSIE\s(\d+)\.\d/.exec(n);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(n)&&/rv:11.0/.test(n)&&(t=11),t}(),PD=/Safari/i.test(n)&&!Uc&&!jc&&!T0,RD=/Windows/i.test(n),OD=/iPad/i.test(n)||PD&&Zw&&!/iPhone/i.test(n),ND=/iPhone/i.test(n)&&!OD}const Ro=ND||OD||_P,LD=(PD||Ro)&&!Uc;var jG=Object.freeze({__proto__:null,get IS_IPOD(){return _P},get IOS_VERSION(){return WF},get IS_ANDROID(){return jc},get ANDROID_VERSION(){return KF},get IS_FIREFOX(){return ZF},get IS_EDGE(){return T0},get IS_CHROMIUM(){return E0},get IS_CHROME(){return Uc},get CHROMIUM_VERSION(){return bP},get CHROME_VERSION(){return MD},get IE_VERSION(){return YF},get IS_SAFARI(){return PD},get IS_WINDOWS(){return RD},get IS_IPAD(){return OD},get IS_IPHONE(){return ND},TOUCH_ENABLED:Zw,IS_IOS:Ro,IS_ANY_SAFARI:LD});function QF(n){return"string"==typeof n&&Boolean(n.trim())}function C0(){return Mt()===be().document}function S0(n){return Fc(n)&&1===n.nodeType}function XF(){try{return be().parent!==be().self}catch{return!0}}function JF(n){return function(e,t){if(!QF(e))return Mt()[n](null);QF(t)&&(t=Mt().querySelector(t));const r=S0(t)?t:Mt();return r[n]&&r[n](e)}}function Bn(n="div",e={},t={},r){const i=Mt().createElement(n);return Object.getOwnPropertyNames(e).forEach(function(s){const l=e[s];"textContent"===s?Wp(i,l):(i[s]!==l||"tabIndex"===s)&&(i[s]=l)}),Object.getOwnPropertyNames(t).forEach(function(s){i.setAttribute(s,t[s])}),r&&EP(i,r),i}function Wp(n,e){return typeof n.textContent>"u"?n.innerText=e:n.textContent=e,n}function TP(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function Yw(n,e){return function UG(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(e),n.classList.contains(e)}function xy(n,...e){return n.classList.add(...e.reduce((t,r)=>t.concat(r.split(/\s+/)),[])),n}function FD(n,...e){return n?(n.classList.remove(...e.reduce((t,r)=>t.concat(r.split(/\s+/)),[])),n):(Zn.warn("removeClass was called with an element that doesn't exist"),null)}function ej(n,e,t){return"function"==typeof t&&(t=t(n,e)),"boolean"!=typeof t&&(t=void 0),e.split(/\s+/).forEach(r=>n.classList.toggle(r,t)),n}function tj(n,e){Object.getOwnPropertyNames(e).forEach(function(t){const r=e[t];null===r||typeof r>"u"||!1===r?n.removeAttribute(t):n.setAttribute(t,!0===r?"":r)})}function Kp(n){const e={};if(n&&n.attributes&&n.attributes.length>0){const r=n.attributes;for(let i=r.length-1;i>=0;i--){const s=r[i].name;let l=r[i].value;("boolean"==typeof n[s]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+s+","))&&(l=null!==l),e[s]=l}}return e}function nj(n,e){return n.getAttribute(e)}function x0(n,e,t){n.setAttribute(e,t)}function jD(n,e){n.removeAttribute(e)}function rj(){Mt().body.focus(),Mt().onselectstart=function(){return!1}}function ij(){Mt().onselectstart=function(){return!0}}function I0(n){if(n&&n.getBoundingClientRect&&n.parentNode){const e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(r=>{void 0!==e[r]&&(t[r]=e[r])}),t.height||(t.height=parseFloat(D0(n,"height"))),t.width||(t.width=parseFloat(D0(n,"width"))),t}}function Qw(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};const e=n.offsetWidth,t=n.offsetHeight;let r=0,i=0;for(;n.offsetParent&&n!==Mt()[DD.fullscreenElement];)r+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent;return{left:r,top:i,width:e,height:t}}function UD(n,e){const t={x:0,y:0};if(Ro){let E=n;for(;E&&"html"!==E.nodeName.toLowerCase();){const D=D0(E,"transform");if(/^matrix/.test(D)){const j=D.slice(7,-1).split(/,\s/).map(Number);t.x+=j[4],t.y+=j[5]}else if(/^matrix3d/.test(D)){const j=D.slice(9,-1).split(/,\s/).map(Number);t.x+=j[12],t.y+=j[13]}E=E.parentNode}}const r={},i=Qw(e.target),s=Qw(n),l=s.width;let p=e.offsetY-(s.top-i.top),v=e.offsetX-(s.left-i.left);return e.changedTouches&&(v=e.changedTouches[0].pageX-s.left,p=e.changedTouches[0].pageY+s.top,Ro&&(v-=t.x,p-=t.y)),r.y=1-Math.max(0,Math.min(1,p/s.height)),r.x=Math.max(0,Math.min(1,v/l)),r}function sj(n){return Fc(n)&&3===n.nodeType}function VD(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function oj(n){return"function"==typeof n&&(n=n()),(Array.isArray(n)?n:[n]).map(e=>("function"==typeof e&&(e=e()),S0(e)||sj(e)?e:"string"==typeof e&&/\S/.test(e)?Mt().createTextNode(e):void 0)).filter(e=>e)}function EP(n,e){return oj(e).forEach(t=>n.appendChild(t)),n}function aj(n,e){return EP(VD(n),e)}function Xw(n){return void 0===n.button&&void 0===n.buttons||0===n.button&&void 0===n.buttons||"mouseup"===n.type&&0===n.button&&0===n.buttons||!(0!==n.button||1!==n.buttons)}const Zp=JF("querySelector"),lj=JF("querySelectorAll");function D0(n,e){if(!n||!e)return"";if("function"==typeof be().getComputedStyle){let t;try{t=be().getComputedStyle(n)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var uj=Object.freeze({__proto__:null,isReal:C0,isEl:S0,isInFrame:XF,createEl:Bn,textContent:Wp,prependTo:TP,hasClass:Yw,addClass:xy,removeClass:FD,toggleClass:ej,setAttributes:tj,getAttributes:Kp,getAttribute:nj,setAttribute:x0,removeAttribute:jD,blockTextSelection:rj,unblockTextSelection:ij,getBoundingClientRect:I0,findPosition:Qw,getPointerPosition:UD,isTextNode:sj,emptyEl:VD,normalizeContent:oj,appendContent:EP,insertContent:aj,isSingleLeftClick:Xw,$:Zp,$$:lj,computedStyle:D0});let wP,cj=!1;const VG=function(){if(!1===wP.options.autoSetup)return;const n=Array.prototype.slice.call(Mt().getElementsByTagName("video")),e=Array.prototype.slice.call(Mt().getElementsByTagName("audio")),t=Array.prototype.slice.call(Mt().getElementsByTagName("video-js")),r=n.concat(e,t);if(r&&r.length>0)for(let i=0,s=r.length;i<s;i++){const l=r[i];if(!l||!l.getAttribute){CP(1);break}void 0===l.player&&null!==l.getAttribute("data-setup")&&wP(l)}else cj||CP(1)};function CP(n,e){!C0()||(e&&(wP=e),be().setTimeout(VG,n))}function SP(){cj=!0,be().removeEventListener("load",SP)}C0()&&("complete"===Mt().readyState?SP():be().addEventListener("load",SP));const dj=function(n){const e=Mt().createElement("style");return e.className=n,e},hj=function(n,e){n.styleSheet?n.styleSheet.cssText=e:n.textContent=e};var Oo=new WeakMap;let $D,BG=3;function Vc(){return BG++}function fj(n,e){if(!Oo.has(n))return;const t=Oo.get(n);0===t.handlers[e].length&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),0===Object.getOwnPropertyNames(t).length&&Oo.delete(n)}function xP(n,e,t,r){t.forEach(function(i){n(e,i,r)})}function BD(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){const r=n||be().event;n={};for(const i in r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&"path"!==i&&("returnValue"===i&&r.preventDefault||(n[i]=r[i]));if(n.target||(n.target=n.srcElement||Mt()),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){r.preventDefault&&r.preventDefault(),n.returnValue=!1,r.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),n.cancelBubble=!0,r.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,null!=n.clientX){const i=Mt().documentElement,s=Mt().body;n.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),n.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)}n.which=n.charCode||n.keyCode,null!=n.button&&(n.button=1&n.button?0:4&n.button?1:2&n.button?2:0)}return n.fixed_=!0,n}const HG=["touchstart","touchmove"];function Ga(n,e,t){if(Array.isArray(e))return xP(Ga,n,e,t);Oo.has(n)||Oo.set(n,{});const r=Oo.get(n);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),t.guid||(t.guid=Vc()),r.handlers[e].push(t),r.dispatcher||(r.disabled=!1,r.dispatcher=function(i,s){if(r.disabled)return;i=BD(i);const l=r.handlers[i.type];if(l){const d=l.slice(0);for(let p=0,v=d.length;p<v&&!i.isImmediatePropagationStopped();p++)try{d[p].call(n,i,s)}catch(E){Zn.error(E)}}}),1===r.handlers[e].length)if(n.addEventListener){let i=!1;(function(){if("boolean"!=typeof $D){$D=!1;try{const n=Object.defineProperty({},"passive",{get(){$D=!0}});be().addEventListener("test",null,n),be().removeEventListener("test",null,n)}catch{}}return $D})()&&HG.indexOf(e)>-1&&(i={passive:!0}),n.addEventListener(e,r.dispatcher,i)}else n.attachEvent&&n.attachEvent("on"+e,r.dispatcher)}function oo(n,e,t){if(!Oo.has(n))return;const r=Oo.get(n);if(!r.handlers)return;if(Array.isArray(e))return xP(oo,n,e,t);const i=function(l,d){r.handlers[d]=[],fj(l,d)};if(void 0===e){for(const l in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},l)&&i(n,l);return}const s=r.handlers[e];if(s){if(!t)return void i(n,e);if(t.guid)for(let l=0;l<s.length;l++)s[l].guid===t.guid&&s.splice(l--,1);fj(n,e)}}function A0(n,e,t){const r=Oo.has(n)?Oo.get(n):{},i=n.parentNode||n.ownerDocument;if("string"==typeof e?e={type:e,target:n}:e.target||(e.target=n),e=BD(e),r.dispatcher&&r.dispatcher.call(n,e,t),i&&!e.isPropagationStopped()&&!0===e.bubbles)A0.call(null,i,e,t);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){Oo.has(e.target)||Oo.set(e.target,{});const s=Oo.get(e.target);e.target[e.type]&&(s.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function HD(n,e,t){if(Array.isArray(e))return xP(HD,n,e,t);const r=function(){oo(n,e,r),t.apply(this,arguments)};r.guid=t.guid=t.guid||Vc(),Ga(n,e,r)}function IP(n,e,t){const r=function(){oo(n,e,r),t.apply(this,arguments)};r.guid=t.guid=t.guid||Vc(),Ga(n,e,r)}var GG=Object.freeze({__proto__:null,fixEvent:BD,on:Ga,off:oo,trigger:A0,one:HD,any:IP});const Yr=function(n,e,t){e.guid||(e.guid=Vc());const r=e.bind(n);return r.guid=t?t+"_"+e.guid:e.guid,r},Bc=function(n,e){let t=be().performance.now();return function(...i){const s=be().performance.now();s-t>=e&&(n(...i),t=s)}},pj=function(n,e,t,r=be()){let i;const l=function(){const d=this,p=arguments;let v=function(){i=null,v=null,t||n.apply(d,p)};!i&&t&&n.apply(d,p),r.clearTimeout(i),i=r.setTimeout(v,e)};return l.cancel=()=>{r.clearTimeout(i),i=null},l};var qG=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:Yr,throttle:Bc,debounce:pj});let Jw;class Al{on(e,t){const r=this.addEventListener;this.addEventListener=()=>{},Ga(this,e,t),this.addEventListener=r}off(e,t){oo(this,e,t)}one(e,t){const r=this.addEventListener;this.addEventListener=()=>{},HD(this,e,t),this.addEventListener=r}any(e,t){const r=this.addEventListener;this.addEventListener=()=>{},IP(this,e,t),this.addEventListener=r}trigger(e){const t=e.type||e;"string"==typeof e&&(e={type:t}),e=BD(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),A0(this,e)}queueTrigger(e){Jw||(Jw=new Map);const t=e.type||e;let r=Jw.get(this);r||(r=new Map,Jw.set(this,r));const i=r.get(t);r.delete(t),be().clearTimeout(i);const s=be().setTimeout(()=>{r.delete(t),0===r.size&&(r=null,Jw.delete(this)),this.trigger(e)},0);r.set(t,s)}}Al.prototype.allowedEvents_={},Al.prototype.addEventListener=Al.prototype.on,Al.prototype.removeEventListener=Al.prototype.off,Al.prototype.dispatchEvent=Al.prototype.trigger;const GD=n=>"function"==typeof n.name?n.name():"string"==typeof n.name?n.name:n.name_?n.name_:n.constructor&&n.constructor.name?n.constructor.name:typeof n,Rh=n=>n instanceof Al||!!n.eventBusEl_&&["on","one","off","trigger"].every(e=>"function"==typeof n[e]),DP=n=>"string"==typeof n&&/\S/.test(n)||Array.isArray(n)&&!!n.length,qD=(n,e,t)=>{if(!n||!n.nodeName&&!Rh(n))throw new Error(`Invalid target for ${GD(e)}#${t}; must be a DOM node or evented object.`)},gj=(n,e,t)=>{if(!DP(n))throw new Error(`Invalid event type for ${GD(e)}#${t}; must be a non-empty string or array.`)},mj=(n,e,t)=>{if("function"!=typeof n)throw new Error(`Invalid listener for ${GD(e)}#${t}; must be a function.`)},AP=(n,e,t)=>{const r=e.length<3||e[0]===n||e[0]===n.eventBusEl_;let i,s,l;return r?(i=n.eventBusEl_,e.length>=3&&e.shift(),[s,l]=e):[i,s,l]=e,qD(i,n,t),gj(s,n,t),mj(l,n,t),l=Yr(n,l),{isTargetingSelf:r,target:i,type:s,listener:l}},Iy=(n,e,t,r)=>{qD(n,n,e),n.nodeName?GG[e](n,t,r):n[e](t,r)},WG={on(...n){const{isTargetingSelf:e,target:t,type:r,listener:i}=AP(this,n,"on");if(Iy(t,"on",r,i),!e){const s=()=>this.off(t,r,i);s.guid=i.guid;const l=()=>this.off("dispose",s);l.guid=i.guid,Iy(this,"on","dispose",s),Iy(t,"on","dispose",l)}},one(...n){const{isTargetingSelf:e,target:t,type:r,listener:i}=AP(this,n,"one");if(e)Iy(t,"one",r,i);else{const s=(...l)=>{this.off(t,r,s),i.apply(null,l)};s.guid=i.guid,Iy(t,"one",r,s)}},any(...n){const{isTargetingSelf:e,target:t,type:r,listener:i}=AP(this,n,"any");if(e)Iy(t,"any",r,i);else{const s=(...l)=>{this.off(t,r,s),i.apply(null,l)};s.guid=i.guid,Iy(t,"any",r,s)}},off(n,e,t){if(!n||DP(n))oo(this.eventBusEl_,n,e);else{const r=n,i=e;qD(r,this,"off"),gj(i,this,"off"),mj(t,this,"off"),t=Yr(this,t),this.off("dispose",t),r.nodeName?(oo(r,i,t),oo(r,"dispose",t)):Rh(r)&&(r.off(i,t),r.off("dispose",t))}},trigger(n,e){if(qD(this.eventBusEl_,this,"trigger"),!DP(n&&"string"!=typeof n?n.type:n))throw new Error(`Invalid event type for ${GD(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return A0(this.eventBusEl_,n,e)}};function kP(n,e={}){const{eventBusKey:t}=e;if(t){if(!n[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);n.eventBusEl_=n[t]}else n.eventBusEl_=Bn("span",{className:"vjs-event-bus"});return Object.assign(n,WG),n.eventedCallbacks&&n.eventedCallbacks.forEach(r=>{r()}),n.on("dispose",()=>{n.off(),[n,n.el_,n.eventBusEl_].forEach(function(r){r&&Oo.has(r)&&Oo.delete(r)}),be().setTimeout(()=>{n.eventBusEl_=null},0)}),n}const KG={state:{},setState(n){let e;return"function"==typeof n&&(n=n()),_0(n,(t,r)=>{this.state[r]!==t&&(e=e||{},e[r]={from:this.state[r],to:t}),this.state[r]=t}),e&&Rh(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function yj(n,e){return Object.assign(n,KG),n.state=Object.assign({},n.state,e),"function"==typeof n.handleStateChanged&&Rh(n)&&n.on("statechanged",n.handleStateChanged),n}const eC=function(n){return"string"!=typeof n?n:n.replace(/./,e=>e.toLowerCase())},$i=function(n){return"string"!=typeof n?n:n.replace(/./,e=>e.toUpperCase())},vj=function(n,e){return $i(n)===$i(e)};var ZG=Object.freeze({__proto__:null,toLowerCase:eC,toTitleCase:$i,titleCaseEquals:vj});class ht{constructor(e,t,r){if(this.player_=!e&&this.play?e=this:e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Zr({},this.options_),t=this.options_=Zr(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const i=e&&e.id&&e.id()||"no_player";this.id_=`${i}_component_${Vc()}`}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(i=>this.addClass(i)),!1!==t.evented&&(kP(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),yj(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(r),!1!==t.reportTouchActivity&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=Zr(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,r){return Bn(e,t,r)}localize(e,t,r=e){const i=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),l=s&&s[i],d=i&&i.split("-")[0],p=s&&s[d];let v=r;return l&&l[e]?v=l[e]:p&&p[e]&&(v=p[e]),t&&(v=v.replace(/\{(\d+)\}/g,function(E,D){const j=t[D-1];let F=j;return typeof j>"u"&&(F=E),F})),v}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((r,i)=>r.concat(i),[]);let t=this;for(let r=0;r<e.length;r++)if(t=t.getChild(e[r]),!t||!t.getChild)return;return t}addChild(e,t={},r=this.children_.length){let i,s;if("string"==typeof e){s=$i(e);const l=t.componentClass||s;t.name=s;const d=ht.getComponent(l);if(!d)throw new Error(`Component ${l} does not exist`);if("function"!=typeof d)return null;i=new d(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(r,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),s=s||i.name&&$i(i.name()),s&&(this.childNameIndex_[s]=i,this.childNameIndex_[eC(s)]=i),"function"==typeof i.el&&i.el()){let l=null;this.children_[r+1]&&(this.children_[r+1].el_?l=this.children_[r+1].el_:S0(this.children_[r+1])&&(l=this.children_[r+1])),this.contentEl().insertBefore(i.el(),l)}return i}removeChild(e){if("string"==typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[$i(e.name())]=null,this.childNameIndex_[eC(e.name())]=null;const r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,r=l=>{const d=l.name;let p=l.opts;if(void 0!==t[d]&&(p=t[d]),!1===p)return;!0===p&&(p={}),p.playerOptions=this.options_.playerOptions;const v=this.addChild(d,p);v&&(this[d]=v)};let i;const s=ht.getComponent("Tech");i=Array.isArray(e)?e:Object.keys(e),i.concat(Object.keys(this.options_).filter(function(l){return!i.some(function(d){return"string"==typeof d?l===d:l===d.name})})).map(l=>{let d,p;return"string"==typeof l?(d=l,p=e[d]||this.options_[d]||{}):(d=l.name,p=l),{name:d,opts:p}}).filter(l=>{const d=ht.getComponent(l.opts.componentClass||$i(l.name));return d&&!s.isTech(d)}).forEach(r)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e);t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return Zp(e,t||this.contentEl())}$$(e,t){return lj(e,t||this.contentEl())}hasClass(e){return Yw(this.el_,e)}addClass(...e){xy(this.el_,...e)}removeClass(...e){FD(this.el_,...e)}toggleClass(e,t){ej(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return nj(this.el_,e)}setAttribute(e,t){x0(this.el_,e,t)}removeAttribute(e){jD(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,r){if(void 0!==t)return(null===t||t!=t)&&(t=0),this.el_.style[e]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",void(r||this.trigger("componentresize"));if(!this.el_)return 0;const i=this.el_.style[e],s=i.indexOf("px");return parseInt(-1!==s?i.slice(0,s):this.el_["offset"+$i(e)],10)}currentDimension(e){let t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=D0(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){const r=`offset${$i(e)}`;t=this.el_[r]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(Cn().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let s,e=0,t=null;this.on("touchstart",function(d){1===d.touches.length&&(t={pageX:d.touches[0].pageX,pageY:d.touches[0].pageY},e=be().performance.now(),s=!0)}),this.on("touchmove",function(d){if(d.touches.length>1)s=!1;else if(t){const p=d.touches[0].pageX-t.pageX,v=d.touches[0].pageY-t.pageY;Math.sqrt(p*p+v*v)>10&&(s=!1)}});const l=function(){s=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(d){t=null,!0===s&&be().performance.now()-e<200&&(d.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Yr(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const r=function(i){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",r),this.on("touchcancel",r)}setTimeout(e,t){var r;return e=Yr(this,e),this.clearTimersOnDispose_(),r=be().setTimeout(()=>{this.setTimeoutIds_.has(r)&&this.setTimeoutIds_.delete(r),e()},t),this.setTimeoutIds_.add(r),r}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),be().clearTimeout(e)),e}setInterval(e,t){e=Yr(this,e),this.clearTimersOnDispose_();const r=be().setInterval(e,t);return this.setIntervalIds_.add(r),r}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),be().clearInterval(e)),e}requestAnimationFrame(e){var t;return this.clearTimersOnDispose_(),e=Yr(this,e),t=be().requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=Yr(this,t);const r=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,r),e}cancelNamedAnimationFrame(e){!this.namedRafs_.has(e)||(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),be().cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((r,i)=>this[t](i))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(e,t){if("string"!=typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const r=ht.getComponent("Tech"),i=r&&r.isTech(t),s=ht===t||ht.prototype.isPrototypeOf(t.prototype);if(i||!s){let d;throw d=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${d}.`)}e=$i(e),ht.components_||(ht.components_={});const l=ht.getComponent("Player");if("Player"===e&&l&&l.players){const d=l.players,p=Object.keys(d);if(d&&p.length>0&&p.map(v=>d[v]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return ht.components_[e]=t,ht.components_[eC(e)]=t,t}static getComponent(e){if(e&&ht.components_)return ht.components_[e]}}function _j(n,e,t,r){return function YG(n,e,t){if("number"!=typeof e||e<0||e>t)throw new Error(`Failed to execute '${n}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}(n,r,t.length-1),t[r][e]}function MP(n){let e;return e=void 0===n||0===n.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:n.length,start:_j.bind(null,"start",0,n),end:_j.bind(null,"end",1,n)},be().Symbol&&be().Symbol.iterator&&(e[be().Symbol.iterator]=()=>(n||[]).values()),e}function $c(n,e){return Array.isArray(n)?MP(n):void 0===n||void 0===e?MP():MP([[n,e]])}ht.registerComponent("Component",ht);const bj=function(n,e){n=n<0?0:n;let t=Math.floor(n%60),r=Math.floor(n/60%60),i=Math.floor(n/3600);const s=Math.floor(e/60%60),l=Math.floor(e/3600);return(isNaN(n)||n===1/0)&&(i=r=t="-"),i=i>0||l>0?i+":":"",r=((i||s>=10)&&r<10?"0"+r:r)+":",t=t<10?"0"+t:t,i+r+t};let PP=bj;function Tj(n){PP=n}function Ej(){PP=bj}function Dy(n,e=n){return PP(n,e)}var QG=Object.freeze({__proto__:null,createTimeRanges:$c,createTimeRange:$c,setFormatTime:Tj,resetFormatTime:Ej,formatTime:Dy});function wj(n,e){let r,i,t=0;if(!e)return 0;(!n||!n.length)&&(n=$c(0,0));for(let s=0;s<n.length;s++)r=n.start(s),i=n.end(s),i>e&&(i=e),t+=i-r;return t/e}function No(n){if(n instanceof No)return n;"number"==typeof n?this.code=n:"string"==typeof n?this.message=n:Fc(n)&&("number"==typeof n.code&&(this.code=n.code),Object.assign(this,n)),this.message||(this.message=No.defaultMessages[this.code]||"")}No.prototype.code=0,No.prototype.message="",No.prototype.status=null,No.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],No.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let n=0;n<No.errorTypes.length;n++)No[No.errorTypes[n]]=n,No.prototype[No.errorTypes[n]]=n;function tC(n){return null!=n&&"function"==typeof n.then}function Hc(n){tC(n)&&n.then(null,e=>{})}const RP=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,r,i)=>(n[r]&&(t[r]=n[r]),t),{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})};const OP="vjs-modal-dialog";class k0 extends ht{constructor(e,t){super(e,t),this.handleKeyDown_=r=>this.handleKeyDown(r),this.close_=r=>this.close(r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Bn("div",{className:`${OP}-content`},{role:"document"}),this.descEl_=Bn("p",{className:`${OP}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Wp(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${OP} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"==typeof e){const t=this.closeable_=!!e;let r=this.getChild("closeButton");if(t&&!r){const i=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(r,"close",this.close_)}!t&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),r=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(t),this.empty(),aj(t,e),this.trigger("modalfill"),i?r.insertBefore(t,i):r.appendChild(t);const s=this.getChild("closeButton");s&&r.appendChild(s.el_)}empty(){this.trigger("beforemodalempty"),VD(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Mt().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),Cn().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(!Cn().isEventKey(e,"Tab"))return;const t=this.focusableEls_(),r=this.el_.querySelector(":focus");let i;for(let s=0;s<t.length;s++)if(r===t[s]){i=s;break}Mt().activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&i===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof be().HTMLAnchorElement||t instanceof be().HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof be().HTMLInputElement||t instanceof be().HTMLSelectElement||t instanceof be().HTMLTextAreaElement||t instanceof be().HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof be().HTMLIFrameElement||t instanceof be().HTMLObjectElement||t instanceof be().HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable"))}}k0.prototype.options_={pauseOnOpen:!0,temporary:!0},ht.registerComponent("ModalDialog",k0);class M0 extends Al{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Rh(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let r=0,i=this.length;r<i;r++)if(this[r]===e){t=this[r],t.off&&t.off(),this.tracks_.splice(r,1);break}!t||this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let r=0,i=this.length;r<i;r++){const s=this[r];if(s.id===e){t=s;break}}return t}}M0.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const n in M0.prototype.allowedEvents_)M0.prototype["on"+n]=null;const NP=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].enabled=!1)},LP=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].selected=!1)};class Sj extends M0{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class zD{constructor(e){zD.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let r=0;const i=e.length;this.cues_=e,this.length_=e.length;const s=function(l){""+l in this||Object.defineProperty(this,""+l,{get(){return this.cues_[l]}})};if(t<i)for(r=t;r<i;r++)s.call(this,r)}getCueById(e){let t=null;for(let r=0,i=this.length;r<i;r++){const s=this[r];if(s.id===e){t=s;break}}return t}}const t8={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},n8={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},r8={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},xj={disabled:"disabled",hidden:"hidden",showing:"showing"};class FP extends Al{constructor(e={}){super();const t={id:e.id||"vjs_track_"+Vc(),kind:e.kind||"",language:e.language||""};let r=e.label||"";for(const i in t)Object.defineProperty(this,i,{get:()=>t[i],set(){}});Object.defineProperty(this,"label",{get:()=>r,set(i){i!==r&&(r=i,this.trigger("labelchange"))}})}}const jP=function(n){const e=["protocol","hostname","port","pathname","search","hash","host"],t=Mt().createElement("a");t.href=n;const r={};for(let i=0;i<e.length;i++)r[e[i]]=t[e[i]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=be().location.protocol),r.host||(r.host=be().location.host),r},Ij=function(n){if(!n.match(/^https?:\/\//)){const e=Mt().createElement("a");e.href=n,n=e.href}return n},UP=function(n){if("string"==typeof n){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(n);if(t)return t.pop().toLowerCase()}return""},WD=function(n,e=be().location){const t=jP(n);return(":"===t.protocol?e.protocol:t.protocol)+t.host!==e.protocol+e.host};var i8=Object.freeze({__proto__:null,parseUrl:jP,getAbsoluteURL:Ij,getFileExtension:UP,isCrossOrigin:WD});const Dj=function(n,e){const t=new(be().WebVTT.Parser)(be(),be().vttjs,be().WebVTT.StringDecoder()),r=[];t.oncue=function(i){e.addCue(i)},t.onparsingerror=function(i){r.push(i)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(n),r.length>0&&(be().console&&be().console.groupCollapsed&&be().console.groupCollapsed(`Text Track parsing errors for ${e.src}`),r.forEach(i=>Zn.error(i)),be().console&&be().console.groupEnd&&be().console.groupEnd()),t.flush()},Aj=function(n,e){const t={uri:n},r=WD(n);r&&(t.cors=r);const i="use-credentials"===e.tech_.crossOrigin();i&&(t.withCredentials=i),fF()(t,Yr(this,function(s,l,d){if(s)return Zn.error(s,l);e.loaded_=!0,"function"!=typeof be().WebVTT?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],p=>{if("vttjserror"!==p.type)return Dj(d,e);Zn.error(`vttjs failed to load, stopping trying to process ${e.src}`)}):Dj(d,e)}))};class nC extends FP{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=Zr(e,{kind:r8[e.kind]||"subtitles",language:e.language||e.srclang||""});let r=xj[t.mode]||"disabled";const i=t.default;("metadata"===t.kind||"chapters"===t.kind)&&(r="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const s=new zD(this.cues_),l=new zD(this.activeCues_);let d=!1;this.timeupdateHandler=Yr(this,function(v={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==v.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,d&&(this.trigger("cuechange"),d=!1),"timeupdate"!==v.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),this.tech_.one("dispose",()=>{this.stopTracking()}),"disabled"!==r&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>i,set(){}},mode:{get:()=>r,set(v){!xj[v]||r!==v&&(r=v,!this.preload_&&"disabled"!==r&&0===this.cues.length&&Aj(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return l;const v=this.tech_.currentTime(),E=[];for(let D=0,j=this.cues.length;D<j;D++){const F=this.cues[D];F.startTime<=v&&F.endTime>=v&&E.push(F)}if(d=!1,E.length!==this.activeCues_.length)d=!0;else for(let D=0;D<E.length;D++)-1===this.activeCues_.indexOf(E[D])&&(d=!0);return this.activeCues_=E,l.setCues_(this.activeCues_),l},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&Aj(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(be().vttjs&&!(e instanceof be().vttjs.VTTCue)){t=new(be().vttjs.VTTCue)(e.startTime,e.endTime,e.text);for(const i in e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}const r=this.tech_.textTracks();for(let i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const r=this.cues_[t];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}nC.prototype.allowedEvents_={cuechange:"cuechange"};class kj extends FP{constructor(e={}){const t=Zr(e,{kind:n8[e.kind]||""});super(t);let r=!1;Object.defineProperty(this,"enabled",{get:()=>r,set(i){"boolean"!=typeof i||i===r||(r=i,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class Mj extends FP{constructor(e={}){const t=Zr(e,{kind:t8[e.kind]||""});super(t);let r=!1;Object.defineProperty(this,"selected",{get:()=>r,set(i){"boolean"!=typeof i||i===r||(r=i,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class Oh extends Al{constructor(e={}){let t;super();const r=new nC(e);this.kind=r.kind,this.src=r.src,this.srclang=r.language,this.label=r.label,this.default=r.default,Object.defineProperties(this,{readyState:{get:()=>t},track:{get:()=>r}}),t=Oh.NONE,r.addEventListener("loadeddata",()=>{t=Oh.LOADED,this.trigger({type:"load",target:this})})}}Oh.prototype.allowedEvents_={load:"load"},Oh.NONE=0,Oh.LOADING=1,Oh.LOADED=2,Oh.ERROR=3;const kl={audio:{ListClass:class XG extends M0{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){NP(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&NP(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,NP(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}},TrackClass:kj,capitalName:"Audio"},video:{ListClass:class JG extends M0{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){LP(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&LP(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,LP(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},TrackClass:Mj,capitalName:"Video"},text:{ListClass:Sj,TrackClass:nC,capitalName:"Text"}};Object.keys(kl).forEach(function(n){kl[n].getterName=`${n}Tracks`,kl[n].privateName=`${n}Tracks_`});const P0={remoteText:{ListClass:Sj,TrackClass:nC,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class e8{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,r=e.length;t<r;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let r=0,i=this.trackElements_.length;r<i;r++)if(e===this.trackElements_[r].track){t=this.trackElements_[r];break}return t}removeTrackElement_(e){for(let t=0,r=this.trackElements_.length;t<r;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},TrackClass:Oh,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Lo=Object.assign({},kl,P0);P0.names=Object.keys(P0),kl.names=Object.keys(kl),Lo.names=[].concat(P0.names).concat(kl.names);class Sn extends ht{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=r=>this.onDurationChange(r),this.trackProgress_=r=>this.trackProgress(r),this.trackCurrentTime_=r=>this.trackCurrentTime(r),this.stopTrackingCurrentTime_=r=>this.stopTrackingCurrentTime(r),this.disposeSourceHandler_=r=>this.disposeSourceHandler(r),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Lo.names.forEach(r=>{const i=Lo[r];e&&e[i.getterName]&&(this[i.privateName]=e[i.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(r=>{!1===e[`native${r}Tracks`]&&(this[`featuresNative${r}Tracks`]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:(!0===e.nativeCaptions||!0===e.nativeTextTracks)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new Lo.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Yr(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return $c(0,0)}bufferedPercent(){return wj(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(kl.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){(e=[].concat(e)).forEach(t=>{const r=this[`${t}Tracks`]()||[];let i=r.length;for(;i--;){const s=r[i];"text"===t&&this.removeRemoteTextTrack(s),r.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;)this.removeRemoteTextTrack(e[t])}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new No(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?$c(0,0):$c()}play(){}setScrubbing(){}scrubbing(){}setCurrentTime(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){kl.names.forEach(e=>{const r=()=>{this.trigger(`${e}trackchange`)},i=this[kl[e].getterName]();i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),this.on("dispose",()=>{i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)})})}addWebVttScript_(){if(!be().WebVTT)if(Mt().body.contains(this.el())){if(!this.options_["vtt.js"]&&b0(pF())&&Object.keys(pF()).length>0)return void this.trigger("vttjsloaded");const e=Mt().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),be().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),r=d=>e.addTrack(d.track),i=d=>e.removeTrack(d.track);t.on("addtrack",r),t.on("removetrack",i),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),l=()=>{s();for(let d=0;d<e.length;d++){const p=e[d];p.removeEventListener("cuechange",s),"showing"===p.mode&&p.addEventListener("cuechange",s)}};l(),e.addEventListener("change",l),e.addEventListener("addtrack",l),e.addEventListener("removetrack",l),this.on("dispose",function(){t.off("addtrack",r),t.off("removetrack",i),e.removeEventListener("change",l),e.removeEventListener("addtrack",l),e.removeEventListener("removetrack",l);for(let d=0;d<e.length;d++)e[d].removeEventListener("cuechange",s)})}addTextTrack(e,t,r){if(!e)throw new Error("TextTrack kind is required but was not provided");return function s8(n,e,t,r,i={}){const s=n.textTracks();i.kind=e,t&&(i.label=t),r&&(i.language=r),i.tech=n;const l=new Lo.text.TrackClass(i);return s.addTrack(l),l}(this,e,t,r)}createRemoteTextTrack(e){const t=Zr(e,{tech:this});return new P0.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const r=this.createRemoteTextTrack(e);return"boolean"!=typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!1===t&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(r.track)),r}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=Vc();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(){}overrideNativeVideoTracks(){}canPlayType(){return""}static canPlayType(){return""}static canPlaySource(e,t){return Sn.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Sn||e instanceof Sn||e===Sn}static registerTech(e,t){if(Sn.techs_||(Sn.techs_={}),!Sn.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Sn.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Sn.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=$i(e),Sn.techs_[e]=t,Sn.techs_[eC(e)]=t,"Tech"!==e&&Sn.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(Sn.techs_&&Sn.techs_[e])return Sn.techs_[e];if(e=$i(e),be()&&be().videojs&&be().videojs[e])return Zn.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),be().videojs[e]}}}Lo.names.forEach(function(n){const e=Lo[n];Sn.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),Sn.prototype.featuresVolumeControl=!0,Sn.prototype.featuresMuteControl=!0,Sn.prototype.featuresFullscreenResize=!1,Sn.prototype.featuresPlaybackRate=!1,Sn.prototype.featuresProgressEvents=!1,Sn.prototype.featuresSourceset=!1,Sn.prototype.featuresTimeupdateEvents=!1,Sn.prototype.featuresNativeTextTracks=!1,Sn.prototype.featuresVideoFrameCallback=!1,Sn.withSourceHandlers=function(n){n.registerSourceHandler=function(t,r){let i=n.sourceHandlers;i||(i=n.sourceHandlers=[]),void 0===r&&(r=i.length),i.splice(r,0,t)},n.canPlayType=function(t){const r=n.sourceHandlers||[];let i;for(let s=0;s<r.length;s++)if(i=r[s].canPlayType(t),i)return i;return""},n.selectSourceHandler=function(t,r){const i=n.sourceHandlers||[];let s;for(let l=0;l<i.length;l++)if(s=i[l].canHandleSource(t,r),s)return i[l];return null},n.canPlaySource=function(t,r){const i=n.selectSourceHandler(t,r);return i?i.canHandleSource(t,r):""},["seekable","seeking","duration"].forEach(function(t){const r=this[t];"function"==typeof r&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){let r=n.selectSourceHandler(t,this.options_);r||(n.nativeSourceHandler?r=n.nativeSourceHandler:Zn.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=r.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},ht.registerComponent("Tech",Sn),Sn.registerTech("Tech",Sn),Sn.defaultTechOrder_=[];const Ay={},VP={},KD={};function a8(n,e,t){n.setTimeout(()=>ky(e,Ay[e.type],t,n),1)}function Pj(n,e,t,r=null){const i="call"+$i(t),s=n.reduce(BP(i),r),l=s===KD,d=l?null:e[t](s);return function f8(n,e,t,r){for(let i=n.length-1;i>=0;i--){const s=n[i];s[e]&&s[e](r,t)}}(n,t,d,l),d}const d8={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},h8={setCurrentTime:1,setMuted:1,setVolume:1},Rj={play:1,pause:1};function BP(n){return(e,t)=>e===KD?KD:t[n]?t[n](e):e}function ky(n={},e=[],t,r,i=[],s=!1){const[l,...d]=e;if("string"==typeof l)ky(n,Ay[l],t,r,i,s);else if(l){const p=function g8(n,e){const t=VP[n.id()];let r=null;if(null==t)return r=e(n),VP[n.id()]=[[e,r]],r;for(let i=0;i<t.length;i++){const[s,l]=t[i];s===e&&(r=l)}return null===r&&(r=e(n),t.push([e,r])),r}(r,l);if(!p.setSource)return i.push(p),ky(n,d,t,r,i,s);p.setSource(Object.assign({},n),function(v,E){if(v)return ky(n,d,t,r,i,s);i.push(p),ky(E,n.type===E.type?d:Ay[E.type],t,r,i,s)})}else d.length?ky(n,d,t,r,i,s):s?t(n,i):ky(n,Ay["*"],t,r,i,!0)}const m8={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},ZD=function(n=""){const e=UP(n);return m8[e.toLowerCase()]||""},Oj=function(n){if(Array.isArray(n)){let e=[];n.forEach(function(t){t=Oj(t),Array.isArray(t)?e=e.concat(t):Fc(t)&&e.push(t)}),n=e}else n="string"==typeof n&&n.trim()?[Nj({src:n})]:Fc(n)&&"string"==typeof n.src&&n.src&&n.src.trim()?[Nj(n)]:[];return n};function Nj(n){if(!n.type){const e=ZD(n.src);e&&(n.type=e)}return n}ht.registerComponent("MediaLoader",class v8 extends ht{constructor(e,t,r){if(super(e,Zr({createEl:!1},t),r),t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(let s=0,l=t.playerOptions.techOrder;s<l.length;s++){const d=$i(l[s]);let p=Sn.getTech(d);if(d||(p=ht.getComponent(d)),p&&p.isSupported()){e.loadTech_(d);break}}}});class YD extends ht{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=r=>this.handleMouseOver(r),this.handleMouseOut_=r=>this.handleMouseOut(r),this.handleClick_=r=>this.handleClick(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.emitTapEvents(),this.enable()}createEl(e="div",t={},r={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&Zn.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),r=Object.assign({role:"button"},r),this.tabIndex_=t.tabIndex;const i=Bn(e,t,r);return i.appendChild(Bn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Bn("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(void 0===e)return this.controlText_||"Need Text";const r=this.localize(e);this.controlText_=e,Wp(this.controlTextEl_,r),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",r)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){Cn().isEventKey(e,"Space")||Cn().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}ht.registerComponent("ClickableComponent",YD);class $P extends YD{constructor(e,t){super(e,t),this.update(),this.update_=r=>this.update(r),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Bn("picture",{className:"vjs-poster",tabIndex:-1},{},Bn("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))}crossOrigin(e){if(typeof e>"u")return this.el_?this.el_.querySelector("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.el_.querySelector("img").crossOrigin=e:this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){this.el_.querySelector("img").src=e}handleClick(e){!this.player_.controls()||(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Hc(this.player_.play()):this.player_.pause())}}$P.prototype.crossorigin=$P.prototype.crossOrigin,ht.registerComponent("PosterImage",$P);const _8={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function HP(n,e){let t;if(4===n.length)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else{if(7!==n.length)throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");t=n.slice(1)}return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function GP(n,e,t){try{n.style[e]=t}catch{return}}ht.registerComponent("TextTrackDisplay",class b8 extends ht{constructor(e,t,r){super(e,t,r);const i=s=>this.updateDisplay(s);e.on("loadstart",s=>this.toggleDisplay(s)),e.on("texttrackchange",i),e.on("loadedmetadata",s=>this.preselectTrack(s)),e.ready(Yr(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",i),e.on("playerresize",i);const s=be().screen.orientation||be(),l=be().screen.orientation?"change":"orientationchange";s.addEventListener(l,i),e.on("dispose",()=>s.removeEventListener(l,i));const d=this.options_.playerOptions.tracks||[];for(let p=0;p<d.length;p++)this.player_.addRemoteTextTrack(d[p],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage;let i,s,l;for(let d=0;d<t.length;d++){const p=t[d];r&&r.enabled&&r.language&&r.language===p.language&&p.kind in e?p.kind===r.kind?l=p:l||(l=p):r&&!r.enabled?(l=null,i=null,s=null):p.default&&("descriptions"!==p.kind||i?p.kind in e&&!s&&(s=p):i=p)}l?l.mode="showing":s?s.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof be().WebVTT&&be().WebVTT.processCues(be(),[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const l=[];for(let d=0;d<e.length;++d){const p=e[d];"showing"===p.mode&&l.push(p)}return void this.updateForTrack(l)}let r=null,i=null,s=e.length;for(;s--;){const l=e[s];"showing"===l.mode&&("descriptions"===l.kind?r=l:i=l)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):r&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),r=e.activeCues;let i=r.length;for(;i--;){const s=r[i];if(!s)continue;const l=s.displayState;if(t.color&&(l.firstChild.style.color=t.color),t.textOpacity&&GP(l.firstChild,"color",HP(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(l.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&GP(l.firstChild,"backgroundColor",HP(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?GP(l,"backgroundColor",HP(t.windowColor,t.windowOpacity)):l.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?l.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?l.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?l.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(l.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent){const d=be().parseFloat(l.style.fontSize);l.style.fontSize=d*t.fontPercent+"px",l.style.height="auto",l.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=_8[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!=typeof be().WebVTT||e.every(r=>!r.activeCues))return;const t=[];for(let r=0;r<e.length;++r){const i=e[r];for(let s=0;s<i.activeCues.length;++s)t.push(i.activeCues[s])}be().WebVTT.processCues(be(),t,this.el_);for(let r=0;r<e.length;++r){const i=e[r];for(let s=0;s<i.activeCues.length;++s){const l=i.activeCues[s].displayState;xy(l,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:r)),i.language&&x0(l,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}}),ht.registerComponent("LoadingSpinner",class T8 extends ht{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),r=Bn("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i}});class vu extends YD{createEl(e,t={},r={}){const i=Bn("button",t=Object.assign({className:this.buildCSSClass()},t),r=Object.assign({type:"button"},r));return i.appendChild(Bn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,t={}){return Zn.warn(`Adding an actionable (user controllable) child to a Button (${this.constructor.name}) is not supported; use a ClickableComponent instead.`),ht.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){Cn().isEventKey(e,"Space")||Cn().isEventKey(e,"Enter")?e.stopPropagation():super.handleKeyDown(e)}}ht.registerComponent("Button",vu);class Fj extends vu{constructor(e,t){super(e,t),this.mouseused_=!1,this.on("mousedown",r=>this.handleMouseDown(r))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return Hc(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const r=this.player_.getChild("controlBar"),i=r&&r.getChild("playToggle");if(!i)return void this.player_.tech(!0).focus();const s=()=>i.focus();tC(t)?t.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}Fj.prototype.controlText_="Play Video",ht.registerComponent("BigPlayButton",Fj),ht.registerComponent("CloseButton",class E8 extends vu{constructor(e,t){super(e,t),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){Cn().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}});class jj extends vu{constructor(e,t={}){super(e,t),t.replay=void 0===t.replay||t.replay,this.on(e,"play",r=>this.handlePlay(r)),this.on(e,"pause",r=>this.handlePause(r)),t.replay&&this.on(e,"ended",r=>this.handleEnded(r))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Hc(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}jj.prototype.controlText_="Play",ht.registerComponent("PlayToggle",jj);class R0 extends ht{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended"],r=>this.updateContent(r)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),r=Bn("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\xa0`},{role:"presentation"});return t.appendChild(r),this.contentEl_=Bn("span",{className:`${e}-display`},{"aria-live":"off",role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=Dy(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,Zn.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Mt().createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}R0.prototype.labelText_="Time",R0.prototype.controlText_="Time",ht.registerComponent("TimeDisplay",R0);class qP extends R0{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}qP.prototype.labelText_="Current Time",qP.prototype.controlText_="Current Time",ht.registerComponent("CurrentTimeDisplay",qP);class zP extends R0{constructor(e,t){super(e,t);const r=i=>this.updateContent(i);this.on(e,"durationchange",r),this.on(e,"loadstart",r),this.on(e,"loadedmetadata",r)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}zP.prototype.labelText_="Duration",zP.prototype.controlText_="Duration",ht.registerComponent("DurationDisplay",zP),ht.registerComponent("TimeDivider",class w8 extends ht{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),r=super.createEl("span",{textContent:"/"});return t.appendChild(r),e.appendChild(t),e}});class WP extends R0{constructor(e,t){super(e,t),this.on(e,"durationchange",r=>this.updateContent(r))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(Bn("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!=typeof this.player_.duration())return;let t;t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t)}}WP.prototype.labelText_="Remaining Time",WP.prototype.controlText_="Remaining Time",ht.registerComponent("RemainingTimeDisplay",WP),ht.registerComponent("LiveDisplay",class C8 extends ht{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",r=>this.updateShowing(r))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Bn("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Bn("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\xa0`})),this.contentEl_.appendChild(Mt().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}});class Uj extends vu{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=r=>this.updateLiveEdgeStatus(r),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Bn("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function rC(n,e,t){return n=Number(n),Math.min(t,Math.max(e,isNaN(n)?e:n))}Uj.prototype.controlText_="Seek to live, currently playing live",ht.registerComponent("SeekToLive",Uj);var S8=Object.freeze({__proto__:null,clamp:rC});class KP extends ht{constructor(e,t){super(e,t),this.handleMouseDown_=r=>this.handleMouseDown(r),this.handleMouseUp_=r=>this.handleMouseUp(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.handleClick_=r=>this.handleClick(r),this.handleMouseMove_=r=>this.handleMouseMove(r),this.update_=r=>this.update(r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},r={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),r=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},r),super.createEl(e,t,r)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"===e.type&&!Uc&&e.preventDefault(),rj(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(){const e=this.bar.el_.ownerDocument;ij(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"})),e}getProgress(){return Number(rC(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=UD(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){Cn().isEventKey(e,"Left")||Cn().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Cn().isEventKey(e,"Right")||Cn().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")}}ht.registerComponent("Slider",KP);const ZP=(n,e)=>rC(n/e*100,0,100).toFixed(2)+"%";ht.registerComponent("LoadProgressBar",class x8 extends ht{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",r=>this.update(r))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=Bn("span",{className:"vjs-control-text"}),r=Bn("span",{textContent:this.localize("Loaded")}),i=Mt().createTextNode(": ");return this.percentageEl_=Bn("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(r),t.appendChild(i),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,r=this.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),l=this.partEls_,d=ZP(s,i);this.percent_!==d&&(this.el_.style.width=d,Wp(this.percentageEl_,d),this.percent_=d);for(let p=0;p<r.length;p++){const v=r.start(p),E=r.end(p);let D=l[p];D||(D=this.el_.appendChild(Bn()),l[p]=D),(D.dataset.start!==v||D.dataset.end!==E)&&(D.dataset.start=v,D.dataset.end=E,D.style.left=ZP(v,s),D.style.width=ZP(E-v,s))}for(let p=l.length;p>r.length;p--)this.el_.removeChild(l[p-1]);l.length=r.length})}}),ht.registerComponent("TimeTooltip",class I8 extends ht{constructor(e,t){super(e,t),this.update=Bc(Yr(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,r){const i=Qw(this.el_),s=I0(this.player_.el()),l=e.width*t;if(!s||!i)return;const d=e.left-s.left+l,p=e.width-l+(s.right-e.right);let v=i.width/2;d<v?v+=v-d:p<v&&(v=p),v<0?v=0:v>i.width&&(v=i.width),v=Math.round(v),this.el_.style.right=`-${v}px`,this.write(r)}write(e){Wp(this.el_,e)}updateTime(e,t,r,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const l=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const d=this.player_.liveTracker.liveWindow(),p=d-t*d;s=(p<1?"":"-")+Dy(p,d)}else s=Dy(r,l);this.update(e,t,s),i&&i()})}});class YP extends ht{constructor(e,t){super(e,t),this.update=Bc(Yr(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const r=this.getChild("timeTooltip");if(!r)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,t,i)}}YP.prototype.options_={children:[]},!Ro&&!jc&&YP.prototype.options_.children.push("timeTooltip"),ht.registerComponent("PlayProgressBar",YP);class Vj extends ht{constructor(e,t){super(e,t),this.update=Bc(Yr(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const r=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,r,()=>{this.el_.style.left=e.width*t+"px"})}}Vj.prototype.options_={children:["timeTooltip"]},ht.registerComponent("MouseTimeDisplay",Vj);class QP extends KP{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=Yr(this,this.update),this.update=Bc(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Mt()&&"visibilityState"in Mt()&&this.on(Mt(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===Mt().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===Mt().visibilityState)return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const r=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let s=this.player_.duration();i&&i.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.percent_=t),(this.currentTime_!==r||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Dy(r,s),Dy(s,s)],"{1} of {2}")),this.currentTime_=r,this.duration_=s),this.bar&&this.bar.update(I0(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const r=this.player_.liveTracker;return r&&r.isLive()?(t=(e-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){!Xw(e)||(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!Xw(e))return;let r;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);const i=this.calculateDistance(e),s=this.player_.liveTracker;if(s&&s.isLive()){if(i>=.99)return void s.seekToLiveEdge();const l=s.seekableStart(),d=s.liveCurrentTime();if(r=l+i*s.liveWindow(),r>=d&&(r=d),r<=l&&(r=l+.1),r===1/0)return}else r=i*this.player_.duration(),r===this.player_.duration()&&(r-=.1);this.userSeek_(r)}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");!e||e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");!e||e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Hc(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(Cn().isEventKey(e,"Space")||Cn().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(Cn().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(Cn().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Cn()(e))){e.preventDefault(),e.stopPropagation();const r=10*(Cn().codes[Cn()(e)]-Cn().codes[0])/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else Cn().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Cn().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Mt()&&"visibilityState"in Mt()&&this.off(Mt(),"visibilitychange",this.toggleVisibility_),super.dispose()}}QP.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!Ro&&!jc&&QP.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),ht.registerComponent("SeekBar",QP);class $j extends ht{constructor(e,t){super(e,t),this.handleMouseMove=Bc(Yr(this,this.handleMouseMove),30),this.throttledHandleMouseSeek=Bc(Yr(this,this.handleMouseSeek),30),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.handleMouseDownHandler_=r=>this.handleMouseDown(r),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const r=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(!r&&!i)return;const s=t.el(),l=Qw(s);let d=UD(s,e).x;d=rC(d,0,1),i&&i.update(l,d),r&&r.update(l,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Hc(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}$j.prototype.options_={children:["seekBar"]},ht.registerComponent("ProgressControl",$j);class Hj extends vu{constructor(e,t){super(e,t),this.on(e,["enterpictureinpicture","leavepictureinpicture"],r=>this.handlePictureInPictureChange(r)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],r=>this.handlePictureInPictureEnabledChange(r)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>{"audio"===e.currentType().substring(0,5)||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),this.hide()):this.show()}),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){Mt().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}}Hj.prototype.controlText_="Picture-in-Picture",ht.registerComponent("PictureInPictureToggle",Hj);class Gj extends vu{constructor(e,t){super(e,t),this.on(e,"fullscreenchange",r=>this.handleFullscreenChange(r)),!1===Mt()[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Gj.prototype.controlText_="Fullscreen",ht.registerComponent("FullscreenToggle",Gj),ht.registerComponent("VolumeLevel",class A8 extends ht{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}),ht.registerComponent("VolumeLevelTooltip",class k8 extends ht{constructor(e,t){super(e,t),this.update=Bc(Yr(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,r,i){if(!r){const s=I0(this.el_),l=I0(this.player_.el()),d=e.width*t;if(!l||!s)return;const p=e.left-l.left+d,v=e.width-d+(l.right-e.right);let E=s.width/2;p<E?E+=E-p:v<E&&(E=v),E<0?E=0:E>s.width&&(E=s.width),this.el_.style.right=`-${E}px`}this.write(`${i}%`)}write(e){Wp(this.el_,e)}updateVolume(e,t,r,i,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,r,i.toFixed(0)),s&&s()})}});class qj extends ht{constructor(e,t){super(e,t),this.update=Bc(Yr(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,r){const i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,r,i,()=>{r?this.el_.style.bottom=e.height*t+"px":this.el_.style.left=e.width*t+"px"})}}qj.prototype.options_={children:["volumeLevelTooltip"]},ht.registerComponent("MouseVolumeLevelDisplay",qj);class XD extends KP{constructor(e,t){super(e,t),this.on("slideractive",r=>this.updateLastVolume_(r)),this.on(e,"volumechange",r=>this.updateARIAAttributes(r)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){!Xw(e)||super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const r=this.el(),i=I0(r),s=this.vertical();let l=UD(r,e);l=s?l.y:l.x,l=rC(l,0,1),t.update(i,l,s)}!Xw(e)||(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)})}}XD.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!Ro&&!jc&&XD.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),XD.prototype.playerEvent="volumechange",ht.registerComponent("VolumeBar",XD);class zj extends ht{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||b0(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),function(n,e){e.tech_&&!e.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})}(this,e),this.throttledHandleMouseMove=Bc(Yr(this,this.handleMouseMove),30),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.on("mousedown",r=>this.handleMouseDown(r)),this.on("touchstart",r=>this.handleMouseDown(r)),this.on("mousemove",r=>this.handleMouseMove(r)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}zj.prototype.options_={children:["volumeBar"]},ht.registerComponent("VolumeControl",zj);class Wj extends vu{constructor(e,t){super(e,t),function(n,e){e.tech_&&!e.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})}(this,e),this.on(e,["loadstart","volumechange"],r=>this.update(r))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),r=this.player_.lastVolume_();0===t?(this.player_.volume(r<.1?.1:r),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;Ro&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2),FD(this.el_,[0,1,2,3].reduce((r,i)=>r+`${i?" ":""}vjs-vol-${i}`,"")),xy(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}Wj.prototype.controlText_="Mute",ht.registerComponent("MuteToggle",Wj);class Kj extends ht{constructor(e,t={}){t.inline=!(typeof t.inline<"u")||t.inline,(typeof t.volumeControl>"u"||b0(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=r=>this.handleKeyPress(r),this.on(e,["loadstart"],r=>this.volumePanelState_(r)),this.on(this.muteToggle,"keyup",r=>this.handleKeyPress(r)),this.on(this.volumeControl,"keyup",r=>this.handleVolumeControlKeyUp(r)),this.on("keydown",r=>this.handleKeyPress(r)),this.on("mouseover",r=>this.handleMouseOver(r)),this.on("mouseout",r=>this.handleMouseOut(r)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){Cn().isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Ga(Mt(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),oo(Mt(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){Cn().isEventKey(e,"Esc")&&this.handleMouseOut()}}Kj.prototype.options_={children:["muteToggle","volumeControl"]},ht.registerComponent("VolumePanel",Kj);class Zj extends ht{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",r=>this.handleKeyDown(r)),this.boundHandleBlur_=r=>this.handleBlur(r),this.boundHandleTapClick_=r=>this.handleTapClick(r)}addEventListenerForItem(e){e instanceof ht&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof ht&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){this.contentEl_=Bn(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Ga(t,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Mt().activeElement;if(!this.children().some(r=>r.el()===t)){const r=this.menuButton_;r&&r.buttonPressed_&&t!==r.el().firstChild&&r.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const r=t.filter(i=>i.el()===e.target)[0];if(!r)return;"CaptionSettingsMenuItem"!==r.name()&&this.menuButton_.focus()}}handleKeyDown(e){Cn().isEventKey(e,"Left")||Cn().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Cn().isEventKey(e,"Right")||Cn().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}ht.registerComponent("Menu",Zj);class XP extends ht{constructor(e,t={}){super(e,t),this.menuButton_=new vu(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const r=vu.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+r,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Ga(Mt(),"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new Zj(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=Bn("li",{className:"vjs-menu-title",textContent:$i(this.options_.title),tabIndex:-1}),r=new ht(this.player_,{el:t});e.addItem(r)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let e="vjs-menu-button";return e+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${e} ${vu.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return e+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),oo(Mt(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){Cn().isEventKey(e,"Esc")||Cn().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Cn().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Cn().isEventKey(e,"Up")||Cn().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(Cn().isEventKey(e,"Esc")||Cn().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(Cn().isEventKey(e,"Esc")||Cn().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Cn().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ro&&XF())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}ht.registerComponent("MenuButton",XP);class JP extends XP{constructor(e,t){const r=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!r)return;const i=Yr(this,this.update);r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),r.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i),r.removeEventListener("labelchange",i)})}}ht.registerComponent("TrackButton",JP);const P8=["Tab","Esc","Up","Down","Right","Left"];class iC extends YD{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.el_.setAttribute("role",this.selectable?this.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem")}createEl(e,t,r){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),r);return i.replaceChild(Bn("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){P8.some(t=>Cn().isEventKey(e,t))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}ht.registerComponent("MenuItem",iC);class sC extends iC{constructor(e,t){const r=t.track,i=e.textTracks();t.label=r.label||r.language||"Unknown",t.selected="showing"===r.mode,super(e,t),this.track=r,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...d)=>{this.handleTracksChange.apply(this,d)},l=(...d)=>{this.handleSelectedLanguageChange.apply(this,d)};if(e.on(["loadstart","texttrackchange"],s),i.addEventListener("change",s),i.addEventListener("selectedlanguagechange",l),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),i.removeEventListener("change",s),i.removeEventListener("selectedlanguagechange",l)}),void 0===i.onchange){let d;this.on(["tap","click"],function(){if("object"!=typeof be().Event)try{d=new(be().Event)("change")}catch{}d||(d=Mt().createEvent("Event"),d.initEvent("change",!0,!0)),i.dispatchEvent(d)})}this.handleTracksChange()}handleClick(e){const t=this.track,r=this.player_.textTracks();if(super.handleClick(e),r)for(let i=0;i<r.length;i++){const s=r[i];-1!==this.kinds.indexOf(s.kind)&&(s===t?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}ht.registerComponent("TextTrackMenuItem",sC);class Yj extends sC{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.track.label=t.label?t.label:t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let r=!0;for(let i=0,s=t.length;i<s;i++){const l=t[i];if(this.options_.kinds.indexOf(l.kind)>-1&&"showing"===l.mode){r=!1;break}}r!==this.isSelected_&&this.selected(r)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let r=!0;for(let i=0,s=t.length;i<s;i++){const l=t[i];if(["captions","descriptions","subtitles"].indexOf(l.kind)>-1&&"showing"===l.mode){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})}}ht.registerComponent("OffTextTrackMenuItem",Yj);class O0 extends JP{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=sC){let r;this.label_&&(r=`${this.label_} off`),e.push(new Yj(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<i.length;s++){const l=i[s];if(this.kinds_.indexOf(l.kind)>-1){const d=new t(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});d.addClass(`vjs-${l.kind}-menu-item`),e.push(d)}}return e}}ht.registerComponent("TextTrackButton",O0);class Qj extends iC{constructor(e,t){const r=t.track,i=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=i.text,t.selected=i.startTime<=s&&s<i.endTime,super(e,t),this.track=r,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}ht.registerComponent("ChaptersTrackMenuItem",Qj);class eR extends O0{constructor(e,t,r){super(e,t,r),this.selectCurrentItem_=()=>{this.items.forEach(i=>{i.selected(this.track_.activeCues[0]===i.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const r=e[t];if(r.kind===this.kind_)return r}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize($i(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let r=0,i=t.length;r<i;r++){const l=new Qj(this.player_,{track:this.track_,cue:t[r]});e.push(l)}return e}}eR.prototype.kind_="chapters",eR.prototype.controlText_="Chapters",ht.registerComponent("ChaptersButton",eR);class tR extends O0{constructor(e,t,r){super(e,t,r);const i=e.textTracks(),s=Yr(this,this.handleTracksChange);i.addEventListener("change",s),this.on("dispose",function(){i.removeEventListener("change",s)})}handleTracksChange(e){const t=this.player().textTracks();let r=!1;for(let i=0,s=t.length;i<s;i++){const l=t[i];if(l.kind!==this.kind_&&"showing"===l.mode){r=!0;break}}r?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}tR.prototype.kind_="descriptions",tR.prototype.controlText_="Descriptions",ht.registerComponent("DescriptionsButton",tR);class nR extends O0{constructor(e,t,r){super(e,t,r)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}nR.prototype.kind_="subtitles",nR.prototype.controlText_="Subtitles",ht.registerComponent("SubtitlesButton",nR);class rR extends sC{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}}ht.registerComponent("CaptionSettingsMenuItem",rR);class iR extends O0{constructor(e,t,r){super(e,t,r)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new rR(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}iR.prototype.kind_="captions",iR.prototype.controlText_="Captions",ht.registerComponent("CaptionsButton",iR);class Xj extends sC{createEl(e,t,r){const i=super.createEl(e,t,r),s=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(s.appendChild(Bn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Bn("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}}ht.registerComponent("SubsCapsMenuItem",Xj);class sR extends O0{constructor(e,t={}){super(e,t),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText($i(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new rR(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,Xj),e}}sR.prototype.kinds_=["captions","subtitles"],sR.prototype.controlText_="Subtitles",ht.registerComponent("SubsCapsButton",sR);class Jj extends iC{constructor(e,t){const r=t.track,i=e.audioTracks();t.label=r.label||r.language||"Unknown",t.selected=r.enabled,super(e,t),this.track=r,this.addClass(`vjs-${r.kind}-menu-item`);const s=(...l)=>{this.handleTracksChange.apply(this,l)};i.addEventListener("change",s),this.on("dispose",()=>{i.removeEventListener("change",s)})}createEl(e,t,r){const i=super.createEl(e,t,r),s=i.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(s.appendChild(Bn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Bn("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let r=0;r<t.length;r++){const i=t[r];i!==this.track&&(i.enabled=i===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}ht.registerComponent("AudioTrackMenuItem",Jj);class e2 extends JP{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let r=0;r<t.length;r++)e.push(new Jj(this.player_,{track:t[r],selectable:!0,multiSelectable:!1}));return e}}e2.prototype.controlText_="Audio Track",ht.registerComponent("AudioTrackButton",e2);class oR extends iC{constructor(e,t){const r=t.rate,i=parseFloat(r,10);t.label=r,t.selected=i===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=r,this.rate=i,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}oR.prototype.contentElType="button",ht.registerComponent("PlaybackRateMenuItem",oR);class t2 extends XP{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",r=>this.updateVisibility(r)),this.on(e,"ratechange",r=>this.updateLabel(r)),this.on(e,"playbackrateschange",r=>this.handlePlaybackRateschange(r))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Bn("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let r=e.length-1;r>=0;r--)t.push(new oR(this.player(),{rate:e[r]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}t2.prototype.controlText_="Playback Rate",ht.registerComponent("PlaybackRateMenuButton",t2);class n2 extends ht{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},r={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,r)}}ht.registerComponent("Spacer",n2),ht.registerComponent("CustomControlSpacer",class R8 extends n2{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xa0"})}});class JD extends ht{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}JD.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Mt()&&JD.prototype.options_.children.splice(JD.prototype.options_.children.length-1,0,"pictureInPictureToggle"),ht.registerComponent("ControlBar",JD);class r2 extends k0{constructor(e,t){super(e,t),this.on(e,"error",r=>this.open(r))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}r2.prototype.options_=Object.assign({},k0.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),ht.registerComponent("ErrorDisplay",r2);const aR="vjs-text-track-settings",i2=["#000","Black"],s2=["#00F","Blue"],o2=["#0FF","Cyan"],a2=["#0F0","Green"],l2=["#F0F","Magenta"],u2=["#F00","Red"],c2=["#FFF","White"],d2=["#FF0","Yellow"],lR=["1","Opaque"],uR=["0.5","Semi-Transparent"],h2=["0","Transparent"],My={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[i2,c2,u2,a2,s2,d2,l2,o2]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[lR,uR,h2]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[c2,i2,u2,a2,s2,d2,l2,o2]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:n=>"1.00"===n?null:Number(n)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[lR,uR]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[h2,uR,lR]}};function f2(n,e){if(e&&(n=e(n)),n&&"none"!==n)return n}My.windowColor.options=My.backgroundColor.options,ht.registerComponent("TextTrackSettings",class L8 extends k0{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=Bn("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),_0(My,r=>{this.on(this.$(r.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",r="label"){const i=My[e],s=i.id.replace("%s",this.id_),l=[t,s].join(" ").trim();return[`<${r} id="${s}" class="${"label"===r?"vjs-label":""}">`,this.localize(i.label),`</${r}>`,`<select aria-labelledby="${l}">`].concat(i.options.map(d=>{const p=s+"-"+d[1].replace(/\W+/g,"");return[`<option id="${p}" value="${d[0]}" `,`aria-labelledby="${l} ${p}">`,this.localize(d[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return Bn("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return Bn("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return Bn("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return zF(My,(e,t,r)=>{const i=function O8(n,e){return f2(n.options[n.options.selectedIndex].value,e)}(this.$(t.selector),t.parser);return void 0!==i&&(e[r]=i),e},{})}setValues(e){_0(My,(t,r)=>{!function N8(n,e,t){if(e)for(let r=0;r<n.options.length;r++)if(f2(n.options[r].value,t)===e){n.selectedIndex=r;break}}(this.$(t.selector),e[r],t.parser)})}setDefaults(){_0(My,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(be().localStorage.getItem(aR))}catch(t){Zn.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?be().localStorage.setItem(aR,JSON.stringify(e)):be().localStorage.removeItem(aR)}catch(t){Zn.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,t=e&&e.subsCapsButton,r=e&&e.captionsButton;t?t.focus():r&&r.focus()}}),ht.registerComponent("ResizeManager",class F8 extends ht{constructor(e,t){let r=t.ResizeObserver||be().ResizeObserver;null===t.ResizeObserver&&(r=!1),super(e,Zr({createEl:!r,reportTouchActivity:!1},t)),this.ResizeObserver=t.ResizeObserver||be().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=pj(()=>{this.resizeHandler()},100,!1,this),r?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let l=this.unloadListener_=function(){oo(this,"resize",s),oo(this,"unload",l),l=null};Ga(this.el_.contentWindow,"unload",l),Ga(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const j8={trackingThreshold:20,liveTolerance:15};ht.registerComponent("LiveTracker",class U8 extends ht{constructor(e,t){super(e,Zr(j8,t,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=i=>this.handlePlay(i),this.handleFirstTimeupdate_=i=>this.handleFirstTimeupdate(i),this.handleSeeked_=i=>this.handleSeeked(i),this.seekToLiveEdge_=i=>this.seekToLiveEdge(i),this.reset_(),this.on(this.player_,"durationchange",i=>this.handleDurationchange(i)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(be().performance.now().toFixed(4)),r=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+r;const i=this.liveCurrentTime(),s=this.player_.currentTime();let l=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||i===1/0)&&(l=!1),l!==this.behindLiveEdge_&&(this.behindLiveEdge_=l,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let r=e?e.length:0;for(;r--;)t.push(e.end(r));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let r=e?e.length:0;for(;r--;)t.push(e.start(r));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),ht.registerComponent("TitleBar",class V8 extends ht{constructor(e,t){super(e,t),this.on("statechanged",r=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Bn("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Vc()}`}),description:Bn("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Vc()}`})},Bn("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,r={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const s=this.state[i],l=this.els[i],d=r[i];VD(l),s&&Wp(l,s),t&&(t.removeAttribute(d),s&&t.setAttribute(d,l.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const cR=n=>{const e=n.el();if(e.hasAttribute("src"))return n.triggerSourceset(e.src),!0;const t=n.$$("source"),r=[];let i="";if(!t.length)return!1;for(let s=0;s<t.length;s++){const l=t[s].src;l&&-1===r.indexOf(l)&&r.push(l)}return!!r.length&&(1===r.length&&(i=r[0]),n.triggerSourceset(i),!0)},B8=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(n){const e=Mt().createElement(this.nodeName.toLowerCase());e.innerHTML=n;const t=Mt().createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",be().Element.prototype.appendChild.call(this,t),this.innerHTML}}),p2=(n,e)=>{let t={};for(let r=0;r<n.length&&(t=Object.getOwnPropertyDescriptor(n[r],e),!(t&&t.set&&t.get));r++);return t.enumerable=!0,t.configurable=!0,t},g2=function(n){const e=n.el();if(e.resetSourceWatch_)return;const t={},r=(n=>p2([n.el(),be().HTMLMediaElement.prototype,be().Element.prototype,B8],"innerHTML"))(n),i=s=>(...l)=>{const d=s.apply(e,l);return cR(n),d};["append","appendChild","insertAdjacentHTML"].forEach(s=>{!e[s]||(t[s]=e[s],e[s]=i(t[s]))}),Object.defineProperty(e,"innerHTML",Zr(r,{set:i(r.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(s=>{e[s]=t[s]}),Object.defineProperty(e,"innerHTML",r)},n.one("sourceset",e.resetSourceWatch_)},H8=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?Ij(be().Element.prototype.getAttribute.call(this,"src")):""},set(n){return be().Element.prototype.setAttribute.call(this,"src",n),n}});class $t extends Sn{constructor(e,t){super(e,t);const r=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,r&&(this.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(r):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let l=s.length;const d=[];for(;l--;){const p=s[l];"track"===p.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(p),this.remoteTextTracks().addTrack(p.track),this.textTracks().addTrack(p.track),!i&&!this.el_.hasAttribute("crossorigin")&&WD(p.src)&&(i=!0)):d.push(p))}for(let p=0;p<d.length;p++)this.el_.removeChild(d[p])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&Zn.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(Zw||ND)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),$t.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function(n){if(!n.featuresSourceset)return;const e=n.el();if(e.resetSourceset_)return;const t=(n=>p2([n.el(),be().HTMLMediaElement.prototype,H8],"src"))(n),r=e.setAttribute,i=e.load;Object.defineProperty(e,"src",Zr(t,{set:s=>{const l=t.set.call(e,s);return n.triggerSourceset(e.src),l}})),e.setAttribute=(s,l)=>{const d=r.call(e,s,l);return/src/i.test(s)&&n.triggerSourceset(e.src),d},e.load=()=>{const s=i.call(e);return cR(n)||(n.triggerSourceset(""),g2(n)),s},e.currentSrc?n.triggerSourceset(e.currentSrc):cR(n)||g2(n),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=i,e.setAttribute=r,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}}(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const r=()=>{t=[];for(let s=0;s<e.length;s++){const l=e[s];"metadata"===l.kind&&t.push({track:l,storedMode:l.mode})}};r(),e.addEventListener("change",r),this.on("dispose",()=>e.removeEventListener("change",r));const i=()=>{for(let s=0;s<t.length;s++){const l=t[s];"disabled"===l.track.mode&&l.track.mode!==l.storedMode&&(l.track.mode=l.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",r),e.removeEventListener("change",i),e.addEventListener("change",i)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",r),e.addEventListener("change",r),e.removeEventListener("change",i)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const r=e.toLowerCase();this[`${r}TracksListeners_`]&&Object.keys(this[`${r}TracksListeners_`]).forEach(i=>{this.el()[`${r}Tracks`].removeEventListener(i,this[`${r}TracksListeners_`][i])}),this[`featuresNative${e}Tracks`]=!t,this[`${r}TracksListeners_`]=null,this.proxyNativeTracksForType_(r)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=kl[e],r=this.el()[t.getterName],i=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!r||!r.addEventListener)return;const s={change:d=>{const p={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(p),"text"===e&&this[P0.remoteText.getterName]().trigger(p)},addtrack(d){i.addTrack(d.track)},removetrack(d){i.removeTrack(d.track)}},l=function(){const d=[];for(let p=0;p<i.length;p++){let v=!1;for(let E=0;E<r.length;E++)if(r[E]===i[p]){v=!0;break}v||d.push(i[p])}for(;d.length;)i.removeTrack(d.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(d=>{const p=s[d];r.addEventListener(d,p),this.on("dispose",v=>r.removeEventListener(d,p))}),this.on("loadstart",l),this.on("dispose",d=>this.off("loadstart",l))}proxyNativeTracks_(){kl.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),$t.disposeMediaElement(e),e=r}else{e=Mt().createElement("video");const i=Zr({},this.options_.tag&&Kp(this.options_.tag));(!Zw||!0!==this.options_.nativeControlsForTouch)&&delete i.controls,tj(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&x0(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let r=0;r<t.length;r++){const i=t[r],s=this.options_[i];typeof s<"u"&&(s?x0(e,i,i):jD(e,i),e[i]=s)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let r=!1;const i=function(){r=!0};this.on("loadstart",i);const s=function(){r||this.trigger("loadstart")};return this.on("loadedmetadata",s),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",s),r||this.trigger("loadstart")})}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(r){this.trigger(r)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&LD?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){Zn(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&jc&&Uc&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Hc(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}reset(){$t.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,r):super.addTextTrack(e,t,r)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Mt().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const r=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(r),r}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let r=t.length;for(;r--;)(e===t[r]||e===t[r].track)&&this.el().removeChild(t[r])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),be().performance&&(e.creationTime=be().performance.now()),e}}kD($t,"TEST_VID",function(){if(!C0())return;const n=Mt().createElement("video"),e=Mt().createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n}),$t.isSupported=function(){try{$t.TEST_VID.volume=.5}catch{return!1}return!(!$t.TEST_VID||!$t.TEST_VID.canPlayType)},$t.canPlayType=function(n){return $t.TEST_VID.canPlayType(n)},$t.canPlaySource=function(n,e){return $t.canPlayType(n.type)},$t.canControlVolume=function(){try{const n=$t.TEST_VID.volume;$t.TEST_VID.volume=n/2+.1;const e=n!==$t.TEST_VID.volume;return e&&Ro?(be().setTimeout(()=>{$t&&$t.prototype&&($t.prototype.featuresVolumeControl=n!==$t.TEST_VID.volume)}),!1):e}catch{return!1}},$t.canMuteVolume=function(){try{const n=$t.TEST_VID.muted;return $t.TEST_VID.muted=!n,$t.TEST_VID.muted?x0($t.TEST_VID,"muted","muted"):jD($t.TEST_VID,"muted"),n!==$t.TEST_VID.muted}catch{return!1}},$t.canControlPlaybackRate=function(){if(jc&&Uc&&MD<58)return!1;try{const n=$t.TEST_VID.playbackRate;return $t.TEST_VID.playbackRate=n/2+.1,n!==$t.TEST_VID.playbackRate}catch{return!1}},$t.canOverrideAttributes=function(){try{const n=()=>{};Object.defineProperty(Mt().createElement("video"),"src",{get:n,set:n}),Object.defineProperty(Mt().createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(Mt().createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(Mt().createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0},$t.supportsNativeTextTracks=function(){return LD||Ro&&Uc},$t.supportsNativeVideoTracks=function(){return!(!$t.TEST_VID||!$t.TEST_VID.videoTracks)},$t.supportsNativeAudioTracks=function(){return!(!$t.TEST_VID||!$t.TEST_VID.audioTracks)},$t.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([n,e]){kD($t.prototype,n,()=>$t[e](),!0)}),$t.prototype.featuresVolumeControl=$t.canControlVolume(),$t.prototype.movingMediaElementInDOM=!Ro,$t.prototype.featuresFullscreenResize=!0,$t.prototype.featuresProgressEvents=!0,$t.prototype.featuresTimeupdateEvents=!0,$t.prototype.featuresVideoFrameCallback=!(!$t.TEST_VID||!$t.TEST_VID.requestVideoFrameCallback),$t.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),"function"==typeof n.load&&function(){try{n.load()}catch{}}()}},$t.resetMediaElement=function(n){if(!n)return;const e=n.querySelectorAll("source");let t=e.length;for(;t--;)n.removeChild(e[t]);n.removeAttribute("src"),"function"==typeof n.load&&function(){try{n.load()}catch{}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){$t.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){$t.prototype["set"+$i(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){$t.prototype[n]=function(){return this.el_[n]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){$t.prototype["set"+$i(n)]=function(e){this.el_[n]=e}}),["pause","load","play"].forEach(function(n){$t.prototype[n]=function(){return this.el_[n]()}}),Sn.withSourceHandlers($t),$t.nativeSourceHandler={},$t.nativeSourceHandler.canPlayType=function(n){try{return $t.TEST_VID.canPlayType(n)}catch{return""}},$t.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return $t.nativeSourceHandler.canPlayType(n.type);if(n.src){const t=UP(n.src);return $t.nativeSourceHandler.canPlayType(`video/${t}`)}return""},$t.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)},$t.nativeSourceHandler.dispose=function(){},$t.registerSourceHandler($t.nativeSourceHandler),Sn.registerTech("Html5",$t);const m2=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],dR={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},hR=["tiny","xsmall","small","medium","large","xlarge","huge"],eA={};hR.forEach(n=>{const e="x"===n.charAt(0)?`x-${n.substring(1)}`:n;eA[n]=`vjs-layout-${e}`});const z8={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Qr extends ht{constructor(e,t,r){if(e.id=e.id||t.id||`vjs_video_${Vc()}`,(t=Object.assign(Qr.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const l=e.closest("[lang]");l&&(t.language=l.getAttribute("lang"))}if(super(null,t,r),this.boundDocumentFullscreenChange_=l=>this.documentFullscreenChange_(l),this.boundFullWindowOnEscKey_=l=>this.fullWindowOnEscKey(l),this.boundUpdateStyleEl_=l=>this.updateStyleEl_(l),this.boundApplyInitTime_=l=>this.applyInitTime_(l),this.boundUpdateCurrentBreakpoint_=l=>this.updateCurrentBreakpoint_(l),this.boundHandleTechClick_=l=>this.handleTechClick_(l),this.boundHandleTechDoubleClick_=l=>this.handleTechDoubleClick_(l),this.boundHandleTechTouchStart_=l=>this.handleTechTouchStart_(l),this.boundHandleTechTouchMove_=l=>this.handleTechTouchMove_(l),this.boundHandleTechTouchEnd_=l=>this.handleTechTouchEnd_(l),this.boundHandleTechTap_=l=>this.handleTechTap_(l),this.isFullscreen_=!1,this.log=GF(this.id_),this.fsApi_=DD,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Kp(e),this.language(this.options_.language),t.languages){const l={};Object.getOwnPropertyNames(t.languages).forEach(function(d){l[d.toLowerCase()]=t.languages[d]}),this.languages_=l}else this.languages_=Qr.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(l=>{if("function"!=typeof this[l])throw new Error(`plugin "${l}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),kP(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Ga(Mt(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=Zr(this.options_);t.plugins&&Object.keys(t.plugins).forEach(l=>{this[l](t.plugins[l])}),t.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(t.playbackRates),this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),Zw&&this.addClass("vjs-touch-enabled"),Ro||this.addClass("vjs-workinghover"),Qr.players[this.id_]=this;const s="8.0.4".split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",l=>this.listenForUserActivity_(l)),this.on("keydown",l=>this.handleKeyDown(l)),this.on("languagechange",l=>this.handleLanguagechange(l)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),oo(Mt(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),oo(Mt(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Qr.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function p8(n){VP[n.id()]=null}(this),Lo.names.forEach(e=>{const r=this[Lo[e].getterName]();r&&r.off&&r.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let t,e=this.tag,r=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const i="video-js"===this.tag.tagName.toLowerCase();r?t=this.el_=e.parentNode:i||(t=this.el_=super.createEl("div"));const s=Kp(e);if(i){for(t=this.el_=e,e=this.tag=Mt().createElement("video");t.children.length;)e.appendChild(t.firstChild);Yw(t,"video-js")||xy(t,"video-js"),t.appendChild(e),r=this.playerElIngest_=t,Object.keys(t).forEach(d=>{try{e[d]=t[d]}catch{}})}if(e.setAttribute("tabindex","-1"),s.tabindex="-1",Uc&&RD&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(d){i&&"class"===d||t.setAttribute(d,s[d]),i&&e.setAttribute(d,s[d])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),!0!==be().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=dj("vjs-styles-dimensions");const d=Zp(".vjs-styles-defaults"),p=Zp("head");p.insertBefore(this.styleEl_,d?d.nextSibling:p.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const l=e.getElementsByTagName("a");for(let d=0;d<l.length;d++){const p=l.item(d);xy(p,"vjs-hidden"),p.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!r&&e.parentNode.insertBefore(t,e),TP(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):Zn.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const r=e+"_";if(void 0===t)return this[r]||0;if(""===t||"auto"===t)return this[r]=void 0,void this.updateStyleEl_();const i=parseFloat(t);isNaN(i)?Zn.error(`Improper value "${t}" supplied for for ${e}`):(this[r]=i,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Rh(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),((n,e)=>{Rh(n)?e():(n.eventedCallbacks||(n.eventedCallbacks=[]),n.eventedCallbacks.push(e))})(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===be().VIDEOJS_NO_DYNAMIC_STYLE){const d="number"==typeof this.width_?this.width_:this.options_.width,p="number"==typeof this.height_?this.height_:this.options_.height,v=this.tech_&&this.tech_.el();return void(v&&(d>=0&&(v.width=d),p>=0&&(v.height=p)))}let e,t,r,i;r=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const s=r.split(":"),l=s[1]/s[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/l:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*l,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),hj(this.styleEl_,`\n      .${i} {\n        width: ${e}px;\n        height: ${t}px;\n      }\n\n      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*l}%;\n      }\n    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const r=$i(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(Sn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;let s=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(s=!1);const l={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Lo.names.forEach(p=>{const v=Lo[p];l[v.getterName]=this[v.privateName]}),Object.assign(l,this.options_[r]),Object.assign(l,this.options_[i]),Object.assign(l,this.options_[e.toLowerCase()]),this.tag&&(l.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(l.startTime=this.cache_.currentTime);const d=Sn.getTech(e);if(!d)throw new Error(`No Tech named '${r}' exists! '${r}' should be registered using videojs.registerTech()'`);this.tech_=new d(l),this.tech_.ready(Yr(this,this.handleTechReady_),!0),function(n,e){n.forEach(function(t){const r=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(i=>r.addCue(i))}),e.textTracks()}(this.textTracksJson_||[],this.tech_),m2.forEach(p=>{this.on(this.tech_,p,v=>this[`handleTech${$i(p)}_`](v))}),Object.keys(dR).forEach(p=>{this.on(this.tech_,p,v=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${dR[p]}_`].bind(this),event:v}):this[`handleTech${dR[p]}_`](v)})}),this.on(this.tech_,"loadstart",p=>this.handleTechLoadStart_(p)),this.on(this.tech_,"sourceset",p=>this.handleTechSourceset_(p)),this.on(this.tech_,"waiting",p=>this.handleTechWaiting_(p)),this.on(this.tech_,"ended",p=>this.handleTechEnded_(p)),this.on(this.tech_,"seeking",p=>this.handleTechSeeking_(p)),this.on(this.tech_,"play",p=>this.handleTechPlay_(p)),this.on(this.tech_,"pause",p=>this.handleTechPause_(p)),this.on(this.tech_,"durationchange",p=>this.handleTechDurationChange_(p)),this.on(this.tech_,"fullscreenchange",(p,v)=>this.handleTechFullscreenChange_(p,v)),this.on(this.tech_,"fullscreenerror",(p,v)=>this.handleTechFullscreenError_(p,v)),this.on(this.tech_,"enterpictureinpicture",p=>this.handleTechEnterPictureInPicture_(p)),this.on(this.tech_,"leavepictureinpicture",p=>this.handleTechLeavePictureInPicture_(p)),this.on(this.tech_,"error",p=>this.handleTechError_(p)),this.on(this.tech_,"posterchange",p=>this.handleTechPosterChange_(p)),this.on(this.tech_,"textdata",p=>this.handleTechTextData_(p)),this.on(this.tech_,"ratechange",p=>this.handleTechRateChange_(p)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==r||!this.tag)&&TP(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Lo.names.forEach(e=>{const t=Lo[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=function(n){const e=n.$$("track"),t=Array.prototype.map.call(e,i=>i.track);return Array.prototype.map.call(e,function(i){const s=RP(i.track);return i.src&&(s.src=i.src),s}).concat(Array.prototype.filter.call(n.textTracks(),function(i){return-1===t.indexOf(i)}).map(RP))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&Zn.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!=typeof e)return;const t=()=>{const i=this.muted();this.muted(!0);const s=()=>{this.muted(i)};this.playTerminatedQueue_.push(s);const l=this.play();if(tC(l))return l.catch(d=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${d||""}`)})};let r;return"any"!==e||this.muted()?r="muted"!==e||this.muted()?this.play():t():(r=this.play(),tC(r)&&(r=r.catch(t))),tC(r)?r.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})}):void 0}updateSourceCaches_(e=""){let t=e,r="";"string"!=typeof t&&(t=e.src,r=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!r&&(r=((n,e)=>{if(!e)return"";if(n.cache_.source.src===e&&n.cache_.source.type)return n.cache_.source.type;const t=n.cache_.sources.filter(i=>i.src===e);if(t.length)return t[0].type;const r=n.$$("source");for(let i=0;i<r.length;i++){const s=r[i];if(s.type&&s.src&&s.src===e)return s.type}return ZD(e)})(this,t)),this.cache_.source=Zr({},e,{src:t,type:r});const i=this.cache_.sources.filter(p=>p.src&&p.src===t),s=[],l=this.$$("source"),d=[];for(let p=0;p<l.length;p++){const v=Kp(l[p]);s.push(v),v.src&&v.src===t&&d.push(v.src)}d.length&&!i.length?this.cache_.sources=s:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=s=>this.updateSourceCaches_(s);const r=this.currentSource().src,i=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==r)&&(t=()=>{}),t(i),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if("sourceset"===s.type)return;const l=this.techGet("currentSrc");this.lastSource_.tech=l,this.updateSourceCaches_(l)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){!this.controls_||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Hc(this.play()):this.pause())}handleTechDoubleClick_(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),r=>r.contains(e.target))||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const r=this.el();let i=Mt()[this.fsApi_.fullscreenElement]===r;!i&&r.matches?i=r.matches(":"+this.fsApi_.fullscreen):!i&&r.msMatchesSelector&&(i=r.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in h8)return function c8(n,e,t,r){return e[t](n.reduce(BP(t),r))}(this.middleware_,this.tech_,e,t);if(e in Rj)return Pj(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(r){throw Zn(r),r}},!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in d8)return function u8(n,e,t){return n.reduceRight(BP(t),e[t]())}(this.middleware_,this.tech_,e);if(e in Rj)return Pj(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?(Zn(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):"TypeError"===t.name?(Zn(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(Zn(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Hc){this.playCallbacks_.push(e);const t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=i=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!t&&(LD||Ro)&&this.load());const r=this.techGet_("play");null===r?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(r){r(e)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||$c(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return typeof e<"u"?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=$c(0,0)),e}bufferedPercent(){return wj(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let r=e.end(e.length-1);return r>t&&(r=t),r}volume(e){let t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((r,i)=>{function s(){t.off("fullscreenerror",d),t.off("fullscreenchange",l)}function l(){s(),r()}function d(v,E){s(),i(E)}t.one("fullscreenchange",l),t.one("fullscreenerror",d);const p=t.requestFullscreenHelper_(e);p&&(p.then(s,s),p.then(r,i))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){const r=this.el_[this.fsApi_.requestFullscreen](t);return r&&r.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),r}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,r)=>{function i(){e.off("fullscreenerror",l),e.off("fullscreenchange",s)}function s(){i(),t()}function l(p,v){i(),r(v)}e.one("fullscreenchange",s),e.one("fullscreenerror",l);const d=e.exitFullscreenHelper_();d&&(d.then(i,i),d.then(t,r))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Mt()[this.fsApi_.exitFullscreen]();return e&&Hc(e.then(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Mt().documentElement.style.overflow,Ga(Mt(),"keydown",this.boundFullWindowOnEscKey_),Mt().documentElement.style.overflow="hidden",xy(Mt().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){Cn().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,oo(Mt(),"keydown",this.boundFullWindowOnEscKey_),Mt().documentElement.style.overflow=this.docOrigOverflow,FD(Mt().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if("pictureInPictureEnabled"in Mt()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")}exitPictureInPicture(){if("pictureInPictureEnabled"in Mt())return Mt().exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(i=>{const s=i.tagName.toLowerCase();return!!i.isContentEditable||("input"===s?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type):-1!==["textarea"].indexOf(s))})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:r=(l=>Cn().isEventKey(l,"f")),muteKey:i=(l=>Cn().isEventKey(l,"m")),playPauseKey:s=(l=>Cn().isEventKey(l,"k")||Cn().isEventKey(l,"Space"))}=t;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();const l=ht.getComponent("FullscreenToggle");!1!==Mt()[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else i.call(this,e)?(e.preventDefault(),e.stopPropagation(),ht.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),ht.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let r=0,i=this.options_.techOrder;r<i.length;r++){const s=i[r];let l=Sn.getTech(s);if(l||(l=ht.getComponent(s)),l){if(l.isSupported()&&(t=l.canPlayType(e),t))return t}else Zn.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const t=this.options_.techOrder.map(d=>[d,Sn.getTech(d)]).filter(([d,p])=>p?p.isSupported():(Zn.error(`The "${d}" tech is undefined. Skipped browser support check for that tech.`),!1)),r=function(d,p,v){let E;return d.some(D=>p.some(j=>{if(E=v(D,j),E)return!0})),E};let i;const l=([d,p],v)=>{if(p.canPlaySource(v,this.options_[d.toLowerCase()]))return{source:v,tech:d}};return i=this.options_.sourceOrder?r(e,t,(d=l,(p,v)=>d(v,p))):r(t,e,l),i||!1;var d}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const r=Oj(e);if(r.length){if(this.changingSrc_=!0,t||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),a8(this,r[0],(i,s)=>{if(this.middleware_=s,t||(this.cache_.sources=r),this.updateSourceCaches_(i),this.src_(i))return r.length>1?this.handleSrc_(r.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());!function l8(n,e){n.forEach(t=>t.setTech&&t.setTech(e))}(s,this.tech_)}),r.length>1){const i=()=>{this.error(null),this.handleSrc_(r.slice(1),!0)},s=()=>{this.off("error",i)};this.one("error",i),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",i),this.off("playing",s)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return!t||(vj(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}load(){this.techCall_("load")}reset(){this.paused()?this.doReset_():Hc(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Rh(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{durationDisplay:e,remainingTimeDisplay:t}=this.controlBar||{};e&&e.updateContent(),t&&t.updateContent()}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(zp("beforeerror").forEach(t=>{const r=t(this,e);Fc(r)&&!Array.isArray(r)||"string"==typeof r||"number"==typeof r||null===r?e=r:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){const t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new No(e),this.addClass("vjs-error"),Zn.error(`(CODE:${this.error_.code} ${No.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),zp("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,r;const i=Yr(this,this.reportUserActivity),d=function(E){i(),this.clearInterval(e)};this.on("mousedown",function(){i(),this.clearInterval(e),e=this.setInterval(i,250)}),this.on("mousemove",function(E){(E.screenX!==t||E.screenY!==r)&&(t=E.screenX,r=E.screenY,i())}),this.on("mouseup",d),this.on("mouseleave",d);const p=this.getChild("controlBar");let v;p&&!Ro&&!jc&&(p.on("mouseenter",function(E){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),p.on("mouseleave",function(E){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i),this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(v);const E=this.options_.inactivityTimeout;E<=0||(v=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},E))},250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),r=t&&t.currentHeight();e.forEach(i=>{i!==t&&i.el_&&!i.hasClass("vjs-hidden")&&(i.hide(),this.audioOnlyCache_.hiddenChildren.push(i))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return"boolean"!=typeof e||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,r){if(this.tech_)return this.tech_.addTextTrack(e,t,r)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Rh(this)&&this.trigger("languagechange"))}languages(){return Zr(Qr.prototype.options_.languages,this.languages_)}toJSON(){const e=Zr(this.options_),t=e.tracks;e.tracks=[];for(let r=0;r<t.length;r++){let i=t[r];i=Zr(i),i.player=void 0,e.tracks[r]=i}return e}createModal(e,t){(t=t||{}).content=e||"";const r=new k0(this,t);return this.addChild(r),r.on("dispose",()=>{this.removeChild(r)}),r.open(),r}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let r=0;r<hR.length;r++){const i=hR[r];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(eA[e]),this.addClass(eA[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},z8,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return eA[this.breakpoint_]||""}loadMedia(e,t){if(!e||"object"!=typeof e)return;this.reset(),this.cache_.media=Zr(e);const{artist:r,artwork:i,description:s,poster:l,src:d,textTracks:p,title:v}=this.cache_.media;!i&&l&&(this.cache_.media.artwork=[{src:l,type:ZD(l)}]),d&&this.src(d),l&&this.poster(l),Array.isArray(p)&&p.forEach(E=>this.addRemoteTextTrack(E,!1)),this.titleBar&&this.titleBar.update({title:v,description:s||r||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),i={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src}))};return e&&(i.poster=e,i.artwork=[{src:i.poster,type:ZD(i.poster)}]),i}return Zr(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},r=Kp(e),i=r["data-setup"];if(Yw(e,"vjs-fill")&&(r.fill=!0),Yw(e,"vjs-fluid")&&(r.fluid=!0),null!==i){const[s,l]=B4()(i||"{}");s&&Zn.error(s),Object.assign(r,l)}if(Object.assign(t,r),e.hasChildNodes()){const s=e.childNodes;for(let l=0,d=s.length;l<d;l++){const p=s[l],v=p.nodeName.toLowerCase();"source"===v?t.sources.push(Kp(p)):"track"===v&&t.tracks.push(Kp(p))}}return t}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;!Array.isArray(e)||!e.every(t=>"number"==typeof t)||(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Lo.names.forEach(function(n){const e=Lo[n];Qr.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),Qr.prototype.crossorigin=Qr.prototype.crossOrigin,Qr.players={};const oC=be().navigator;Qr.prototype.options_={techOrder:Sn.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:oC&&(oC.languages&&oC.languages[0]||oC.userLanguage||oC.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(n){Qr.prototype[n]=function(){return this.techGet_(n)}}),m2.forEach(function(n){Qr.prototype[`handleTech${$i(n)}_`]=function(){return this.trigger(n)}}),ht.registerComponent("Player",Qr);const tA="plugin",N0="activePlugins_",L0={},nA=n=>L0.hasOwnProperty(n),rA=n=>nA(n)?L0[n]:void 0,y2=(n,e)=>{n[N0]=n[N0]||{},n[N0][e]=!0},iA=(n,e,t)=>{const r=(t?"before":"")+"pluginsetup";n.trigger(r,e),n.trigger(r+":"+e.name,e)},v2=(n,e)=>(e.prototype.name=n,function(...t){iA(this,{name:n,plugin:e,instance:null},!0);const r=new e(this,...t);return this[n]=()=>r,iA(this,r.getEventHash()),r});let Yp=(()=>{class n{constructor(t){if(this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),kP(this),delete this.trigger,yj(this,this.constructor.defaultState),y2(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(t={}){return t.name=this.name,t.plugin=this.constructor,t.instance=this,t}trigger(t,r={}){return A0(this.eventBusEl_,t,this.getEventHash(r))}handleStateChanged(t){}dispose(){const{name:t,player:r}=this;this.trigger("dispose"),this.off(),r.off("dispose",this.dispose),r[N0][t]=!1,this.player=this.state=null,r[t]=v2(t,L0[t])}static isBasic(t){const r="string"==typeof t?rA(t):t;return"function"==typeof r&&!n.prototype.isPrototypeOf(r.prototype)}static registerPlugin(t,r){if("string"!=typeof t)throw new Error(`Illegal plugin name, "${t}", must be a string, was ${typeof t}.`);if(nA(t))Zn.warn(`A plugin named "${t}" already exists. You may want to avoid re-registering plugins!`);else if(Qr.prototype.hasOwnProperty(t))throw new Error(`Illegal plugin name, "${t}", cannot share a name with an existing player method!`);if("function"!=typeof r)throw new Error(`Illegal plugin for "${t}", must be a function, was ${typeof r}.`);return L0[t]=r,t!==tA&&(Qr.prototype[t]=n.isBasic(r)?function(n,e){const t=function(){iA(this,{name:n,plugin:e,instance:null},!0);const r=e.apply(this,arguments);return y2(this,n),iA(this,{name:n,plugin:e,instance:r}),r};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}(t,r):v2(t,r)),r}static deregisterPlugin(t){if(t===tA)throw new Error("Cannot de-register base plugin.");nA(t)&&(delete L0[t],delete Qr.prototype[t])}static getPlugins(t=Object.keys(L0)){let r;return t.forEach(i=>{const s=rA(i);s&&(r=r||{},r[i]=s)}),r}static getPluginVersion(t){const r=rA(t);return r&&r.VERSION||""}}return n.getPlugin=rA,n.BASE_PLUGIN_NAME=tA,n})();function _u(n,e,t,r){return function K8(n,e){let t=!1;return function(...r){return t||Zn.warn(n),t=!0,e.apply(this,r)}}(`${e} is deprecated and will be removed in ${n}.0; please use ${t} instead.`,r)}Yp.registerPlugin(tA,Yp),Qr.prototype.usingPlugin=function(n){return!!this[N0]&&!0===this[N0][n]},Qr.prototype.hasPlugin=function(n){return!!nA(n)};const _2=n=>0===n.indexOf("#")?n.slice(1):n;function tt(n,e,t){let r=tt.getPlayer(n);if(r)return e&&Zn.warn(`Player "${n}" is already initialised. Options will not be applied.`),t&&r.ready(t),r;const i="string"==typeof n?Zp("#"+_2(n)):n;if(!S0(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i))&&Zn.warn("The element supplied is not included in the DOM"),!0===(e=e||{}).restoreEl&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),zp("beforesetup").forEach(l=>{const d=l(i,Zr(e));Fc(d)&&!Array.isArray(d)?e=Zr(e,d):Zn.error("please return an object in beforesetup hooks")});const s=ht.getComponent("Player");return r=new s(i,e,t),zp("setup").forEach(l=>l(r)),r}if(tt.hooks_=Ph,tt.hooks=zp,tt.hook=function(n,e){zp(n,e)},tt.hookOnce=function(n,e){zp(n,[].concat(e).map(t=>{const r=(...i)=>(BF(n,r),t(...i));return r}))},tt.removeHook=BF,!0!==be().VIDEOJS_NO_DYNAMIC_STYLE&&C0()){let n=Zp(".vjs-styles-defaults");if(!n){n=dj("vjs-styles-defaults");const e=Zp("head");e&&e.insertBefore(n,e.firstChild),hj(n,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}CP(1,tt),tt.VERSION="8.0.4",tt.options=Qr.prototype.options_,tt.getPlayers=()=>Qr.players,tt.getPlayer=n=>{const e=Qr.players;let t;if("string"==typeof n){const r=_2(n),i=e[r];if(i)return i;t=Zp("#"+r)}else t=n;if(S0(t)){const{player:r,playerId:i}=t;if(r||e[i])return r||e[i]}},tt.getAllPlayers=()=>Object.keys(Qr.players).map(n=>Qr.players[n]).filter(Boolean),tt.players=Qr.players,tt.getComponent=ht.getComponent,tt.registerComponent=(n,e)=>{Sn.isTech(e)&&Zn.warn(`The ${n} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),ht.registerComponent.call(ht,n,e)},tt.getTech=Sn.getTech,tt.registerTech=Sn.registerTech,tt.use=function o8(n,e){Ay[n]=Ay[n]||[],Ay[n].push(e)},Object.defineProperty(tt,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(tt.middleware,"TERMINATOR",{value:KD,writeable:!1,enumerable:!0}),tt.browser=jG,tt.obj=FG,tt.mergeOptions=_u(9,"videojs.mergeOptions","videojs.obj.merge",Zr),tt.defineLazyProperty=_u(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",kD),tt.bind=_u(9,"videojs.bind","native Function.prototype.bind",Yr),tt.registerPlugin=Yp.registerPlugin,tt.deregisterPlugin=Yp.deregisterPlugin,tt.plugin=(n,e)=>(Zn.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Yp.registerPlugin(n,e)),tt.getPlugins=Yp.getPlugins,tt.getPlugin=Yp.getPlugin,tt.getPluginVersion=Yp.getPluginVersion,tt.addLanguage=function(n,e){return n=(""+n).toLowerCase(),tt.options.languages=Zr(tt.options.languages,{[n]:e}),tt.options.languages[n]},tt.log=Zn,tt.createLogger=GF,tt.time=QG,tt.createTimeRange=_u(9,"videojs.createTimeRange","videojs.time.createTimeRanges",$c),tt.createTimeRanges=_u(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",$c),tt.formatTime=_u(9,"videojs.formatTime","videojs.time.formatTime",Dy),tt.setFormatTime=_u(9,"videojs.setFormatTime","videojs.time.setFormatTime",Tj),tt.resetFormatTime=_u(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",Ej),tt.parseUrl=_u(9,"videojs.parseUrl","videojs.url.parseUrl",jP),tt.isCrossOrigin=_u(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",WD),tt.EventTarget=Al,tt.any=IP,tt.on=Ga,tt.one=HD,tt.off=oo,tt.trigger=A0,tt.xhr=fF(),tt.TextTrack=nC,tt.AudioTrack=kj,tt.VideoTrack=Mj,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(n=>{tt[n]=function(){return Zn.warn(`videojs.${n}() is deprecated; use videojs.dom.${n}() instead`),uj[n].apply(null,arguments)}}),tt.computedStyle=_u(9,"videojs.computedStyle","videojs.dom.computedStyle",D0),tt.dom=uj,tt.fn=qG,tt.num=S8,tt.str=ZG,tt.url=i8;class Z8{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get:()=>t.enabled_(),set(r){t.enabled_(r)}}),t}}class sA extends tt.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:()=>e.selectedIndex_}),Object.defineProperty(e,"length",{get:()=>e.levels_.length}),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const r=this.levels_.length;return t=new Z8(e),""+r in this||Object.defineProperty(this,r,{get(){return this.levels_[r]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let r=0,i=this.length;r<i;r++)if(this[r]===e){t=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,r=this.length;t<r;t++){const i=this[t];if(i.id===e)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}sA.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const n in sA.prototype.allowedEvents_)sA.prototype["on"+n]=null;const T2=function(n){return function(n,e){const t=n.qualityLevels,r=new sA,i=function(){r.dispose(),n.qualityLevels=t,n.off("dispose",i)};return n.on("dispose",i),n.qualityLevels=()=>r,n.qualityLevels.VERSION="3.0.0",r}(this,tt.mergeOptions({},n))};(tt.registerPlugin||tt.plugin)("qualityLevels",T2),T2.VERSION="3.0.0";const bu=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=be().location&&be().location.href||"");var r="function"==typeof be().URL,i=/^\/\//.test(e),s=!be().location&&!/\/\//i.test(e);if(r?e=new(be().URL)(e,be().location||gF):/\/\//i.test(e)||(e=ED().buildAbsoluteURL(be().location&&be().location.href||"",e)),r){var l=new URL(t,e);return s?l.href.slice(gF.length):i?l.href.slice(l.protocol.length):l.href}return ED().buildAbsoluteURL(e,t)},oA=(n,e)=>e&&e.responseURL&&n!==e.responseURL?e.responseURL:n,Tu=n=>tt.log.debug?tt.log.debug.bind(tt,"VHS:",`${n} >`):function(){};function jr(...n){const e=tt.obj||tt;return(e.merge||e.mergeOptions).apply(e,n)}function ao(...n){const e=tt.time||tt;return(e.createTimeRanges||e.createTimeRanges).apply(e,n)}const Qp=1/30,Gc=.1,E2=function(n,e){const t=[];let r;if(n&&n.length)for(r=0;r<n.length;r++)e(n.start(r),n.end(r))&&t.push([n.start(r),n.end(r)]);return ao(t)},F0=function(n,e){return E2(n,function(t,r){return t-Gc<=e&&r+Gc>=e})},aA=function(n,e){return E2(n,function(t){return t-Qp>=e})},w2=n=>{const e=[];if(!n||!n.length)return"";for(let t=0;t<n.length;t++)e.push(n.start(t)+" => "+n.end(t));return e.join(", ")},Py=n=>{const e=[];for(let t=0;t<n.length;t++)e.push({start:n.start(t),end:n.end(t)});return e},C2=function(n){if(n&&n.length&&n.end)return n.end(n.length-1)},fR=function(n,e){let t=0;if(!n||!n.length)return t;for(let r=0;r<n.length;r++){const i=n.start(r),s=n.end(r);if(!(e>s)){if(e>i&&e<=s){t+=s-e;continue}t+=s-i}}return t},pR=(n,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(r){t+=r.duration}),(e.preloadHints||[]).forEach(function(r){"PART"===r.type&&(t+=n.partTargetDuration)}),t},gR=n=>(n.segments||[]).reduce((e,t,r)=>(t.parts?t.parts.forEach(function(i,s){e.push({duration:i.duration,segmentIndex:r,partIndex:s,part:i,segment:t})}):e.push({duration:t.duration,segmentIndex:r,partIndex:null,segment:t,part:null}),e),[]),S2=n=>{const e=n.segments&&n.segments.length&&n.segments[n.segments.length-1];return e&&e.parts||[]},x2=({preloadSegment:n})=>{if(!n)return;const{parts:e,preloadHints:t}=n;let r=(t||[]).reduce((i,s)=>i+("PART"===s.type?1:0),0);return r+=e&&e.length?e.length:0,r},I2=(n,e)=>{if(e.endList)return 0;if(n&&n.suggestedPresentationDelay)return n.suggestedPresentationDelay;const t=S2(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?3*e.partTargetDuration:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?3*e.targetDuration:0},D2=function(n,e,t){if(typeof e>"u"&&(e=n.mediaSequence+n.segments.length),e<n.mediaSequence)return 0;const r=function(n,e){let t=0,r=e-n.mediaSequence,i=n.segments[r];if(i){if(typeof i.start<"u")return{result:i.start,precise:!0};if(typeof i.end<"u")return{result:i.end-i.duration,precise:!0}}for(;r--;){if(i=n.segments[r],typeof i.end<"u")return{result:t+i.end,precise:!0};if(t+=pR(n,i),typeof i.start<"u")return{result:t+i.start,precise:!0}}return{result:t,precise:!1}}(n,e);if(r.precise)return r.result;const i=function(n,e){let r,t=0,i=e-n.mediaSequence;for(;i<n.segments.length;i++){if(r=n.segments[i],typeof r.start<"u")return{result:r.start-t,precise:!0};if(t+=pR(n,r),typeof r.end<"u")return{result:r.end-t,precise:!0}}return{result:-1,precise:!1}}(n,e);return i.precise?i.result:r.result+t},A2=function(n,e,t){if(!n)return 0;if("number"!=typeof t&&(t=0),typeof e>"u"){if(n.totalDuration)return n.totalDuration;if(!n.endList)return be()[1/0]}return D2(n,e,t)},aC=function({defaultDuration:n,durationList:e,startIndex:t,endIndex:r}){let i=0;if(t>r&&([t,r]=[r,t]),t<0){for(let s=t;s<Math.min(0,r);s++)i+=n;t=0}for(let s=t;s<r;s++)i+=e[s].duration;return i},k2=function(n,e,t,r){if(!n||!n.segments)return null;if(n.endList)return A2(n);if(null===e)return null;let i=D2(n,n.mediaSequence+n.segments.length,e=e||0);return t&&(i-=r="number"==typeof r?r:I2(null,n)),Math.max(0,i)},M2=function(n){return n.excludeUntil&&n.excludeUntil>Date.now()},mR=function(n){return n.excludeUntil&&n.excludeUntil===1/0},lA=function(n){const e=M2(n);return!n.disabled&&!e},P2=function(n,e){return e.attributes&&e.attributes[n]},yR=(n,e)=>{if(1===n.playlists.length)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===n.playlists.filter(r=>!!lA(r)&&(r.attributes.BANDWIDTH||0)<t).length},vR=(n,e)=>!(!n&&!e||!n&&e||n&&!e||!(n===e||n.id&&e.id&&n.id===e.id||n.resolvedUri&&e.resolvedUri&&n.resolvedUri===e.resolvedUri||n.uri&&e.uri&&n.uri===e.uri)),R2=function(n,e){const t=n&&n.mediaGroups&&n.mediaGroups.AUDIO||{};let r=!1;for(const i in t){for(const s in t[i])if(r=e(t[i][s]),r)break;if(r)break}return!!r},lC=n=>{if(!n||!n.playlists||!n.playlists.length)return R2(n,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<n.playlists.length;e++){const t=n.playlists[e],r=t.attributes&&t.attributes.CODECS;if(!(r&&r.split(",").every(s=>yF(s))||R2(n,s=>vR(t,s))))return!1}return!0};var ca={liveEdgeDelay:I2,duration:A2,seekable:function(n,e,t){const i=e||0,s=k2(n,e,!0,t);return null===s?ao():ao(i,s)},getMediaInfoForTime:function({playlist:n,currentTime:e,startingSegmentIndex:t,startingPartIndex:r,startTime:i,exactManifestTimings:s}){let l=e-i;const d=gR(n);let p=0;for(let v=0;v<d.length;v++){const E=d[v];if(t===E.segmentIndex&&("number"!=typeof r||"number"!=typeof E.partIndex||r===E.partIndex)){p=v;break}}if(l<0){if(p>0)for(let v=p-1;v>=0;v--){const E=d[v];if(l+=E.duration,s){if(l<0)continue}else if(l+Qp<=0)continue;return{partIndex:E.partIndex,segmentIndex:E.segmentIndex,startTime:i-aC({defaultDuration:n.targetDuration,durationList:d,startIndex:p,endIndex:v})}}return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:e}}if(p<0){for(let v=p;v<0;v++)if(l-=n.targetDuration,l<0)return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:e};p=0}for(let v=p;v<d.length;v++){const E=d[v];if(l-=E.duration,s){if(l>0)continue}else if(l-Qp>=0)continue;return{partIndex:E.partIndex,segmentIndex:E.segmentIndex,startTime:i+aC({defaultDuration:n.targetDuration,durationList:d,startIndex:p,endIndex:v})}}return{segmentIndex:d[d.length-1].segmentIndex,partIndex:d[d.length-1].partIndex,startTime:e}},isEnabled:lA,isDisabled:function(n){return n.disabled},isExcluded:M2,isIncompatible:mR,playlistEnd:k2,isAes:function(n){for(let e=0;e<n.segments.length;e++)if(n.segments[e].key)return!0;return!1},hasAttribute:P2,estimateSegmentRequestTime:function(n,e,t,r=0){return P2("BANDWIDTH",t)?(n*t.attributes.BANDWIDTH-8*r)/e:NaN},isLowestEnabledRendition:yR,isAudioOnly:lC,playlistMatch:vR,segmentDurationWithParts:pR};const{log:O2}=tt,_R=(n,e)=>`${n}-${e}`,uC=(n,e)=>{!n.mediaGroups||["AUDIO","SUBTITLES"].forEach(t=>{if(n.mediaGroups[t])for(const r in n.mediaGroups[t])for(const i in n.mediaGroups[t][r])e(n.mediaGroups[t][r][i],t,r,i)})},N2=({playlist:n,uri:e,id:t})=>{n.id=t,n.playlistErrors_=0,e&&(n.uri=e),n.attributes=n.attributes||{}},L2=(n,e)=>{n.uri=e;for(let r=0;r<n.playlists.length;r++)n.playlists[r].uri||(n.playlists[r].uri=`placeholder-uri-${r}`);const t=lC(n);uC(n,(r,i,s,l)=>{const d=`placeholder-uri-${i}-${s}-${l}`;if(!r.playlists||!r.playlists.length){if(t&&"AUDIO"===i&&!r.uri)for(let p=0;p<n.playlists.length;p++){const v=n.playlists[p];if(v.attributes&&v.attributes.AUDIO&&v.attributes.AUDIO===s)return}r.playlists=[Gp({},r)]}r.playlists.forEach(function(p,v){const E=_R(v,d);p.uri?p.resolvedUri=p.resolvedUri||bu(n.uri,p.uri):(p.uri=0===v?d:E,p.resolvedUri=p.uri),p.id=p.id||E,p.attributes=p.attributes||{},n.playlists[p.id]=p,n.playlists[p.uri]=p})}),(n=>{let e=n.playlists.length;for(;e--;){const t=n.playlists[e];N2({playlist:t,id:_R(e,t.uri)}),t.resolvedUri=bu(n.uri,t.uri),n.playlists[t.id]=t,n.playlists[t.uri]=t,t.attributes.BANDWIDTH||O2.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(n),(n=>{uC(n,e=>{e.uri&&(e.resolvedUri=bu(n.uri,e.uri))})})(n)},{EventTarget:fq}=tt,gq=(n,e)=>{if(!n)return e;const t=jr(n,e);if(n.preloadHints&&!e.preloadHints&&delete t.preloadHints,n.parts&&!e.parts)delete t.parts;else if(n.parts&&e.parts)for(let r=0;r<e.parts.length;r++)n.parts&&n.parts[r]&&(t.parts[r]=jr(n.parts[r],e.parts[r]));return!n.skipped&&e.skipped&&(t.skipped=!1),n.preload&&!e.preload&&(t.preload=!1),t},F2=(n,e)=>{!n.resolvedUri&&n.uri&&(n.resolvedUri=bu(e,n.uri)),n.key&&!n.key.resolvedUri&&(n.key.resolvedUri=bu(e,n.key.uri)),n.map&&!n.map.resolvedUri&&(n.map.resolvedUri=bu(e,n.map.uri)),n.map&&n.map.key&&!n.map.key.resolvedUri&&(n.map.key.resolvedUri=bu(e,n.map.key.uri)),n.parts&&n.parts.length&&n.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=bu(e,t.uri))}),n.preloadHints&&n.preloadHints.length&&n.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=bu(e,t.uri))})},j2=function(n){const e=n.segments||[],t=n.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints)for(let r=0;r<t.preloadHints.length;r++)if("MAP"===t.preloadHints[r].type)return e;t.duration=n.targetDuration,t.preload=!0,e.push(t)}return e},U2=(n,e)=>n===e||n.segments&&e.segments&&n.segments.length===e.segments.length&&n.endList===e.endList&&n.mediaSequence===e.mediaSequence&&n.preloadSegment===e.preloadSegment,bR=(n,e,t=U2)=>{const r=jr(n,{}),i=r.playlists[e.id];if(!i||t(i,e))return null;e.segments=j2(e);const s=jr(i,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,i.segments){if(e.skip){e.segments=e.segments||[];for(let l=0;l<e.skip.skippedSegments;l++)e.segments.unshift({skipped:!0})}s.segments=((n,e,t)=>{const r=n.slice(),i=e.slice();t=t||0;const s=[];let l;for(let d=0;d<i.length;d++){const p=r[d+t],v=i[d];p?(l=p.map||l,s.push(gq(p,v))):(l&&!v.map&&(v.map=l),s.push(v))}return s})(i.segments,e.segments,e.mediaSequence-i.mediaSequence)}s.segments.forEach(l=>{F2(l,s.resolvedUri)});for(let l=0;l<r.playlists.length;l++)r.playlists[l].id===e.id&&(r.playlists[l]=s);return r.playlists[e.id]=s,r.playlists[e.uri]=s,uC(n,(l,d,p,v)=>{if(l.playlists)for(let E=0;E<l.playlists.length;E++)e.id===l.playlists[E].id&&(l.playlists[E]=s)}),r},TR=(n,e)=>{const t=n.segments||[],r=t[t.length-1],i=r&&r.parts&&r.parts[r.parts.length-1],s=i&&i.duration||r&&r.duration;return e&&s?1e3*s:500*(n.partTargetDuration||n.targetDuration||10)};class j0 extends fq{constructor(e,t,r={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Tu("PlaylistLoader");const{withCredentials:i=!1}=r;this.src=e,this.vhs_=t,this.withCredentials=i;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let t=bu(this.main.uri,e.uri);this.llhls&&(t=((n,e)=>{if(e.endList||!e.serverControl)return n;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:r}=e;let i=e.mediaSequence+e.segments.length;if(r){const s=r.parts||[],l=x2(e)-1;l>-1&&l!==s.length-1&&(t._HLS_part=l),(l>-1||s.length)&&i--}t._HLS_msn=i}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const r=new(be().URL)(n);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){!t.hasOwnProperty(i)||r.searchParams.set(i,t[i])}),n=r.toString()}return n})(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},(r,i)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,r){const{uri:i,id:s}=t;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return(({onwarn:n,oninfo:e,manifestString:t,customTagParsers:r=[],customTagMappers:i=[],llhls:s})=>{const l=new e6;n&&l.on("warn",n),e&&l.on("info",e),r.forEach(v=>l.addParser(v)),i.forEach(v=>l.addTagMapper(v)),l.push(t),l.end();const d=l.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(v){d.hasOwnProperty(v)&&delete d[v]}),d.segments&&d.segments.forEach(function(v){["parts","preloadHints"].forEach(function(E){v.hasOwnProperty(E)&&delete v[E]})})),!d.targetDuration){let v=10;d.segments&&d.segments.length&&(v=d.segments.reduce((E,D)=>Math.max(E,D.duration),0)),n&&n(`manifest has no targetDuration defaulting to ${v}`),d.targetDuration=v}const p=S2(d);if(p.length&&!d.partTargetDuration){const v=p.reduce((E,D)=>Math.max(E,D.duration),0);n&&(n(`manifest has no partTargetDuration defaulting to ${v}`),O2.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),d.partTargetDuration=v}return d})({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${e}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${e}: ${r}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:r,id:i}){this.request=null,this.state="HAVE_METADATA";const s=t||this.parseManifest_({url:r,manifestString:e});s.lastRequest=Date.now(),N2({playlist:s,uri:r,id:i});const l=bR(this.main,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,l?(this.main=l,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(TR(this.media(),!!l)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),be().clearTimeout(this.mediaUpdateTimeout),be().clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(be().clearTimeout(this.finalRenditionTimeout),t){const l=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=be().setTimeout(this.media.bind(this,e,!1),l))}const r=this.state,i=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("HAVE_MAIN_MANIFEST"===r?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(TR(e,!0)),i){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(l,d)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=oA(e.resolvedUri,d),l)return this.playlistRequestError(this.request,e,r);this.haveMetadata({playlistString:d.responseText,url:e.uri,id:e.id}),this.trigger("HAVE_MAIN_MANIFEST"===r?"loadedmetadata":"mediachange")}})}}pause(){this.mediaUpdateTimeout&&(be().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(be().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const r=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=be().setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r)}else this.started?this.trigger(t&&!t.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(be().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=be().setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=be().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=oA(this.src,t);const r=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(r)})}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,L2(this.main,this.srcUri()),e.playlists.forEach(r=>{r.segments=j2(r),r.segments.forEach(i=>{F2(i,r.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const t=this.srcUri()||be().location.href;this.main=((n,e)=>{const t=_R(0,e),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:be().location.href,resolvedUri:be().location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return r.playlists[t]=r.playlists[0],r.playlists[e]=r.playlists[0],r})(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:yq}=tt,ER=function(n,e,t,r){const i="arraybuffer"===n.responseType?n.response:n.responseText;!e&&i&&(n.responseTime=Date.now(),n.roundTripTime=n.responseTime-n.requestTime,n.bytesReceived=i.byteLength||i.length,n.bandwidth||(n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3))),t.headers&&(n.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(n.timedout=!0),!e&&!n.aborted&&200!==t.statusCode&&206!==t.statusCode&&0!==t.statusCode&&(e=new Error("XHR Failed with a response of: "+(n&&(i||n.responseText)))),r(e,n)},V2=function(){const n=function e(t,r){t=jr({timeout:45e3},t);const i=e.beforeRequest||tt.Vhs.xhr.beforeRequest;if(i&&"function"==typeof i){const p=i(t);p&&(t=p)}const l=(!0===tt.Vhs.xhr.original?yq:tt.Vhs.xhr)(t,function(p,v){return ER(l,p,v,r)}),d=l.abort;return l.abort=function(){return l.aborted=!0,d.apply(l,arguments)},l.uri=t.uri,l.requestTime=Date.now(),l};return n.original=!0,n},wR=function(n){const e={};return n.byterange&&(e.Range=function(n){let e;const t=n.offset;return e="bigint"==typeof n.offset||"bigint"==typeof n.length?be().BigInt(n.offset)+be().BigInt(n.length)-be().BigInt(1):n.offset+n.length-1,"bytes="+t+"-"+e}(n.byterange)),e},_q=function(n,e){return n.start(e)+"-"+n.end(e)},bq=function(n,e){const t=n.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},Tq=function(n){return n>=32&&n<126?String.fromCharCode(n):"."},B2=function(n){const e={};return Object.keys(n).forEach(t=>{const r=n[t];e[t]=TF(r)?{bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:r}),e},uA=function(n){const e=n.byterange||{length:1/0,offset:0};return[e.length,e.offset,n.resolvedUri].join(",")},$2=function(n){return n.resolvedUri},H2=n=>{const e=Array.prototype.slice.call(n),t=16;let i,s,r="";for(let l=0;l<e.length/t;l++)i=e.slice(l*t,l*t+t).map(bq).join(""),s=e.slice(l*t,l*t+t).map(Tq).join(""),r+=i+" "+s+"\n";return r};var Eq=Object.freeze({__proto__:null,createTransferableMessage:B2,initSegmentId:uA,segmentKeyId:$2,hexDump:H2,tagDump:({bytes:n})=>H2(n),textRanges:n=>{let t,e="";for(t=0;t<n.length;t++)e+=_q(n,t)+" ";return e}});const q2=({programTime:n,playlist:e,retryCount:t=2,seekTo:r,pauseAfterSeek:i=!0,tech:s,callback:l})=>{if(!l)throw new Error("seekToProgramTime: callback must be provided");if(typeof n>"u"||!e||!r)return l({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return l({message:"player must be playing a live stream to start buffering"});if(!(n=>{if(!n.segments||0===n.segments.length)return!1;for(let e=0;e<n.segments.length;e++)if(!n.segments[e].dateTimeObject)return!1;return!0})(e))return l({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const d=((n,e)=>{let t;try{t=new Date(n)}catch{return null}if(!e||!e.segments||0===e.segments.length)return null;let r=e.segments[0];if(t<r.dateTimeObject)return null;for(let p=0;p<e.segments.length-1&&(r=e.segments[p],!(t<e.segments[p+1].dateTimeObject));p++);const i=e.segments[e.segments.length-1],s=i.dateTimeObject,l=i.videoTimingInfo?(n=>n.transmuxedPresentationEnd-n.transmuxedPresentationStart-n.transmuxerPrependedSeconds)(i.videoTimingInfo):i.duration+.25*i.duration;return t>new Date(s.getTime()+1e3*l)?null:(t>s&&(r=i),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:ca.duration(e,e.mediaSequence+e.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})})(n,e);if(!d)return l({message:`${n} was not found in the stream`});const p=d.segment,v=((n,e)=>{let t,r;try{t=new Date(n),r=new Date(e)}catch{}const i=t.getTime();return(r.getTime()-i)/1e3})(p.dateTimeObject,n);if("estimate"===d.type)return 0===t?l({message:`${n} is not buffered yet. Try again`}):(r(d.estimatedStart+v),void s.one("seeked",()=>{q2({programTime:n,playlist:e,retryCount:t-1,seekTo:r,pauseAfterSeek:i,tech:s,callback:l})}));const E=p.start+v;s.one("seeked",()=>l(null,s.currentTime())),i&&s.pause(),r(E)},CR=(n,e)=>{if(4===n.readyState)return e()},{EventTarget:Mq}=tt,z2=function(n,e){if(!U2(n,e)||n.sidx&&e.sidx&&(n.sidx.offset!==e.sidx.offset||n.sidx.length!==e.sidx.length))return!1;if(!n.sidx&&e.sidx||n.sidx&&!e.sidx||n.segments&&!e.segments||!n.segments&&e.segments)return!1;if(!n.segments&&!e.segments)return!0;for(let t=0;t<n.segments.length;t++){const r=n.segments[t],i=e.segments[t];if(r.uri!==i.uri)return!1;if(!r.byterange&&!i.byterange)continue;const s=r.byterange,l=i.byterange;if(s&&!l||!s&&l||s.offset!==l.offset||s.length!==l.length)return!1}return!0},Oq=(n,e)=>(Boolean(!n.map&&!e.map)||Boolean(n.map&&e.map&&n.map.byterange.offset===e.map.byterange.offset&&n.map.byterange.length===e.map.byterange.length))&&n.uri===e.uri&&n.byterange.offset===e.byterange.offset&&n.byterange.length===e.byterange.length,W2=(n,e)=>{const t={};for(const r in n){const s=n[r].sidx;if(s){const l=SD(s);if(!e[l])break;Oq(e[l].sidxInfo,s)&&(t[l]=e[l])}}return t};class SR extends Mq{constructor(e,t,r={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:s=!1}=r;if(this.vhs_=t,this.withCredentials=s,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Tu("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,r){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,r&&(this.state=r),this.trigger("error"),!0):void 0)}addSidxSegments_(e,t,r){const i=e.sidx&&SD(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i])return void(this.mediaRequest_=be().setTimeout(()=>r(!1),0));const s=oA(e.sidx.resolvedUri),l=(d,p)=>{if(this.requestErrored_(d,p,t))return;const v=this.mainPlaylistLoader_.sidxMapping_;let E;try{E=fG()(en(p.response).subarray(8))}catch(D){return void this.requestErrored_(D,p,t)}return v[i]={sidxInfo:e.sidx,sidx:E},lP(e,E,e.sidx.resolvedUri),r(!0)};this.request=((n,e,t)=>{let i,r=[],s=!1;const l=function(E,D,j,F){return D.abort(),s=!0,t(E,D,j,F)},d=function(E,D){if(s)return;if(E)return l(E,D,"",r);const j=D.responseText.substring(r&&r.byteLength||0,D.responseText.length);if(r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if((t=t.filter(function(d){return d&&(d.byteLength||d.length)&&"string"!=typeof d})).length<=1)return en(t[0]);var i=t.reduce(function(d,p,v){return d+(p.byteLength||p.length)},0),s=new Uint8Array(i),l=0;return t.forEach(function(d){d=en(d),s.set(d,l),l+=d.byteLength}),s}(r,wF(j,!0)),i=i||zw(r),r.length<10||i&&r.length<i+2)return CR(D,()=>l(E,D,"",r));const F=vP(r);return"ts"===F&&r.length<188||!F&&r.length<376?CR(D,()=>l(E,D,"",r)):l(null,D,F,r)},v=e({uri:n,beforeSend(E){E.overrideMimeType("text/plain; charset=x-user-defined"),E.addEventListener("progress",function({}){return ER(E,null,{statusCode:E.status},d)})}},function(E,D){return ER(v,E,D,d)});return v})(s,this.vhs_.xhr,(d,p,v,E)=>{if(d)return l(d,p);if(!v||"mp4"!==v)return l({status:p.status,message:`Unsupported ${v||"unknown"} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},p);const{offset:D,length:j}=e.sidx.byterange;if(E.length>=j+D)return l(d,{response:E.subarray(D,D+j),status:p.status,uri:p.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:wR({byterange:e.sidx.byterange})},l)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},be().clearTimeout(this.minimumUpdatePeriodTimeout_),be().clearTimeout(this.mediaRequest_),be().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if("string"==typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));!r||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,i=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),this.trigger("HAVE_MAIN_MANIFEST"===e?"loadedmetadata":"mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),be().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(be().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){be().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const r=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=be().setTimeout(()=>this.load(),r)}else this.started?t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])}):this.mediaRequest_=be().setTimeout(()=>this.haveMain_(),0)}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(t,r)=>{if(this.requestErrored_(t,r))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const i=r.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=r.responseText,this.mainLoaded_=r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):Date.now(),this.mainPlaylistLoader_.srcUrl=oA(this.mainPlaylistLoader_.srcUrl,r),i?(this.handleMain_(),void this.syncClientServerClock_(()=>e(r,i))):e(r,i)})}syncClientServerClock_(e){const t=(n=>(n=>{const e=es(n,"UTCTiming")[0];if(!e)return null;const t=so(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return t})(FF(n)))(this.mainPlaylistLoader_.mainXml_);return null===t?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===t.method?(this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:bu(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},(r,i)=>{if(!this.request)return;if(r)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let s;s="HEAD"===t.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):this.mainLoaded_:Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let t=(({mainXml:n,srcUrl:e,clientOffset:t,sidxMapping:r,previousManifest:i})=>{const s=((n,e={})=>{const t=((n,e={})=>{const{manifestUri:t="",NOW:r=Date.now(),clientOffset:i=0}=e,s=es(n,"Period");if(!s.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const l=es(n,"Location"),d=so(n),p=xD([t],es(n,"BaseURL"));d.type=d.type||"static",d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=r,d.clientOffset=i,l.length&&(d.locations=l.map(dP));const v=[];return s.forEach((E,D)=>{const j=so(E),F=v[D-1];j.start=(({attributes:n,priorPeriodAttributes:e,mpdType:t})=>"number"==typeof n.start?n.start:e&&"number"==typeof e.start&&"number"==typeof e.duration?e.start+e.duration:e||"static"!==t?null:0)({attributes:j,priorPeriodAttributes:F?F.attributes:null,mpdType:d.type}),v.push({node:E,attributes:j})}),{locations:d.locations,representationInfo:CD(v.map(oG(d,p)))}})(FF(n),e),r=(n=>n.map(Q6))(t.representationInfo);return H6({dashPlaylists:r,locations:t.locations,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest})})(n,{manifestUri:e,clientOffset:t,sidxMapping:r,previousManifest:i});return L2(s,e),s})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=((n,e,t)=>{let r=!0,i=jr(n,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const l=e.playlists[s];if(l.sidx){const p=SD(l.sidx);t&&t[p]&&t[p].sidx&&lP(l,t[p].sidx,l.sidx.resolvedUri)}const d=bR(i,l,z2);d&&(i=d,r=!1)}return uC(e,(s,l,d,p)=>{if(s.playlists&&s.playlists.length){const v=s.playlists[0].id,E=bR(i,s.playlists[0],z2);E&&(i=E,i.mediaGroups[l][d][p].playlists[0]=i.playlists[v],r=!1)}}),e.minimumUpdatePeriod!==n.minimumUpdatePeriod&&(r=!1),r?null:i})(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;const r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(be().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`):this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=be().setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{!t||(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((n,e)=>{let r=W2(n.playlists,e);return uC(n,(i,s,l,d)=>{i.playlists&&i.playlists.length&&(r=jr(r,W2(i.playlists,e)))}),r})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==t[e];if(r?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=()=>{this.media().endList||(this.mediaUpdateTimeout=be().setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},TR(this.media(),Boolean(r))))};i()}this.trigger("loadedplaylist")}}var Ps={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const K2=function(n){return n.on=n.addEventListener,n.off=n.removeEventListener,n},Z2=function(n){return function(){const e=function(n){try{return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(n),URL.createObjectURL(t.getBlob())}}(n),t=K2(new Worker(e));t.objURL=e;const r=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),r.call(this)},t}},Y2=function(n){return`var browserWorkerPolyFill = ${K2.toString()};\nbrowserWorkerPolyFill(self);\n`+n},Q2=function(n){return n.toString().replace(/^function.+?{/,"").slice(0,-1)},jq=Y2(Q2(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var _={};this.on=function(S,x){_[S]||(_[S]=[]),_[S]=_[S].concat(x)},this.off=function(S,x){var I;return!!_[S]&&(I=_[S].indexOf(x),_[S]=_[S].slice(),_[S].splice(I,1),I>-1)},this.trigger=function(S){var x,I,M,L;if(x=_[S])if(2===arguments.length)for(M=x.length,I=0;I<M;++I)x[I].call(this,arguments[1]);else{for(L=[],I=arguments.length,I=1;I<arguments.length;++I)L.push(arguments[I]);for(M=x.length,I=0;I<M;++I)x[I].apply(this,L)}},this.dispose=function(){_={}}}};e.prototype.pipe=function(_){return this.on("data",function(S){_.push(S)}),this.on("done",function(S){_.flush(S)}),this.on("partialdone",function(S){_.partialFlush(S)}),this.on("endedtimeline",function(S){_.endTimeline(S)}),this.on("reset",function(S){_.reset(S)}),_},e.prototype.push=function(_){this.trigger("data",_)},e.prototype.flush=function(_){this.trigger("done",_)},e.prototype.partialFlush=function(_){this.trigger("partialdone",_)},e.prototype.endTimeline=function(_){this.trigger("endedtimeline",_)},e.prototype.reset=function(_){this.trigger("reset",_)};var d,p,v,E,D,j,F,Q,ne,ue,Ve,We,Qe,Le,Ae,ct,kt,_n,$n,Hi,co,Gi,an,Ur,Qc,Uh,ng,Ly,Fy,jy,Uy,Vy,UA,FB,jB,UB,_,S,t=e,r=Math.pow(2,32),s={getUint64:function(_){var x,S=new DataView(_.buffer,_.byteOffset,_.byteLength);return S.getBigUint64?(x=S.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(x):x:S.getUint32(0)*r+S.getUint32(4)},MAX_UINT32:r},l=s.MAX_UINT32;(function(){var _;if(an={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(_ in an)an.hasOwnProperty(_)&&(an[_]=[_.charCodeAt(0),_.charCodeAt(1),_.charCodeAt(2),_.charCodeAt(3)]);Ur=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Uh=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Qc=new Uint8Array([0,0,0,1]),ng=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ly=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Fy={video:ng,audio:Ly},Vy=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Uy=new Uint8Array([0,0,0,0,0,0,0,0]),UA=new Uint8Array([0,0,0,0,0,0,0,0]),FB=UA,jB=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),UB=UA,jy=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),d=function(_){var I,M,S=[],x=0;for(I=1;I<arguments.length;I++)S.push(arguments[I]);for(I=S.length;I--;)x+=S[I].byteLength;for(M=new Uint8Array(x+8),new DataView(M.buffer,M.byteOffset,M.byteLength).setUint32(0,M.byteLength),M.set(_,4),I=0,x=8;I<S.length;I++)M.set(S[I],x),x+=S[I].byteLength;return M},p=function(){return d(an.dinf,d(an.dref,Vy))},v=function(_){return d(an.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,_.audioobjecttype<<3|_.samplingfrequencyindex>>>1,_.samplingfrequencyindex<<7|_.channelcount<<3,6,1,2]))},E=function(){return d(an.ftyp,Ur,Qc,Ur,Uh)},ct=function(_){return d(an.hdlr,Fy[_])},D=function(_){return d(an.mdat,_)},Ae=function(_){var S=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,_.duration>>>24&255,_.duration>>>16&255,_.duration>>>8&255,255&_.duration,85,196,0,0]);return _.samplerate&&(S[12]=_.samplerate>>>24&255,S[13]=_.samplerate>>>16&255,S[14]=_.samplerate>>>8&255,S[15]=255&_.samplerate),d(an.mdhd,S)},Le=function(_){return d(an.mdia,Ae(_),ct(_.type),F(_))},j=function(_){return d(an.mfhd,new Uint8Array([0,0,0,0,(4278190080&_)>>24,(16711680&_)>>16,(65280&_)>>8,255&_]))},F=function(_){return d(an.minf,"video"===_.type?d(an.vmhd,jy):d(an.smhd,Uy),p(),_n(_))},Q=function(_,S){for(var x=[],I=S.length;I--;)x[I]=Hi(S[I]);return d.apply(null,[an.moof,j(_)].concat(x))},ne=function(_){for(var S=_.length,x=[];S--;)x[S]=We(_[S]);return d.apply(null,[an.moov,Ve(4294967295)].concat(x).concat(ue(_)))},ue=function(_){for(var S=_.length,x=[];S--;)x[S]=co(_[S]);return d.apply(null,[an.mvex].concat(x))},Ve=function(_){var S=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&_)>>24,(16711680&_)>>16,(65280&_)>>8,255&_,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return d(an.mvhd,S)},kt=function(_){var I,M,S=_.samples||[],x=new Uint8Array(4+S.length);for(M=0;M<S.length;M++)x[M+4]=(I=S[M].flags).dependsOn<<4|I.isDependedOn<<2|I.hasRedundancy;return d(an.sdtp,x)},_n=function(_){return d(an.stbl,$n(_),d(an.stts,UB),d(an.stsc,FB),d(an.stsz,jB),d(an.stco,UA))},$n=function(x){return d(an.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===x.type?_(x):S(x))},_=function(x){var ie,de,I=x.sps||[],M=x.pps||[],L=[],X=[];for(ie=0;ie<I.length;ie++)L.push((65280&I[ie].byteLength)>>>8),L.push(255&I[ie].byteLength),L=L.concat(Array.prototype.slice.call(I[ie]));for(ie=0;ie<M.length;ie++)X.push((65280&M[ie].byteLength)>>>8),X.push(255&M[ie].byteLength),X=X.concat(Array.prototype.slice.call(M[ie]));if(de=[an.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&x.width)>>8,255&x.width,(65280&x.height)>>8,255&x.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d(an.avcC,new Uint8Array([1,x.profileIdc,x.profileCompatibility,x.levelIdc,255].concat([I.length],L,[M.length],X))),d(an.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],x.sarRatio){var Ee=x.sarRatio[0],je=x.sarRatio[1];de.push(d(an.pasp,new Uint8Array([(4278190080&Ee)>>24,(16711680&Ee)>>16,(65280&Ee)>>8,255&Ee,(4278190080&je)>>24,(16711680&je)>>16,(65280&je)>>8,255&je])))}return d.apply(null,de)},S=function(x){return d(an.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&x.channelcount)>>8,255&x.channelcount,(65280&x.samplesize)>>8,255&x.samplesize,0,0,0,0,(65280&x.samplerate)>>8,255&x.samplerate,0,0]),v(x))},Qe=function(_){var S=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&_.id)>>24,(16711680&_.id)>>16,(65280&_.id)>>8,255&_.id,0,0,0,0,(4278190080&_.duration)>>24,(16711680&_.duration)>>16,(65280&_.duration)>>8,255&_.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&_.width)>>8,255&_.width,0,0,(65280&_.height)>>8,255&_.height,0,0]);return d(an.tkhd,S)},Hi=function(_){var S,x,I,M,X,ie;return S=d(an.tfhd,new Uint8Array([0,0,0,58,(4278190080&_.id)>>24,(16711680&_.id)>>16,(65280&_.id)>>8,255&_.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),X=Math.floor(_.baseMediaDecodeTime/l),ie=Math.floor(_.baseMediaDecodeTime%l),x=d(an.tfdt,new Uint8Array([1,0,0,0,X>>>24&255,X>>>16&255,X>>>8&255,255&X,ie>>>24&255,ie>>>16&255,ie>>>8&255,255&ie])),"audio"===_.type?(I=Gi(_,92),d(an.traf,S,x,I)):(M=kt(_),I=Gi(_,M.length+92),d(an.traf,S,x,I,M))},We=function(_){return _.duration=_.duration||4294967295,d(an.trak,Qe(_),Le(_))},co=function(_){var S=new Uint8Array([0,0,0,0,(4278190080&_.id)>>24,(16711680&_.id)>>16,(65280&_.id)>>8,255&_.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==_.type&&(S[S.length-1]=0),d(an.trex,S)},function(){var _,S,x;x=function(I,M){var L=0,X=0,ie=0,de=0;return I.length&&(void 0!==I[0].duration&&(L=1),void 0!==I[0].size&&(X=2),void 0!==I[0].flags&&(ie=4),void 0!==I[0].compositionTimeOffset&&(de=8)),[0,0,L|X|ie|de,1,(4278190080&I.length)>>>24,(16711680&I.length)>>>16,(65280&I.length)>>>8,255&I.length,(4278190080&M)>>>24,(16711680&M)>>>16,(65280&M)>>>8,255&M]},S=function(I,M){var L,X,ie,de,Ee,je;for(ie=x(de=I.samples||[],M+=20+16*de.length),(X=new Uint8Array(ie.length+16*de.length)).set(ie),L=ie.length,je=0;je<de.length;je++)X[L++]=(4278190080&(Ee=de[je]).duration)>>>24,X[L++]=(16711680&Ee.duration)>>>16,X[L++]=(65280&Ee.duration)>>>8,X[L++]=255&Ee.duration,X[L++]=(4278190080&Ee.size)>>>24,X[L++]=(16711680&Ee.size)>>>16,X[L++]=(65280&Ee.size)>>>8,X[L++]=255&Ee.size,X[L++]=Ee.flags.isLeading<<2|Ee.flags.dependsOn,X[L++]=Ee.flags.isDependedOn<<6|Ee.flags.hasRedundancy<<4|Ee.flags.paddingValue<<1|Ee.flags.isNonSyncSample,X[L++]=61440&Ee.flags.degradationPriority,X[L++]=15&Ee.flags.degradationPriority,X[L++]=(4278190080&Ee.compositionTimeOffset)>>>24,X[L++]=(16711680&Ee.compositionTimeOffset)>>>16,X[L++]=(65280&Ee.compositionTimeOffset)>>>8,X[L++]=255&Ee.compositionTimeOffset;return d(an.trun,X)},_=function(I,M){var L,X,ie,de,Ee,je;for(ie=x(de=I.samples||[],M+=20+8*de.length),(L=new Uint8Array(ie.length+8*de.length)).set(ie),X=ie.length,je=0;je<de.length;je++)L[X++]=(4278190080&(Ee=de[je]).duration)>>>24,L[X++]=(16711680&Ee.duration)>>>16,L[X++]=(65280&Ee.duration)>>>8,L[X++]=255&Ee.duration,L[X++]=(4278190080&Ee.size)>>>24,L[X++]=(16711680&Ee.size)>>>16,L[X++]=(65280&Ee.size)>>>8,L[X++]=255&Ee.size;return d(an.trun,L)},Gi=function(I,M){return"audio"===I.type?_(I,M):S(I,M)}}();var IO,AO,kO,VA,MO,BB,$B,HB,YZ={ftyp:E,mdat:D,moof:Q,moov:ne,initSegment:function(_){var I,S=E(),x=ne(_);return(I=new Uint8Array(S.byteLength+x.byteLength)).set(S),I.set(x,S.byteLength),I}},VB=function(_,S){var x={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return x.dataOffset=S,x.compositionTimeOffset=_.pts-_.dts,x.duration=_.duration,x.size=4*_.length,x.size+=_.byteLength,_.keyFrame&&(x.flags.dependsOn=2,x.flags.isNonSyncSample=0),x},s9={groupNalsIntoFrames:function(_){var S,x,I=[],M=[];for(M.byteLength=0,M.nalCount=0,M.duration=0,I.byteLength=0,S=0;S<_.length;S++)"access_unit_delimiter_rbsp"===(x=_[S]).nalUnitType?(I.length&&(I.duration=x.dts-I.dts,M.byteLength+=I.byteLength,M.nalCount+=I.length,M.duration+=I.duration,M.push(I)),(I=[x]).byteLength=x.data.byteLength,I.pts=x.pts,I.dts=x.dts):("slice_layer_without_partitioning_rbsp_idr"===x.nalUnitType&&(I.keyFrame=!0),I.duration=x.dts-I.dts,I.byteLength+=x.data.byteLength,I.push(x));return M.length&&(!I.duration||I.duration<=0)&&(I.duration=M[M.length-1].duration),M.byteLength+=I.byteLength,M.nalCount+=I.length,M.duration+=I.duration,M.push(I),M},groupFramesIntoGops:function(_){var S,x,I=[],M=[];for(I.byteLength=0,I.nalCount=0,I.duration=0,I.pts=_[0].pts,I.dts=_[0].dts,M.byteLength=0,M.nalCount=0,M.duration=0,M.pts=_[0].pts,M.dts=_[0].dts,S=0;S<_.length;S++)(x=_[S]).keyFrame?(I.length&&(M.push(I),M.byteLength+=I.byteLength,M.nalCount+=I.nalCount,M.duration+=I.duration),(I=[x]).nalCount=x.length,I.byteLength=x.byteLength,I.pts=x.pts,I.dts=x.dts,I.duration=x.duration):(I.duration+=x.duration,I.nalCount+=x.length,I.byteLength+=x.byteLength,I.push(x));return M.length&&I.duration<=0&&(I.duration=M[M.length-1].duration),M.byteLength+=I.byteLength,M.nalCount+=I.nalCount,M.duration+=I.duration,M.push(I),M},extendFirstKeyFrame:function(_){var S;return!_[0][0].keyFrame&&_.length>1&&(S=_.shift(),_.byteLength-=S.byteLength,_.nalCount-=S.nalCount,_[0][0].dts=S.dts,_[0][0].pts=S.pts,_[0][0].duration+=S.duration),_},generateSampleTable:function(_,S){var x,I,M,L,ie=S||0,de=[];for(x=0;x<_.length;x++)for(L=_[x],I=0;I<L.length;I++)ie+=(M=VB(L[I],ie)).size,de.push(M);return de},concatenateNalData:function(_){var S,x,I,M,L,X,ie=0,st=new Uint8Array(_.byteLength+4*_.nalCount),Ht=new DataView(st.buffer);for(S=0;S<_.length;S++)for(M=_[S],x=0;x<M.length;x++)for(L=M[x],I=0;I<L.length;I++)Ht.setUint32(ie,(X=L[I]).data.byteLength),st.set(X.data,ie+=4),ie+=X.data.byteLength;return st},generateSampleTableForFrame:function(_,S){var x,M=[];return x=VB(_,S||0),M.push(x),M},concatenateNalDataForFrame:function(_){var S,x,I=0,ie=new Uint8Array(_.byteLength+4*_.length),de=new DataView(ie.buffer);for(S=0;S<_.length;S++)de.setUint32(I,(x=_[S]).data.byteLength),ie.set(x.data,I+=4),I+=x.data.byteLength;return ie}},rg=[33,16,5,32,164,27],xO=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],_r=function(_){for(var S=[];_--;)S.push(0);return S};AO=function(_){return 9e4*_},kO=function(_,S){return _*S},VA=function(_){return _/9e4},MO=function(_,S){return _/S},BB=function(_,S){return AO(MO(_,S))},$B=function(_,S){return kO(VA(_),S)},HB=function(_,S,x){return VA(x?_:_-S)};var ti={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:AO,secondsToAudioTs:kO,videoTsToSeconds:VA,audioTsToSeconds:MO,audioTsToVideoTs:BB,videoTsToAudioTs:$B,metadataTsToSeconds:HB},BA=ti,p9={prefixWithSilence:function(_,S,x,I){var M,Ee,je,st,L=0,X=0,ie=0,de=0;if(S.length&&(M=BA.audioTsToVideoTs(_.baseMediaDecodeTime,_.samplerate),L=Math.ceil(BA.ONE_SECOND_IN_TS/(_.samplerate/1024)),x&&I&&(X=M-Math.max(x,I),de=(ie=Math.floor(X/L))*L),!(ie<1||de>BA.ONE_SECOND_IN_TS/2))){for((Ee=function(){if(!IO){var _={96e3:[rg,[227,64],_r(154),[56]],88200:[rg,[231],_r(170),[56]],64e3:[rg,[248,192],_r(240),[56]],48e3:[rg,[255,192],_r(268),[55,148,128],_r(54),[112]],44100:[rg,[255,192],_r(268),[55,163,128],_r(84),[112]],32e3:[rg,[255,192],_r(268),[55,234],_r(226),[112]],24e3:[rg,[255,192],_r(268),[55,255,128],_r(268),[111,112],_r(126),[224]],16e3:[rg,[255,192],_r(268),[55,255,128],_r(268),[111,255],_r(269),[223,108],_r(195),[1,192]],12e3:[xO,_r(268),[3,127,248],_r(268),[6,255,240],_r(268),[13,255,224],_r(268),[27,253,128],_r(259),[56]],11025:[xO,_r(268),[3,127,248],_r(268),[6,255,240],_r(268),[13,255,224],_r(268),[27,255,192],_r(268),[55,175,128],_r(108),[112]],8e3:[xO,_r(268),[3,121,16],_r(47),[7]]};IO=function(_){return Object.keys(_).reduce(function(S,x){return S[x]=new Uint8Array(_[x].reduce(function(I,M){return I.concat(M)},[])),S},{})}(_)}return IO}()[_.samplerate])||(Ee=S[0].data),je=0;je<ie;je++)S.splice(0,0,{data:Ee,dts:(st=S[0]).dts-L,pts:st.pts-L});return _.baseMediaDecodeTime-=Math.floor(BA.videoTsToAudioTs(de,_.samplerate)),de}},trimAdtsFramesByEarliestDts:function(_,S,x){return S.minSegmentDts>=x?_:(S.minSegmentDts=1/0,_.filter(function(I){return I.dts>=x&&(S.minSegmentDts=Math.min(S.minSegmentDts,I.dts),S.minSegmentPts=S.minSegmentDts,!0)}))},generateSampleTable:function(_){var S,I=[];for(S=0;S<_.length;S++)I.push({size:_[S].data.byteLength,duration:1024});return I},concatenateFrameData:function(_){var S,x,I=0,M=new Uint8Array(function(_){var S,I=0;for(S=0;S<_.length;S++)I+=_[S].data.byteLength;return I}(_));for(S=0;S<_.length;S++)M.set((x=_[S]).data,I),I+=x.data.byteLength;return M}},g9=ti.ONE_SECOND_IN_TS,_9={clearDtsInfo:function(_){delete _.minSegmentDts,delete _.maxSegmentDts,delete _.minSegmentPts,delete _.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(_,S){var x,M=_.minSegmentDts;return S||(M-=_.timelineStartInfo.dts),x=_.timelineStartInfo.baseMediaDecodeTime,x+=M,x=Math.max(0,x),"audio"===_.type&&(x*=_.samplerate/g9,x=Math.floor(x)),x},collectDtsInfo:function(_,S){"number"==typeof S.pts&&(void 0===_.timelineStartInfo.pts&&(_.timelineStartInfo.pts=S.pts),_.minSegmentPts=void 0===_.minSegmentPts?S.pts:Math.min(_.minSegmentPts,S.pts),_.maxSegmentPts=void 0===_.maxSegmentPts?S.pts:Math.max(_.maxSegmentPts,S.pts)),"number"==typeof S.dts&&(void 0===_.timelineStartInfo.dts&&(_.timelineStartInfo.dts=S.dts),_.minSegmentDts=void 0===_.minSegmentDts?S.dts:Math.min(_.minSegmentDts,S.dts),_.maxSegmentDts=void 0===_.maxSegmentDts?S.dts:Math.max(_.maxSegmentDts,S.dts))}},qB={parseSei:function(_){for(var S=0,x={payloadType:-1,payloadSize:0},I=0,M=0;S<_.byteLength&&128!==_[S];){for(;255===_[S];)I+=255,S++;for(I+=_[S++];255===_[S];)M+=255,S++;if(M+=_[S++],!x.payload&&4===I){if("GA94"===String.fromCharCode(_[S+3],_[S+4],_[S+5],_[S+6])){x.payloadType=I,x.payloadSize=M,x.payload=_.subarray(S,S+M);break}x.payload=void 0}S+=M,I=0,M=0}return x},parseUserData:function(_){return 181!==_.payload[0]||49!=(_.payload[1]<<8|_.payload[2])||"GA94"!==String.fromCharCode(_.payload[3],_.payload[4],_.payload[5],_.payload[6])||3!==_.payload[7]?null:_.payload.subarray(8,_.payload.length-1)},parseCaptionPackets:function(_,S){var I,M,L,X,x=[];if(!(64&S[0]))return x;for(M=31&S[0],I=0;I<M;I++)X={type:3&S[2+(L=3*I)],pts:_},4&S[L+2]&&(X.ccData=S[L+3]<<8|S[L+4],x.push(X));return x},discardEmulationPreventionBytes:function(_){for(var M,L,S=_.byteLength,x=[],I=1;I<S-2;)0===_[I]&&0===_[I+1]&&3===_[I+2]?(x.push(I+2),I+=2):I++;if(0===x.length)return _;M=S-x.length,L=new Uint8Array(M);var X=0;for(I=0;I<M;X++,I++)X===x[0]&&(X++,x.shift()),L[I]=_[X];return L},USER_DATA_REGISTERED_ITU_T_T35:4},PO=t,$A=qB,da=function(_){_=_||{},da.prototype.init.call(this),this.parse708captions_="boolean"!=typeof _.parse708captions||_.parse708captions,this.captionPackets_=[],this.ccStreams_=[new fi(0,0),new fi(0,1),new fi(1,0),new fi(1,1)],this.parse708captions_&&(this.cc708Stream_=new Vr({captionServices:_.captionServices})),this.reset(),this.ccStreams_.forEach(function(S){S.on("data",this.trigger.bind(this,"data")),S.on("partialdone",this.trigger.bind(this,"partialdone")),S.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};da.prototype=new PO,da.prototype.push=function(_){var S,x,I;if("sei_rbsp"===_.nalUnitType&&(S=$A.parseSei(_.escapedRBSP)).payload&&S.payloadType===$A.USER_DATA_REGISTERED_ITU_T_T35&&(x=$A.parseUserData(S))){if(_.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(_.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));I=$A.parseCaptionPackets(_.pts,x),this.captionPackets_=this.captionPackets_.concat(I),this.latestDts_!==_.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=_.dts}},da.prototype.flushCCStreams=function(_){this.ccStreams_.forEach(function(S){return"flush"===_?S.flush():S.partialFlush()},this)},da.prototype.flushStream=function(_){this.captionPackets_.length?(this.captionPackets_.forEach(function(S,x){S.presortIndex=x}),this.captionPackets_.sort(function(S,x){return S.pts===x.pts?S.presortIndex-x.presortIndex:S.pts-x.pts}),this.captionPackets_.forEach(function(S){S.type<2?this.dispatchCea608Packet(S):this.dispatchCea708Packet(S)},this),this.captionPackets_.length=0,this.flushCCStreams(_)):this.flushCCStreams(_)},da.prototype.flush=function(){return this.flushStream("flush")},da.prototype.partialFlush=function(){return this.flushStream("partialFlush")},da.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(_){_.reset()})},da.prototype.dispatchCea608Packet=function(_){this.setsTextOrXDSActive(_)?this.activeCea608Channel_[_.type]=null:this.setsChannel1Active(_)?this.activeCea608Channel_[_.type]=0:this.setsChannel2Active(_)&&(this.activeCea608Channel_[_.type]=1),null!==this.activeCea608Channel_[_.type]&&this.ccStreams_[(_.type<<1)+this.activeCea608Channel_[_.type]].push(_)},da.prototype.setsChannel1Active=function(_){return 4096==(30720&_.ccData)},da.prototype.setsChannel2Active=function(_){return 6144==(30720&_.ccData)},da.prototype.setsTextOrXDSActive=function(_){return 256==(28928&_.ccData)||4138==(30974&_.ccData)||6186==(30974&_.ccData)},da.prototype.dispatchCea708Packet=function(_){this.parse708captions_&&this.cc708Stream_.push(_)};var S9={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},HA=function(_){return 32<=_&&_<=127||160<=_&&_<=255},Vh=function(_){this.windowNum=_,this.reset()};Vh.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Vh.prototype.getText=function(){return this.rows.join("\n")},Vh.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Vh.prototype.newLine=function(_){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(_),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Vh.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Vh.prototype.addText=function(_){this.rows[this.rowIdx]+=_},Vh.prototype.backspace=function(){if(!this.isEmpty()){var _=this.rows[this.rowIdx];this.rows[this.rowIdx]=_.substr(0,_.length-1)}};var GA=function(_,S,x){this.serviceNum=_,this.text="",this.currentWindow=new Vh(-1),this.windows=[],this.stream=x,"string"==typeof S&&this.createTextDecoder(S)};GA.prototype.init=function(_,S){this.startPts=_;for(var x=0;x<8;x++)this.windows[x]=new Vh(x),"function"==typeof S&&(this.windows[x].beforeRowOverflow=S)},GA.prototype.setCurrentWindow=function(_){this.currentWindow=this.windows[_]},GA.prototype.createTextDecoder=function(_){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(_)}catch(S){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+_+" encoding. "+S})}};var Vr=function(_){_=_||{},Vr.prototype.init.call(this);var M,S=this,x=_.captionServices||{},I={};Object.keys(x).forEach(L=>{M=x[L],/^SERVICE/.test(L)&&(I[L]=M.encoding)}),this.serviceEncodings=I,this.current708Packet=null,this.services={},this.push=function(L){3===L.type?(S.new708Packet(),S.add708Bytes(L)):(null===S.current708Packet&&S.new708Packet(),S.add708Bytes(L))}};Vr.prototype=new PO,Vr.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Vr.prototype.add708Bytes=function(_){var S=_.ccData,x=S>>>8,I=255&S;this.current708Packet.ptsVals.push(_.pts),this.current708Packet.data.push(x),this.current708Packet.data.push(I)},Vr.prototype.push708Packet=function(){var _=this.current708Packet,S=_.data,x=null,I=null,M=0,L=S[M++];for(_.seq=L>>6,_.sizeCode=63&L;M<S.length;M++)I=31&(L=S[M++]),7==(x=L>>5)&&I>0&&(x=L=S[M++]),this.pushServiceBlock(x,M,I),I>0&&(M+=I-1)},Vr.prototype.pushServiceBlock=function(_,S,x){var I,M=S,L=this.current708Packet.data,X=this.services[_];for(X||(X=this.initService(_,M));M<S+x&&M<L.length;M++)HA(I=L[M])?M=this.handleText(M,X):24===I?M=this.multiByteCharacter(M,X):16===I?M=this.extendedCommands(M,X):128<=I&&I<=135?M=this.setCurrentWindow(M,X):152<=I&&I<=159?M=this.defineWindow(M,X):136===I?M=this.clearWindows(M,X):140===I?M=this.deleteWindows(M,X):137===I?M=this.displayWindows(M,X):138===I?M=this.hideWindows(M,X):139===I?M=this.toggleWindows(M,X):151===I?M=this.setWindowAttributes(M,X):144===I?M=this.setPenAttributes(M,X):145===I?M=this.setPenColor(M,X):146===I?M=this.setPenLocation(M,X):143===I?X=this.reset(M,X):8===I?X.currentWindow.backspace():12===I?X.currentWindow.clearText():13===I?X.currentWindow.pendingNewLine=!0:14===I?X.currentWindow.clearText():141===I&&M++},Vr.prototype.extendedCommands=function(_,S){var I=this.current708Packet.data[++_];return HA(I)&&(_=this.handleText(_,S,{isExtended:!0})),_},Vr.prototype.getPts=function(_){return this.current708Packet.ptsVals[Math.floor(_/2)]},Vr.prototype.initService=function(_,S){var I,M,x=this;return(I="SERVICE"+_)in this.serviceEncodings&&(M=this.serviceEncodings[I]),this.services[_]=new GA(_,M,x),this.services[_].init(this.getPts(S),function(L){x.flushDisplayed(L,x.services[_])}),this.services[_]},Vr.prototype.handleText=function(_,S,x){var je,st,I=x&&x.isExtended,L=this.current708Packet.data,X=I?4096:0,ie=L[_],Ee=S.currentWindow;return S.textDecoder_&&!I?(x&&x.isMultiByte?(st=[ie,L[_+1]],_++):st=[ie],je=S.textDecoder_.decode(new Uint8Array(st))):je=function(_){var S=S9[_]||_;return 4096&_&&_===S?"":String.fromCharCode(S)}(X|ie),Ee.pendingNewLine&&!Ee.isEmpty()&&Ee.newLine(this.getPts(_)),Ee.pendingNewLine=!1,Ee.addText(je),_},Vr.prototype.multiByteCharacter=function(_,S){var x=this.current708Packet.data,M=x[_+2];return HA(x[_+1])&&HA(M)&&(_=this.handleText(++_,S,{isMultiByte:!0})),_},Vr.prototype.setCurrentWindow=function(_,S){return S.setCurrentWindow(7&this.current708Packet.data[_]),_},Vr.prototype.defineWindow=function(_,S){var x=this.current708Packet.data,I=x[_];S.setCurrentWindow(7&I);var L=S.currentWindow;return I=x[++_],L.visible=(32&I)>>5,L.rowLock=(16&I)>>4,L.columnLock=(8&I)>>3,L.priority=7&I,I=x[++_],L.relativePositioning=(128&I)>>7,L.anchorVertical=127&I,I=x[++_],L.anchorHorizontal=I,I=x[++_],L.anchorPoint=(240&I)>>4,L.rowCount=15&I,I=x[++_],L.columnCount=63&I,I=x[++_],L.windowStyle=(56&I)>>3,L.penStyle=7&I,L.virtualRowCount=L.rowCount+1,_},Vr.prototype.setWindowAttributes=function(_,S){var x=this.current708Packet.data,I=x[_],M=S.currentWindow.winAttr;return I=x[++_],M.fillOpacity=(192&I)>>6,M.fillRed=(48&I)>>4,M.fillGreen=(12&I)>>2,M.fillBlue=3&I,I=x[++_],M.borderType=(192&I)>>6,M.borderRed=(48&I)>>4,M.borderGreen=(12&I)>>2,M.borderBlue=3&I,I=x[++_],M.borderType+=(128&I)>>5,M.wordWrap=(64&I)>>6,M.printDirection=(48&I)>>4,M.scrollDirection=(12&I)>>2,M.justify=3&I,I=x[++_],M.effectSpeed=(240&I)>>4,M.effectDirection=(12&I)>>2,M.displayEffect=3&I,_},Vr.prototype.flushDisplayed=function(_,S){for(var x=[],I=0;I<8;I++)S.windows[I].visible&&!S.windows[I].isEmpty()&&x.push(S.windows[I].getText());S.endPts=_,S.text=x.join("\n\n"),this.pushCaption(S),S.startPts=_},Vr.prototype.pushCaption=function(_){""!==_.text&&(this.trigger("data",{startPts:_.startPts,endPts:_.endPts,text:_.text,stream:"cc708_"+_.serviceNum}),_.text="",_.startPts=_.endPts)},Vr.prototype.displayWindows=function(_,S){var I=this.current708Packet.data[++_],M=this.getPts(_);this.flushDisplayed(M,S);for(var L=0;L<8;L++)I&1<<L&&(S.windows[L].visible=1);return _},Vr.prototype.hideWindows=function(_,S){var I=this.current708Packet.data[++_],M=this.getPts(_);this.flushDisplayed(M,S);for(var L=0;L<8;L++)I&1<<L&&(S.windows[L].visible=0);return _},Vr.prototype.toggleWindows=function(_,S){var I=this.current708Packet.data[++_],M=this.getPts(_);this.flushDisplayed(M,S);for(var L=0;L<8;L++)I&1<<L&&(S.windows[L].visible^=1);return _},Vr.prototype.clearWindows=function(_,S){var I=this.current708Packet.data[++_],M=this.getPts(_);this.flushDisplayed(M,S);for(var L=0;L<8;L++)I&1<<L&&S.windows[L].clearText();return _},Vr.prototype.deleteWindows=function(_,S){var I=this.current708Packet.data[++_],M=this.getPts(_);this.flushDisplayed(M,S);for(var L=0;L<8;L++)I&1<<L&&S.windows[L].reset();return _},Vr.prototype.setPenAttributes=function(_,S){var x=this.current708Packet.data,I=x[_],M=S.currentWindow.penAttr;return I=x[++_],M.textTag=(240&I)>>4,M.offset=(12&I)>>2,M.penSize=3&I,I=x[++_],M.italics=(128&I)>>7,M.underline=(64&I)>>6,M.edgeType=(56&I)>>3,M.fontStyle=7&I,_},Vr.prototype.setPenColor=function(_,S){var x=this.current708Packet.data,I=x[_],M=S.currentWindow.penColor;return I=x[++_],M.fgOpacity=(192&I)>>6,M.fgRed=(48&I)>>4,M.fgGreen=(12&I)>>2,M.fgBlue=3&I,I=x[++_],M.bgOpacity=(192&I)>>6,M.bgRed=(48&I)>>4,M.bgGreen=(12&I)>>2,M.bgBlue=3&I,I=x[++_],M.edgeRed=(48&I)>>4,M.edgeGreen=(12&I)>>2,M.edgeBlue=3&I,_},Vr.prototype.setPenLocation=function(_,S){var x=this.current708Packet.data,I=x[_],M=S.currentWindow.penLoc;return S.currentWindow.pendingNewLine=!0,I=x[++_],M.row=15&I,I=x[++_],M.column=63&I,_},Vr.prototype.reset=function(_,S){var x=this.getPts(_);return this.flushDisplayed(x,S),this.initService(S.serviceNum,_)};var I9={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},qA=function(_){return null===_?"":(_=I9[_]||_,String.fromCharCode(_))},D9=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],By=function(){for(var _=[],S=15;S--;)_.push("");return _},fi=function(_,S){fi.prototype.init.call(this),this.field_=_||0,this.dataChannel_=S||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(x){var I,M,L,X,ie;if((I=32639&x.ccData)!==this.lastControlCode_){if(4096==(61440&I)?this.lastControlCode_=I:I!==this.PADDING_&&(this.lastControlCode_=null),L=I>>>8,X=255&I,I!==this.PADDING_)if(I===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(I===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(x.pts),this.flushDisplayed(x.pts),M=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=M,this.startPts_=x.pts;else if(I===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(x.pts);else if(I===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(x.pts);else if(I===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(x.pts);else if(I===this.CARRIAGE_RETURN_)this.clearFormatting(x.pts),this.flushDisplayed(x.pts),this.shiftRowsUp_(),this.startPts_=x.pts;else if(I===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(I===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(x.pts),this.displayed_=By();else if(I===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=By();else if(I===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(x.pts),this.displayed_=By()),this.mode_="paintOn",this.startPts_=x.pts;else if(this.isSpecialCharacter(L,X))ie=qA((L=(3&L)<<8)|X),this[this.mode_](x.pts,ie),this.column_++;else if(this.isExtCharacter(L,X))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),ie=qA((L=(3&L)<<8)|X),this[this.mode_](x.pts,ie),this.column_++;else if(this.isMidRowCode(L,X))this.clearFormatting(x.pts),this[this.mode_](x.pts," "),this.column_++,14==(14&X)&&this.addFormatting(x.pts,["i"]),1==(1&X)&&this.addFormatting(x.pts,["u"]);else if(this.isOffsetControlCode(L,X))this.column_+=3&X;else if(this.isPAC(L,X)){var de=D9.indexOf(7968&I);"rollUp"===this.mode_&&(de-this.rollUpRows_+1<0&&(de=this.rollUpRows_-1),this.setRollUp(x.pts,de)),de!==this.row_&&(this.clearFormatting(x.pts),this.row_=de),1&X&&-1===this.formatting_.indexOf("u")&&this.addFormatting(x.pts,["u"]),16==(16&I)&&(this.column_=4*((14&I)>>1)),this.isColorPAC(X)&&14==(14&X)&&this.addFormatting(x.pts,["i"])}else this.isNormalChar(L)&&(0===X&&(X=null),ie=qA(L),ie+=qA(X),this[this.mode_](x.pts,ie),this.column_+=ie.length)}else this.lastControlCode_=null}};fi.prototype=new PO,fi.prototype.flushDisplayed=function(_){var S=this.displayed_.map(function(x,I){try{return x.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+I+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");S.length&&this.trigger("data",{startPts:this.startPts_,endPts:_,text:S,stream:this.name_})},fi.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=By(),this.nonDisplayed_=By(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},fi.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},fi.prototype.isSpecialCharacter=function(_,S){return _===this.EXT_&&S>=48&&S<=63},fi.prototype.isExtCharacter=function(_,S){return(_===this.EXT_+1||_===this.EXT_+2)&&S>=32&&S<=63},fi.prototype.isMidRowCode=function(_,S){return _===this.EXT_&&S>=32&&S<=47},fi.prototype.isOffsetControlCode=function(_,S){return _===this.OFFSET_&&S>=33&&S<=35},fi.prototype.isPAC=function(_,S){return _>=this.BASE_&&_<this.BASE_+8&&S>=64&&S<=127},fi.prototype.isColorPAC=function(_){return _>=64&&_<=79||_>=96&&_<=127},fi.prototype.isNormalChar=function(_){return _>=32&&_<=127},fi.prototype.setRollUp=function(_,S){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(_),this.nonDisplayed_=By(),this.displayed_=By()),void 0!==S&&S!==this.row_)for(var x=0;x<this.rollUpRows_;x++)this.displayed_[S-x]=this.displayed_[this.row_-x],this.displayed_[this.row_-x]="";void 0===S&&(S=this.row_),this.topRow_=S-this.rollUpRows_+1},fi.prototype.addFormatting=function(_,S){this.formatting_=this.formatting_.concat(S);var x=S.reduce(function(I,M){return I+"<"+M+">"},"");this[this.mode_](_,x)},fi.prototype.clearFormatting=function(_){if(this.formatting_.length){var S=this.formatting_.reverse().reduce(function(x,I){return x+"</"+I+">"},"");this.formatting_=[],this[this.mode_](_,S)}},fi.prototype.popOn=function(_,S){var x=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=x+=S},fi.prototype.rollUp=function(_,S){var x=this.displayed_[this.row_];this.displayed_[this.row_]=x+=S},fi.prototype.shiftRowsUp_=function(){var _;for(_=0;_<this.topRow_;_++)this.displayed_[_]="";for(_=this.row_+1;_<15;_++)this.displayed_[_]="";for(_=this.topRow_;_<this.row_;_++)this.displayed_[_]=this.displayed_[_+1];this.displayed_[this.row_]=""},fi.prototype.paintOn=function(_,S){var x=this.displayed_[this.row_];this.displayed_[this.row_]=x+=S};var zB={CaptionStream:da,Cea608Stream:fi,Cea708Stream:Vr},WA={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},RO=function(_,S){var x=1;for(_>S&&(x=-1);Math.abs(S-_)>4294967296;)_+=8589934592*x;return _},OO=function(_){var S,x;OO.prototype.init.call(this),this.type_=_||"shared",this.push=function(I){"shared"!==this.type_&&I.type!==this.type_||(void 0===x&&(x=I.dts),I.dts=RO(I.dts,x),I.pts=RO(I.pts,x),S=I.dts,this.trigger("data",I))},this.flush=function(){x=S,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){x=void 0,S=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};OO.prototype=new t;var XA,KB={TimestampRolloverStream:OO,handleRollover:RO},N9=WA,KA=(_,S,x)=>{if(!_)return-1;for(var I=x;I<_.length;I++)if(_[I]===S)return I;return-1},ZB=function(_,S,x){var I,M="";for(I=S;I<x;I++)M+="%"+("00"+_[I].toString(16)).slice(-2);return M},xC=function(_,S,x){return decodeURIComponent(ZB(_,S,x))},IC=function(_,S,x){return unescape(ZB(_,S,x))},YA=function(_){return _[0]<<21|_[1]<<14|_[2]<<7|_[3]},QA={APIC:function(_){var x,I,S=1;3===_.data[0]&&!((x=KA(_.data,0,S))<0)&&(_.mimeType=IC(_.data,S,x),_.pictureType=_.data[S=x+1],S++,!((I=KA(_.data,0,S))<0)&&(_.description=xC(_.data,S,I),S=I+1,"--\x3e"===_.mimeType?_.url=IC(_.data,S,_.data.length):_.pictureData=_.data.subarray(S,_.data.length)))},"T*":function(_){3===_.data[0]&&(_.value=xC(_.data,1,_.data.length).replace(/\0*$/,""),_.values=_.value.split("\0"))},TXXX:function(_){var S;3===_.data[0]&&-1!==(S=KA(_.data,0,1))&&(_.description=xC(_.data,1,S),_.value=xC(_.data,S+1,_.data.length).replace(/\0*$/,""),_.data=_.value)},"W*":function(_){_.url=IC(_.data,0,_.data.length).replace(/\0.*$/,"")},WXXX:function(_){var S;3===_.data[0]&&-1!==(S=KA(_.data,0,1))&&(_.description=xC(_.data,1,S),_.url=IC(_.data,S+1,_.data.length).replace(/\0.*$/,""))},PRIV:function(_){var S;for(S=0;S<_.data.length;S++)if(0===_.data[S]){_.owner=IC(_.data,0,S);break}_.privateData=_.data.subarray(S+1),_.data=_.privateData}};XA=function(_){var L,S={descriptor:_&&_.descriptor},x=0,I=[],M=0;if(XA.prototype.init.call(this),this.dispatchType=N9.METADATA_STREAM_TYPE.toString(16),S.descriptor)for(L=0;L<S.descriptor.length;L++)this.dispatchType+=("00"+S.descriptor[L].toString(16)).slice(-2);this.push=function(X){var ie,de,Ee,je,st;if("timed-metadata"===X.type){if(X.dataAlignmentIndicator&&(M=0,I.length=0),0===I.length&&(X.data.length<10||X.data[0]!=="I".charCodeAt(0)||X.data[1]!=="D".charCodeAt(0)||X.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(I.push(X),M+=X.data.byteLength,1===I.length&&(x=YA(X.data.subarray(6,10)),x+=10),!(M<x)){for(ie={data:new Uint8Array(x),frames:[],pts:I[0].pts,dts:I[0].dts},st=0;st<x;)ie.data.set(I[0].data.subarray(0,x-st),st),st+=I[0].data.byteLength,M-=I[0].data.byteLength,I.shift();de=10,64&ie.data[5]&&(de+=4,de+=YA(ie.data.subarray(10,14)),x-=YA(ie.data.subarray(16,20)));do{if((Ee=YA(ie.data.subarray(de+4,de+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((je={id:String.fromCharCode(ie.data[de],ie.data[de+1],ie.data[de+2],ie.data[de+3]),data:ie.data.subarray(de+10,de+Ee+10)}).key=je.id,QA[je.id]?QA[je.id](je):"T"===je.id[0]?QA["T*"](je):"W"===je.id[0]&&QA["W*"](je),"com.apple.streaming.transportStreamTimestamp"===je.owner){var _t=je.data,pn=(1&_t[3])<<30|_t[4]<<22|_t[5]<<14|_t[6]<<6|_t[7]>>>2;pn*=4,je.timeStamp=pn+=3&_t[7],void 0===ie.pts&&void 0===ie.dts&&(ie.pts=je.timeStamp,ie.dts=je.timeStamp),this.trigger("timestamp",je)}ie.frames.push(je),de+=10,de+=Ee}while(de<x);this.trigger("data",ie)}}}},XA.prototype=new t;var JA,DC,e1,L9=XA,NO=t,LO=zB,Cu=WA,F9=KB.TimestampRolloverStream;JA=function(){var _=new Uint8Array(188),S=0;JA.prototype.init.call(this),this.push=function(x){var L,I=0,M=188;for(S?((L=new Uint8Array(x.byteLength+S)).set(_.subarray(0,S)),L.set(x,S),S=0):L=x;M<L.byteLength;)71!==L[I]||71!==L[M]?(I++,M++):(this.trigger("data",L.subarray(I,M)),I+=188,M+=188);I<L.byteLength&&(_.set(L.subarray(I),0),S=L.byteLength-I)},this.flush=function(){188===S&&71===_[0]&&(this.trigger("data",_),S=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){S=0,this.trigger("reset")}},JA.prototype=new NO,DC=function(){var _,S,x,I;DC.prototype.init.call(this),I=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,_=function(M,L){var X=0;L.payloadUnitStartIndicator&&(X+=M[X]+1),"pat"===L.type?S(M.subarray(X),L):x(M.subarray(X),L)},S=function(M,L){L.section_number=M[7],L.last_section_number=M[8],I.pmtPid=(31&M[10])<<8|M[11],L.pmtPid=I.pmtPid},x=function(M,L){var ie,Ee;if(1&M[5]){for(I.programMapTable={video:null,audio:null,"timed-metadata":{}},ie=3+((15&M[1])<<8|M[2])-4,Ee=12+((15&M[10])<<8|M[11]);Ee<ie;){var je=M[Ee],st=(31&M[Ee+1])<<8|M[Ee+2];je===Cu.H264_STREAM_TYPE&&null===I.programMapTable.video?I.programMapTable.video=st:je===Cu.ADTS_STREAM_TYPE&&null===I.programMapTable.audio?I.programMapTable.audio=st:je===Cu.METADATA_STREAM_TYPE&&(I.programMapTable["timed-metadata"][st]=je),Ee+=5+((15&M[Ee+3])<<8|M[Ee+4])}L.programMapTable=I.programMapTable}},this.push=function(M){var L={},X=4;if(L.payloadUnitStartIndicator=!!(64&M[1]),L.pid=31&M[1],L.pid<<=8,L.pid|=M[2],(48&M[3])>>>4>1&&(X+=M[X]+1),0===L.pid)L.type="pat",_(M.subarray(X),L),this.trigger("data",L);else if(L.pid===this.pmtPid)for(L.type="pmt",_(M.subarray(X),L),this.trigger("data",L);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([M,X,L]):this.processPes_(M,X,L)},this.processPes_=function(M,L,X){X.streamType=X.pid===this.programMapTable.video?Cu.H264_STREAM_TYPE:X.pid===this.programMapTable.audio?Cu.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][X.pid],X.type="pes",X.data=M.subarray(L),this.trigger("data",X)}},DC.prototype=new NO,DC.STREAM_TYPES={h264:27,adts:15},e1=function(){var L,_=this,S=!1,x={data:[],size:0},I={data:[],size:0},M={data:[],size:0},ie=function(de,Ee,je){var Es,st=new Uint8Array(de.size),Ht={type:Ee},_t=0,pn=0,bn=!1;if(de.data.length&&!(de.size<9)){for(Ht.trackId=de.data[0].pid,_t=0;_t<de.data.length;_t++)st.set((Es=de.data[_t]).data,pn),pn+=Es.data.byteLength;(function(de,Ee){var je;const st=de[0]<<16|de[1]<<8|de[2];Ee.data=new Uint8Array,1===st&&(Ee.packetLength=6+(de[4]<<8|de[5]),Ee.dataAlignmentIndicator=0!=(4&de[6]),192&(je=de[7])&&(Ee.pts=(14&de[9])<<27|(255&de[10])<<20|(254&de[11])<<12|(255&de[12])<<5|(254&de[13])>>>3,Ee.pts*=4,Ee.pts+=(6&de[13])>>>1,Ee.dts=Ee.pts,64&je&&(Ee.dts=(14&de[14])<<27|(255&de[15])<<20|(254&de[16])<<12|(255&de[17])<<5|(254&de[18])>>>3,Ee.dts*=4,Ee.dts+=(6&de[18])>>>1)),Ee.data=de.subarray(9+de[8]))})(st,Ht),bn="video"===Ee||Ht.packetLength<=de.size,(je||bn)&&(de.size=0,de.data.length=0),bn&&_.trigger("data",Ht)}};e1.prototype.init.call(this),this.push=function(de){({pat:function(){},pes:function(){var Ee,je;switch(de.streamType){case Cu.H264_STREAM_TYPE:Ee=x,je="video";break;case Cu.ADTS_STREAM_TYPE:Ee=I,je="audio";break;case Cu.METADATA_STREAM_TYPE:Ee=M,je="timed-metadata";break;default:return}de.payloadUnitStartIndicator&&ie(Ee,je,!0),Ee.data.push(de),Ee.size+=de.data.byteLength},pmt:function(){var Ee={type:"metadata",tracks:[]};null!==(L=de.programMapTable).video&&Ee.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+L.video,codec:"avc",type:"video"}),null!==L.audio&&Ee.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+L.audio,codec:"adts",type:"audio"}),S=!0,_.trigger("data",Ee)}})[de.type]()},this.reset=function(){x.size=0,x.data.length=0,I.size=0,I.data.length=0,this.trigger("reset")},this.flushStreams_=function(){ie(x,"video"),ie(I,"audio"),ie(M,"timed-metadata")},this.flush=function(){if(!S&&L){var de={type:"metadata",tracks:[]};null!==L.video&&de.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+L.video,codec:"avc",type:"video"}),null!==L.audio&&de.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+L.audio,codec:"adts",type:"audio"}),_.trigger("data",de)}S=!1,this.flushStreams_(),this.trigger("done")}},e1.prototype=new NO;var YB={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:JA,TransportParseStream:DC,ElementaryStream:e1,TimestampRolloverStream:F9,CaptionStream:LO.CaptionStream,Cea608Stream:LO.Cea608Stream,Cea708Stream:LO.Cea708Stream,MetadataStream:L9};for(var jO in Cu)Cu.hasOwnProperty(jO)&&(YB[jO]=Cu[jO]);var t1,j9=YB,V9=ti.ONE_SECOND_IN_TS,QB=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];t1=function(_){var S,x=0;t1.prototype.init.call(this),this.skipWarn_=function(I,M){this.trigger("log",{level:"warn",message:`adts skiping bytes ${I} to ${M} in frame ${x} outside syncword`})},this.push=function(I){var L,X,ie,de,Ee,M=0;if(_||(x=0),"audio"===I.type){S&&S.length?(ie=S,(S=new Uint8Array(ie.byteLength+I.data.byteLength)).set(ie),S.set(I.data,ie.byteLength)):S=I.data;for(var je;M+7<S.length;)if(255===S[M]&&240==(246&S[M+1])){if("number"==typeof je&&(this.skipWarn_(je,M),je=null),X=2*(1&~S[M+1]),Ee=(de=1024*(1+(3&S[M+6])))*V9/QB[(60&S[M+2])>>>2],S.byteLength-M<(L=(3&S[M+3])<<11|S[M+4]<<3|(224&S[M+5])>>5))break;this.trigger("data",{pts:I.pts+x*Ee,dts:I.dts+x*Ee,sampleCount:de,audioobjecttype:1+(S[M+2]>>>6&3),channelcount:(1&S[M+2])<<2|(192&S[M+3])>>>6,samplerate:QB[(60&S[M+2])>>>2],samplingfrequencyindex:(60&S[M+2])>>>2,samplesize:16,data:S.subarray(M+7+X,M+L)}),x++,M+=L}else"number"!=typeof je&&(je=M),M++;"number"==typeof je&&(this.skipWarn_(je,M),je=null),S=S.subarray(M)}},this.flush=function(){x=0,this.trigger("done")},this.reset=function(){S=void 0,this.trigger("reset")},this.endTimeline=function(){S=void 0,this.trigger("endedtimeline")}},t1.prototype=new t;var XB,B9=t1;XB=function(_){var S=_.byteLength,x=0,I=0;this.length=function(){return 8*S},this.bitsAvailable=function(){return 8*S+I},this.loadWord=function(){var M=_.byteLength-S,L=new Uint8Array(4),X=Math.min(4,S);if(0===X)throw new Error("no bytes available");L.set(_.subarray(M,M+X)),x=new DataView(L.buffer).getUint32(0),I=8*X,S-=X},this.skipBits=function(M){var L;I>M?(x<<=M,I-=M):(M-=I,M-=8*(L=Math.floor(M/8)),S-=L,this.loadWord(),x<<=M,I-=M)},this.readBits=function(M){var L=Math.min(I,M),X=x>>>32-L;return(I-=L)>0?x<<=L:S>0&&this.loadWord(),(L=M-L)>0?X<<L|this.readBits(L):X},this.skipLeadingZeros=function(){var M;for(M=0;M<I;++M)if(0!=(x&2147483648>>>M))return x<<=M,I-=M,M;return this.loadWord(),M+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var M=this.skipLeadingZeros();return this.readBits(M+1)-1},this.readExpGolomb=function(){var M=this.readUnsignedExpGolomb();return 1&M?1+M>>>1:-1*(M>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var n1,AC,e3,JB=t,H9=XB;AC=function(){var S,x,_=0;AC.prototype.init.call(this),this.push=function(I){var M;x?((M=new Uint8Array(x.byteLength+I.data.byteLength)).set(x),M.set(I.data,x.byteLength),x=M):x=I.data;for(var L=x.byteLength;_<L-3;_++)if(1===x[_+2]){S=_+5;break}for(;S<L;)switch(x[S]){case 0:if(0!==x[S-1]){S+=2;break}if(0!==x[S-2]){S++;break}_+3!==S-2&&this.trigger("data",x.subarray(_+3,S-2));do{S++}while(1!==x[S]&&S<L);_=S-2,S+=3;break;case 1:if(0!==x[S-1]||0!==x[S-2]){S+=3;break}this.trigger("data",x.subarray(_+3,S-2)),_=S-2,S+=3;break;default:S+=3}x=x.subarray(_),S-=_,_=0},this.reset=function(){x=null,_=0,this.trigger("reset")},this.flush=function(){x&&x.byteLength>3&&this.trigger("data",x.subarray(_+3)),x=null,_=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},AC.prototype=new JB,e3={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},n1=function(){var S,x,I,M,L,X,ie,_=new AC;n1.prototype.init.call(this),S=this,this.push=function(de){"video"===de.type&&(x=de.trackId,I=de.pts,M=de.dts,_.push(de))},_.on("data",function(de){var Ee={trackId:x,pts:I,dts:M,data:de,nalUnitTypeCode:31&de[0]};switch(Ee.nalUnitTypeCode){case 5:Ee.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Ee.nalUnitType="sei_rbsp",Ee.escapedRBSP=L(de.subarray(1));break;case 7:Ee.nalUnitType="seq_parameter_set_rbsp",Ee.escapedRBSP=L(de.subarray(1)),Ee.config=X(Ee.escapedRBSP);break;case 8:Ee.nalUnitType="pic_parameter_set_rbsp";break;case 9:Ee.nalUnitType="access_unit_delimiter_rbsp"}S.trigger("data",Ee)}),_.on("done",function(){S.trigger("done")}),_.on("partialdone",function(){S.trigger("partialdone")}),_.on("reset",function(){S.trigger("reset")}),_.on("endedtimeline",function(){S.trigger("endedtimeline")}),this.flush=function(){_.flush()},this.partialFlush=function(){_.partialFlush()},this.reset=function(){_.reset()},this.endTimeline=function(){_.endTimeline()},ie=function(de,Ee){var Ht,je=8,st=8;for(Ht=0;Ht<de;Ht++)0!==st&&(st=(je+Ee.readExpGolomb()+256)%256),je=0===st?je:st},L=function(de){for(var Ht,_t,Ee=de.byteLength,je=[],st=1;st<Ee-2;)0===de[st]&&0===de[st+1]&&3===de[st+2]?(je.push(st+2),st+=2):st++;if(0===je.length)return de;Ht=Ee-je.length,_t=new Uint8Array(Ht);var pn=0;for(st=0;st<Ht;pn++,st++)pn===je[0]&&(pn++,je.shift()),_t[st]=de[pn];return _t},X=function(de){var _t,pn,bn,Es,Pl,Gy,I3,D3,A3,WO,k3,qy,Ee=0,je=0,st=0,Ht=0,ts=[1,1];if(pn=(_t=new H9(de)).readUnsignedByte(),Es=_t.readUnsignedByte(),bn=_t.readUnsignedByte(),_t.skipUnsignedExpGolomb(),e3[pn]&&(3===(Pl=_t.readUnsignedExpGolomb())&&_t.skipBits(1),_t.skipUnsignedExpGolomb(),_t.skipUnsignedExpGolomb(),_t.skipBits(1),_t.readBoolean()))for(k3=3!==Pl?8:12,qy=0;qy<k3;qy++)_t.readBoolean()&&ie(qy<6?16:64,_t);if(_t.skipUnsignedExpGolomb(),0===(Gy=_t.readUnsignedExpGolomb()))_t.readUnsignedExpGolomb();else if(1===Gy)for(_t.skipBits(1),_t.skipExpGolomb(),_t.skipExpGolomb(),I3=_t.readUnsignedExpGolomb(),qy=0;qy<I3;qy++)_t.skipExpGolomb();if(_t.skipUnsignedExpGolomb(),_t.skipBits(1),D3=_t.readUnsignedExpGolomb(),A3=_t.readUnsignedExpGolomb(),0===(WO=_t.readBits(1))&&_t.skipBits(1),_t.skipBits(1),_t.readBoolean()&&(Ee=_t.readUnsignedExpGolomb(),je=_t.readUnsignedExpGolomb(),st=_t.readUnsignedExpGolomb(),Ht=_t.readUnsignedExpGolomb()),_t.readBoolean()&&_t.readBoolean())switch(_t.readUnsignedByte()){case 1:ts=[1,1];break;case 2:ts=[12,11];break;case 3:ts=[10,11];break;case 4:ts=[16,11];break;case 5:ts=[40,33];break;case 6:ts=[24,11];break;case 7:ts=[20,11];break;case 8:ts=[32,11];break;case 9:ts=[80,33];break;case 10:ts=[18,11];break;case 11:ts=[15,11];break;case 12:ts=[64,33];break;case 13:ts=[160,99];break;case 14:ts=[4,3];break;case 15:ts=[3,2];break;case 16:ts=[2,1];break;case 255:ts=[_t.readUnsignedByte()<<8|_t.readUnsignedByte(),_t.readUnsignedByte()<<8|_t.readUnsignedByte()]}return{profileIdc:pn,levelIdc:bn,profileCompatibility:Es,width:16*(D3+1)-2*Ee-2*je,height:(2-WO)*(A3+1)*16-2*st-2*Ht,sarRatio:ts}}},n1.prototype=new JB;var r1,G9={H264Stream:n1,NalByteStream:AC},q9=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],t3=function(_,S){var x=_[S+6]<<21|_[S+7]<<14|_[S+8]<<7|_[S+9];return x=x>=0?x:0,(16&_[S+5])>>4?x+20:x+10},n3=function(_,S){return _.length-S<10||_[S]!=="I".charCodeAt(0)||_[S+1]!=="D".charCodeAt(0)||_[S+2]!=="3".charCodeAt(0)?S:(S+=t3(_,S),n3(_,S))},r3=function(_){return _[0]<<21|_[1]<<14|_[2]<<7|_[3]},K9=function(_,S,x){return unescape(function(_,S,x){var I,M="";for(I=S;I<x;I++)M+="%"+("00"+_[I].toString(16)).slice(-2);return M}(_,S,x))},UO={isLikelyAacData:function(_){var S=n3(_,0);return _.length>=S+2&&255==(255&_[S])&&240==(240&_[S+1])&&16==(22&_[S+1])},parseId3TagSize:t3,parseAdtsSize:function(_,S){return 6144&_[S+3]|_[S+4]<<3|(224&_[S+5])>>5},parseType:function(_,S){return _[S]==="I".charCodeAt(0)&&_[S+1]==="D".charCodeAt(0)&&_[S+2]==="3".charCodeAt(0)?"timed-metadata":!0&_[S]&&240==(240&_[S+1])?"audio":null},parseSampleRate:function(_){for(var S=0;S+5<_.length;){if(255===_[S]&&240==(246&_[S+1]))return q9[(60&_[S+2])>>>2];S++}return null},parseAacTimestamp:function(_){var S,x,I;S=10,64&_[5]&&(S+=4,S+=r3(_.subarray(10,14)));do{if((x=r3(_.subarray(S+4,S+8)))<1)return null;if("PRIV"===String.fromCharCode(_[S],_[S+1],_[S+2],_[S+3])){I=_.subarray(S+10,S+x+10);for(var L=0;L<I.byteLength;L++)if(0===I[L]){if("com.apple.streaming.transportStreamTimestamp"===K9(I,0,L)){var ie=I.subarray(L+1),de=(1&ie[3])<<30|ie[4]<<22|ie[5]<<14|ie[6]<<6|ie[7]>>>2;return(de*=4)+(3&ie[7])}break}}S+=10,S+=x}while(S<_.byteLength);return null}},i3=UO;r1=function(){var _=new Uint8Array,S=0;r1.prototype.init.call(this),this.setTimestamp=function(x){S=x},this.push=function(x){var X,ie,de,I=0,M=0;for(_.length?(de=_.length,(_=new Uint8Array(x.byteLength+de)).set(_.subarray(0,de)),_.set(x,de)):_=x;_.length-M>=3;)if(_[M]!=="I".charCodeAt(0)||_[M+1]!=="D".charCodeAt(0)||_[M+2]!=="3".charCodeAt(0))if(255!=(255&_[M])||240!=(240&_[M+1]))M++;else{if(_.length-M<7||M+(I=i3.parseAdtsSize(_,M))>_.length)break;ie={type:"audio",data:_.subarray(M,M+I),pts:S,dts:S},this.trigger("data",ie),M+=I}else{if(_.length-M<10||M+(I=i3.parseId3TagSize(_,M))>_.length)break;X={type:"timed-metadata",data:_.subarray(M,M+I)},this.trigger("data",X),M+=I}_=_.length-M>0?_.subarray(M):new Uint8Array},this.reset=function(){_=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){_=new Uint8Array,this.trigger("endedtimeline")}},r1.prototype=new t;var PC,Z0,l1,$y,s1=t,kC=YZ,MC=s9,o1=p9,Su=_9,Bh=j9,a1=ti,s3=B9,sY=G9.H264Stream,oY=r1,aY=UO.isLikelyAacData,lY=ti.ONE_SECOND_IN_TS,VO=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],BO=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],uY=function(_,S){S.stream=_,this.trigger("log",S)},o3=function(_,S){for(var x=Object.keys(S),I=0;I<x.length;I++){var M=x[I];"headOfPipeline"===M||!S[M].on||S[M].on("log",uY.bind(_,M))}},a3=function(_,S){var x;if(_.length!==S.length)return!1;for(x=0;x<_.length;x++)if(_[x]!==S[x])return!1;return!0},$O=function(_,S,x,I,M,L){return{start:{dts:_,pts:_+(x-S)},end:{dts:_+(I-S),pts:_+(M-x)},prependedContentDuration:L,baseMediaDecodeTime:_}};Z0=function(_,S){var I,x=[],M=0,L=0,X=1/0;I=(S=S||{}).firstSequenceNumber||0,Z0.prototype.init.call(this),this.push=function(ie){Su.collectDtsInfo(_,ie),_&&VO.forEach(function(de){_[de]=ie[de]}),x.push(ie)},this.setEarliestDts=function(ie){M=ie},this.setVideoBaseMediaDecodeTime=function(ie){X=ie},this.setAudioAppendStart=function(ie){L=ie},this.flush=function(){var ie,de,Ee,je,st,Ht,_t;0!==x.length?(ie=o1.trimAdtsFramesByEarliestDts(x,_,M),_.baseMediaDecodeTime=Su.calculateTrackBaseMediaDecodeTime(_,S.keepOriginalTimestamps),_t=o1.prefixWithSilence(_,ie,L,X),_.samples=o1.generateSampleTable(ie),Ee=kC.mdat(o1.concatenateFrameData(ie)),x=[],de=kC.moof(I,[_]),je=new Uint8Array(de.byteLength+Ee.byteLength),I++,je.set(de),je.set(Ee,de.byteLength),Su.clearDtsInfo(_),st=Math.ceil(1024*lY/_.samplerate),ie.length&&(Ht=ie.length*st,this.trigger("segmentTimingInfo",$O(a1.audioTsToVideoTs(_.baseMediaDecodeTime,_.samplerate),ie[0].dts,ie[0].pts,ie[0].dts+Ht,ie[0].pts+Ht,_t||0)),this.trigger("timingInfo",{start:ie[0].pts,end:ie[0].pts+Ht})),this.trigger("data",{track:_,boxes:je}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Su.clearDtsInfo(_),x=[],this.trigger("reset")}},Z0.prototype=new s1,PC=function(_,S){var x,L,X,I=[],M=[];x=(S=S||{}).firstSequenceNumber||0,PC.prototype.init.call(this),delete _.minPTS,this.gopCache_=[],this.push=function(ie){Su.collectDtsInfo(_,ie),"seq_parameter_set_rbsp"===ie.nalUnitType&&!L&&(L=ie.config,_.sps=[ie.data],BO.forEach(function(de){_[de]=L[de]},this)),"pic_parameter_set_rbsp"===ie.nalUnitType&&!X&&(X=ie.data,_.pps=[ie.data]),I.push(ie)},this.flush=function(){for(var ie,de,Ee,je,st,Ht,pn,bn,_t=0;I.length&&"access_unit_delimiter_rbsp"!==I[0].nalUnitType;)I.shift();if(0===I.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(ie=MC.groupNalsIntoFrames(I),(Ee=MC.groupFramesIntoGops(ie))[0][0].keyFrame||((de=this.getGopForFusion_(I[0],_))?(_t=de.duration,Ee.unshift(de),Ee.byteLength+=de.byteLength,Ee.nalCount+=de.nalCount,Ee.pts=de.pts,Ee.dts=de.dts,Ee.duration+=de.duration):Ee=MC.extendFirstKeyFrame(Ee)),M.length){var Es;if(!(Es=S.alignGopsAtEnd?this.alignGopsAtEnd_(Ee):this.alignGopsAtStart_(Ee)))return this.gopCache_.unshift({gop:Ee.pop(),pps:_.pps,sps:_.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),I=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Su.clearDtsInfo(_),Ee=Es}Su.collectDtsInfo(_,Ee),_.samples=MC.generateSampleTable(Ee),st=kC.mdat(MC.concatenateNalData(Ee)),_.baseMediaDecodeTime=Su.calculateTrackBaseMediaDecodeTime(_,S.keepOriginalTimestamps),this.trigger("processedGopsInfo",Ee.map(function(Pl){return{pts:Pl.pts,dts:Pl.dts,byteLength:Pl.byteLength}})),this.trigger("segmentTimingInfo",$O(_.baseMediaDecodeTime,(pn=Ee[0]).dts,pn.pts,(bn=Ee[Ee.length-1]).dts+bn.duration,bn.pts+bn.duration,_t)),this.trigger("timingInfo",{start:Ee[0].pts,end:Ee[Ee.length-1].pts+Ee[Ee.length-1].duration}),this.gopCache_.unshift({gop:Ee.pop(),pps:_.pps,sps:_.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),I=[],this.trigger("baseMediaDecodeTime",_.baseMediaDecodeTime),this.trigger("timelineStartInfo",_.timelineStartInfo),je=kC.moof(x,[_]),Ht=new Uint8Array(je.byteLength+st.byteLength),x++,Ht.set(je),Ht.set(st,je.byteLength),this.trigger("data",{track:_,boxes:Ht}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),I=[],this.gopCache_.length=0,M.length=0,this.trigger("reset")},this.resetStream_=function(){Su.clearDtsInfo(_),L=void 0,X=void 0},this.getGopForFusion_=function(ie){var st,Ht,_t,pn,bn,je=1/0;for(bn=0;bn<this.gopCache_.length;bn++)_t=(pn=this.gopCache_[bn]).gop,_.pps&&a3(_.pps[0],pn.pps[0])&&_.sps&&a3(_.sps[0],pn.sps[0])&&(_t.dts<_.timelineStartInfo.dts||(st=ie.dts-_t.dts-_t.duration)>=-1e4&&st<=45e3&&(!Ht||je>st)&&(Ht=pn,je=st));return Ht?Ht.gop:null},this.alignGopsAtStart_=function(ie){var de,Ee,je,st,Ht,_t,pn,bn;for(Ht=ie.byteLength,_t=ie.nalCount,pn=ie.duration,de=Ee=0;de<M.length&&Ee<ie.length&&(je=M[de]).pts!==(st=ie[Ee]).pts;)st.pts>je.pts?de++:(Ee++,Ht-=st.byteLength,_t-=st.nalCount,pn-=st.duration);return 0===Ee?ie:Ee===ie.length?null:((bn=ie.slice(Ee)).byteLength=Ht,bn.duration=pn,bn.nalCount=_t,bn.pts=bn[0].pts,bn.dts=bn[0].dts,bn)},this.alignGopsAtEnd_=function(ie){var de,Ee,je,st,Ht,_t,pn;for(de=M.length-1,Ee=ie.length-1,Ht=null,_t=!1;de>=0&&Ee>=0;){if((je=M[de]).pts===(st=ie[Ee]).pts){_t=!0;break}je.pts>st.pts?de--:(de===M.length-1&&(Ht=Ee),Ee--)}if(!_t&&null===Ht)return null;if(0===(pn=_t?Ee:Ht))return ie;var bn=ie.slice(pn),Es=bn.reduce(function(Pl,Gy){return Pl.byteLength+=Gy.byteLength,Pl.duration+=Gy.duration,Pl.nalCount+=Gy.nalCount,Pl},{byteLength:0,duration:0,nalCount:0});return bn.byteLength=Es.byteLength,bn.duration=Es.duration,bn.nalCount=Es.nalCount,bn.pts=bn[0].pts,bn.dts=bn[0].dts,bn},this.alignGopsWith=function(ie){M=ie}},PC.prototype=new s1,$y=function(_,S){this.numberOfTracks=0,this.metadataStream=S,this.remuxTracks=!(typeof(_=_||{}).remux<"u"&&!_.remux),this.keepOriginalTimestamps="boolean"==typeof _.keepOriginalTimestamps&&_.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,$y.prototype.init.call(this),this.push=function(x){return x.text?this.pendingCaptions.push(x):x.frames?this.pendingMetadata.push(x):(this.pendingTracks.push(x.track),this.pendingBytes+=x.boxes.byteLength,"video"===x.track.type&&(this.videoTrack=x.track,this.pendingBoxes.push(x.boxes)),void("audio"===x.track.type&&(this.audioTrack=x.track,this.pendingBoxes.unshift(x.boxes))))}},$y.prototype=new s1,$y.prototype.flush=function(_){var I,M,L,ie,S=0,x={captions:[],captionStreams:{},metadata:[],info:{}},X=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==_&&"AudioSegmentStream"!==_)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(X=this.videoTrack.timelineStartInfo.pts,BO.forEach(function(de){x.info[de]=this.videoTrack[de]},this)):this.audioTrack&&(X=this.audioTrack.timelineStartInfo.pts,VO.forEach(function(de){x.info[de]=this.audioTrack[de]},this)),this.videoTrack||this.audioTrack){for(x.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,L=kC.initSegment(this.pendingTracks),x.initSegment=new Uint8Array(L.byteLength),x.initSegment.set(L),x.data=new Uint8Array(this.pendingBytes),ie=0;ie<this.pendingBoxes.length;ie++)x.data.set(this.pendingBoxes[ie],S),S+=this.pendingBoxes[ie].byteLength;for(ie=0;ie<this.pendingCaptions.length;ie++)(I=this.pendingCaptions[ie]).startTime=a1.metadataTsToSeconds(I.startPts,X,this.keepOriginalTimestamps),I.endTime=a1.metadataTsToSeconds(I.endPts,X,this.keepOriginalTimestamps),x.captionStreams[I.stream]=!0,x.captions.push(I);for(ie=0;ie<this.pendingMetadata.length;ie++)(M=this.pendingMetadata[ie]).cueTime=a1.metadataTsToSeconds(M.pts,X,this.keepOriginalTimestamps),x.metadata.push(M);for(x.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",x),ie=0;ie<x.captions.length;ie++)this.trigger("caption",I=x.captions[ie]);for(ie=0;ie<x.metadata.length;ie++)this.trigger("id3Frame",M=x.metadata[ie])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},$y.prototype.setRemux=function(_){this.remuxTracks=_},l1=function(_){var I,M,S=this,x=!0;l1.prototype.init.call(this),this.baseMediaDecodeTime=(_=_||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var L={};this.transmuxPipeline_=L,L.type="aac",L.metadataStream=new Bh.MetadataStream,L.aacStream=new oY,L.audioTimestampRolloverStream=new Bh.TimestampRolloverStream("audio"),L.timedMetadataTimestampRolloverStream=new Bh.TimestampRolloverStream("timed-metadata"),L.adtsStream=new s3,L.coalesceStream=new $y(_,L.metadataStream),L.headOfPipeline=L.aacStream,L.aacStream.pipe(L.audioTimestampRolloverStream).pipe(L.adtsStream),L.aacStream.pipe(L.timedMetadataTimestampRolloverStream).pipe(L.metadataStream).pipe(L.coalesceStream),L.metadataStream.on("timestamp",function(X){L.aacStream.setTimestamp(X.timeStamp)}),L.aacStream.on("data",function(X){"timed-metadata"!==X.type&&"audio"!==X.type||L.audioSegmentStream||(M=M||{timelineStartInfo:{baseMediaDecodeTime:S.baseMediaDecodeTime},codec:"adts",type:"audio"},L.coalesceStream.numberOfTracks++,L.audioSegmentStream=new Z0(M,_),L.audioSegmentStream.on("log",S.getLogTrigger_("audioSegmentStream")),L.audioSegmentStream.on("timingInfo",S.trigger.bind(S,"audioTimingInfo")),L.adtsStream.pipe(L.audioSegmentStream).pipe(L.coalesceStream),S.trigger("trackinfo",{hasAudio:!!M,hasVideo:!!I}))}),L.coalesceStream.on("data",this.trigger.bind(this,"data")),L.coalesceStream.on("done",this.trigger.bind(this,"done")),o3(this,L)},this.setupTsPipeline=function(){var L={};this.transmuxPipeline_=L,L.type="ts",L.metadataStream=new Bh.MetadataStream,L.packetStream=new Bh.TransportPacketStream,L.parseStream=new Bh.TransportParseStream,L.elementaryStream=new Bh.ElementaryStream,L.timestampRolloverStream=new Bh.TimestampRolloverStream,L.adtsStream=new s3,L.h264Stream=new sY,L.captionStream=new Bh.CaptionStream(_),L.coalesceStream=new $y(_,L.metadataStream),L.headOfPipeline=L.packetStream,L.packetStream.pipe(L.parseStream).pipe(L.elementaryStream).pipe(L.timestampRolloverStream),L.timestampRolloverStream.pipe(L.h264Stream),L.timestampRolloverStream.pipe(L.adtsStream),L.timestampRolloverStream.pipe(L.metadataStream).pipe(L.coalesceStream),L.h264Stream.pipe(L.captionStream).pipe(L.coalesceStream),L.elementaryStream.on("data",function(X){var ie;if("metadata"===X.type){for(ie=X.tracks.length;ie--;)I||"video"!==X.tracks[ie].type?!M&&"audio"===X.tracks[ie].type&&((M=X.tracks[ie]).timelineStartInfo.baseMediaDecodeTime=S.baseMediaDecodeTime):(I=X.tracks[ie]).timelineStartInfo.baseMediaDecodeTime=S.baseMediaDecodeTime;I&&!L.videoSegmentStream&&(L.coalesceStream.numberOfTracks++,L.videoSegmentStream=new PC(I,_),L.videoSegmentStream.on("log",S.getLogTrigger_("videoSegmentStream")),L.videoSegmentStream.on("timelineStartInfo",function(de){M&&!_.keepOriginalTimestamps&&(M.timelineStartInfo=de,L.audioSegmentStream.setEarliestDts(de.dts-S.baseMediaDecodeTime))}),L.videoSegmentStream.on("processedGopsInfo",S.trigger.bind(S,"gopInfo")),L.videoSegmentStream.on("segmentTimingInfo",S.trigger.bind(S,"videoSegmentTimingInfo")),L.videoSegmentStream.on("baseMediaDecodeTime",function(de){M&&L.audioSegmentStream.setVideoBaseMediaDecodeTime(de)}),L.videoSegmentStream.on("timingInfo",S.trigger.bind(S,"videoTimingInfo")),L.h264Stream.pipe(L.videoSegmentStream).pipe(L.coalesceStream)),M&&!L.audioSegmentStream&&(L.coalesceStream.numberOfTracks++,L.audioSegmentStream=new Z0(M,_),L.audioSegmentStream.on("log",S.getLogTrigger_("audioSegmentStream")),L.audioSegmentStream.on("timingInfo",S.trigger.bind(S,"audioTimingInfo")),L.audioSegmentStream.on("segmentTimingInfo",S.trigger.bind(S,"audioSegmentTimingInfo")),L.adtsStream.pipe(L.audioSegmentStream).pipe(L.coalesceStream)),S.trigger("trackinfo",{hasAudio:!!M,hasVideo:!!I})}}),L.coalesceStream.on("data",this.trigger.bind(this,"data")),L.coalesceStream.on("id3Frame",function(X){X.dispatchType=L.metadataStream.dispatchType,S.trigger("id3Frame",X)}),L.coalesceStream.on("caption",this.trigger.bind(this,"caption")),L.coalesceStream.on("done",this.trigger.bind(this,"done")),o3(this,L)},this.setBaseMediaDecodeTime=function(L){var X=this.transmuxPipeline_;_.keepOriginalTimestamps||(this.baseMediaDecodeTime=L),M&&(M.timelineStartInfo.dts=void 0,M.timelineStartInfo.pts=void 0,Su.clearDtsInfo(M),X.audioTimestampRolloverStream&&X.audioTimestampRolloverStream.discontinuity()),I&&(X.videoSegmentStream&&(X.videoSegmentStream.gopCache_=[]),I.timelineStartInfo.dts=void 0,I.timelineStartInfo.pts=void 0,Su.clearDtsInfo(I),X.captionStream.reset()),X.timestampRolloverStream&&X.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(L){M&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(L)},this.setRemux=function(L){var X=this.transmuxPipeline_;_.remux=L,X&&X.coalesceStream&&X.coalesceStream.setRemux(L)},this.alignGopsWith=function(L){I&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(L)},this.getLogTrigger_=function(L){var X=this;return function(ie){ie.stream=L,X.trigger("log",ie)}},this.push=function(L){if(x){var X=aY(L);X&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!X&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),x=!1}this.transmuxPipeline_.headOfPipeline.push(L)},this.flush=function(){x=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},l1.prototype=new s1;var RC,v3,T3,HO,cY={Transmuxer:l1,VideoSegmentStream:PC,AudioSegmentStream:Z0,AUDIO_PROPERTIES:VO,VIDEO_PROPERTIES:BO,generateSegmentTimingInfo:$O},u1_toUnsigned=function(_){return _>>>0},l3=function(_){var S="";return S+=String.fromCharCode(_[0]),S+=String.fromCharCode(_[1]),(S+=String.fromCharCode(_[2]))+String.fromCharCode(_[3])},pY=u1_toUnsigned,gY=l3,u3=function(_,S){var I,M,L,X,ie,x=[];if(!S.length)return null;for(I=0;I<_.byteLength;)M=pY(_[I]<<24|_[I+1]<<16|_[I+2]<<8|_[I+3]),L=gY(_.subarray(I+4,I+8)),X=M>1?I+M:_.byteLength,L===S[0]&&(1===S.length?x.push(_.subarray(I+8,X)):(ie=u3(_.subarray(I+8,X),S.slice(1))).length&&(x=x.concat(ie))),I=X;return x},mY=u1_toUnsigned,yY=s.getUint64,d3=function(_){var S={version:_[0],flags:new Uint8Array(_.subarray(1,4))};return S.baseMediaDecodeTime=1===S.version?yY(_.subarray(4)):mY(_[4]<<24|_[5]<<16|_[6]<<8|_[7]),S},h3=function(_){return{isLeading:(12&_[0])>>>2,dependsOn:3&_[0],isDependedOn:(192&_[1])>>>6,hasRedundancy:(48&_[1])>>>4,paddingValue:(14&_[1])>>>1,isNonSyncSample:1&_[1],degradationPriority:_[2]<<8|_[3]}},f3=function(_){var st,S={version:_[0],flags:new Uint8Array(_.subarray(1,4)),samples:[]},x=new DataView(_.buffer,_.byteOffset,_.byteLength),I=1&S.flags[2],M=4&S.flags[2],L=1&S.flags[1],X=2&S.flags[1],ie=4&S.flags[1],de=8&S.flags[1],Ee=x.getUint32(4),je=8;for(I&&(S.dataOffset=x.getInt32(je),je+=4),M&&Ee&&(st={flags:h3(_.subarray(je,je+4))},je+=4,L&&(st.duration=x.getUint32(je),je+=4),X&&(st.size=x.getUint32(je),je+=4),de&&(st.compositionTimeOffset=1===S.version?x.getInt32(je):x.getUint32(je),je+=4),S.samples.push(st),Ee--);Ee--;)st={},L&&(st.duration=x.getUint32(je),je+=4),X&&(st.size=x.getUint32(je),je+=4),ie&&(st.flags=h3(_.subarray(je,je+4)),je+=4),de&&(st.compositionTimeOffset=1===S.version?x.getInt32(je):x.getUint32(je),je+=4),S.samples.push(st);return S},p3=function(_){var je,S=new DataView(_.buffer,_.byteOffset,_.byteLength),x={version:_[0],flags:new Uint8Array(_.subarray(1,4)),trackId:S.getUint32(4)},I=1&x.flags[2],M=2&x.flags[2],L=8&x.flags[2],X=16&x.flags[2],ie=32&x.flags[2],de=65536&x.flags[0],Ee=131072&x.flags[0];return je=8,I&&(je+=4,x.baseDataOffset=S.getUint32(12),je+=4),M&&(x.sampleDescriptionIndex=S.getUint32(je),je+=4),L&&(x.defaultSampleDuration=S.getUint32(je),je+=4),X&&(x.defaultSampleSize=S.getUint32(je),je+=4),ie&&(x.defaultSampleFlags=S.getUint32(je)),de&&(x.durationIsEmpty=!0),!I&&Ee&&(x.baseDataOffsetIsMoof=!0),x},wY=(RC=typeof window<"u"?window:typeof n<"u"?n:typeof self<"u"?self:{},qB.discardEmulationPreventionBytes),CY=zB.CaptionStream,OC=u3,SY=d3,xY=f3,IY=p3,m3=RC,DY=function(_,S){for(var x=_,I=0;I<S.length;I++){var M=S[I];if(x<M.size)return M;x-=M.size}return null},OY=function(){var S,x,I,M,L,X,_=!1;this.isInitialized=function(){return _},this.init=function(ie){S=new CY,_=!0,X=!!ie&&ie.isPartial,S.on("data",function(de){de.startTime=de.startPts/M,de.endTime=de.endPts/M,L.captions.push(de),L.captionStreams[de.stream]=!0}),S.on("log",function(de){L.logs.push(de)})},this.isNewInit=function(ie,de){return!(ie&&0===ie.length||de&&"object"==typeof de&&0===Object.keys(de).length||I===ie[0]&&M===de[I])},this.parse=function(ie,de,Ee){var je;if(!this.isInitialized())return null;if(!de||!Ee)return null;if(this.isNewInit(de,Ee))M=Ee[I=de[0]];else if(null===I||!M)return x.push(ie),null;for(;x.length>0;){var st=x.shift();this.parse(st,de,Ee)}return je=function(_,S,x){if(null===S)return null;var M=function(_,S){var x=OC(_,["moof","traf"]),I=OC(_,["mdat"]),M={},L=[];return I.forEach(function(X,ie){L.push({mdat:X,traf:x[ie]})}),L.forEach(function(X){var bn,Es,ie=X.mdat,de=X.traf,Ee=OC(de,["tfhd"]),je=IY(Ee[0]),st=je.trackId,Ht=OC(de,["tfdt"]),_t=Ht.length>0?SY(Ht[0]).baseMediaDecodeTime:0,pn=OC(de,["trun"]);S===st&&pn.length>0&&(bn=function(_,S,x){var I=S,M=x.defaultSampleDuration||0,L=x.defaultSampleSize||0,X=x.trackId,ie=[];return _.forEach(function(de){var je=xY(de).samples;je.forEach(function(st){void 0===st.duration&&(st.duration=M),void 0===st.size&&(st.size=L),st.trackId=X,st.dts=I,void 0===st.compositionTimeOffset&&(st.compositionTimeOffset=0),"bigint"==typeof I?(st.pts=I+m3.BigInt(st.compositionTimeOffset),I+=m3.BigInt(st.duration)):(st.pts=I+st.compositionTimeOffset,I+=st.duration)}),ie=ie.concat(je)}),ie}(pn,_t,je),Es=function(_,S,x){var L,X,ie,de,I=new DataView(_.buffer,_.byteOffset,_.byteLength),M={logs:[],seiNals:[]};for(X=0;X+4<_.length;X+=ie)if(ie=I.getUint32(X),X+=4,!(ie<=0))switch(31&_[X]){case 6:var Ee=_.subarray(X+1,X+1+ie),je=DY(X,S);if(L={nalUnitType:"sei_rbsp",size:ie,data:Ee,escapedRBSP:wY(Ee),trackId:x},je)L.pts=je.pts,L.dts=je.dts,de=je;else{if(!de){M.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+X+" for trackId "+x+". See mux.js#223."});break}L.pts=de.pts,L.dts=de.dts}M.seiNals.push(L)}return M}(ie,bn,st),M[st]||(M[st]={seiNals:[],logs:[]}),M[st].seiNals=M[st].seiNals.concat(Es.seiNals),M[st].logs=M[st].logs.concat(Es.logs))}),M}(_,S)[S]||{};return{seiNals:M.seiNals,logs:M.logs,timescale:x}}(ie,I,M),je&&je.logs&&(L.logs=L.logs.concat(je.logs)),null!==je&&je.seiNals?(this.pushNals(je.seiNals),this.flushStream(),L):L.logs.length?{logs:L.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(ie){if(!this.isInitialized()||!ie||0===ie.length)return null;ie.forEach(function(de){S.push(de)})},this.flushStream=function(){if(!this.isInitialized())return null;X?S.partialFlush():S.flush()},this.clearParsedCaptions=function(){L.captions=[],L.captionStreams={},L.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;S.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){x=[],I=null,M=null,L?this.clearParsedCaptions():L={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},c1=u1_toUnsigned,NC=function(_){return("00"+_.toString(16)).slice(-2)},us=u3,Y0=l3,jY=s.getUint64,GO=RC;v3=function(_,S){var I=us(S,["moof","traf"]).reduce(function(M,L){var st,X=us(L,["tfhd"])[0],ie=c1(X[4]<<24|X[5]<<16|X[6]<<8|X[7]),de=_[ie]||9e4,Ee=us(L,["tfdt"])[0],je=new DataView(Ee.buffer,Ee.byteOffset,Ee.byteLength);let Ht;return"bigint"==typeof(st=1===Ee[0]?jY(Ee.subarray(4,12)):je.getUint32(4))?Ht=st/GO.BigInt(de):"number"==typeof st&&!isNaN(st)&&(Ht=st/de),Ht<Number.MAX_SAFE_INTEGER&&(Ht=Number(Ht)),Ht<M&&(M=Ht),M},1/0);return"bigint"==typeof I||isFinite(I)?I:0},HO=function(_){var x=0===_[0]?12:20;return c1(_[x]<<24|_[x+1]<<16|_[x+2]<<8|_[x+3])},T3=function(_){var S=us(_,["moov","trak"]),x=[];return S.forEach(function(I){var X,ie,M={},L=us(I,["tkhd"])[0];L&&(ie=(X=new DataView(L.buffer,L.byteOffset,L.byteLength)).getUint8(0),M.id=X.getUint32(0===ie?12:20));var de=us(I,["mdia","hdlr"])[0];if(de){var Ee=Y0(de.subarray(8,12));M.type="vide"===Ee?"video":"soun"===Ee?"audio":Ee}var je=us(I,["mdia","minf","stbl","stsd"])[0];if(je){var st=je.subarray(8);M.codec=Y0(st.subarray(4,8));var _t,Ht=us(st,[M.codec])[0];Ht&&(/^[asm]vc[1-9]$/i.test(M.codec)?(_t=Ht.subarray(78),"avcC"===Y0(_t.subarray(4,8))&&_t.length>11?(M.codec+=".",M.codec+=NC(_t[9]),M.codec+=NC(_t[10]),M.codec+=NC(_t[11])):M.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(M.codec)?(_t=Ht.subarray(28),"esds"===Y0(_t.subarray(4,8))&&_t.length>20&&0!==_t[19]?(M.codec+="."+NC(_t[19]),M.codec+="."+NC(_t[20]>>>2&63).replace(/^0/,"")):M.codec="mp4a.40.2"):M.codec=M.codec.toLowerCase())}var bn=us(I,["mdia","mdhd"])[0];bn&&(M.timescale=HO(bn)),x.push(M)}),x};var E3_startTime=v3,E3_tracks=T3,qO=WA,w3=function(_){var S=31&_[1];return(S<<=8)|_[2]},d1=function(_){return!!(64&_[1])},h1=function(_){var S=0;return(48&_[3])>>>4>1&&(S+=_[4]+1),S},zO=function(_){switch(_){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},qY={parseType:function(_,S){var x=w3(_);return 0===x?"pat":x===S?"pmt":S?"pes":null},parsePat:function(_){var S=d1(_),x=4+h1(_);return S&&(x+=_[x]+1),(31&_[x+10])<<8|_[x+11]},parsePmt:function(_){var S={},x=d1(_),I=4+h1(_);if(x&&(I+=_[I]+1),1&_[I+5]){var L;L=3+((15&_[I+1])<<8|_[I+2])-4;for(var ie=12+((15&_[I+10])<<8|_[I+11]);ie<L;){var de=I+ie;S[(31&_[de+1])<<8|_[de+2]]=_[de],ie+=5+((15&_[de+3])<<8|_[de+4])}return S}},parsePayloadUnitStartIndicator:d1,parsePesType:function(_,S){switch(S[w3(_)]){case qO.H264_STREAM_TYPE:return"video";case qO.ADTS_STREAM_TYPE:return"audio";case qO.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(_){if(!d1(_))return null;var x=4+h1(_);if(x>=_.byteLength)return null;var M,I=null;return 192&(M=_[x+7])&&((I={}).pts=(14&_[x+9])<<27|(255&_[x+10])<<20|(254&_[x+11])<<12|(255&_[x+12])<<5|(254&_[x+13])>>>3,I.pts*=4,I.pts+=(6&_[x+13])>>>1,I.dts=I.pts,64&M&&(I.dts=(14&_[x+14])<<27|(255&_[x+15])<<20|(254&_[x+16])<<12|(255&_[x+17])<<5|(254&_[x+18])>>>3,I.dts*=4,I.dts+=(6&_[x+18])>>>1)),I},videoPacketContainsKeyFrame:function(_){for(var S=4+h1(_),x=_.subarray(S),I=0,M=0,L=!1;M<x.byteLength-3;M++)if(1===x[M+2]){I=M+5;break}for(;I<x.byteLength;)switch(x[I]){case 0:if(0!==x[I-1]){I+=2;break}if(0!==x[I-2]){I++;break}M+3!==I-2&&"slice_layer_without_partitioning_rbsp_idr"===zO(31&x[M+3])&&(L=!0);do{I++}while(1!==x[I]&&I<x.length);M=I-2,I+=3;break;case 1:if(0!==x[I-1]||0!==x[I-2]){I+=3;break}"slice_layer_without_partitioning_rbsp_idr"===zO(31&x[M+3])&&(L=!0),M=I-2,I+=3;break;default:I+=3}return x=x.subarray(M),I-=M,M=0,x&&x.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===zO(31&x[M+3])&&(L=!0),L}},C3=WA,Q0=KB.handleRollover,br={};br.ts=qY,br.aac=UO;var Hy=ti.ONE_SECOND_IN_TS,Bo=188,S3=function(_,S,x){for(var L,ie,de,Ee,I=0,M=Bo,je=!1;M<=_.byteLength;)if(71!==_[I]||71!==_[M]&&M!==_.byteLength)I++,M++;else{if("pes"===(L=_.subarray(I,M),br.ts.parseType(L,S.pid))&&(ie=br.ts.parsePesType(L,S.table),de=br.ts.parsePayloadUnitStartIndicator(L),"audio"===ie&&de&&(Ee=br.ts.parsePesTime(L))&&(Ee.type="audio",x.audio.push(Ee),je=!0)),je)break;I+=Bo,M+=Bo}for(I=(M=_.byteLength)-Bo,je=!1;I>=0;)if(71!==_[I]||71!==_[M]&&M!==_.byteLength)I--,M--;else{if("pes"===(L=_.subarray(I,M),br.ts.parseType(L,S.pid))&&(ie=br.ts.parsePesType(L,S.table),de=br.ts.parsePayloadUnitStartIndicator(L),"audio"===ie&&de&&(Ee=br.ts.parsePesTime(L))&&(Ee.type="audio",x.audio.push(Ee),je=!0)),je)break;I-=Bo,M-=Bo}},WY=function(_,S,x){for(var L,ie,de,Ee,je,st,Ht,I=0,M=Bo,_t=!1,pn={data:[],size:0};M<_.byteLength;)if(71!==_[I]||71!==_[M])I++,M++;else{if("pes"===(L=_.subarray(I,M),br.ts.parseType(L,S.pid))&&(ie=br.ts.parsePesType(L,S.table),de=br.ts.parsePayloadUnitStartIndicator(L),"video"===ie&&(de&&!_t&&(Ee=br.ts.parsePesTime(L))&&(Ee.type="video",x.video.push(Ee),_t=!0),!x.firstKeyFrame))){if(de&&0!==pn.size){for(je=new Uint8Array(pn.size),st=0;pn.data.length;)Ht=pn.data.shift(),je.set(Ht,st),st+=Ht.byteLength;if(br.ts.videoPacketContainsKeyFrame(je)){var bn=br.ts.parsePesTime(je);bn?(x.firstKeyFrame=bn,x.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}pn.size=0}pn.data.push(L),pn.size+=L.byteLength}if(_t&&x.firstKeyFrame)break;I+=Bo,M+=Bo}for(I=(M=_.byteLength)-Bo,_t=!1;I>=0;)if(71!==_[I]||71!==_[M])I--,M--;else{if("pes"===(L=_.subarray(I,M),br.ts.parseType(L,S.pid))&&(ie=br.ts.parsePesType(L,S.table),de=br.ts.parsePayloadUnitStartIndicator(L),"video"===ie&&de&&(Ee=br.ts.parsePesTime(L))&&(Ee.type="video",x.video.push(Ee),_t=!0)),_t)break;I-=Bo,M-=Bo}},XY_inspect=function(_,S){var I;return I=br.aac.isLikelyAacData(_)?function(_){for(var ie,S=!1,x=0,I=null,M=null,L=0,X=0;_.length-X>=3;){switch(br.aac.parseType(_,X)){case"timed-metadata":if(_.length-X<10){S=!0;break}if((L=br.aac.parseId3TagSize(_,X))>_.length){S=!0;break}null===M&&(ie=_.subarray(X,X+L),M=br.aac.parseAacTimestamp(ie)),X+=L;break;case"audio":if(_.length-X<7){S=!0;break}if((L=br.aac.parseAdtsSize(_,X))>_.length){S=!0;break}null===I&&(ie=_.subarray(X,X+L),I=br.aac.parseSampleRate(ie)),x++,X+=L;break;default:X++}if(S)return null}if(null===I||null===M)return null;var Ee=Hy/I;return{audio:[{type:"audio",dts:M,pts:M},{type:"audio",dts:M+1024*x*Ee,pts:M+1024*x*Ee}]}}(_):function(_){var S={pid:null,table:null},x={};for(var I in function(_,S){for(var M,x=0,I=Bo;I<_.byteLength;)if(71!==_[x]||71!==_[I])x++,I++;else{switch(M=_.subarray(x,I),br.ts.parseType(M,S.pid)){case"pat":S.pid=br.ts.parsePat(M);break;case"pmt":var X=br.ts.parsePmt(M);S.table=S.table||{},Object.keys(X).forEach(function(ie){S.table[ie]=X[ie]})}x+=Bo,I+=Bo}}(_,S),S.table)if(S.table.hasOwnProperty(I))switch(S.table[I]){case C3.H264_STREAM_TYPE:x.video=[],WY(_,S,x),0===x.video.length&&delete x.video;break;case C3.ADTS_STREAM_TYPE:x.audio=[],S3(_,S,x),0===x.audio.length&&delete x.audio}return x}(_),I&&(I.audio||I.video)?(function(_,S){if(_.audio&&_.audio.length){var x=S;(typeof x>"u"||isNaN(x))&&(x=_.audio[0].dts),_.audio.forEach(function(L){L.dts=Q0(L.dts,x),L.pts=Q0(L.pts,x),L.dtsTime=L.dts/Hy,L.ptsTime=L.pts/Hy})}if(_.video&&_.video.length){var I=S;if((typeof I>"u"||isNaN(I))&&(I=_.video[0].dts),_.video.forEach(function(L){L.dts=Q0(L.dts,I),L.pts=Q0(L.pts,I),L.dtsTime=L.dts/Hy,L.ptsTime=L.pts/Hy}),_.firstKeyFrame){var M=_.firstKeyFrame;M.dts=Q0(M.dts,I),M.pts=Q0(M.pts,I),M.dtsTime=M.dts/Hy,M.ptsTime=M.pts/Hy}}}(I,S),I):null};class x3{constructor(S,x){this.options=x||{},this.self=S,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new cY.Transmuxer(this.options),function(_,S){S.on("data",function(x){const I=x.initSegment;x.initSegment={data:I.buffer,byteOffset:I.byteOffset,byteLength:I.byteLength};const M=x.data;x.data=M.buffer,_.postMessage({action:"data",segment:x,byteOffset:M.byteOffset,byteLength:M.byteLength},[x.data])}),S.on("done",function(x){_.postMessage({action:"done"})}),S.on("gopInfo",function(x){_.postMessage({action:"gopInfo",gopInfo:x})}),S.on("videoSegmentTimingInfo",function(x){const I={start:{decode:ti.videoTsToSeconds(x.start.dts),presentation:ti.videoTsToSeconds(x.start.pts)},end:{decode:ti.videoTsToSeconds(x.end.dts),presentation:ti.videoTsToSeconds(x.end.pts)},baseMediaDecodeTime:ti.videoTsToSeconds(x.baseMediaDecodeTime)};x.prependedContentDuration&&(I.prependedContentDuration=ti.videoTsToSeconds(x.prependedContentDuration)),_.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:I})}),S.on("audioSegmentTimingInfo",function(x){const I={start:{decode:ti.videoTsToSeconds(x.start.dts),presentation:ti.videoTsToSeconds(x.start.pts)},end:{decode:ti.videoTsToSeconds(x.end.dts),presentation:ti.videoTsToSeconds(x.end.pts)},baseMediaDecodeTime:ti.videoTsToSeconds(x.baseMediaDecodeTime)};x.prependedContentDuration&&(I.prependedContentDuration=ti.videoTsToSeconds(x.prependedContentDuration)),_.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:I})}),S.on("id3Frame",function(x){_.postMessage({action:"id3Frame",id3Frame:x})}),S.on("caption",function(x){_.postMessage({action:"caption",caption:x})}),S.on("trackinfo",function(x){_.postMessage({action:"trackinfo",trackInfo:x})}),S.on("audioTimingInfo",function(x){_.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ti.videoTsToSeconds(x.start),end:ti.videoTsToSeconds(x.end)}})}),S.on("videoTimingInfo",function(x){_.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ti.videoTsToSeconds(x.start),end:ti.videoTsToSeconds(x.end)}})}),S.on("log",function(x){_.postMessage({action:"log",log:x})})}(this.self,this.transmuxer)}pushMp4Captions(S){this.captionParser||(this.captionParser=new OY,this.captionParser.init());const x=new Uint8Array(S.data,S.byteOffset,S.byteLength),I=this.captionParser.parse(x,S.trackIds,S.timescales);this.self.postMessage({action:"mp4Captions",captions:I&&I.captions||[],logs:I&&I.logs||[],data:x.buffer},[x.buffer])}probeMp4StartTime({timescales:S,data:x}){const I=E3_startTime(S,x);this.self.postMessage({action:"probeMp4StartTime",startTime:I,data:x},[x.buffer])}probeMp4Tracks({data:S}){const x=E3_tracks(S);this.self.postMessage({action:"probeMp4Tracks",tracks:x,data:S},[S.buffer])}probeTs({data:S,baseStartTime:x}){const I="number"!=typeof x||isNaN(x)?void 0:x*ti.ONE_SECOND_IN_TS,M=XY_inspect(S,I);let L=null;M&&(L={hasVideo:M.video&&2===M.video.length||!1,hasAudio:M.audio&&2===M.audio.length||!1},L.hasVideo&&(L.videoStart=M.video[0].ptsTime),L.hasAudio&&(L.audioStart=M.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:L,data:S},[S.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(S){const x=new Uint8Array(S.data,S.byteOffset,S.byteLength);this.transmuxer.push(x)}reset(){this.transmuxer.reset()}setTimestampOffset(S){this.transmuxer.setBaseMediaDecodeTime(Math.round(ti.secondsToVideoTs(S.timestampOffset||0)))}setAudioAppendStart(S){this.transmuxer.setAudioAppendStart(Math.ceil(ti.secondsToVideoTs(S.appendStart)))}setRemux(S){this.transmuxer.setRemux(S.remux)}flush(S){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(S){this.transmuxer.alignGopsWith(S.gopsToAlignWith.slice())}}self.onmessage=function(_){"init"===_.data.action&&_.data.options?this.messageHandlers=new x3(self,_.data.options):(this.messageHandlers||(this.messageHandlers=new x3(self)),_.data&&_.data.action&&"init"!==_.data.action&&this.messageHandlers[_.data.action]&&this.messageHandlers[_.data.action](_.data))}}));var Uq=Z2(jq);const X2=n=>{const{transmuxer:e,bytes:t,audioAppendStart:r,gopsToAlignWith:i,remux:s,onData:l,onTrackInfo:d,onAudioTimingInfo:p,onVideoTimingInfo:v,onVideoSegmentTimingInfo:E,onAudioSegmentTimingInfo:D,onId3:j,onCaptions:F,onDone:Q,onEndedTimeline:ne,onTransmuxerLog:ue,isEndOfTimeline:Ve}=n,We={buffer:[]};let Qe=Ve;if(e.onmessage=Ae=>{e.currentTransmux===n&&("data"===Ae.data.action&&((n,e,t)=>{const{type:r,initSegment:i,captions:s,captionStreams:l,metadata:d,videoFrameDtsTime:p,videoFramePtsTime:v}=n.data.segment;e.buffer.push({captions:s,captionStreams:l,metadata:d});const E=n.data.segment.boxes||{data:n.data.segment.data},D={type:r,data:new Uint8Array(E.data,E.data.byteOffset,E.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};typeof p<"u"&&(D.videoFrameDtsTime=p),typeof v<"u"&&(D.videoFramePtsTime=v),t(D)})(Ae,We,l),"trackinfo"===Ae.data.action&&d(Ae.data.trackInfo),"gopInfo"===Ae.data.action&&((n,e)=>{e.gopInfo=n.data.gopInfo})(Ae,We),"audioTimingInfo"===Ae.data.action&&p(Ae.data.audioTimingInfo),"videoTimingInfo"===Ae.data.action&&v(Ae.data.videoTimingInfo),"videoSegmentTimingInfo"===Ae.data.action&&E(Ae.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===Ae.data.action&&D(Ae.data.audioSegmentTimingInfo),"id3Frame"===Ae.data.action&&j([Ae.data.id3Frame],Ae.data.id3Frame.dispatchType),"caption"===Ae.data.action&&F(Ae.data.caption),"endedtimeline"===Ae.data.action&&(Qe=!1,ne()),"log"===Ae.data.action&&ue(Ae.data.log),"transmuxed"===Ae.data.type&&(Qe||(e.onmessage=null,(({transmuxedData:n,callback:e})=>{n.buffer=[],e(n)})({transmuxedData:We,callback:Q}),J2(e))))},r&&e.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const Ae=t instanceof ArrayBuffer?t:t.buffer,ct=t instanceof ArrayBuffer?0:t.byteOffset;e.postMessage({action:"push",data:Ae,byteOffset:ct,byteLength:t.byteLength},[Ae])}Ve&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},J2=n=>{n.currentTransmux=null,n.transmuxQueue.length&&(n.currentTransmux=n.transmuxQueue.shift(),"function"==typeof n.currentTransmux?n.currentTransmux():X2(n.currentTransmux))},eU=(n,e)=>{n.postMessage({action:e}),J2(n)};var xR_reset=n=>{((n,e)=>{if(!e.currentTransmux)return e.currentTransmux=n,void eU(e,n);e.transmuxQueue.push(eU.bind(null,e,n))})("reset",n)};const cA=function(n){const e=n.transmuxer,t=n.endAction||n.action,r=n.callback,i=Gp({},n,{endAction:null,transmuxer:null,callback:null}),s=l=>{l.data.action===t&&(e.removeEventListener("message",s),l.data.data&&(l.data.data=new Uint8Array(l.data.data,n.byteOffset||0,n.byteLength||l.data.data.byteLength),n.data&&(n.data=l.data.data)),r(l.data))};if(e.addEventListener("message",s),n.data){const l=n.data instanceof ArrayBuffer;i.byteOffset=l?0:n.data.byteOffset,i.byteLength=n.data.byteLength,e.postMessage(i,[l?n.data:n.data.buffer])}else e.postMessage(i)},IR=n=>{n.forEach(e=>{e.abort()})},DR=(n,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:-101,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:-102,xhr:e}:n?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:2,xhr:e}:"arraybuffer"===e.responseType&&0===e.response.byteLength?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:2,xhr:e}:null,rU=(n,e,t)=>(r,i)=>{const s=i.response,l=DR(r,i);if(l)return t(l,n);if(16!==s.byteLength)return t({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},n);const d=new DataView(s),p=new Uint32Array([d.getUint32(0),d.getUint32(4),d.getUint32(8),d.getUint32(12)]);for(let v=0;v<e.length;v++)e[v].bytes=p;return t(null,n)},iU=(n,e)=>{const t=vP(n.map.bytes);if("mp4"!==t)return e({internal:!0,message:`Found unsupported ${t||"unknown"} container for initialization segment at URL: ${n.map.resolvedUri||n.map.uri}`,code:2});cA({action:"probeMp4Tracks",data:n.map.bytes,transmuxer:n.transmuxer,callback:({tracks:r,data:i})=>(n.map.bytes=i,r.forEach(function(s){n.map.tracks=n.map.tracks||{},!n.map.tracks[s.type]&&(n.map.tracks[s.type]=s,"number"==typeof s.id&&s.timescale&&(n.map.timescales=n.map.timescales||{},n.map.timescales[s.id]=s.timescale))}),e(null))})},Zq=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:v,dataFn:E,doneFn:D,onTransmuxerLog:j})=>{const F=n.map&&n.map.tracks||{},Q=Boolean(F.audio&&F.video);let ne=r.bind(null,n,"audio","start");const ue=r.bind(null,n,"audio","end");let Ve=r.bind(null,n,"video","start");const We=r.bind(null,n,"video","end");cA({action:"probeTs",transmuxer:n.transmuxer,data:e,baseStartTime:n.baseStartTime,callback:Le=>{n.bytes=e=Le.data;const Ae=Le.result;Ae&&(t(n,{hasAudio:Ae.hasAudio,hasVideo:Ae.hasVideo,isMuxed:Q}),t=null,Ae.hasAudio&&!Q&&ne(Ae.audioStart),Ae.hasVideo&&Ve(Ae.videoStart),ne=null,Ve=null),(n=>{if(!n.transmuxer.currentTransmux)return n.transmuxer.currentTransmux=n,void X2(n);n.transmuxer.transmuxQueue.push(n)})({bytes:e,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:Q,onData:Le=>{Le.type="combined"===Le.type?"video":Le.type,E(n,Le)},onTrackInfo:Le=>{t&&(Q&&(Le.isMuxed=!0),t(n,Le))},onAudioTimingInfo:Le=>{ne&&typeof Le.start<"u"&&(ne(Le.start),ne=null),ue&&typeof Le.end<"u"&&ue(Le.end)},onVideoTimingInfo:Le=>{Ve&&typeof Le.start<"u"&&(Ve(Le.start),Ve=null),We&&typeof Le.end<"u"&&We(Le.end)},onVideoSegmentTimingInfo:Le=>{i(Le)},onAudioSegmentTimingInfo:Le=>{s(Le)},onId3:(Le,Ae)=>{l(n,Le,Ae)},onCaptions:Le=>{d(n,[Le])},isEndOfTimeline:p,onEndedTimeline:()=>{v()},onTransmuxerLog:j,onDone:Le=>{!D||(Le.type="combined"===Le.type?"video":Le.type,D(null,n,Le))}})}})},sU=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:v,dataFn:E,doneFn:D,onTransmuxerLog:j})=>{let F=new Uint8Array(e);if(function(e){return la(e,["moof"]).length>0}(F)){n.isFmp4=!0;const{tracks:Q}=n.map,ne={isFmp4:!0,hasVideo:!!Q.video,hasAudio:!!Q.audio};Q.audio&&Q.audio.codec&&"enca"!==Q.audio.codec&&(ne.audioCodec=Q.audio.codec),Q.video&&Q.video.codec&&"encv"!==Q.video.codec&&(ne.videoCodec=Q.video.codec),Q.video&&Q.audio&&(ne.isMuxed=!0),t(n,ne);const ue=Ve=>{E(n,{data:F,type:ne.hasAudio&&!ne.isMuxed?"audio":"video"}),Ve&&Ve.length&&d(n,Ve),D(null,n,{})};cA({action:"probeMp4StartTime",timescales:n.map.timescales,data:F,transmuxer:n.transmuxer,callback:({data:Ve,startTime:We})=>{e=Ve.buffer,n.bytes=F=Ve,ne.hasAudio&&!ne.isMuxed&&r(n,"audio","start",We),ne.hasVideo&&r(n,"video","start",We),Q.video&&Ve.byteLength&&n.transmuxer?cA({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:F,timescales:n.map.timescales,trackIds:[Q.video.id],callback:Qe=>{e=Qe.data.buffer,n.bytes=F=Qe.data,Qe.logs.forEach(function(Le){j(jr(Le,{stream:"mp4CaptionParser"}))}),ue(Qe.captions)}}):ue()}})}else{if(n.transmuxer)return typeof n.container>"u"&&(n.container=vP(F)),"ts"!==n.container&&"aac"!==n.container?(t(n,{hasAudio:!1,hasVideo:!1}),void D(null,n,{})):void Zq({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:v,dataFn:E,doneFn:D,onTransmuxerLog:j});D(null,n,{})}},oU=function({id:n,key:e,encryptedBytes:t,decryptionWorker:r},i){const s=d=>{if(d.data.source===n){r.removeEventListener("message",s);const p=d.data.decrypted;i(new Uint8Array(p.bytes,p.byteOffset,p.byteLength))}};let l;r.addEventListener("message",s),l=e.bytes.slice?e.bytes.slice():new Uint32Array(Array.prototype.slice.call(e.bytes)),r.postMessage(B2({source:n,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},e5=({xhr:n,xhrOptions:e,decryptionWorker:t,segment:r,abortFn:i,progressFn:s,trackInfoFn:l,timingInfoFn:d,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:D,isEndOfTimeline:j,endedTimelineFn:F,dataFn:Q,doneFn:ne,onTransmuxerLog:ue})=>{const Ve=[],We=(({activeXhrs:n,decryptionWorker:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:v,dataFn:E,doneFn:D,onTransmuxerLog:j})=>{let F=0,Q=!1;return(ne,ue)=>{if(!Q){if(ne)return Q=!0,IR(n),D(ne,ue);if(F+=1,F===n.length){const Ve=function(){if(ue.encryptedBytes)return(({decryptionWorker:n,segment:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:v,dataFn:E,doneFn:D,onTransmuxerLog:j})=>{oU({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:n},F=>{e.bytes=F,sU({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:v,dataFn:E,doneFn:D,onTransmuxerLog:j})})})({decryptionWorker:e,segment:ue,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:v,dataFn:E,doneFn:D,onTransmuxerLog:j});sU({segment:ue,bytes:ue.bytes,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:v,dataFn:E,doneFn:D,onTransmuxerLog:j})};if(ue.endOfAllRequests=Date.now(),ue.map&&ue.map.encryptedBytes&&!ue.map.bytes)return oU({decryptionWorker:e,id:ue.requestId+"-init",encryptedBytes:ue.map.encryptedBytes,key:ue.map.key},We=>{ue.map.bytes=We,iU(ue,Qe=>{if(Qe)return IR(n),D(Qe,ue);Ve()})});Ve()}}}})({activeXhrs:Ve,decryptionWorker:t,trackInfoFn:l,timingInfoFn:d,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:D,isEndOfTimeline:j,endedTimelineFn:F,dataFn:Q,doneFn:ne,onTransmuxerLog:ue});if(r.key&&!r.key.bytes){const kt=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&kt.push(r.map.key);const Hi=n(jr(e,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),rU(r,kt,We));Ve.push(Hi)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const an=n(jr(e,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),rU(r,[r.map.key],We));Ve.push(an)}const _n=jr(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:wR(r.map)}),$n=(({segment:n,finishProcessingFn:e})=>(t,r)=>{const i=DR(t,r);if(i)return e(i,n);const s=new Uint8Array(r.response);if(n.map.key)return n.map.encryptedBytes=s,e(null,n);n.map.bytes=s,iU(n,function(l){if(l)return l.xhr=r,l.status=r.status,e(l,n);e(null,n)})})({segment:r,finishProcessingFn:We}),Hi=n(_n,$n);Ve.push(Hi)}const Qe=jr(e,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:wR(r)}),Ae=n(Qe,(({segment:n,finishProcessingFn:e,responseType:t})=>(r,i)=>{const s=DR(r,i);if(s)return e(s,n);const l="arraybuffer"!==t&&i.responseText?(n=>{const e=new Uint8Array(new ArrayBuffer(n.length));for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer})(i.responseText.substring(n.lastReachedChar||0)):i.response;return n.stats=(n=>({bandwidth:n.bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0}))(i),n.key?n.encryptedBytes=new Uint8Array(l):n.bytes=new Uint8Array(l),e(null,n)})({segment:r,finishProcessingFn:We,responseType:Qe.responseType}));Ae.addEventListener("progress",(({segment:n,progressFn:e})=>D=>{if(!D.target.aborted)return n.stats=jr(n.stats,(n=>{const e=n.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return r.bytesReceived=n.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r})(D)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),e(D,n)})({segment:r,progressFn:s,trackInfoFn:l,timingInfoFn:d,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:D,isEndOfTimeline:j,endedTimelineFn:F,dataFn:Q})),Ve.push(Ae);const ct={};return Ve.forEach(kt=>{kt.addEventListener("loadend",(({loadendState:n,abortFn:e})=>t=>{t.target.aborted&&e&&!n.calledAbortFn&&(e(),n.calledAbortFn=!0)})({loadendState:ct,abortFn:i}))}),()=>IR(Ve)},t5=Tu("CodecUtils"),aU=(n,e)=>{const t=e.attributes||{};return n&&n.mediaGroups&&n.mediaGroups.AUDIO&&t.AUDIO&&n.mediaGroups.AUDIO[t.AUDIO]},dA=function(n){const e={};return n.forEach(({mediaType:t,type:r,details:i})=>{e[t]=e[t]||[],e[t].push(rP(`${r}${i}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1)return t5(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(e[t]=null);e[t]=e[t][0]}),e},lU=function(n){let e=0;return n.audio&&e++,n.video&&e++,e},cC=function(n,e){const t=e.attributes||{},r=dA(function(n){const e=n.attributes||{};if(e.CODECS)return Lc(e.CODECS)}(e)||[]);if(aU(n,e)&&!r.audio&&!((n,e)=>{if(!aU(n,e))return!0;const r=n.mediaGroups.AUDIO[(e.attributes||{}).AUDIO];for(const i in r)if(!r[i].uri&&!r[i].playlists)return!0;return!1})(n,e)){const i=dA(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var r=e.mediaGroups.AUDIO[t];if(!r)return null;for(var i in r){var s=r[i];if(s.default&&s.playlists)return Lc(s.playlists[0].attributes.CODECS)}return null}(n,t.AUDIO)||[]);i.audio&&(r.audio=i.audio)}return r},hA=Tu("PlaylistSelector"),uU=function(n){if(!n||!n.playlist)return;const e=n.playlist;return JSON.stringify({id:e.id,bandwidth:n.bandwidth,width:n.width,height:n.height,codecs:e.attributes&&e.attributes.CODECS||""})},fA=function(n,e){if(!n)return"";const t=be().getComputedStyle(n);return t?t[e]:""},U0=function(n,e){const t=n.slice();n.sort(function(r,i){const s=e(r,i);return 0===s?t.indexOf(r)-t.indexOf(i):s})},AR=function(n,e){let t,r;return n.attributes.BANDWIDTH&&(t=n.attributes.BANDWIDTH),t=t||be().Number.MAX_VALUE,e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||be().Number.MAX_VALUE,t-r};let cU=function(n,e,t,r,i,s){if(!n)return;const l={bandwidth:e,width:t,height:r,limitRenditionByPlayerDimensions:i};let d=n.playlists;ca.isAudioOnly(n)&&(d=s.getAudioTrackPlaylists_(),l.audioOnly=!0);let p=d.map(Ae=>{let ct;const kt=Ae.attributes&&Ae.attributes.RESOLUTION&&Ae.attributes.RESOLUTION.width,_n=Ae.attributes&&Ae.attributes.RESOLUTION&&Ae.attributes.RESOLUTION.height;return ct=Ae.attributes&&Ae.attributes.BANDWIDTH,ct=ct||be().Number.MAX_VALUE,{bandwidth:ct,width:kt,height:_n,playlist:Ae}});U0(p,(Ae,ct)=>Ae.bandwidth-ct.bandwidth),p=p.filter(Ae=>!ca.isIncompatible(Ae.playlist));let v=p.filter(Ae=>ca.isEnabled(Ae.playlist));v.length||(v=p.filter(Ae=>!ca.isDisabled(Ae.playlist)));const E=v.filter(Ae=>Ae.bandwidth*Ps.BANDWIDTH_VARIANCE<e);let D=E[E.length-1];const j=E.filter(Ae=>Ae.bandwidth===D.bandwidth)[0];if(!1===i){const Ae=j||v[0]||p[0];if(Ae&&Ae.playlist){let ct="sortedPlaylistReps";return j&&(ct="bandwidthBestRep"),v[0]&&(ct="enabledPlaylistReps"),hA(`choosing ${uU(Ae)} using ${ct} with options`,l),Ae.playlist}return hA("could not choose a playlist with options",l),null}const F=E.filter(Ae=>Ae.width&&Ae.height);U0(F,(Ae,ct)=>Ae.width-ct.width);const Q=F.filter(Ae=>Ae.width===t&&Ae.height===r);D=Q[Q.length-1];const ne=Q.filter(Ae=>Ae.bandwidth===D.bandwidth)[0];let ue,Ve,We,Qe;if(ne||(ue=F.filter(Ae=>Ae.width>t||Ae.height>r),Ve=ue.filter(Ae=>Ae.width===ue[0].width&&Ae.height===ue[0].height),D=Ve[Ve.length-1],We=Ve.filter(Ae=>Ae.bandwidth===D.bandwidth)[0]),s.leastPixelDiffSelector){const Ae=F.map(ct=>(ct.pixelDiff=Math.abs(ct.width-t)+Math.abs(ct.height-r),ct));U0(Ae,(ct,kt)=>ct.pixelDiff===kt.pixelDiff?kt.bandwidth-ct.bandwidth:ct.pixelDiff-kt.pixelDiff),Qe=Ae[0]}const Le=Qe||We||ne||j||v[0]||p[0];if(Le&&Le.playlist){let Ae="sortedPlaylistReps";return Qe?Ae="leastPixelDiffRep":We?Ae="resolutionPlusOneRep":ne?Ae="resolutionBestRep":j?Ae="bandwidthBestRep":v[0]&&(Ae="enabledPlaylistReps"),hA(`choosing ${uU(Le)} using ${Ae} with options`,l),Le.playlist}return hA("could not choose a playlist with options",l),null};const dU=function(){const n=this.useDevicePixelRatio&&be().devicePixelRatio||1;return cU(this.playlists.main,this.systemBandwidth,parseInt(fA(this.tech_.el(),"width"),10)*n,parseInt(fA(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)},dC=function(n,e,t){let r,i;if(t&&t.cues)for(r=t.cues.length;r--;)i=t.cues[r],i.startTime>=n&&i.endTime<=e&&t.removeCue(i)},fU=n=>"number"==typeof n&&isFinite(n),pA=1/60,V0=n=>{const{startOfSegment:e,duration:t,segment:r,part:i,playlist:{mediaSequence:s,id:l,segments:d=[]},mediaIndex:p,partIndex:v,timeline:E}=n,D=d.length-1;let j="mediaIndex/partIndex increment";n.getMediaInfoForTime?j=`getMediaInfoForTime (${n.getMediaInfoForTime})`:n.isSyncRequest&&(j="getSyncSegmentCandidate (isSyncRequest)"),n.independent&&(j+=` with independent ${n.independent}`);const F="number"==typeof v,Q=n.segment.uri?"segment":"pre-segment",ne=F?x2({preloadSegment:r})-1:0;return`${Q} [${s+p}/${s+D}]`+(F?` part [${v}/${ne}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(F?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${E}] selected by [${j}] playlist [${l}]`},pU=n=>`${n}TimingInfo`,gU=({timelineChangeController:n,currentTimeline:e,segmentTimeline:t,loaderType:r,audioDisabled:i})=>{if(e===t)return!1;if("audio"===r){const s=n.lastTimelineChange({type:"main"});return!s||s.to!==t}if("main"===r&&i){const s=n.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},mU=({segmentDuration:n,maxDuration:e})=>!!n&&Math.round(n)>e+Qp;class kR extends tt.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=tt.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Tu(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return(n=>{const e=new Uq;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:n}),e})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&be().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,be().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&xR_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return ao();if("main"===this.loaderType_){const{hasAudio:t,hasVideo:r,isMuxed:i}=e;if(r&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const r=uA(e);let i=this.initSegments_[r];return t&&!i&&e.bytes&&(this.initSegments_[r]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const r=$2(e);let i=this.keyCache_[r];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[r]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(i||e).resolvedUri};return i&&(s.bytes=i.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const r=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(r&&(r.id?s=r.id:r.uri&&(s=r.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const l=e.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${l}]`),null!==this.mediaIndex)if(this.mediaIndex-=l,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const d=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!d.parts||!d.parts.length||!d.parts[this.partIndex])){const p=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=p}}i&&(i.mediaIndex-=l,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,e)}pause(){this.checkBufferTimeout_&&(be().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&xR_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,r=(()=>{}),i=!1){if(t===1/0&&(t=this.duration_()),t<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let s=1;const l=()=>{s--,0===s&&r()};(i||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,l)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=((n,e,t,r)=>{const i=Math.ceil((e-r)*ID.ONE_SECOND_IN_TS),s=Math.ceil((t-r)*ID.ONE_SECOND_IN_TS),l=n.slice();let d=n.length;for(;d--&&!(n[d].pts<=s););if(-1===d)return l;let p=d+1;for(;p--&&!(n[p].pts<=i););return p=Math.max(p,0),l.splice(p,d-p+1),l})(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,l));for(const d in this.inbandTextTracks_)dC(e,t,this.inbandTextTracks_[d]);dC(e,t,this.segmentMetadataTrack_),l()}monitorBuffer_(){this.checkBufferTimeout_&&be().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=be().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&be().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=be().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();!e||("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,r=this.partIndex){if(!t||!this.mediaSource_)return!1;const i="number"==typeof e&&t.segments[e];return t.endList&&"open"===this.mediaSource_.readyState&&e+1===t.segments.length&&(!i||!i.parts||r+1===i.parts.length)}chooseNextRequest_(){const e=this.buffered_(),t=C2(e)||0,r=fR(e,this.currentTime_()),i=!this.hasPlayed_()&&r>=1,s=r>=this.goalBufferLength_(),l=this.playlist_.segments;if(!l.length||i||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const d={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(d.isSyncRequest)d.mediaIndex=function(n,e,t){e=e||[];const r=[];let i=0;for(let s=0;s<e.length;s++){const l=e[s];if(n===l.timeline&&(r.push(s),i+=l.duration,i>t))return s}return 0===r.length?0:r[r.length-1]}(this.currentTimeline_,l,t);else if(null!==this.mediaIndex){const D=l[this.mediaIndex],j="number"==typeof this.partIndex?this.partIndex:-1;d.startOfSegment=D.end?D.end:t,D.parts&&D.parts[j+1]?(d.mediaIndex=this.mediaIndex,d.partIndex=j+1):d.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:D,startTime:j,partIndex:F}=ca.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});d.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${t}`:`currentTime ${this.currentTime_()}`,d.mediaIndex=D,d.startOfSegment=j,d.partIndex=F}const p=l[d.mediaIndex];let v=p&&"number"==typeof d.partIndex&&p.parts&&p.parts[d.partIndex];if(!p||"number"==typeof d.partIndex&&!v)return null;if("number"!=typeof d.partIndex&&p.parts&&(d.partIndex=0,v=p.parts[0]),!r&&v&&!v.independent)if(0===d.partIndex){const D=l[d.mediaIndex-1],j=D.parts&&D.parts.length&&D.parts[D.parts.length-1];j&&j.independent&&(d.mediaIndex-=1,d.partIndex=D.parts.length-1,d.independent="previous segment")}else p.parts[d.partIndex-1].independent&&(d.partIndex-=1,d.independent="previous part");return d.mediaIndex>=l.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(d)}generateSegmentInfo_(e){const{independent:t,playlist:r,mediaIndex:i,startOfSegment:s,isSyncRequest:l,partIndex:d,forceTimestampOffset:p,getMediaInfoForTime:v}=e,E=r.segments[i],D="number"==typeof d&&E.parts[d],j={requestId:"segment-loader-"+Math.random(),uri:D&&D.resolvedUri||E.resolvedUri,mediaIndex:i,partIndex:D?d:null,isSyncRequest:l,startOfSegment:s,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:E.timeline,duration:D&&D.duration||E.duration,segment:E,part:D,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:v,independent:t},F=typeof p<"u"?p:this.isPendingTimestampOffset_;j.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:E.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:F});const Q=C2(this.sourceUpdater_.audioBuffered());return"number"==typeof Q&&(j.audioAppendStart=Q-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(j.gopsToAlignWith=((n,e,t)=>{if(typeof e>"u"||null===e||!n.length)return[];const r=Math.ceil((e-this.timeMapping_+3)*ID.ONE_SECOND_IN_TS);let i;for(i=0;i<n.length&&!(n[i].pts>r);i++);return n.slice(i)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset())),j}timestampOffsetForSegment_(e){return(({segmentTimeline:n,currentTimeline:e,startOfSegment:t,buffered:r,overrideCheck:i})=>i||n!==e?n<e?t:r.length?r.end(r.length-1):t:null)(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),r=e.bandwidth,i=this.pendingSegment_.duration,s=ca.estimateSegmentRequestTime(i,r,this.playlist_,e.bytesReceived),l=function(n,e,t=1){return((n.length?n.end(n.length-1):0)-e)/t}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=l)return;const d=function(n){const{main:e,currentTime:t,bandwidth:r,duration:i,segmentDuration:s,timeUntilRebuffer:l,currentTimeline:d,syncController:p}=n,v=e.playlists.filter(Q=>!ca.isIncompatible(Q));let E=v.filter(ca.isEnabled);E.length||(E=v.filter(Q=>!ca.isDisabled(Q)));const j=E.filter(ca.hasAttribute.bind(null,"BANDWIDTH")).map(Q=>{const ue=p.getSyncPoint(Q,i,d,t)?1:2;return{playlist:Q,rebufferingImpact:ca.estimateSegmentRequestTime(s,r,Q)*ue-l}}),F=j.filter(Q=>Q.rebufferingImpact<=0);return U0(F,(Q,ne)=>AR(ne.playlist,Q.playlist)),F.length?F[0]:(U0(j,(Q,ne)=>Q.rebufferingImpact-ne.rebufferingImpact),j[0]||null)}({main:this.vhs_.playlists.main,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:l,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!d)return;let E=.5;l<=Qp&&(E=1),d.playlist&&d.playlist.uri!==this.playlist_.uri&&!(s-l-d.rebufferingImpact<E)&&(this.bandwidth=d.playlist.attributes.BANDWIDTH*Ps.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${V0(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(function(n,e){if(!n&&!e||!n&&e||n&&!e)return!1;if(n===e)return!0;const t=Object.keys(n).sort(),r=Object.keys(e).sort();if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(s!==r[i]||n[s]!==e[s])return!1}return!0}(this.currentMediaInfo_,t=t||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,t,r,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,l=pU(t);s[l]=s[l]||{},s[l][r]=i,this.logger_(`timinginfo: ${t} - ${r} - ${i}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));const i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(l=>{s[l.stream]=s[l.stream]||{startTime:1/0,captions:[],endTime:0};const d=s[l.stream];d.startTime=Math.min(d.startTime,l.startTime+i),d.endTime=Math.max(d.endTime,l.endTime+i),d.captions.push(l)}),Object.keys(s).forEach(l=>{const{startTime:d,endTime:p,captions:v}=s[l],E=this.inbandTextTracks_;this.logger_(`adding cues from ${d} -> ${p} for ${l}`),function(n,e,t){if(!n[t]){e.trigger({type:"usage",name:"vhs-608"});let r=t;/^cc708_/.test(t)&&(r="SERVICE"+t.split("_")[1]);const i=e.textTracks().getTrackById(r);if(i)n[t]=i;else{let l=t,d=t,p=!1;const v=(e.options_.vhs&&e.options_.vhs.captionServices||{})[r];v&&(l=v.label,d=v.language,p=v.default),n[t]=e.addRemoteTextTrack({kind:"captions",id:r,default:p,label:l,language:d},!1).track}}}(E,this.vhs_.tech_,l),dC(d,p,E[l]),function({inbandTextTracks:n,captionArray:e,timestampOffset:t}){if(!e)return;const r=be().WebKitDataCue||be().VTTCue;e.forEach(i=>{n[i.stream].addCue(new r(i.startTime+t,i.endTime+t,i.text))})}({captionArray:v,inbandTextTracks:E,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,r));const s=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();((n,e,t)=>{n.metadataTrack_||(n.metadataTrack_=this.vhs_.tech_.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,n.metadataTrack_.inBandMetadataTrackDispatchType=e)})(this.inbandTextTracks_,r),(({inbandTextTracks:n,metadataArray:e,timestampOffset:t,videoDuration:r})=>{if(!e)return;const i=be().WebKitDataCue||be().VTTCue,s=n.metadataTrack_;if(!s||(e.forEach(E=>{const D=E.cueTime+t;"number"!=typeof D||be().isNaN(D)||D<0||!(D<1/0)||E.frames.forEach(j=>{const F=new i(D,D,j.value||j.url||j.data||"");F.frame=j,F.value=j,function(n){Object.defineProperties(n.frame,{id:{get:()=>(tt.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key)},value:{get:()=>(tt.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data)},privateData:{get:()=>(tt.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data)}})}(F),s.addCue(F)})}),!s.cues||!s.cues.length))return;const l=s.cues,d=[];for(let E=0;E<l.length;E++)l[E]&&d.push(l[E]);const p=d.reduce((E,D)=>{const j=E[D.startTime]||[];return j.push(D),E[D.startTime]=j,E},{}),v=Object.keys(p).sort((E,D)=>Number(E)-Number(D));v.forEach((E,D)=>{const j=p[E],F=Number(v[D+1])||r;j.forEach(Q=>{Q.endTime=F})})})({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:s,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&gU({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:r,hasVideo:i,isMuxed:s}=t;return!(i&&!e.videoTimingInfo||r&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||gU({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,t));const r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),r.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),r.isFmp4=e.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[pU(t.type)].start;else{const i=this.getCurrentMediaInfo_(),s="main"===this.loaderType_&&i&&i.hasVideo;let l;s&&(l=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:l,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,t.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:"main"===this.loaderType_});const i=this.chooseNextRequest_();if(i.mediaIndex!==r.mediaIndex||i.partIndex!==r.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,t)}}updateAppendInitSegmentStatus(e,t){"main"===this.loaderType_&&"number"==typeof e.timestampOffset&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:r,playlist:i}){if(r){const s=uA(r);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:r},i){const s=this.sourceUpdater_.audioBuffered(),l=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Py(s).join(", ")),l.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Py(l).join(", "));const d=s.length?s.start(0):0,p=s.length?s.end(s.length-1):0,v=l.length?l.start(0):0,E=l.length?l.end(l.length-1):0;if(p-d<=1&&E-v<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${Py(s).join(", ")}, video buffer: ${Py(l).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:r}));const j=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${j}`),this.remove(0,j,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=be().setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:r},i){if(i){if(22===i.code)return void this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:r});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error(`${t} append of ${r.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:r,data:i,bytes:s}){if(!s){const l=[i];let d=i.byteLength;r&&(l.unshift(r),d+=r.byteLength),s=(n=>{let t,e=0;return n.bytes&&(t=new Uint8Array(n.bytes),n.segments.forEach(r=>{t.set(r,e),e+=r.byteLength})),t})({bytes:d,segments:l})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,r){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,s=`${e}TimingInfo`;i[s]||(i[s]={}),i[s].transmuxerPrependedSeconds=r.prependedContentDuration||0,i[s].transmuxedPresentationStart=r.start.presentation,i[s].transmuxedDecodeStart=r.start.decode,i[s].transmuxedPresentationEnd=r.end.presentation,i[s].transmuxedDecodeEnd=r.end.decode,i[s].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(e,t){const{type:r,data:i}=t;if(!i||!i.byteLength||"audio"===r&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:r,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:r,initSegment:s,data:i})}loadSegment_(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(()=>{const t=Gp({},e,{forceTimestampOffset:!0});Gp(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)})}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),l=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)||null!==this.mediaIndex&&e.timeline!==this.currentTimeline_&&e.timeline>0;this.logger_(`Requesting ${V0(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=e5({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:l,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:d,level:p,stream:v})=>{this.logger_(`${V0(e)} logged from transmuxer stream ${v} as a ${p}: ${d}`)}})}trimBackBuffer_(e){const t=((n,e,t)=>{let r=e-Ps.BACK_BUFFER_LENGTH;return n.length&&(r=Math.max(r,n.start(0))),Math.min(e-t,r)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,r=e.part,i={resolvedUri:r?r.resolvedUri:t.resolvedUri,byterange:r?r.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},s=e.playlist.segments[e.mediaIndex-1];if(s&&s.timeline===t.timeline&&(s.videoTimingInfo?i.baseStartTime=s.videoTimingInfo.transmuxedDecodeEnd:s.audioTimingInfo&&(i.baseStartTime=s.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=l}return t.map&&(i.map=this.initSegmentForMap(t.map)),i}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<pA?this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${pA}`):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,r){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,r));if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",-102===e.code)return;return this.pause(),-101===e.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=((n,e,t)=>{if(!e.length)return n;if(this.safeAppend_)return e.slice();const r=e[0].pts;let i=0;for(;i<n.length&&!(n[i].pts>=r);i++);return n.slice(0,i).concat(e)})(this.gopBuffer_,r.gopInfo)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){this.mediaSecondsLoaded+="number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:r,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:s,useVideoTimingInfo:l,videoTimingInfo:d,audioTimingInfo:p}){if(typeof e<"u")return e;if(!l)return p.start;const v=t.segments[r-1];return 0===r||!v||typeof v.start>"u"||v.end!==i+s?i:d.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:r,hasVideo:i,isMuxed:s}=t,l="main"===this.loaderType_&&i,d=!this.audioDisabled_&&r&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_)return!e.timingInfo&&"number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);l&&e.waitingOnAppends++,d&&e.waitingOnAppends++,l&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),d&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=((n,e,t)=>"main"===n&&e&&t?t.hasAudio||t.hasVideo?e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:r}){return this.useDtsForTimestampOffset_?e&&"number"==typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),i="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;!i||(e.timingInfo.end="number"==typeof i.end?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=((n,e)=>{if("hls"!==e)return null;const t=(n=>{let e=0;return["video","audio"].forEach(function(t){const r=n[`${t}TimingInfo`];if(!r)return;const{start:i,end:s}=r;let l;"bigint"==typeof i||"bigint"==typeof s?l=be().BigInt(s)-be().BigInt(i):"number"==typeof i&&"number"==typeof s&&(l=s-i),typeof l<"u"&&l>e&&(e=l)}),"bigint"==typeof e&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e})({audioTimingInfo:n.audioTimingInfo,videoTimingInfo:n.videoTimingInfo});if(!t)return null;const r=n.playlist.targetDuration,i=mU({segmentDuration:t,maxDuration:2*r}),s=mU({segmentDuration:t,maxDuration:r});return i||s?{severity:i?"warn":"info",message:`Segment with index ${n.mediaIndex} from playlist ${n.playlist.id} has a duration of ${t} when the reported duration is ${n.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`}:null})(e,this.sourceType_);if(t&&("warn"===t.severity?tt.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${V0(e)}`);this.logger_(`Appended ${V0(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const r=e.segment,i=e.part,s=r.end&&this.currentTime_()-r.end>3*e.playlist.targetDuration,l=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(s||l)return this.logger_(`bad ${s?"segment":"part"} ${V0(e)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<pA)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${pA}`);const t=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/r*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,r=t.start,i=t.end;if(!fU(r)||!fU(i))return;dC(r,i,this.segmentMetadataTrack_);const s=be().WebKitDataCue||be().VTTCue,l={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:r,end:i},p=new s(r,i,JSON.stringify(l));p.value=l,this.segmentMetadataTrack_.addCue(p)}}function Nh(){}const yU=function(n){return"string"!=typeof n?n:n.replace(/./,e=>e.toUpperCase())},x5=["video","audio"],MR=(n,e)=>{const t=e[`${n}Buffer`];return t&&t.updating||e.queuePending[n]},B0=(n,e)=>{if(0===e.queue.length)return;let t=0,r=e.queue[t];if("mediaSource"!==r.type){if("mediaSource"!==n&&e.ready()&&"closed"!==e.mediaSource.readyState&&!MR(n,e)){if(r.type!==n){if(t=((n,e)=>{for(let t=0;t<e.length;t++){const r=e[t];if("mediaSource"===r.type)return null;if(r.type===n)return t}return null})(n,e.queue),null===t)return;r=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[n]=r,r.action(n,e),!r.doneFn)return e.queuePending[n]=null,void B0(n,e)}}else!e.updating()&&"closed"!==e.mediaSource.readyState&&(e.queue.shift(),r.action(e),r.doneFn&&r.doneFn(),B0("audio",e),B0("video",e))},vU=(n,e)=>{const t=e[`${n}Buffer`],r=yU(n);!t||(t.removeEventListener("updateend",e[`on${r}UpdateEnd_`]),t.removeEventListener("error",e[`on${r}Error_`]),e.codecs[n]=null,e[`${n}Buffer`]=null)},zc=(n,e)=>n&&e&&-1!==Array.prototype.indexOf.call(n.sourceBuffers,e),qa_appendBuffer=(n,e,t)=>(r,i)=>{const s=i[`${r}Buffer`];if(zc(i.mediaSource,s)){i.logger_(`Appending segment ${e.mediaIndex}'s ${n.length} bytes to ${r}Buffer`);try{s.appendBuffer(n)}catch(l){i.logger_(`Error with code ${l.code} `+(22===l.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${r}Buffer`),i.queuePending[r]=null,t(l)}}},qa_remove=(n,e)=>(t,r)=>{const i=r[`${t}Buffer`];if(zc(r.mediaSource,i)){r.logger_(`Removing ${n} to ${e} from ${t}Buffer`);try{i.remove(n,e)}catch{r.logger_(`Remove ${n} to ${e} from ${t}Buffer failed`)}}},qa_timestampOffset=n=>(e,t)=>{const r=t[`${e}Buffer`];!zc(t.mediaSource,r)||(t.logger_(`Setting ${e}timestampOffset to ${n}`),r.timestampOffset=n)},qa_callback=n=>(e,t)=>{n()},qa_endOfStream=n=>e=>{if("open"===e.mediaSource.readyState){e.logger_(`Calling mediaSource endOfStream(${n||""})`);try{e.mediaSource.endOfStream(n)}catch(t){tt.log.warn("Failed to call media source endOfStream",t)}}},qa_duration=n=>e=>{e.logger_(`Setting mediaSource duration to ${n}`);try{e.mediaSource.duration=n}catch(t){tt.log.warn("Failed to set media source duration",t)}},qa_addSourceBuffer=(n,e)=>t=>{const r=yU(n),i=Gw(e);t.logger_(`Adding ${n}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(i);s.addEventListener("updateend",t[`on${r}UpdateEnd_`]),s.addEventListener("error",t[`on${r}Error_`]),t.codecs[n]=e,t[`${n}Buffer`]=s},qa_removeSourceBuffer=n=>e=>{const t=e[`${n}Buffer`];if(vU(n,e),zc(e.mediaSource,t)){e.logger_(`Removing ${n}Buffer with codec ${e.codecs[n]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(r){tt.log.warn(`Failed to removeSourceBuffer ${n}Buffer`,r)}}},qa_changeType=n=>(e,t)=>{const r=t[`${e}Buffer`],i=Gw(n);!zc(t.mediaSource,r)||t.codecs[e]!==n&&(t.logger_(`changing ${e}Buffer codec from ${t.codecs[e]} to ${n}`),r.changeType(i),t.codecs[e]=n)},za=({type:n,sourceUpdater:e,action:t,doneFn:r,name:i})=>{e.queue.push({type:n,action:t,doneFn:r,name:i}),B0(n,e)},_U=(n,e)=>t=>{if(e.queuePending[n]){const r=e.queuePending[n].doneFn;e.queuePending[n]=null,r&&r(e[`${n}Error_`])}B0(n,e)};class bU extends tt.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>B0("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Tu("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=_U("video",this),this.onAudioUpdateEnd_=_U("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){za({type:"mediaSource",sourceUpdater:this,action:qa_addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){za({type:e,sourceUpdater:this,action:(n,e)=>{if("open"!==e.mediaSource.readyState)return;const t=e[`${n}Buffer`];if(zc(e.mediaSource,t)){e.logger_(`calling abort on ${n}Buffer`);try{t.abort()}catch(r){tt.log.warn(`Failed to abort on ${n}Buffer`,r)}}},name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?za({type:"mediaSource",sourceUpdater:this,action:qa_removeSourceBuffer(e),name:"removeSourceBuffer"}):tt.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!tt.browser.IE_VERSION&&!tt.browser.IS_FIREFOX&&be().MediaSource&&be().MediaSource.prototype&&"function"==typeof be().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return be().SourceBuffer&&be().SourceBuffer.prototype&&"function"==typeof be().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){this.canChangeType()?za({type:e,sourceUpdater:this,action:qa_changeType(t),name:"changeType"}):tt.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const r=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,r);this.canChangeType()&&this.changeType(t,r)})}appendBuffer(e,t){const{segmentInfo:r,type:i,bytes:s}=e;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_(`delayed audio append of ${s.length} until video append`);if(za({type:i,sourceUpdater:this,action:qa_appendBuffer(s,r||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const d=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${d.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,d.forEach(p=>{this.appendBuffer.apply(this,p)})}}audioBuffered(){return zc(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:ao()}videoBuffered(){return zc(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:ao()}buffered(){const e=zc(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=zc(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(n,e){let t=null,r=null,i=0;const s=[],l=[];if(!(n&&n.length&&e&&e.length))return ao();let d=n.length;for(;d--;)s.push({time:n.start(d),type:"start"}),s.push({time:n.end(d),type:"end"});for(d=e.length;d--;)s.push({time:e.start(d),type:"start"}),s.push({time:e.end(d),type:"end"});for(s.sort(function(p,v){return p.time-v.time}),d=0;d<s.length;d++)"start"===s[d].type?(i++,2===i&&(t=s[d].time)):"end"===s[d].type&&(i--,1===i&&(r=s[d].time)),null!==t&&null!==r&&(l.push([t,r]),t=null,r=null);return ao(l)}(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Nh){za({type:"mediaSource",sourceUpdater:this,action:qa_duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Nh){"string"!=typeof e&&(e=void 0),za({type:"mediaSource",sourceUpdater:this,action:qa_endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,r=Nh){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?za({type:"audio",sourceUpdater:this,action:qa_remove(e,t),doneFn:r,name:"remove"}):r()}removeVideo(e,t,r=Nh){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?za({type:"video",sourceUpdater:this,action:qa_remove(e,t),doneFn:r,name:"remove"}):r()}updating(){return!(!MR("audio",this)&&!MR("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(za({type:"audio",sourceUpdater:this,action:qa_timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(za({type:"video",sourceUpdater:this,action:qa_timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){!this.audioBuffer||za({type:"audio",sourceUpdater:this,action:qa_callback(e),name:"callback"})}videoQueueCallback(e){!this.videoBuffer||za({type:"video",sourceUpdater:this,action:qa_callback(e),name:"callback"})}dispose(){this.trigger("dispose"),x5.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>vU(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const TU=n=>decodeURIComponent(escape(String.fromCharCode.apply(null,n))),EU=new Uint8Array("\n\n".split("").map(n=>n.charCodeAt(0)));class D5 extends kR{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return ao();const e=this.subtitlesTrack_.cues;return ao([[e[0].startTime,e[e.length-1].startTime]])}initSegmentForMap(e,t=!1){if(!e)return null;const r=uA(e);let i=this.initSegments_[r];if(t&&!i&&e.bytes){const l=new Uint8Array(EU.byteLength+e.bytes.byteLength);l.set(e.bytes),l.set(EU,e.bytes.byteLength),this.initSegments_[r]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:l}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,t){dC(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",()=>{this.state="READY",this.paused()||this.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,r){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return-101===e.code&&this.handleTimeout_(),-102===e.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=i.segment;if(s.map&&(s.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!=typeof be().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){let l;const d=()=>{this.subtitlesTrack_.tech_.off("vttjsloaded",l),this.stopForError({message:"Error loading vtt.js"})};return l=()=>{this.subtitlesTrack_.tech_.off("vttjserror",d),this.segmentRequestFinished_(e,t,r)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",l),void this.subtitlesTrack_.tech_.one("vttjserror",d)}s.requested=!0;try{this.parseVTTCues_(i)}catch(l){return void this.stopForError({message:l.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.timingInfo=i.cues.length?{start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:{start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,i.cues.forEach(l=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(be().VTTCue)(l.startTime,l.endTime,l.text):l)}),function(n){const e=n.cues;if(e)for(let t=0;t<e.length;t++){const r=[];let i=0;for(let s=0;s<e.length;s++)e[t].startTime===e[s].startTime&&e[t].endTime===e[s].endTime&&e[t].text===e[s].text&&(i++,i>1&&r.push(e[s]));r.length&&r.forEach(s=>n.removeCue(s))}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,r=!1;"function"==typeof be().TextDecoder?t=new(be().TextDecoder)("utf8"):(t=be().WebVTT.StringDecoder(),r=!0);const i=new(be().WebVTT.Parser)(be(),be().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=l=>{e.timestampmap=l},i.onparsingerror=l=>{tt.log.warn("Error encountered when parsing cues: "+l.message)},e.segment.map){let l=e.segment.map.bytes;r&&(l=TU(l)),i.parse(l)}let s=e.bytes;r&&(s=TU(s)),i.parse(s),i.flush()}updateTimeMapping_(e,t,r){const i=e.segment;if(!t)return;if(!e.cues.length)return void(i.empty=!0);const s=e.timestampmap,l=s.MPEGTS/ID.ONE_SECOND_IN_TS-s.LOCAL+t.mapping;e.cues.forEach(d=>{d.startTime+=l,d.endTime+=l}),r.syncInfo||(r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(e.cues[0].startTime,e.cues[e.cues.length-1].startTime-i.duration)})}}const A5=function(n,e){const t=n.cues;for(let r=0;r<t.length;r++){const i=t[r];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},wU=[{name:"VOD",run:(n,e,t,r,i)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(n,e,t,r,i)=>{if(!Object.keys(n.timelineToDatetimeMappings).length)return null;let s=null,l=null;const d=gR(e);i=i||0;for(let p=0;p<d.length;p++){const E=d[e.endList||0===i?p:d.length-(p+1)],D=E.segment,j=n.timelineToDatetimeMappings[D.timeline];if(!j||!D.dateTimeObject)continue;let Q=D.dateTimeObject.getTime()/1e3+j;if(D.parts&&"number"==typeof E.partIndex)for(let ue=0;ue<E.partIndex;ue++)Q+=D.parts[ue].duration;const ne=Math.abs(i-Q);if(null!==l&&(0===ne||l<ne))break;l=ne,s={time:Q,segmentIndex:E.segmentIndex,partIndex:E.partIndex}}return s}},{name:"Segment",run:(n,e,t,r,i)=>{let s=null,l=null;i=i||0;const d=gR(e);for(let p=0;p<d.length;p++){const E=d[e.endList||0===i?p:d.length-(p+1)],D=E.segment,j=E.part&&E.part.start||D&&D.start;if(D.timeline===r&&typeof j<"u"){const F=Math.abs(i-j);if(null!==l&&l<F)break;(!s||null===l||l>=F)&&(l=F,s={time:j,segmentIndex:E.segmentIndex,partIndex:E.partIndex})}}return s}},{name:"Discontinuity",run:(n,e,t,r,i)=>{let s=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length){let l=null;for(let d=0;d<e.discontinuityStarts.length;d++){const p=e.discontinuityStarts[d],E=n.discontinuities[e.discontinuitySequence+d+1];if(E){const D=Math.abs(i-E.time);if(null!==l&&l<D)break;(!s||null===l||l>=D)&&(l=D,s={time:E.time,segmentIndex:p,partIndex:null})}}}return s}},{name:"Playlist",run:(n,e,t,r,i)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class P5 extends tt.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=Tu("SyncController")}getSyncPoint(e,t,r,i){const s=this.runStrategies_(e,t,r,i);return s.length?this.selectSyncPoint_(s,{key:"time",value:i}):null}getExpiredTime(e,t){if(!e||!e.segments)return null;const r=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!r.length)return null;const i=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+aC({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,r,i){const s=[];for(let l=0;l<wU.length;l++){const d=wU[l],p=d.run(this,e,t,r,i);p&&(p.strategy=d.name,s.push({strategy:d.name,syncPoint:p}))}return s}selectSyncPoint_(e,t){let r=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let l=1;l<e.length;l++){const d=Math.abs(e[l].syncPoint[t.key]-t.value);d<i&&(i=d,r=e[l].syncPoint,s=e[l].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+("number"==typeof r.partIndex?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(e,t){const r=t.mediaSequence-e.mediaSequence;if(r>86400)tt.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);else for(let i=r-1;i>=0;i--){const s=e.segments[i];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+i,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],r=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const r=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;r&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const s=i.dateTimeObject;i.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[i.timeline]=-s.getTime()/1e3)}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,r){const i=e.segment,s=e.part;let d,p,l=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)l={time:e.startOfSegment,mapping:e.startOfSegment-t.start},r&&(this.timelines[e.timeline]=l,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${l.time}] [mapping: ${l.mapping}]`)),d=e.startOfSegment,p=t.end+l.mapping;else{if(!l)return!1;d=t.start+l.mapping,p=t.end+l.mapping}return s&&(s.start=d,s.end=p),(!i.start||d<i.start)&&(i.start=d),i.end=p,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const s=t.discontinuityStarts[i],l=t.discontinuitySequence+i+1,d=s-e.mediaIndex,p=Math.abs(d);if(!this.discontinuities[l]||this.discontinuities[l].accuracy>p){let v;v=d<0?r.start-aC({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):r.end+aC({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[l]={time:v,accuracy:p}}}}dispose(){this.trigger("dispose"),this.off()}}class R5 extends tt.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:r}){return"number"==typeof t&&"number"==typeof r&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:r}){return"number"==typeof t&&"number"==typeof r&&(this.lastTimelineChanges_[e]={type:e,from:t,to:r},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const O5=Y2(Q2(function(){var n=function(){function ne(){this.listeners={}}var ue=ne.prototype;return ue.on=function(We,Qe){this.listeners[We]||(this.listeners[We]=[]),this.listeners[We].push(Qe)},ue.off=function(We,Qe){if(!this.listeners[We])return!1;var Le=this.listeners[We].indexOf(Qe);return this.listeners[We]=this.listeners[We].slice(0),this.listeners[We].splice(Le,1),Le>-1},ue.trigger=function(We){var Qe=this.listeners[We];if(Qe)if(2===arguments.length)for(var Le=Qe.length,Ae=0;Ae<Le;++Ae)Qe[Ae].call(this,arguments[1]);else for(var ct=Array.prototype.slice.call(arguments,1),kt=Qe.length,_n=0;_n<kt;++_n)Qe[_n].apply(this,ct)},ue.dispose=function(){this.listeners={}},ue.pipe=function(We){this.on("data",function(Qe){We.push(Qe)})},ne}();let r=null;class i{constructor(ue){let Ve,We,Qe;r||(r=function(){const ne=[[[],[],[],[],[]],[[],[],[],[],[]]],ue=ne[0],Ve=ne[1],We=ue[4],Qe=Ve[4];let Le,Ae,ct;const kt=[],_n=[];let $n,Hi,co,Gi,an,Ur;for(Le=0;Le<256;Le++)_n[(kt[Le]=Le<<1^283*(Le>>7))^Le]=Le;for(Ae=ct=0;!We[Ae];Ae^=$n||1,ct=_n[ct]||1)for(Gi=ct^ct<<1^ct<<2^ct<<3^ct<<4,Gi=Gi>>8^255&Gi^99,We[Ae]=Gi,Qe[Gi]=Ae,co=kt[Hi=kt[$n=kt[Ae]]],Ur=16843009*co^65537*Hi^257*$n^16843008*Ae,an=257*kt[Gi]^16843008*Gi,Le=0;Le<4;Le++)ue[Le][Ae]=an=an<<24^an>>>8,Ve[Le][Gi]=Ur=Ur<<24^Ur>>>8;for(Le=0;Le<5;Le++)ue[Le]=ue[Le].slice(0),Ve[Le]=Ve[Le].slice(0);return ne}()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];const Le=this._tables[0][4],Ae=this._tables[1],ct=ue.length;let kt=1;if(4!==ct&&6!==ct&&8!==ct)throw new Error("Invalid aes key size");const _n=ue.slice(0),$n=[];for(this._key=[_n,$n],Ve=ct;Ve<4*ct+28;Ve++)Qe=_n[Ve-1],(Ve%ct==0||8===ct&&Ve%ct==4)&&(Qe=Le[Qe>>>24]<<24^Le[Qe>>16&255]<<16^Le[Qe>>8&255]<<8^Le[255&Qe],Ve%ct==0&&(Qe=Qe<<8^Qe>>>24^kt<<24,kt=kt<<1^283*(kt>>7))),_n[Ve]=_n[Ve-ct]^Qe;for(We=0;Ve;We++,Ve--)Qe=_n[3&We?Ve:Ve-4],$n[We]=Ve<=4||We<4?Qe:Ae[0][Le[Qe>>>24]]^Ae[1][Le[Qe>>16&255]]^Ae[2][Le[Qe>>8&255]]^Ae[3][Le[255&Qe]]}decrypt(ue,Ve,We,Qe,Le,Ae){const ct=this._key[1];let co,Gi,an,kt=ue^ct[0],_n=Qe^ct[1],$n=We^ct[2],Hi=Ve^ct[3];const Ur=ct.length/4-2;let Qc,Uh=4;const ng=this._tables[1],Ly=ng[0],Fy=ng[1],jy=ng[2],Uy=ng[3],Vy=ng[4];for(Qc=0;Qc<Ur;Qc++)co=Ly[kt>>>24]^Fy[_n>>16&255]^jy[$n>>8&255]^Uy[255&Hi]^ct[Uh],Gi=Ly[_n>>>24]^Fy[$n>>16&255]^jy[Hi>>8&255]^Uy[255&kt]^ct[Uh+1],an=Ly[$n>>>24]^Fy[Hi>>16&255]^jy[kt>>8&255]^Uy[255&_n]^ct[Uh+2],Hi=Ly[Hi>>>24]^Fy[kt>>16&255]^jy[_n>>8&255]^Uy[255&$n]^ct[Uh+3],Uh+=4,kt=co,_n=Gi,$n=an;for(Qc=0;Qc<4;Qc++)Le[(3&-Qc)+Ae]=Vy[kt>>>24]<<24^Vy[_n>>16&255]<<16^Vy[$n>>8&255]<<8^Vy[255&Hi]^ct[Uh++],co=kt,kt=_n,_n=$n,$n=Hi,Hi=co}}class s extends n{constructor(){super(n),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}push(ue){this.jobs.push(ue),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const l=function(ne){return ne<<24|(65280&ne)<<8|(16711680&ne)>>8|ne>>>24};class p{constructor(ue,Ve,We,Qe){const Le=p.STEP,Ae=new Int32Array(ue.buffer),ct=new Uint8Array(ue.byteLength);let kt=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(Ae.subarray(kt,kt+Le),Ve,We,ct)),kt=Le;kt<Ae.length;kt+=Le)We=new Uint32Array([l(Ae[kt-4]),l(Ae[kt-3]),l(Ae[kt-2]),l(Ae[kt-1])]),this.asyncStream_.push(this.decryptChunk_(Ae.subarray(kt,kt+Le),Ve,We,ct));this.asyncStream_.push(function(){Qe(null,function e(ne){return ne.subarray(0,ne.byteLength-ne[ne.byteLength-1])}(ct))})}static get STEP(){return 32e3}decryptChunk_(ue,Ve,We,Qe){return function(){const Le=function(ne,ue,Ve){const We=new Int32Array(ne.buffer,ne.byteOffset,ne.byteLength>>2),Qe=new i(Array.prototype.slice.call(ue)),Le=new Uint8Array(ne.byteLength),Ae=new Int32Array(Le.buffer);let ct,kt,_n,$n,Hi,co,Gi,an,Ur;for(ct=Ve[0],kt=Ve[1],_n=Ve[2],$n=Ve[3],Ur=0;Ur<We.length;Ur+=4)Hi=l(We[Ur]),co=l(We[Ur+1]),Gi=l(We[Ur+2]),an=l(We[Ur+3]),Qe.decrypt(Hi,co,Gi,an,Ae,Ur),Ae[Ur]=l(Ae[Ur]^ct),Ae[Ur+1]=l(Ae[Ur+1]^kt),Ae[Ur+2]=l(Ae[Ur+2]^_n),Ae[Ur+3]=l(Ae[Ur+3]^$n),ct=Hi,kt=co,_n=Gi,$n=an;return Le}(ue,Ve,We);Qe.set(Le,ue.byteOffset)}}}var ne,v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F=(typeof window<"u"?window:typeof v<"u"?v:typeof self<"u"?self:{}).BigInt||Number;F("0x1"),F("0x100"),F("0x10000"),F("0x1000000"),F("0x100000000"),F("0x10000000000"),F("0x1000000000000"),F("0x100000000000000"),F("0x10000000000000000"),ne=new Uint16Array([65484]),new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength);self.onmessage=function(ne){const ue=ne.data,Ve=new Uint8Array(ue.encrypted.bytes,ue.encrypted.byteOffset,ue.encrypted.byteLength),We=new Uint32Array(ue.key.bytes,ue.key.byteOffset,ue.key.byteLength/4),Qe=new Uint32Array(ue.iv.bytes,ue.iv.byteOffset,ue.iv.byteLength/4);new p(Ve,We,Qe,function(Le,Ae){self.postMessage(function(ne){const ue={};return Object.keys(ne).forEach(Ve=>{const We=ne[Ve];ue[Ve]=function(ue){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(ue):ue&&ue.buffer instanceof ArrayBuffer}(We)?{bytes:We.buffer,byteOffset:We.byteOffset,byteLength:We.byteLength}:We}),ue}({source:ue.source,decrypted:Ae}),[Ae.buffer])})}}));var N5=Z2(O5);const L5=n=>{let e=n.default?"main":"alternative";return n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},gA=(n,e)=>{n.abort(),n.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},PR=(n,e)=>{e.activePlaylistLoader=n,n.load()},mA={AUDIO:(n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:r},excludePlaylist:i}=e;gA(t,r);const s=r.activeTrack(),l=r.activeGroup(),d=(l.filter(v=>v.default)[0]||l[0]).id,p=r.tracks[d];if(s!==p){tt.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const v in r.tracks)r.tracks[v].enabled=r.tracks[v]===p;r.onTrackChanged()}else i({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:r}}=e;tt.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),gA(t,r);const i=r.activeTrack();i&&(i.mode="disabled"),r.onTrackChanged()}},CU={AUDIO:(n,e,t)=>{if(!e)return;const{tech:r,requestOptions:i,segmentLoaders:{[n]:s}}=t;e.on("loadedmetadata",()=>{const l=e.media();s.playlist(l,i),(!r.paused()||l.endList&&"none"!==r.preload())&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),r.paused()||s.load()}),e.on("error",mA[n](n,t))},SUBTITLES:(n,e,t)=>{const{tech:r,requestOptions:i,segmentLoaders:{[n]:s},mediaTypes:{[n]:l}}=t;e.on("loadedmetadata",()=>{const d=e.media();s.playlist(d,i),s.track(l.activeTrack()),(!r.paused()||d.endList&&"none"!==r.preload())&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),r.paused()||s.load()}),e.on("error",mA[n](n,t))}},V5={AUDIO:(n,e)=>{const{vhs:t,sourceType:r,segmentLoaders:{[n]:i},requestOptions:s,main:{mediaGroups:l},mediaTypes:{[n]:{groups:d,tracks:p,logger_:v}},mainPlaylistLoader:E}=e,D=lC(E.main);(!l[n]||0===Object.keys(l[n]).length)&&(l[n]={main:{default:{default:!0}}},D&&(l[n].main.default.playlists=E.main.playlists));for(const j in l[n]){d[j]||(d[j]=[]);for(const F in l[n][j]){let ne,Q=l[n][j][F];if(D?(v(`AUDIO group '${j}' label '${F}' is a main playlist`),Q.isMainPlaylist=!0,ne=null):ne="vhs-json"===r&&Q.playlists?new j0(Q.playlists[0],t,s):Q.resolvedUri?new j0(Q.resolvedUri,t,s):Q.playlists&&"dash"===r?new SR(Q.playlists[0],t,s,E):null,Q=jr({id:F,playlistLoader:ne},Q),CU[n](n,Q.playlistLoader,e),d[j].push(Q),typeof p[F]>"u"){const ue=new tt.AudioTrack({id:F,kind:L5(Q),enabled:!1,language:Q.language,default:Q.default,label:F});p[F]=ue}}}i.on("error",mA[n](n,e))},SUBTITLES:(n,e)=>{const{tech:t,vhs:r,sourceType:i,segmentLoaders:{[n]:s},requestOptions:l,main:{mediaGroups:d},mediaTypes:{[n]:{groups:p,tracks:v}},mainPlaylistLoader:E}=e;for(const D in d[n]){p[D]||(p[D]=[]);for(const j in d[n][D]){if(d[n][D][j].forced)continue;let Q,F=d[n][D][j];if("hls"===i)Q=new j0(F.resolvedUri,r,l);else if("dash"===i){if(!F.playlists.filter(ue=>ue.excludeUntil!==1/0).length)return;Q=new SR(F.playlists[0],r,l,E)}else"vhs-json"===i&&(Q=new j0(F.playlists?F.playlists[0]:F.resolvedUri,r,l));if(F=jr({id:j,playlistLoader:Q},F),CU[n](n,F.playlistLoader,e),p[D].push(F),typeof v[j]>"u"){const ne=t.addRemoteTextTrack({id:j,kind:"subtitles",default:F.default&&F.autoselect,language:F.language,label:j},!1).track;v[j]=ne}}}s.on("error",mA[n](n,e))},"CLOSED-CAPTIONS":(n,e)=>{const{tech:t,main:{mediaGroups:r},mediaTypes:{[n]:{groups:i,tracks:s}}}=e;for(const l in r[n]){i[l]||(i[l]=[]);for(const d in r[n][l]){const p=r[n][l][d];if(!/^(?:CC|SERVICE)/.test(p.instreamId))continue;const v=t.options_.vhs&&t.options_.vhs.captionServices||{};let E={label:d,language:p.language,instreamId:p.instreamId,default:p.default&&p.autoselect};if(v[E.instreamId]&&(E=jr(E,v[E.instreamId])),void 0===E.default&&delete E.default,i[l].push(jr({id:d},p)),typeof s[d]>"u"){const D=t.addRemoteTextTrack({id:E.instreamId,kind:"captions",default:E.default,language:E.language,label:E.label},!1).track;s[d]=D}}}}},SU=(n,e)=>{for(let t=0;t<n.length;t++)if(vR(e,n[t])||n[t].playlists&&SU(n[t].playlists,e))return!0;return!1},$5={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const r in t)if(t[r].enabled)return t[r];return null},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const r in t)if("showing"===t[r].mode||"hidden"===t[r].mode)return t[r];return null}};let Lh;const W5=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],K5=function(n){return this.audioSegmentLoader_[n]+this.mainSegmentLoader_[n]};class Y5 extends tt.EventTarget{constructor(e){super();const{src:t,withCredentials:r,tech:i,bandwidth:s,externVhs:l,useCueTags:d,playlistExclusionDuration:p,enableLowInitialPlaylist:v,sourceType:E,cacheEncryptionKeys:D,bufferBasedABR:j,leastPixelDiffSelector:F,captionServices:Q}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:ne}=e;(null===ne||typeof ne>"u")&&(ne=1/0),Lh=l,this.bufferBasedABR=Boolean(j),this.leastPixelDiffSelector=Boolean(F),this.withCredentials=r,this.tech_=i,this.vhs_=i.vhs,this.sourceType_=E,this.useCueTags_=d,this.playlistExclusionDuration=p,this.maxPlaylistRetries=ne,this.enableLowInitialPlaylist=v,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:ne,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const n={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{n[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Nh,activeTrack:Nh,getActiveGroup:Nh,onGroupChanged:Nh,onTrackChanged:Nh,lastTrack_:null,logger_:Tu(`MediaGroups[${e}]`)}}),n})(),this.mediaSource=new(be().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=ao(),this.hasPlayed_=!1,this.syncController_=new P5(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new N5,this.sourceUpdater_=new bU(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new R5;const ue={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:Q,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:D,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings};this.mainPlaylistLoader_="dash"===this.sourceType_?new SR(t,this.vhs_,this.requestOptions_):new j0(t,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new kR(jr(ue,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new kR(jr(ue,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new D5(jr(ue,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks}),e),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),W5.forEach(We=>{this[We+"_"]=K5.bind(this,We)}),this.logger_=Tu("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const Ve="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(Ve,()=>{const We=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-We,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,r){const i=this.media(),s=i&&(i.id||i.uri),l=e.id||e.uri;s&&s!==l&&(this.logger_(`switch media ${s} -> ${l} from ${t}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})),this.mainPlaylistLoader_.media(e,r)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=be().setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(be().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const r=e.mediaGroups.AUDIO,i=Object.keys(r);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const d=r.main||i.length&&r[i[0]];for(const p in d)if(d[p].default){s={label:p};break}}if(!s)return t;const l=[];for(const d in r)if(r[d][s.label]){const p=r[d][s.label];if(p.playlists&&p.playlists.length)l.push.apply(l,p.playlists);else if(p.uri)l.push(p);else if(e.playlists.length)for(let v=0;v<e.playlists.length;v++){const E=e.playlists[v];E.attributes&&E.attributes.AUDIO&&E.attributes.AUDIO===d&&l.push(E)}}return l.length?l:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;this.requestOptions_.timeout=yR(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:t,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),(n=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(v=>{V5[v](v,n)});const{mediaTypes:e,mainPlaylistLoader:t,tech:r,vhs:i,segmentLoaders:{AUDIO:s,main:l}}=n;["AUDIO","SUBTITLES"].forEach(v=>{e[v].activeGroup=((n,e)=>t=>{const{mainPlaylistLoader:r,mediaTypes:{[n]:{groups:i}}}=e,s=r.media();if(!s)return null;let l=null;s.attributes[n]&&(l=i[s.attributes[n]]);const d=Object.keys(i);if(!l)if("AUDIO"===n&&d.length>1&&lC(e.main))for(let p=0;p<d.length;p++){const v=i[d[p]];if(SU(v,s)){l=v;break}}else i.main?l=i.main:1===d.length&&(l=i[d[0]]);return typeof t>"u"?l:null!==t&&l&&l.filter(p=>p.id===t.id)[0]||null})(v,n),e[v].activeTrack=$5[v](v,n),e[v].onGroupChanged=((n,e)=>()=>{const{segmentLoaders:{[n]:t,main:r},mediaTypes:{[n]:i}}=e,s=i.activeTrack(),l=i.getActiveGroup(),d=i.activePlaylistLoader,p=i.lastGroup_;if((!l||!p||l.id!==p.id)&&(i.lastGroup_=l,i.lastTrack_=s,gA(t,i),l&&!l.isMainPlaylist)){if(!l.playlistLoader)return void(d&&r.resetEverything());t.resyncLoader(),PR(l.playlistLoader,i)}})(v,n),e[v].onGroupChanging=((n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:r}}=e;r.lastGroup_=null,t.abort(),t.pause()})(v,n),e[v].onTrackChanged=((n,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[n]:r,main:i},mediaTypes:{[n]:s}}=e,l=s.activeTrack(),d=s.getActiveGroup(),p=s.activePlaylistLoader,v=s.lastTrack_;if((!v||!l||v.id!==l.id)&&(s.lastGroup_=d,s.lastTrack_=l,gA(r,s),d)){if(d.isMainPlaylist){if(!l||!v||l.id===v.id)return;const E=e.vhs.playlistController_,D=E.selectPlaylist();if(E.media()===D)return;return s.logger_(`track change. Switching main audio from ${v.id} to ${l.id}`),t.pause(),i.resetEverything(),void E.fastQualityChange_(D)}if("AUDIO"===n){if(!d.playlistLoader)return i.setAudio(!0),void i.resetEverything();r.setAudio(!0),i.setAudio(!1)}if(p===d.playlistLoader)return void PR(d.playlistLoader,s);r.track&&r.track(l),r.resetEverything(),PR(d.playlistLoader,s)}})(v,n),e[v].getActiveGroup=((n,{mediaTypes:e})=>()=>{const t=e[n].activeTrack();return t?e[n].activeGroup(t):null})(v,n)});const d=e.AUDIO.activeGroup();if(d){const v=(d.filter(D=>D.default)[0]||d[0]).id;e.AUDIO.tracks[v].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(l.setAudio(!1),s.setAudio(!0)):l.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(v=>e[v].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(v=>e[v].onGroupChanging())});const p=()=>{e.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",p),r.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",()=>{r.audioTracks().removeEventListener("change",p),r.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(const v in e.AUDIO.tracks)r.audioTracks().addTrack(e.AUDIO.tracks[v])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let t;if(this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t)||(this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;this.requestOptions_.timeout=yR(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:t,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const r=e.mediaGroups||{};let i=!0;const s=Object.keys(r.AUDIO);for(const l in r.AUDIO)for(const d in r.AUDIO[l])r.AUDIO[l][d].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Lh.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(r.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),i=this.bufferLowWaterLine(),s=this.bufferHighWaterLine();return function({currentPlaylist:n,buffered:e,currentTime:t,nextPlaylist:r,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:l,bufferBasedABR:d,log:p}){if(!r)return tt.log.warn("We received no playlist to switch to. Please check your stream."),!1;const v=`allowing switch ${n&&n.id||"null"} -> ${r.id}`;if(!n)return p(`${v} as current playlist is not set`),!0;if(r.id===n.id)return!1;const E=Boolean(F0(e,t).length);if(!n.endList)return E||"number"!=typeof n.partTargetDuration?(p(`${v} as current playlist is live`),!0):(p(`not ${v} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const D=fR(e,t),j=d?Ps.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ps.MAX_BUFFER_LOW_WATER_LINE;if(l<j)return p(`${v} as duration < max low water line (${l} < ${j})`),!0;const F=r.attributes.BANDWIDTH,Q=n.attributes.BANDWIDTH;if(F<Q&&(!d||D<s)){let ne=`${v} as next bandwidth < current bandwidth (${F} < ${Q})`;return d&&(ne+=` and forwardBuffer < bufferHighWaterLine (${D} < ${s})`),p(ne),!0}if((!d||F>Q)&&D>=i){let ne=`${v} as forwardBuffer >= bufferLowWaterLine (${D} >= ${i})`;return d&&(ne+=` and next bandwidth > current bandwidth (${F} > ${Q})`),p(ne),!0}return p(`not ${v} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:r,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const t=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",t=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:120}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const t=this.getCodecsOrExclude_();!t||this.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){e!==this.mainPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(()=>{this.tech_.setCurrentTime(tt.browser.IE_VERSION||tt.browser.IS_EDGE?this.tech_.currentTime()+.04:this.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){const t=this.seekable();if(!t.length)return!1;if(tt.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(t.end(0)),this.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(t.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&"function"==typeof e.then&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}!e||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const r=this.syncController_.getExpiredTime(e,this.duration());if(null===r)return!1;const i=Lh.Playlist.playlistEnd(e,r),s=this.tech_.currentTime(),l=this.tech_.buffered();if(!l.length)return i-s<=Gc;const d=l.end(l.length-1);return d-s<=Gc&&i-d<=Gc}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:r}){if(e=e||this.mainPlaylistLoader_.media(),r=r||t.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,s=i.filter(lA),l=1===s.length&&s[0]===e;if(1===i.length&&r!==1/0)return tt.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(l);if(l){let F=!1;i.forEach(Q=>{if(Q===e)return;const ne=Q.excludeUntil;typeof ne<"u"&&ne!==1/0&&(F=!0,delete Q.excludeUntil)}),F&&(tt.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let d;d=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*r,e.excludeUntil=d,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const p=this.selectPlaylist();if(!p)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(t.internal?this.logger_:tt.log.warn)(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${t.message?" "+t.message:""} Switching to playlist ${p.id}.`),p.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),p.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const D=p.targetDuration/2*1e3||5e3,j="number"==typeof p.lastRequest&&Date.now()-p.lastRequest<=D;return this.switchMedia_(p,"exclude",l||j)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const r=[],i="all"===e;(i||"main"===e)&&r.push(this.mainPlaylistLoader_);const s=[];(i||"audio"===e)&&s.push("AUDIO"),(i||"subtitle"===e)&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(l=>{const d=this.mediaTypes_[l]&&this.mediaTypes_[l].activePlaylistLoader;d&&r.push(d)}),["main","audio","subtitle"].forEach(l=>{const d=this[`${l}SegmentLoader_`];d&&(e===l||"all"===e)&&r.push(d)}),r.forEach(l=>t.forEach(d=>{"function"==typeof l[d]&&l[d]()}))}setCurrentTime(e){const t=F0(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Lh.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let r=this.syncController_.getExpiredTime(t,this.duration());if(null===r)return;const i=this.mainPlaylistLoader_.main,s=Lh.Playlist.seekable(t,r,Lh.Playlist.liveEdgeDelay(i,t));if(0===s.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),r=this.syncController_.getExpiredTime(t,this.duration()),null===r||(e=Lh.Playlist.seekable(t,r,Lh.Playlist.liveEdgeDelay(i,t)),0===e.length)))return;let l,d;this.seekable_&&this.seekable_.length&&(l=this.seekable_.end(0),d=this.seekable_.start(0)),this.seekable_=e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?s:ao([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):s,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==l||this.seekable_.start(0)!==d)&&(this.logger_(`seekable updated [${w2(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const i=this.seekable();if(!i.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1)))}const t=this.tech_.buffered();let r=Lh.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(r=Math.max(r,t.end(t.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const r in t)t[r].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!r)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};e.video=e.main;const t=cC(this.main(),this.media()),r={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(r.video=t.video||e.main.videoCodec||"avc1.4d400d"),e.main.isMuxed&&(r.video+=`,${t.audio||e.main.audioCodec||vF}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||i)&&(r.audio=t.audio||e.main.audioCodec||e.audio.audioCodec||vF,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!r.audio&&!r.video)return void this.excludePlaylist({playlistToExclude:this.media(),error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const l={};let d;if(["video","audio"].forEach(function(p){if(r.hasOwnProperty(p)&&!((p,v)=>p?wD(v):iP(v))(e[p].isFmp4,r[p])){const v=e[p].isFmp4?"browser":"muxer";l[v]=l[v]||[],l[v].push(r[p]),"audio"===p&&(d=v)}}),i&&d&&this.media().attributes.AUDIO){const p=this.media().attributes.AUDIO;this.main().playlists.forEach(v=>{(v.attributes&&v.attributes.AUDIO)===p&&v!==this.media()&&(v.excludeUntil=1/0)}),this.logger_(`excluding audio group ${p} as ${d} does not support codec(s): "${r.audio}"`)}if(!Object.keys(l).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const p=[];if(["video","audio"].forEach(v=>{const E=(Lc(this.sourceUpdater_.codecs[v]||"")[0]||{}).type,D=(Lc(r[v]||"")[0]||{}).type;E&&D&&E.toLowerCase()!==D.toLowerCase()&&p.push(`"${this.sourceUpdater_.codecs[v]}" -> "${r[v]}"`)}),p.length)return void this.excludePlaylist({playlistToExclude:this.media(),error:{message:`Codec switching not supported: ${p.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return r}{const p=Object.keys(l).reduce((v,E)=>(v&&(v+=", "),v+`${E} does not support codec(s): "${l[E].join(",")}"`),"")+".";this.excludePlaylist({playlistToExclude:this.media(),error:{internal:!0,message:p},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(r=>{const i=e[r];if(-1!==t.indexOf(i.id))return;t.push(i.id);const s=cC(this.main,i),l=[];s.audio&&!iP(s.audio)&&!wD(s.audio)&&l.push(`audio codec ${s.audio}`),s.video&&!iP(s.video)&&!wD(s.video)&&l.push(`video codec ${s.video}`),s.text&&"stpp.ttml.im1t"===s.text&&l.push(`text codec ${s.text}`),l.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${l.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],r=this.main().playlists,i=dA(Lc(e)),s=lU(i),l=i.video&&Lc(i.video)[0]||null,d=i.audio&&Lc(i.audio)[0]||null;Object.keys(r).forEach(p=>{const v=r[p];if(-1!==t.indexOf(v.id)||v.excludeUntil===1/0)return;t.push(v.id);const E=[],D=cC(this.mainPlaylistLoader_.main,v),j=lU(D);if(D.audio||D.video){if(j!==s&&E.push(`codec count "${j}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const F=D.video&&Lc(D.video)[0]||null,Q=D.audio&&Lc(D.audio)[0]||null;F&&l&&F.type.toLowerCase()!==l.type.toLowerCase()&&E.push(`video codec "${F.type}" !== "${l.type}"`),Q&&d&&Q.type.toLowerCase()!==d.type.toLowerCase()&&E.push(`audio codec "${Q.type}" !== "${d.type}"`)}E.length&&(v.excludeUntil=1/0,this.logger_(`excluding ${v.id}: ${E.join(" && ")}`))}})}updateAdCues_(e){let t=0;const r=this.seekable();r.length&&(t=r.start(0)),function(n,e,t=0){if(!n.segments)return;let i,r=t;for(let s=0;s<n.segments.length;s++){const l=n.segments[s];if(i||(i=A5(e,r+l.duration/2)),i){if("cueIn"in l){i.endTime=r,i.adEndTime=r,r+=l.duration,i=null;continue}if(r<i.endTime){r+=l.duration;continue}i.endTime+=l.duration}else if("cueOut"in l&&(i=new(be().VTTCue)(r,r+l.duration,l.cueOut),i.adStartTime=r,i.adEndTime=r+parseFloat(l.cueOut),e.addCue(i)),"cueOutCont"in l){const[d,p]=l.cueOutCont.split("/").map(parseFloat);i=new(be().VTTCue)(r,r+l.duration,""),i.adStartTime=r-d,i.adEndTime=i.adStartTime+p,e.addCue(i)}r+=l.duration}}(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Ps.GOAL_BUFFER_LENGTH,r=Ps.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Ps.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*r,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Ps.BUFFER_LOW_WATER_LINE,r=Ps.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Ps.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Ps.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*r,this.bufferBasedABR?s:i)}bufferHighWaterLine(){return Ps.BUFFER_HIGH_WATER_LINE}}class X5{constructor(e,t,r){const{playlistController_:i}=e,s=i.fastQualityChange_.bind(i);if(t.attributes){const l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=cC(i.main(),t),this.playlist=t,this.id=r,this.enabled=((n,e,t)=>r=>{const i=n.main.playlists[e],s=mR(i),l=lA(i);return typeof r>"u"?l:(r?delete i.disabled:i.disabled=!0,r!==l&&!s&&(t(),n.trigger(r?"renditionenabled":"renditiondisabled")),r)})(e.playlists,t.id,s)}}const xU=["seeking","seeked","pause","playing","error"];class ez{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Tu("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),l=this.playlistController_,d=["main","subtitle","audio"],p={};d.forEach(E=>{p[E]={reset:()=>this.resetSegmentDownloads_(E),updateend:()=>this.checkSegmentDownloads_(E)},l[`${E}SegmentLoader_`].on("appendsdone",p[E].updateend),l[`${E}SegmentLoader_`].on("playlistupdate",p[E].reset),this.tech_.on(["seeked","seeking"],p[E].reset)});const v=E=>{["main","audio"].forEach(D=>{l[`${D}SegmentLoader_`][E]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),v("off"))},this.clearSeekingAppendCheck_=()=>v("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),v("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(xU,s),this.tech_.on("canplay",r),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(xU,s),this.tech_.off("canplay",r),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),d.forEach(E=>{l[`${E}SegmentLoader_`].off("appendsdone",p[E].updateend),l[`${E}SegmentLoader_`].off("playlistupdate",p[E].reset),this.tech_.off(["seeked","seeking"],p[E].reset)}),this.checkCurrentTimeTimeout_&&be().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&be().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=be().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,r=t[`${e}SegmentLoader_`],i=r.buffered_(),s=function(n,e){if(n===e)return!1;if(!n&&e||!e&&n||n.length!==e.length)return!0;for(let t=0;t<n.length;t++)if(n.start(t)!==e.start(t)||n.end(t)!==e.end(t))return!0;return!1}(this[`${e}Buffered_`],i);this[`${e}Buffered_`]=i,s?this.resetSegmentDownloads_(e):(this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:Py(i)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Gc>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),r=this.tech_.currentTime();let s;if(this.afterSeekableWindow_(t,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,r)){const Q=t.start(0);s=Q+(Q===t.end(0)?0:Gc)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${w2(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const l=this.playlistController_.sourceUpdater_,d=this.tech_.buffered(),p=l.audioBuffer?l.audioBuffered():null,v=l.videoBuffer?l.videoBuffered():null,E=this.media(),D=E.partTargetDuration?E.partTargetDuration:2*(E.targetDuration-Qp),j=[p,v];for(let Q=0;Q<j.length;Q++)if(j[Q]&&fR(j[Q],r)<D)return!1;const F=aA(d,r);return 0!==F.length&&(s=F.start(0)+Gc,this.logger_(`Buffered region starts (${F.start(0)})  just beyond seek point (${r}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),r=F0(t,e);return r.length&&e+3<=r.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const d=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${d}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(d),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const r=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const l=aA(i,t);return l.length>0&&(this.logger_(`Stopped at ${t} and seeking to ${l.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}afterSeekableWindow_(e,t,r,i=!1){if(!e.length)return!1;let s=e.end(e.length-1)+Gc;return!r.endList&&i&&(s=e.end(e.length-1)+3*r.targetDuration),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:r}){if(!e)return;let i;if(e.length&&t.length){const s=F0(e,r-3),l=F0(e,r),d=F0(t,r);d.length&&!l.length&&s.length&&(i={start:s.end(0),end:d.end(0)})}else aA(e,r).length||(i=this.gapFromVideoUnderflow_(e,r));return!!i&&(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${r}`),!0)}skipTheGap_(e){const t=this.tech_.buffered(),r=this.tech_.currentTime(),i=aA(t,r);this.resetTimeUpdate_(),0!==i.length&&r===e&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+Qp),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){const r=function(n){if(n.length<2)return ao();const e=[];for(let t=1;t<n.length;t++){const r=n.end(t-1),i=n.start(t);e.push([r,i])}return ao(e)}(e);for(let i=0;i<r.length;i++){const s=r.start(i),l=r.end(i);if(t-s<4&&t-s>2)return{start:s,end:l}}return null}}const tz={errorInterval:30,getSource(n){return n(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},IU=function(n,e){let t=0,r=0;const i=jr(tz,e);n.ready(()=>{n.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){r&&n.currentTime(r)},l=function(E){null!=E&&(r=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",s),n.src(E),n.trigger({type:"usage",name:"vhs-error-reload"}),n.play())},d=function(){if(Date.now()-t<1e3*i.errorInterval)n.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(i.getSource&&"function"==typeof i.getSource)return t=Date.now(),i.getSource.call(n,l);tt.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},p=function(){n.off("loadedmetadata",s),n.off("error",d),n.off("dispose",p)};n.on("error",d),n.on("dispose",p),n.reloadSourceOnError=function(E){p(),IU(n,E)}},Fo={PlaylistLoader:j0,Playlist:ca,utils:Eq,STANDARD_PLAYLIST_SELECTOR:dU,INITIAL_PLAYLIST_SELECTOR:function(){const n=this.playlists.main.playlists.filter(ca.isEnabled);return U0(n,(t,r)=>AR(t,r)),n.filter(t=>!!cC(this.playlists.main,t).video)[0]||null},lastBandwidthSelector:dU,movingAverageBandwidthSelector:function(n){let e=-1,t=-1;if(n<0||n>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const r=this.useDevicePixelRatio&&be().devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=n*this.systemBandwidth+(1-n)*e,t=this.systemBandwidth),cU(this.playlists.main,e,parseInt(fA(this.tech_.el(),"width"),10)*r,parseInt(fA(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:AR,comparePlaylistResolution:function(n,e){let t,r;return n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(t=n.attributes.RESOLUTION.width),t=t||be().Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||be().Number.MAX_VALUE,t===r&&n.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?n.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-r},xhr:V2()};Object.keys(Ps).forEach(n=>{Object.defineProperty(Fo,n,{get:()=>(tt.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),Ps[n]),set(e){tt.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),"number"!=typeof e||e<0?tt.log.warn(`value of Vhs.${n} must be greater than or equal to 0`):Ps[n]=e}})});const AU="videojs-vhs",kU=function(n,e){const t=e.media();let r=-1;for(let i=0;i<n.length;i++)if(n[i].id===t.id){r=i;break}n.selectedIndex_=r,n.trigger({selectedIndex:r,type:"change"})};Fo.canPlaySource=function(){return tt.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const MU=()=>{if(!be().localStorage)return null;const n=be().localStorage.getItem(AU);if(!n)return null;try{return JSON.parse(n)}catch{return null}};Fo.supportsNativeHls=function(){if(!Mt()||!Mt().createElement)return!1;const n=Mt().createElement("video");return!!tt.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(n.canPlayType(t))})}(),Fo.supportsNativeDash=!!(Mt()&&Mt().createElement&&tt.getTech("Html5").isSupported())&&/maybe|probably/i.test(Mt().createElement("video").canPlayType("application/dash+xml")),Fo.supportsTypeNatively=n=>"hls"===n?Fo.supportsNativeHls:"dash"===n&&Fo.supportsNativeDash,Fo.isSupported=function(){return tt.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const pz=tt.getComponent("Component");class PU extends pz{constructor(e,t,r){if(super(t,r.vhs),"number"==typeof r.initialBandwidth&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=Tu("VhsHandler"),t.options_&&t.options_.playerId){const i=tt.getPlayer(t.options_.playerId);this.player_=i}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Mt(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const s=Mt().fullscreenElement||Mt().webkitFullscreenElement||Mt().mozFullScreenElement||Mt().msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const e=MU();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Ps.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ps.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(e=>{typeof this.source_[e]<"u"&&(this.options_[e]=this.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=(n=>0===n.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n)(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Fo,this.options_.sourceType=_F(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.playlistController_=new Y5(this.options_);const r=jr({liveRangeSafeTimeDelta:Gc},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new ez(r),this.playlistController_.on("error",()=>{const s=tt.players[this.tech_.options_.playerId];let l=this.playlistController_.error;"object"!=typeof l||l.code?"string"==typeof l&&(l={message:l,code:3}):l.code=3,s.error(l)});const i=this.options_.bufferBasedABR?Fo.movingAverageBandwidthSelector(.55):Fo.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=Fo.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const l=be().navigator.connection||be().navigator.mozConnection||be().navigator.webkitConnection,d=1e7;if(this.options_.useNetworkInformationApi&&l){const p=1e3*l.downlink*1e3;s=p>=d&&s>=d?Math.max(s,p):p}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){let l;return l=this.throughput>0?1/this.throughput:0,Math.floor(1/(1/(this.bandwidth||1)+l))},set(){tt.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Py(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Py(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&(n=>{if(!be().localStorage)return!1;let e=MU();e=e?jr(e,n):n;try{be().localStorage.setItem(AU,JSON.stringify(e))}catch{return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{!function(n){n.representations=()=>{const e=n.playlistController_.main(),t=lC(e)?n.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(r=>!mR(r)).map((r,i)=>new X5(n,r,r.id)):[]}}(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=be().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:n,sourceKeySystems:e,audioMedia:t,mainPlaylists:r})=>{if(!n.eme.initializeMediaKeys)return Promise.resolve();const s=((n,e)=>n.reduce((t,r)=>{if(!r.contentProtection)return t;const i=e.reduce((s,l)=>{const d=r.contentProtection[l];return d&&d.pssh&&(s[l]={pssh:d.pssh}),s},{});return Object.keys(i).length&&t.push(i),t},[]))(t?r.concat([t]):r,Object.keys(e)),l=[],d=[];return s.forEach(p=>{d.push(new Promise((v,E)=>{n.tech_.one("keysessioncreated",v)})),l.push(new Promise((v,E)=>{n.eme.initializeMediaKeys({keySystems:p},D=>{D?E(D):v()})}))}),Promise.race([Promise.all(l),Promise.race(d)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=(({player:n,sourceKeySystems:e,media:t,audioMedia:r})=>{const i=((n,e,t)=>{if(!n)return n;let r={};e&&e.attributes&&e.attributes.CODECS&&(r=dA(Lc(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(r.audio=t.attributes.CODECS);const i=Gw(r.video),s=Gw(r.audio),l={};for(const d in n)l[d]={},s&&(l[d].audioContentType=s),i&&(l[d].videoContentType=i),e.contentProtection&&e.contentProtection[d]&&e.contentProtection[d].pssh&&(l[d].pssh=e.contentProtection[d].pssh),"string"==typeof n[d]&&(l[d].url=n[d]);return jr(n,l)})(e,t,r);return!(!i||(n.currentSource().keySystems=i,i&&!n.eme&&(tt.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",r=>{if("output-restricted"!==r.status)return;const i=this.playlistController_.main();if(!i||!i.playlists)return;const s=[];i.playlists.forEach(l=>{l&&l.attributes&&l.attributes.RESOLUTION&&l.attributes.RESOLUTION.height>=720&&(!l.excludeUntil||l.excludeUntil<1/0)&&(l.excludeUntil=1/0,s.push(l))}),s.length&&(tt.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...s),this.playlistController_.fastQualityChange_())}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==tt.browser.IE_VERSION&&t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=tt.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{!function(n,e){e.representations().forEach(t=>{n.addQualityLevel(t)}),kU(n,e.playlists)}(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{kU(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":"3.0.0","mux.js":"6.2.0","mpd-parser":"1.0.1","m3u8-parser":"6.0.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return bU.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&be().URL.revokeObjectURL&&(be().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return(({playlist:n,time:e,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!n||void 0===e)return t({message:"getProgramTime: playlist and time must be provided"});const r=((n,e)=>{if(!e||!e.segments||0===e.segments.length)return null;let r,t=0;for(let s=0;s<e.segments.length&&(r=e.segments[s],t=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:t+r.duration,!(n<=t));s++);const i=e.segments[e.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<n)return null;if(n>t){if(n>t+.25*i.duration)return null;r=i}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:t-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}})(e,n);if(!r)return t({message:"valid programTime was not found"});if("estimate"===r.type)return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const i={mediaSeconds:e},s=((n,e)=>{if(!e.dateTimeObject)return null;const s=n-(e.videoTimingInfo.transmuxedPresentationStart+e.videoTimingInfo.transmuxerPrependedSeconds);return new Date(e.dateTimeObject.getTime()+1e3*s)})(e,r.segment);return s&&(i.programDateTime=s.toISOString()),t(null,i)})({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,r=!0,i=2){return q2({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}const RR={name:"videojs-http-streaming",VERSION:"3.0.0",canHandleSource(n,e={}){const t=jr(tt.options,e);return RR.canPlayType(n.type,t)},handleSource(n,e,t={}){const r=jr(tt.options,t);return e.vhs=new PU(n,e,r),e.vhs.xhr=V2(),e.vhs.src(n.src,n.type),e.vhs},canPlayType(n,e={}){const{vhs:{overrideNative:t=!tt.browser.IS_ANY_SAFARI}={}}=jr(tt.options,e),r=_F(n);return!r||Fo.supportsTypeNatively(r)&&!t?"":"maybe"}};wD("avc1.4d400d,mp4a.40.2")&&tt.getTech("Html5").registerSourceHandler(RR,0),tt.VhsHandler=PU,tt.VhsSourceHandler=RR,tt.Vhs=Fo,tt.use||tt.registerComponent("Vhs",Fo),tt.options.vhs=tt.options.vhs||{},(!tt.getPlugin||!tt.getPlugin("reloadSourceOnError"))&&tt.registerPlugin("reloadSourceOnError",function(n){IU(this,n)});const RU="firebasestorage.googleapis.com",OU="storageBucket";class Di extends Ct.ZR{constructor(e,t,r=0){super(OR(e),`Firebase Storage: ${t} (${OR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Di.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return OR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function OR(n){return"storage/"+n}function NR(){return new Di("unknown","An unknown error occurred, please check the error payload for server response.")}function NU(){return new Di("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function LU(){return new Di("canceled","User canceled the upload/download.")}function FU(){return new Di("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $0(n){return new Di("invalid-argument",n)}function jU(){return new Di("app-deleted","The Firebase app was deleted.")}function UU(n){return new Di("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fC(n,e){return new Di("invalid-format","String does not match format '"+n+"': "+e)}function pC(n){throw new Di("internal-error","Internal error: "+n)}class lo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=lo.makeFromUrl(e,t)}catch{return new lo(e,"")}if(""===r.path)return r;throw function Sz(n){return new Di("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Le){Le.path_=decodeURIComponent(Le.path)}const D=t.replace(/[.]/g,"\\."),Qe=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Le){"/"===Le.path.charAt(Le.path.length-1)&&(Le.path_=Le.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===RU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Le=0;Le<Qe.length;Le++){const Ae=Qe[Le],ct=Ae.regex.exec(e);if(ct){let _n=ct[Ae.indices.path];_n||(_n=""),r=new lo(ct[Ae.indices.bucket],_n),Ae.postModify(r);break}}if(null==r)throw function Cz(n){return new Di("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class kz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function yA(n){return"string"==typeof n||n instanceof String}function VU(n){return LR()&&n instanceof Blob}function LR(){return typeof Blob<"u"&&!(0,Ct.UG)()}function FR(n,e,t,r){if(r<e)throw $0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw $0(`Invalid value for '${n}'. Expected ${t} or less.`)}function Fh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function BU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Xp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Xp||(Xp={})),Xp))();function $U(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class Lz{constructor(e,t,r,i,s,l,d,p,v,E,D,j=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=v,this.progressCallback_=E,this.connectionFactory_=D,this.retry=j,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,Q)=>{this.resolve_=F,this.reject_=Q,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function Rz(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==d){const p=NR();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(i.canceled?this.appDelete_?jU():LU():NU())};this.canceled_?t(0,new vA(!1,null,!0)):this.backoffId_=function Mz(n,e,t){let r=1,i=null,s=null,l=!1,d=0;function p(){return 2===d}let v=!1;function E(...ue){v||(v=!0,e.apply(null,ue))}function D(ue){i=setTimeout(()=>{i=null,n(F,p())},ue)}function j(){s&&clearTimeout(s)}function F(ue,...Ve){if(v)return void j();if(ue)return j(),void E.call(null,ue,...Ve);if(p()||l)return j(),void E.call(null,ue,...Ve);let Qe;r<64&&(r*=2),1===d?(d=2,Qe=0):Qe=1e3*(r+Math.random()),D(Qe)}let Q=!1;function ne(ue){Q||(Q=!0,j(),!v&&(null!==i?(ue||(d=2),clearTimeout(i),D(0)):ue||(d=1)))}return D(0),s=setTimeout(()=>{l=!0,ne(!0)},t),ne}((r,i)=>{if(i)return void r(!1,new vA(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const d=s.getErrorCode()===Xp.NO_ERROR,p=s.getStatus();if((!d||$U(p,this.additionalRetryCodes_))&&this.retry){const E=s.getErrorCode()===Xp.ABORT;return void r(!1,new vA(!1,null,E))}const v=-1!==this.successCodes_.indexOf(p);r(!0,new vA(v,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Pz(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class vA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Hz(...n){const e=function $z(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(LR())return new Blob(n);throw new Di("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Wa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jR{constructor(e,t){this.data=e,this.contentType=t||null}}function UR(n,e){switch(n){case Wa.RAW:return new jR(HU(e));case Wa.BASE64:case Wa.BASE64URL:return new jR(GU(n,e));case Wa.DATA_URL:return new jR(function Wz(n){const e=new qU(n);return e.base64?GU(Wa.BASE64,e.rest):function zz(n){let e;try{e=decodeURIComponent(n)}catch{throw fC(Wa.DATA_URL,"Malformed data URL.")}return HU(e)}(e.rest)}(e),function Kz(n){return new qU(n).contentType}(e))}throw NR()}function HU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function GU(n,e){switch(n){case Wa.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw fC(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wa.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw fC(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function qz(n){if(typeof atob>"u")throw function Az(n){return new Di("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:fC(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class qU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw fC(Wa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Zz(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Wc{constructor(e,t){let r=0,i="";VU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(VU(this.data_)){const i=function Gz(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Wc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Wc(r,!0)}}static getBlob(...e){if(LR()){const t=e.map(r=>r instanceof Wc?r.data_:r);return new Wc(Hz.apply(null,t))}{const t=e.map(l=>yA(l)?UR(Wa.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[s++]=l[d]}),new Wc(i,!0)}}uploadData(){return this.data_}}function VR(n){let e;try{e=JSON.parse(n)}catch{return null}return function Nz(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function zU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Xz(n,e){return e}class jo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Xz}}let _A=null;function gC(){if(_A)return _A;const n=[];n.push(new jo("bucket")),n.push(new jo("generation")),n.push(new jo("metageneration")),n.push(new jo("name","fullPath",!0));const t=new jo("name");t.xform=function e(s,l){return function Jz(n){return!yA(n)||n.length<2?n:zU(n)}(l)},n.push(t);const i=new jo("size");return i.xform=function r(s,l){return void 0!==l?Number(l):l},n.push(i),n.push(new jo("timeCreated")),n.push(new jo("updated")),n.push(new jo("md5Hash",null,!0)),n.push(new jo("cacheControl",null,!0)),n.push(new jo("contentDisposition",null,!0)),n.push(new jo("contentEncoding",null,!0)),n.push(new jo("contentLanguage",null,!0)),n.push(new jo("contentType",null,!0)),n.push(new jo("metadata","customMetadata",!0)),_A=n,_A}function WU(n,e,t){const r=VR(e);return null===r?null:function tW(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const l=t[s];r[l.local]=l.xform(r,e[l.server])}return function eW(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new lo(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function BR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const KU="prefixes";class Kc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Zc(n){if(!n)throw NR()}function bA(n,e){return function t(r,i){const s=WU(n,i,e);return Zc(null!==s),s}}function H0(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Ez(){return new Di("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Tz(){return new Di("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function bz(n){return new Di("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function wz(n){return new Di("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function mC(n){const e=H0(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function _z(n){return new Di("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function YU(n,e,t){const i=Fh(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Kc(i,"GET",bA(n,t),l);return d.errorHandler=mC(e),d}function aW(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const d=Fh(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,E=new Kc(d,"GET",function sW(n,e){return function t(r,i){const s=function iW(n,e,t){const r=VR(t);return null===r?null:function rW(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[KU])for(const i of t[KU]){const s=i.replace(/\/$/,""),l=n._makeStorageReference(new lo(e,s));r.prefixes.push(l)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new lo(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Zc(null!==s),s}}(n,e.bucket),v);return E.urlParams=s,E.errorHandler=H0(e),E}function XU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function dW(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class TA{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function $R(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Zc(!1)}return Zc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const gW={STATE_CHANGED:"state_changed"},Uo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function HR(n){switch(n){case"running":case"pausing":case"canceling":return Uo.RUNNING;case"paused":return Uo.PAUSED;case"success":return Uo.SUCCESS;case"canceled":return Uo.CANCELED;default:return Uo.ERROR}}class mW{constructor(e,t,r){if(function Oz(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function G0(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class vW extends class yW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw pC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Eu(){return new vW}class nV{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=gC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if($U(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=NU()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function hW(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l=XU(e,r,i),d={name:l.fullPath},p=Fh(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=BR(l,t),Q=new Kc(p,"POST",function F(ne){let ue;$R(ne);try{ue=ne.getResponseHeader("X-Goog-Upload-URL")}catch{Zc(!1)}return Zc(yA(ue)),ue},n.maxUploadRetryTime);return Q.urlParams=d,Q.headers=E,Q.body=D,Q.errorHandler=H0(e),Q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Eu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function fW(n,e,t,r){const p=new Kc(t,"POST",function s(v){const E=$R(v,["active","final"]);let D=null;try{D=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zc(!1)}D||Zc(!1);const j=Number(D);return Zc(!isNaN(j)),new TA(j,r.size(),"final"===E)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=H0(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Eu,t,r);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new TA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let l;try{l=function pW(n,e,t,r,i,s,l,d){const p=new TA(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function Iz(){return new Di("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=p.total-p.current;let E=v;i>0&&(E=Math.min(E,i));const D=p.current;let F="";F=0===E?"finalize":v===E?"upload, finalize":"upload";const Q={"X-Goog-Upload-Command":F,"X-Goog-Upload-Offset":`${p.current}`},ne=r.slice(D,D+E);if(null===ne)throw FU();const Qe=new Kc(t,"POST",function ue(Le,Ae){const ct=$R(Le,["active","final"]),kt=p.current+E,_n=r.size();let $n;return $n="final"===ct?bA(e,s)(Le,Ae):null,new TA(kt,_n,"final"===ct,$n)},e.maxUploadRetryTime);return Qe.headers=Q,Qe.body=ne.uploadData(),Qe.progressCallback=d||null,Qe.errorHandler=H0(n),Qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(l,Eu,i,s,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=YU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Eu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function JU(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let Qe="";for(let Le=0;Le<2;Le++)Qe+=Math.random().toString().slice(2);return Qe}();l["Content-Type"]="multipart/related; boundary="+p;const v=XU(e,r,i),E=BR(v,t),F=Wc.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+p+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===F)throw FU();const Q={name:v.fullPath},ne=Fh(s,n.host,n._protocol),Ve=n.maxUploadRetryTime,We=new Kc(ne,"POST",bA(n,t),Ve);return We.urlParams=Q,We.headers=l,We.body=F.uploadData(),We.errorHandler=H0(e),We}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Eu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=LU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=HR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new mW(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(HR(this._state)){case Uo.SUCCESS:G0(this._resolve.bind(null,this.snapshot))();break;case Uo.CANCELED:case Uo.ERROR:G0(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(HR(this._state)){case Uo.RUNNING:case Uo.PAUSED:e.next&&G0(e.next.bind(e,this.snapshot))();break;case Uo.SUCCESS:e.complete&&G0(e.complete.bind(e))();break;default:e.error&&G0(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ry{constructor(e,t){this._service=e,this._location=t instanceof lo?t:lo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ry(e,t)}get root(){const e=new lo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zU(this._location.path)}get storage(){return this._service}get parent(){const e=function Yz(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new lo(this._location.bucket,e);return new Ry(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw UU(e)}}function iV(n,e,t){return GR.apply(this,arguments)}function GR(){return GR=(0,De.Z)(function*(n,e,t){const i=yield sV(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield iV(n,e,i.nextPageToken))}),GR.apply(this,arguments)}function sV(n,e){null!=e&&"number"==typeof e.maxResults&&FR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=aW(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Eu)}function kW(n){n._throwIfRoot("getDownloadURL");const e=function lW(n,e,t){const i=Fh(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Kc(i,"GET",function oW(n,e){return function t(r,i){const s=WU(n,i,e);return Zc(null!==s),function nW(n,e,t,r){const i=VR(e);if(null===i||!yA(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(v=>{const D=n.fullPath;return Fh("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+BU({alt:"media",token:v})})[0]}(s,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=mC(e),d}(n.storage,n._location,gC());return n.storage.makeRequestWithTokens(e,Eu).then(t=>{if(null===t)throw function Dz(){return new Di("no-download-url","The given file does not have any download URLs.")}();return t})}function oV(n,e){const t=function Qz(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new lo(n._location.bucket,t);return new Ry(n.storage,r)}function aV(n,e){if(n instanceof qR){const t=n;if(null==t._bucket)throw function xz(){return new Di("no-default-bucket","No default bucket found. Did you set the '"+OU+"' property when initializing the app?")}();const r=new Ry(t,t._bucket);return null!=e?aV(r,e):r}return void 0!==e?oV(n,e):n}function OW(n,e){if(e&&function PW(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof qR)return function RW(n,e){return new Ry(n,e)}(n,e);throw $0("To use ref(service, url), the first argument must be a Storage instance.")}return aV(n,e)}function lV(n,e){const t=e?.[OU];return null==t?null:lo.makeFromBucketSpec(t,n)}class qR{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=RU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?lo.makeFromBucketSpec(i,this._host):lV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?lo.makeFromBucketSpec(this._url,e):lV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,De.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,De.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ry(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new kz(jU());{const l=function Bz(n,e,t,r,i,s,l=!0){const d=BU(n.urlParams),p=n.url+d,v=Object.assign({},n.headers);return function Uz(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function Fz(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function jz(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,s),function Vz(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new Lz(p,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,De.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const uV="@firebase/storage";function hV(n,e){return OW(n=(0,Ct.m9)(n),e)}function GW(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new qR(t,r,i,e,Ut.SDK_VERSION)}!function qW(){(0,Ut._registerComponent)(new mn.wA("storage",GW,"PUBLIC").setMultipleInstances(!0)),(0,Ut.registerVersion)(uV,"0.10.0",""),(0,Ut.registerVersion)(uV,"0.10.0","esm2017")}();class EA{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class pV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new EA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new EA(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?l=>t(new EA(l,this,this._ref)):{next:t.next?l=>t.next(new EA(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class gV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new jh(e,this._service))}get items(){return this._delegate.items.map(e=>new jh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function HW(n,e){return oV(n,e)}(this._delegate,e);return new jh(t,this.storage)}get root(){return new jh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new jh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new pV(function LW(n,e,t){return function SW(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new nV(n,new Wc(e),t)}(n=(0,Ct.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Wa.RAW,r){this._throwIfRoot("putString");const i=UR(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new pV(new nV(this._delegate,new Wc(i.data,!0),s),this)}listAll(){return function VW(n){return function IW(n){const e={prefixes:[],items:[]};return iV(n,e).then(()=>e)}(n=(0,Ct.m9)(n))}(this._delegate).then(e=>new gV(e,this.storage))}list(e){return function UW(n,e){return sV(n=(0,Ct.m9)(n),e)}(this._delegate,e||void 0).then(t=>new gV(t,this.storage))}getMetadata(){return function FW(n){return function DW(n){n._throwIfRoot("getMetadata");const e=YU(n.storage,n._location,gC());return n.storage.makeRequestWithTokens(e,Eu)}(n=(0,Ct.m9)(n))}(this._delegate)}updateMetadata(e){return function jW(n,e){return function AW(n,e){n._throwIfRoot("updateMetadata");const t=function uW(n,e,t,r){const s=Fh(e.fullServerUrl(),n.host,n._protocol),d=BR(t,r),v=n.maxOperationRetryTime,E=new Kc(s,"PATCH",bA(n,r),v);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=d,E.errorHandler=mC(e),E}(n.storage,n._location,e,gC());return n.storage.makeRequestWithTokens(t,Eu)}(n=(0,Ct.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function BW(n){return kW(n=(0,Ct.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function $W(n){return function MW(n){n._throwIfRoot("deleteObject");const e=function cW(n,e){const r=Fh(e.fullServerUrl(),n.host,n._protocol),d=new Kc(r,"DELETE",function l(p,v){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=mC(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Eu)}(n=(0,Ct.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw UU(e)}}class mV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(yV(e))throw $0("ref() expected a child path but got a URL, use refFromURL instead.");return new jh(hV(this._delegate,e),this)}refFromURL(e){if(!yV(e))throw $0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{lo.makeFromUrl(e,this._delegate.host)}catch{throw $0("refFromUrl() expected a valid full URL but got an invalid one.")}return new jh(hV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function fV(n,e,t,r={}){!function NW(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Ct.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function yV(n){return/^[A-Za-z]+:\/\//.test(n)}function ZW(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new mV(t,r)}function vV(n){const e=function QW(n){return new mr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(function gz(n,e=js.z){return(0,Gr.e)((t,r)=>{let i=null,s=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const v=s;s=null,r.next(v)}};function p(){const v=l+n,E=e.now();if(E<v)return i=this.schedule(void 0,v-E),void r.add(i);d()}t.subscribe((0,vi.x)(r,v=>{s=v,l=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Zt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function wA(n){return{getDownloadURL:()=>Ot(void 0).pipe(rr.fc,cr(()=>n.getDownloadURL()),rr.iC),getMetadata:()=>Ot(void 0).pipe(rr.fc,cr(()=>n.getMetadata()),rr.iC),delete:()=>(0,Un.D)(n.delete()),child:e=>wA(n.child(e)),updateMetadata:e=>(0,Un.D)(n.updateMetadata(e)),put:(e,t)=>vV(n.put(e,t)),putString:(e,t,r)=>vV(n.putString(e,t,r)),list:e=>(0,Un.D)(n.list(e)),listAll:()=>(0,Un.D)(n.listAll())}}!function YW(n){const e={TaskState:Uo,TaskEvent:gW,StringFormat:Wa,Storage:mV,Reference:jh};n.INTERNAL.registerComponent(new mn.wA("storage-compat",ZW,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.0")}(g.Z);const XW=new c.OlP("angularfire2.storageBucket"),JW=new c.OlP("angularfire2.storage.maxUploadRetryTime"),e7=new c.OlP("angularfire2.storage.maxOperationRetryTime"),t7=new c.OlP("angularfire2.storage.use-emulator");let zR=(()=>{class n{constructor(t,r,i,s,l,d,p,v,E,D){const j=(0,yi.on)(t,l,r);this.storage=(0,yi.cc)(`${j.name}.storage.${i}`,"AngularFireStorage",j.name,()=>{const F=l.runOutsideAngular(()=>j.storage(i||void 0)),Q=E;return Q&&F.useEmulator(...Q),p&&F.setMaxUploadRetryTime(p),v&&F.setMaxOperationRetryTime(v),F},[p,v])}ref(t){return wA(this.storage.ref(t))}refFromURL(t){return wA(this.storage.refFromURL(t))}upload(t,r,i){return wA(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(yi.Dh),c.LFG(yi.xv,8),c.LFG(XW,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(rr.HU),c.LFG(JW,8),c.LFG(e7,8),c.LFG(t7,8),c.LFG(wf,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),n7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),r7=(()=>{class n{constructor(){Aa.Z.registerVersion("angularfire",rr.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[zR],imports:[n7]}),n})(),yC=(()=>{class n{constructor(t,r,i,s){this.db=t,this.auth=r,this.storage=i,this.router=s,this.pageClips=[],this.pendingReq=!1,this.clipsCollection=t.collection("clips")}createClip(t){return this.clipsCollection.add(t)}getUserClips(){return this.auth.user.pipe(cr(t=>t?this.clipsCollection.ref.where("uid","==",t.uid).get():Ot([])),(0,Zt.U)(t=>t.docs))}editClip(t,r){return this.clipsCollection.doc(t).update({title:r})}deleteClip(t){var r=this;return(0,De.Z)(function*(){const i=r.storage.ref(`clips/${t.fileName}`);yield r.storage.ref(`screenshot/${t.screenshotFileName}`).delete(),yield i.delete(),yield r.clipsCollection.doc(t.docID).delete()})()}getClips(){var t=this;return(0,De.Z)(function*(){if(t.pendingReq)return;t.pendingReq=!0;let r=yield t.clipsCollection.ref.orderBy("timeStamp","desc").limit(6);const{length:i}=t.pageClips;if(i){const l=t.pageClips[i-1].docID,d=yield t.clipsCollection.doc(l).get().toPromise();r=r.startAfter(d)}(yield r.get()).forEach(l=>{t.pageClips.push({docID:l.id,...l.data()})}),t.pendingReq=!1})()}resolve(t,r){return this.clipsCollection.doc(t.params.id).get().pipe((0,Zt.U)(i=>i.data()||(this.router.navigate(["/"]),null)))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(TM),c.LFG(Xs),c.LFG(zR),c.LFG(xi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_V=(()=>{class n{constructor(t){this.datePipe=t}transform(t){if(!t)return"";const r=t.toDate();return this.datePipe.transform(r,"mediumDate")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(od,16))},n.\u0275pipe=c.Yjl({name:"fbTimestamp",type:n,pure:!0}),n})();const i7=function(n){return["/","clip",n]};function s7(n,e){if(1&n&&(c.TgZ(0,"a",2),c._UZ(1,"img",3),c.TgZ(2,"div",4)(3,"div",5)(4,"div",6),c.O4$(),c.TgZ(5,"svg",7),c._UZ(6,"path",8),c.qZA()()()(),c.kcU(),c.TgZ(7,"div",9)(8,"h2",10),c._uU(9),c.qZA(),c.TgZ(10,"p",11),c._uU(11),c.TgZ(12,"span",12),c._uU(13),c.ALo(14,"fbTimestamp"),c.qZA()()()()),2&n){const t=e.$implicit;c.Q6J("routerLink",c.VKq(7,i7,t.docID)),c.xp6(1),c.Q6J("src",t.screenshotURL,c.LSH),c.xp6(8),c.hij(" ",t.title," "),c.xp6(2),c.hij(" ",t.displayName," "),c.xp6(2),c.Oqu(c.lcZ(14,5,t.timeStamp))}}let bV=(()=>{class n{constructor(t){this.clipsService=t,this.scrollabe=!0,this.handleScroll=()=>{const{scrollTop:r,offsetHeight:i}=document.documentElement,{innerHeight:s}=window;Math.round(r)+s===i&&this.clipsService.getClips()},t.getClips()}ngOnInit(){this.scrollabe&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){this.scrollabe&&(window.removeEventListener("scroll",this.handleScroll),this.clipsService.pageClips=[])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(yC))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-clips-list"]],inputs:{scrollabe:"scrollabe"},features:[c._Bn([od])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.YNc(1,s7,15,9,"a",1),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngForOf",r.clipsService.pageClips))},dependencies:[cs,h0,_V]}),n})();const o7=["videoPlayer"],a7=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"video",1),c._UZ(2,"source",2),c.qZA(),c._UZ(3,"div",3),c.TgZ(4,"div",4),c._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),c.qZA(),c.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),c._uU(13,"Clip it and ship it!"),c.qZA(),c.TgZ(14,"p"),c._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),c.qZA()()()(),c.TgZ(16,"section",9)(17,"h1",10),c._uU(18," Latest "),c.qZA(),c._UZ(19,"app-clips-list"),c.qZA())},dependencies:[bV]}),n})()},{path:"about",component:L4},{path:"clip/:id",component:(()=>{class n{constructor(t){this.route=t,this.clip=null}ngOnInit(){this.player=tt(this.target?.nativeElement),this.route.data.subscribe(t=>{this.clip=t.clip,console.log(this.clip),this.player?.src({src:this.clip.url,type:"video/mp4"})}),console.log(this.clip?.url)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Nc))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-clip"]],viewQuery:function(t,r){if(1&t&&c.Gf(o7,7),2&t){let i;c.iGM(i=c.CRH())&&(r.target=i.first)}},features:[c._Bn([od])],decls:17,vars:6,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col","gap-4"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],["data-vjs-player","","crossorigin","",1,"relative","aspect-w-16","aspect-h-9","overflow-hidden"],["crossorigin","","controls","",1,"video-js","w-full","vjs-theme-forest","mx-auto","relative","overflow-hidden"],["videoPlayer",""],["type","",3,"src"],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollabe"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c._uU(5),c.TgZ(6,"span"),c._uU(7),c.ALo(8,"fbTimestamp"),c.qZA()(),c.TgZ(9,"div",4)(10,"video",5,6),c._UZ(12,"source",7),c.qZA()()()(),c.TgZ(13,"div",8)(14,"h2",9),c._uU(15,"More Clips"),c.qZA(),c._UZ(16,"app-clips-list",10),c.qZA()),2&t&&(c.xp6(3),c.Oqu(null==r.clip?null:r.clip.title),c.xp6(2),c.hij(" Uploaded By ",null==r.clip?null:r.clip.displayName," on "),c.xp6(2),c.Oqu(c.lcZ(8,4,null==r.clip?null:r.clip.timeStamp)),c.xp6(9),c.Q6J("scrollabe",!1))},dependencies:[bV,_V],styles:['.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:inline-block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%}.video-js.vjs-fluid:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-1-1:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;inset:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:50%;left:50%;padding:0;margin-top:-.81666em;margin-left:-1.5em;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar,.vjs-audio-only-mode .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js *:not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;line-height:.35em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{line-height:.35em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;cursor:pointer;margin:0;padding:0;position:absolute;inset:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster{display:block}.vjs-poster img{width:100%;height:100%;object-fit:contain}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.vjs-live .vjs-time-divider,.video-js .vjs-current-time,.video-js .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;inset:0 0 3em;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control{display:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}.vjs-title-bar{background:rgba(0,0,0,.9);background:linear-gradient(180deg,rgba(0,0,0,.9) 0%,rgba(0,0,0,.7) 60%,rgba(0,0,0,0) 100%);font-size:1.2em;line-height:1.5;transition:opacity .1s;padding:.666em 1.333em 4em;pointer-events:none;position:absolute;top:0;width:100%}.vjs-title-bar-title,.vjs-title-bar-description{margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vjs-title-bar-title{font-weight:700;margin-bottom:.333em}.vjs-playing.vjs-user-inactive .vjs-title-bar{opacity:0;transition:opacity 1s}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}.vjs-theme-forest{--vjs-theme-forest--primary: rgb(129,140,248)}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23818cf8\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.video-js .vjs-control-bar{height:6em}.vjs-button>.vjs-icon-placeholder:before{font-size:3.8em}.video-js .vjs-button{width:6em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:8em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:8em;height:6em;margin-right:0}.vjs-theme-forest .vjs-volume-bar:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-volume-level:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-progress-holder{height:2em}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{font-size:2em}.video-js .vjs-time-tooltip{top:-2em}.video-js .vjs-time-control{font-size:2em}\n'],encapsulation:2}),n})(),resolve:{clip:yC}},{path:"**",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"span",1),c._uU(2,"404"),c.qZA(),c._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),c.qZA(),c.TgZ(15,"div",14)(16,"h2",15),c._uU(17,"Page not found"),c.qZA(),c.TgZ(18,"p"),c._uU(19," Looks like the page you're looking for is gone or doesn't exist. "),c.qZA()())}}),n})()}];let l7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[TD.forRoot(a7),TD]}),n})();var u7=V(5032);function TV(n,e){return e?t=>iu(e.pipe(Ys(1),function c7(){return(0,Gr.e)((n,e)=>{n.subscribe((0,vi.x)(e,u7.Z))})}()),t.pipe(TV(n))):(0,Vs.z)((t,r)=>n(t,r).pipe(Ys(1),oL(t)))}var d7=V(3532);let KR=(()=>{class n{constructor(t,r,i,s){this.auth=t,this.db=r,this.router=i,this.route=s,this.isRedirect=!1,this.userCollection=this.db.collection("users"),this.isAuthenticated$=t.user.pipe((0,Zt.U)(l=>!!l)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function f7(n,e=js.z){const t=function WR(n=0,e,t=js.P){let r=-1;return null!=e&&((0,d7.K)(e)?t=e:r=e),new mr.y(i=>{let s=function h7(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e);return TV(()=>t)}(1e3)),i.events.pipe(Ni(l=>l instanceof Hp),(0,Zt.U)(l=>this.route.firstChild),cr(l=>l?.data??Ot({}))).subscribe(l=>this.isRedirect=l.authOnly??!1)}createUser(t){var r=this;return(0,De.Z)(function*(){const i=yield r.auth.createUserWithEmailAndPassword(t.email,t.password);yield r.userCollection.doc(i.user?.uid).set({name:t.name,email:t.email,phoneNumber:t.phoneNumber,age:t.age}),yield i.user?.updateProfile({displayName:t.name})})()}logout(t){var r=this;return(0,De.Z)(function*(){t&&t.preventDefault(),yield r.auth.signOut(),r.isRedirect&&(yield r.router.navigateByUrl("/"))})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xs),c.LFG(TM),c.LFG(xi),c.LFG(Nc))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vC=(()=>{class n{constructor(){this.modals=[]}register(t){this.modals.push({id:t,visible:!1})}unregister(t){this.modals=this.modals.filter(r=>r.id!==t)}isModalOpen(t){return!!this.modals.find(r=>r.id===t)?.visible}toggleModal(t){const r=this.modals.find(i=>i.id===t);r&&(r.visible=!r?.visible)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const p7=[[["","heading",""]],"*"],g7=function(n){return{hidden:n}},m7=["[heading]","*"];let EV=(()=>{class n{constructor(t,r){this.modalService=t,this.el=r,this.modalID=""}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vC),c.Y36(c.SBq))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:m7,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(c.F$t(p7),c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c.NdJ("click",function(){return r.modalService.toggleModal(r.modalID)}),c._UZ(3,"div",3),c.qZA(),c.TgZ(4,"span",4),c._uU(5,"\u200b"),c.qZA(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7),c.Hsn(9),c.TgZ(10,"div",8),c.NdJ("click",function(){return r.modalService.toggleModal(r.modalID)}),c._uU(11,"\u2715"),c.qZA()(),c.Hsn(12,1),c.qZA()()()()),2&t&&c.Q6J("ngClass",c.VKq(1,g7,!r.modalService.isModalOpen(r.modalID)))},dependencies:[On]}),n})();function y7(n,e){1&n&&(c.TgZ(0,"div"),c.Hsn(1),c.qZA())}const v7=["*"];let wV=(()=>{class n{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:v7,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(c.F$t(),c.YNc(0,y7,2,0,"div",0)),2&t&&c.Q6J("ngIf",r.active)},dependencies:[nr]}),n})();const _7=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white bg-indigo-400":e}};function b7(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",2)(1,"a",3),c.NdJ("click",function(){const s=c.CHM(t).$implicit,l=c.oxw();return c.KtG(l.selectTab(s))}),c._uU(2),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngClass",c.WLB(2,_7,!t.active,t.active)),c.xp6(1),c.Oqu(t.tabTitle)}}const T7=["*"];let E7=(()=>{class n{constructor(){this.tabs=new c.n_E}ngAfterContentInit(){this.selectTab(this.tabs.first)}selectTab(t){return this.tabs.forEach(r=>r.active=!1),t.active=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tab-container"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,wV,4),2&t){let s;c.iGM(s=c.CRH())&&(r.tabs=s)}},ngContentSelectors:T7,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"ul",0),c.YNc(1,b7,3,5,"li",1),c.qZA(),c.Hsn(2)),2&t&&(c.xp6(1),c.Q6J("ngForOf",r.tabs))},dependencies:[On,cs]}),n})();function ZR(...n){const e=(0,al.jO)(n),{args:t,keys:r}=XN(n),i=new mr.y(s=>{const{length:l}=t;if(!l)return void s.complete();const d=new Array(l);let p=l,v=l;for(let E=0;E<l;E++){let D=!1;(0,Ds.Xf)(t[E]).subscribe((0,vi.x)(s,j=>{D||(D=!0,v--),d[E]=j},()=>p--,void 0,()=>{(!p||!D)&&(v||s.next(r?JN(r,d):d),s.complete())}))}});return e?i.pipe(EM(e)):i}let CV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Oy=(()=>{class n extends CV{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Yc=new c.OlP("NgValueAccessor"),C7={provide:Yc,useExisting:(0,c.Gpc)(()=>_C),multi:!0},x7=new c.OlP("CompositionEventMode");let _C=(()=>{class n extends CV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function S7(){const n=U()?U().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(x7,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[c._Bn([C7]),c.qOj]}),n})();function Jp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function xV(n){return null!=n&&"number"==typeof n.length}const uo=new c.OlP("NgValidators"),eg=new c.OlP("NgAsyncValidators"),D7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Hs{static min(e){return function IV(n){return e=>{if(Jp(e.value)||Jp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function DV(n){return e=>{if(Jp(e.value)||Jp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return AV(e)}static requiredTrue(e){return function kV(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function MV(n){return Jp(n.value)||D7.test(n.value)?null:{email:!0}}(e)}static minLength(e){return PV(e)}static maxLength(e){return function RV(n){return e=>xV(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return OV(e)}static nullValidator(e){return null}static compose(e){return VV(e)}static composeAsync(e){return BV(e)}}function AV(n){return Jp(n.value)?{required:!0}:null}function PV(n){return e=>Jp(e.value)||!xV(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function OV(n){if(!n)return CA;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Jp(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function CA(n){return null}function NV(n){return null!=n}function LV(n){return(0,c.QGY)(n)?(0,Un.D)(n):n}function FV(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function jV(n,e){return e.map(t=>t(n))}function UV(n){return n.map(e=>function A7(n){return!n.validate}(e)?e:t=>e.validate(t))}function VV(n){if(!n)return null;const e=n.filter(NV);return 0==e.length?null:function(t){return FV(jV(t,e))}}function YR(n){return null!=n?VV(UV(n)):null}function BV(n){if(!n)return null;const e=n.filter(NV);return 0==e.length?null:function(t){return ZR(jV(t,e).map(LV)).pipe((0,Zt.U)(FV))}}function QR(n){return null!=n?BV(UV(n)):null}function $V(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function HV(n){return n._rawValidators}function GV(n){return n._rawAsyncValidators}function XR(n){return n?Array.isArray(n)?n:[n]:[]}function SA(n,e){return Array.isArray(n)?n.includes(e):n===e}function qV(n,e){const t=XR(e);return XR(n).forEach(i=>{SA(t,i)||t.push(i)}),t}function zV(n,e){return XR(e).filter(t=>!SA(n,t))}class WV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vo extends WV{get formDirective(){return null}get path(){return null}}class tg extends WV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class KV{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let JR=(()=>{class n extends KV{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(tg,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})(),bC=(()=>{class n extends KV{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Vo,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]}),n})();const TC="VALID",IA="INVALID",q0="PENDING",EC="DISABLED";function rO(n){return(DA(n)?n.validators:n)||null}function YV(n){return Array.isArray(n)?YR(n):n||null}function iO(n,e){return(DA(e)?e.asyncValidators:n)||null}function QV(n){return Array.isArray(n)?QR(n):n||null}function DA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class eB{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=YV(this._rawValidators),this._composedAsyncValidatorFn=QV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===TC}get invalid(){return this.status===IA}get pending(){return this.status==q0}get disabled(){return this.status===EC}get enabled(){return this.status!==EC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=YV(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=QV(e)}addValidators(e){this.setValidators(qV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zV(e,this._rawAsyncValidators))}hasValidator(e){return SA(this._rawValidators,e)}hasAsyncValidator(e){return SA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=q0,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=EC,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=TC,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===TC||this.status===q0)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?EC:TC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=q0,this._hasOwnPendingAsyncValidator=!0;const t=LV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?EC:this.errors?IA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(q0)?q0:this._anyControlsHaveStatus(IA)?IA:TC}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){DA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class z0 extends eB{constructor(e,t,r){super(rO(t),iO(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function JV(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new c.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function XV(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[t])throw new c.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function wC(n,e){sO(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function j7(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&tB(n,e)})}(n,e),function V7(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function U7(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&tB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function F7(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function kA(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),PA(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function MA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function sO(n,e){const t=HV(n);null!==e.validator?n.setValidators($V(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=GV(n);null!==e.asyncValidator?n.setAsyncValidators($V(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();MA(e._rawValidators,i),MA(e._rawAsyncValidators,i)}function PA(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=HV(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=GV(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return MA(e._rawValidators,r),MA(e._rawAsyncValidators,r),t}function tB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function nB(n,e){sO(n,e)}function oO(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function iB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function aO(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===_C?t=s:function H7(n){return Object.getPrototypeOf(n.constructor)===Oy}(s)?r=s:i=s}),i||r||t||null}const q7={provide:Vo,useExisting:(0,c.Gpc)(()=>RA)},CC=(()=>Promise.resolve())();let RA=(()=>{class n extends Vo{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new z0({},YR(t),QR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){CC.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),wC(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){CC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){CC.then(()=>{const r=this._findContainer(t.path),i=new z0({});nB(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){CC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){CC.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,iB(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(uo,10),c.Y36(eg,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([q7]),c.qOj]}),n})();function sB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function oB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const wu=class extends eB{constructor(e=null,t,r){super(rO(t),iO(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),DA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=oB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){oB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},K7={provide:tg,useExisting:(0,c.Gpc)(()=>lO)},uB=(()=>Promise.resolve())();let lO=(()=>{class n extends tg{constructor(t,r,i,s,l){super(),this._changeDetectorRef=l,this.control=new wu,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=aO(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),oO(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){wC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){uB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,c.D6c)(r);uB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function AA(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Vo,9),c.Y36(uo,10),c.Y36(eg,10),c.Y36(Yc,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([K7]),c.qOj,c.TTD]}),n})(),SC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),dB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const uO=new c.OlP("NgModelWithFormControlWarning"),J7={provide:tg,useExisting:(0,c.Gpc)(()=>cO)};let cO=(()=>{class n extends tg{constructor(t,r,i,s){super(),this._ngModelWarningConfig=s,this.update=new c.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=aO(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&kA(r,this,!1),wC(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}oO(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&kA(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(uo,10),c.Y36(eg,10),c.Y36(Yc,10),c.Y36(uO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[c._Bn([J7]),c.qOj,c.TTD]}),n})();const eK={provide:Vo,useExisting:(0,c.Gpc)(()=>W0)};let W0=(()=>{class n extends Vo{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(PA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return wC(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){kA(t.control||null,t,!1),function G7(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,iB(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(kA(r||null,t),(n=>n instanceof wu)(i)&&(wC(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);nB(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function B7(n,e){return PA(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){sO(this.form,this),this._oldForm&&PA(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(uo,10),c.Y36(eg,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([eK]),c.qOj,c.TTD]}),n})();const iK={provide:Yc,useExisting:(0,c.Gpc)(()=>fO),multi:!0};function mB(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let fO=(()=>{class n extends Oy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=mB(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function sK(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([iK]),c.qOj]}),n})(),yB=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(mB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(fO,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const oK={provide:Yc,useExisting:(0,c.Gpc)(()=>pO),multi:!0};function vB(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let pO=(()=>{class n extends Oy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,l)=>{s._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const l=s;for(let d=0;d<l.length;d++){const v=this._getOptionValue(l[d].value);i.push(v)}}else{const l=r.options;for(let d=0;d<l.length;d++){const p=l[d];if(p.selected){const v=this._getOptionValue(p.value);i.push(v)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function aK(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([oK]),c.qOj]}),n})(),_B=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(vB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(vB(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(pO,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let Ny=(()=>{class n{constructor(){this._validator=CA}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):CA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const cK={provide:uo,useExisting:(0,c.Gpc)(()=>OA),multi:!0};let OA=(()=>{class n extends Ny{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=c.D6c,this.createValidator=t=>AV}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([cK]),c.qOj]}),n})();const fK={provide:uo,useExisting:(0,c.Gpc)(()=>gO),multi:!0};let gO=(()=>{class n extends Ny{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>function bB(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>PV(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[c._Bn([fK]),c.qOj]}),n})();const gK={provide:uo,useExisting:(0,c.Gpc)(()=>mO),multi:!0};let mO=(()=>{class n extends Ny{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>OV(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[c._Bn([gK]),c.qOj]}),n})(),IB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[dB]}),n})(),mK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[IB]}),n})(),yO=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uO,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[IB]}),n})();const vK=["*"];let NA=(()=>{class n{constructor(){this.color=""}ngOnInit(){console.log(this.color)}get bgColor(){return`bg-${this.color}-400`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:vK,decls:2,vars:1,consts:[[1,"text-white","font-bold","p-5","mb-4","rounded-lg",3,"ngClass"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0),c.Hsn(1),c.qZA()),2&t&&c.Q6J("ngClass",r.bgColor)},dependencies:[On]}),n})();function _K(n,e){if(1&n&&(c.TgZ(0,"app-alert",11),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.Oqu(t.alertMsg)}}function bK(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Enter vaild email "),c.qZA())}function TK(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," The password need atleast 8 character long "),c.qZA())}let EK=(()=>{class n{constructor(t){this.auth=t,this.isSubmission=!1,this.showAlert=!1,this.alertColor="blue",this.alertMsg="",this.credentials={email:"",password:""}}ngOnInit(){}login(){var t=this;return(0,De.Z)(function*(){t.isSubmission=!0,t.showAlert=!0,t.alertColor="blue",t.alertMsg="Please Wait..! You are connecting to the server";try{yield t.auth.signInWithEmailAndPassword(t.credentials.email,t.credentials.password)}catch{return t.isSubmission=!1,t.alertColor="red",void(t.alertMsg="Oops..! Login failed...please enter valid Credentials")}t.alertColor="green",t.alertMsg="Yeeeeah.....Your are successfully LoggedIn...!"})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Xs))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["name","email","type","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["name","password","type","password","placeholder","Password","required","","minlength","8",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-60","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(c.YNc(0,_K,2,2,"app-alert",0),c.TgZ(1,"form",1,2),c.NdJ("ngSubmit",function(){return r.login()}),c.TgZ(3,"div",3)(4,"label",4),c._uU(5,"Email"),c.qZA(),c.TgZ(6,"input",5,6),c.NdJ("ngModelChange",function(s){return r.credentials.email=s}),c.qZA(),c.YNc(8,bK,2,0,"p",7),c.qZA(),c.TgZ(9,"div",3)(10,"label",4),c._uU(11,"Password"),c.qZA(),c.TgZ(12,"input",8,9),c.NdJ("ngModelChange",function(s){return r.credentials.password=s}),c.qZA(),c.YNc(14,TK,2,0,"p",7),c.qZA(),c.TgZ(15,"button",10),c._uU(16," Submit "),c.qZA()()),2&t){const i=c.MAs(2),s=c.MAs(7),l=c.MAs(13);c.Q6J("ngIf",r.showAlert),c.xp6(6),c.Q6J("ngModel",r.credentials.email),c.xp6(2),c.Q6J("ngIf",s.errors&&s.touched&&s.dirty),c.xp6(4),c.Q6J("ngModel",r.credentials.password),c.xp6(2),c.Q6J("ngIf",l.errors&&l.touched&&l.dirty),c.xp6(1),c.Q6J("disabled",i.invalid||r.isSubmission)}},dependencies:[nr,SC,_C,JR,bC,OA,gO,mO,NA,lO,RA]}),n})();class wK{static match(e,t){return r=>{let i=r.get(e),s=r.get(t);if(!i||!s)return{ControlNotFound:!0};const l=i.value===s.value?null:{noMatch:!0};return s.setErrors(l),l}}}let CK=(()=>{class n{constructor(t){this.auth=t,this.validate=r=>this.auth.fetchSignInMethodsForEmail(r.value).then(i=>i.length?{emailTaken:!0}:null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xs))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SK(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," The field is required "),c.qZA())}function xK(n,e){if(1&n&&(c.TgZ(0,"p",3),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.AsE(" The length of input field is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," character long. The field must need ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," character long ")}}function IK(n,e){if(1&n&&(c.TgZ(0,"p",3),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.hij(" Length can't be longer than ",null==t.control.errors?null:t.control.errors.maxlength.requiredLength," character. ")}}function DK(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Must enter valid email. "),c.qZA())}function AK(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Age must be minimum 18. "),c.qZA())}function kK(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Age must be maximum 120. "),c.qZA())}function MK(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Password must be least 8 characters, must contain at least 1 uppercase letter, 1 lowercase letter, and 1 number ,Can contain special characters "),c.qZA())}function PK(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Password do not match. "),c.qZA())}function RK(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," The email is Taken, Try another one. "),c.qZA())}function OK(n,e){if(1&n&&(c.ynx(0),c.YNc(1,SK,2,0,"p",2),c.YNc(2,xK,2,2,"p",2),c.YNc(3,IK,2,1,"p",2),c.YNc(4,DK,2,0,"p",2),c.YNc(5,AK,2,0,"p",2),c.YNc(6,kK,2,0,"p",2),c.YNc(7,MK,2,0,"p",2),c.YNc(8,PK,2,0,"p",2),c.YNc(9,RK,2,0,"p",2),c.BQk()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.maxlength),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.emailTaken)}}let vO=(()=>{class n{constructor(){this.control=new wu,this.type="text",this.placeholder=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder"},decls:2,vars:4,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(c._UZ(0,"input",0),c.YNc(1,OK,10,9,"ng-container",1)),2&t&&(c.s9C("type",r.type),c.MGl("placeholder"," ",r.placeholder,""),c.Q6J("formControl",r.control),c.xp6(1),c.Q6J("ngIf",r.control.touched&&r.control.dirty))},dependencies:[nr,_C,JR,cO]}),n})();function NK(n,e){if(1&n&&(c.TgZ(0,"app-alert",11),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.hij("\n",t.alertMsg,"\n")}}let LK=(()=>{class n{constructor(t,r){this.authService=t,this.EmailTaken=r,this.showAlert=!1,this.alertMsg="Please Wait! Your accont has been Created.",this.alertColor="blue",this.inSubmission=!1,this.name=new wu("",[Hs.required,Hs.minLength(3)]),this.email=new wu("",[Hs.required,Hs.email],[this.EmailTaken.validate]),this.age=new wu(null,[Hs.required,Hs.min(18),Hs.max(120)]),this.phoneNumber=new wu("",[Hs.required,Hs.minLength(10),Hs.maxLength(10)]),this.password=new wu("",[Hs.required,Hs.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirmPassword=new wu("",[Hs.required]),this.registerForm=new z0({name:this.name,age:this.age,email:this.email,phoneNumber:this.phoneNumber,password:this.password,confirmPassword:this.confirmPassword},[wK.match("password","confirmPassword")])}ngOnInit(){}register(){var t=this;return(0,De.Z)(function*(){t.inSubmission=!0,t.showAlert=!0,t.alertMsg="Please wait! Your account has been Created.",t.alertColor="blue";try{yield t.authService.createUser(t.registerForm.value)}catch{return t.alertColor="red",t.alertMsg="An unexpected error occured. Please try again",void(t.inSubmission=!1)}t.alertColor="green",t.alertMsg="Success..! Account successfully registered..."})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(KR),c.Y36(CK))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter Name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["placeholder","Enter Age","type","number",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Confirm Password",3,"control"],["type","number","placeholder","Enter Phone number",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","text-center","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-60","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(t,r){1&t&&(c.YNc(0,NK,2,2,"app-alert",0),c.TgZ(1,"form",1),c.NdJ("ngSubmit",function(){return r.register()}),c.TgZ(2,"div",2)(3,"label",3),c._uU(4,"Name"),c.qZA(),c._UZ(5,"app-input",4),c.qZA(),c.TgZ(6,"div",2)(7,"label",3),c._uU(8,"Email"),c.qZA(),c._UZ(9,"app-input",5),c.qZA(),c.TgZ(10,"div",2)(11,"label",3),c._uU(12,"Age"),c.qZA(),c._UZ(13,"app-input",6),c.qZA(),c.TgZ(14,"div",2)(15,"label",3),c._uU(16,"Password"),c.qZA(),c._UZ(17,"app-input",7),c.qZA(),c.TgZ(18,"div",2)(19,"label",3),c._uU(20,"Confirm Password"),c.qZA(),c._UZ(21,"app-input",8),c.qZA(),c.TgZ(22,"div",2)(23,"label",3),c._uU(24,"Phone Number"),c.qZA(),c._UZ(25,"app-input",9),c.qZA(),c.TgZ(26,"button",10),c._uU(27," Submit "),c.qZA()()),2&t&&(c.Q6J("ngIf",r.showAlert),c.xp6(1),c.Q6J("formGroup",r.registerForm),c.xp6(4),c.Q6J("control",r.name),c.xp6(4),c.Q6J("control",r.email),c.xp6(4),c.Q6J("control",r.age),c.xp6(4),c.Q6J("control",r.password),c.xp6(4),c.Q6J("control",r.confirmPassword),c.xp6(4),c.Q6J("control",r.phoneNumber),c.xp6(1),c.Q6J("disabled",r.registerForm.invalid||r.inSubmission))},dependencies:[nr,SC,bC,W0,vO,NA]}),n})(),FK=(()=>{class n{constructor(t){this.modalService=t}ngOnInit(){this.modalService.register("auth")}ngOnDestroy(){this.modalService.unregister("auth")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vC))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","login"],["tabTitle","register"]],template:function(t,r){1&t&&(c.TgZ(0,"app-modal",0)(1,"p",1),c._uU(2,"Your Account"),c.qZA(),c.TgZ(3,"app-tab-container")(4,"app-tab",2),c._UZ(5,"app-login"),c.qZA(),c.TgZ(6,"app-tab",3),c._UZ(7,"app-register"),c.qZA()()())},dependencies:[EV,E7,wV,EK,LK]}),n})();function jK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",14),c.NdJ("click",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.openModal(i))}),c._uU(2,"Login / Register"),c.qZA()()}}const UK=function(){return["/manage"]},_O=function(){return{exact:!0}},VK=function(){return{sort:"1"}},BK=function(){return["/upload"]};function $K(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",15),c._uU(2,"Manage"),c.qZA()(),c.TgZ(3,"li")(4,"a",7),c._uU(5,"Upload"),c.qZA()(),c.TgZ(6,"li")(7,"a",14),c.NdJ("click",function(i){c.CHM(t);const s=c.oxw();return c.KtG(s.authService.logout(i))}),c._uU(8,"Logout"),c.qZA()()}2&n&&(c.xp6(1),c.Q6J("routerLink",c.DdM(5,UK))("routerLinkActiveOptions",c.DdM(6,_O))("queryParams",c.DdM(7,VK)),c.xp6(3),c.Q6J("routerLink",c.DdM(8,BK))("routerLinkActiveOptions",c.DdM(9,_O)))}const HK=function(){return["/"]},GK=function(){return["/about"]};let qK=(()=>{class n{constructor(t,r,i,s){this.modalService=t,this.authService=r,this.auth=i,this.router=s}ngOnInit(){}openModal(t){t.preventDefault(),this.modalService.toggleModal("auth")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vC),c.Y36(KR),c.Y36(Xs),c.Y36(xi))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-navbar"]],decls:24,vars:10,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],[1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4",3,"routerLink"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["loginedSection",""],["routerLinkActive","text-indigo-400",1,"px-2",3,"routerLink","routerLinkActiveOptions"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLinkActive","text-indigo-400",1,"px-2",3,"routerLink","routerLinkActiveOptions","queryParams"]],template:function(t,r){if(1&t&&(c.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),c._uU(3,"Clipz"),c.qZA(),c.TgZ(4,"div",3)(5,"ul",4),c.YNc(6,jK,3,0,"li",5),c.ALo(7,"async"),c.YNc(8,$K,9,10,"ng-template",null,6,c.W1O),c.TgZ(10,"li")(11,"a",7),c._uU(12,"About"),c.qZA()()(),c.TgZ(13,"ul",8)(14,"li")(15,"a",9),c._UZ(16,"img",10),c.TgZ(17,"span",11),c._uU(18,"English"),c.qZA()()(),c.TgZ(19,"li",12)(20,"a",9),c._UZ(21,"img",13),c.TgZ(22,"span",11),c._uU(23,"French"),c.qZA()()()()()()()),2&t){const i=c.MAs(9);c.xp6(2),c.Q6J("routerLink",c.DdM(7,HK)),c.xp6(4),c.Q6J("ngIf",!c.lcZ(7,5,r.authService.isAuthenticated$))("ngIfElse",i),c.xp6(5),c.Q6J("routerLink",c.DdM(8,GK))("routerLinkActiveOptions",c.DdM(9,_O))}},dependencies:[nr,h0,iF,Du]}),n})();function zK(n,e){1&n&&c._UZ(0,"app-auth-modal")}let WK=(()=>{class n{constructor(t){this.authService=t,this.title="Clips"}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(KR))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(c._UZ(0,"app-navbar")(1,"router-outlet"),c.YNc(2,zK,1,0,"app-auth-modal",0),c.ALo(3,"async")),2&t&&(c.xp6(2),c.Q6J("ngIf",!c.lcZ(3,1,r.authService.isAuthenticatedWithDelay$)))},dependencies:[nr,FK,VM,qK,Du]}),n})(),bO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Cs,yO]}),n})(),KK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Cs,yO,bO,mK,QN]}),n})();const TO_firebase={apiKey:"AIzaSyCB72Aup0TKYDxuK9JVELDTmqk6zb2qVYw",authDomain:"clipz-3e4cd.firebaseapp.com",projectId:"clipz-3e4cd",storageBucket:"clipz-3e4cd.appspot.com",messagingSenderId:"788344958633",appId:"1:788344958633:web:a416d27df77a46bc2243b8"};function ZK(n,e){if(1&n&&(c.TgZ(0,"app-alert",9),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.Oqu(t.alertMsg)}}const YK=function(n){return{"disabled:bg-indigo-400 hover:bg-indigo-400":n}};let QK=(()=>{class n{constructor(t,r){this.modalService=t,this.clipService=r,this.activeClip=null,this.showAlert=!1,this.alertColor="blue",this.alertMsg="Please wait..! updating clip",this.inSubmission=!1,this.update=new c.vpe,this.title=new wu("",{validators:[Hs.required,Hs.minLength(3)],nonNullable:!0}),this.editForm=new z0({title:this.title})}ngOnInit(){this.modalService.register("editModal")}ngOnDestroy(){this.modalService.unregister("editModal")}ngOnChanges(){this.inSubmission=!1,this.showAlert=!1,this.title.setValue(this.activeClip?.title)}editTitle(t){var r=this;return(0,De.Z)(function*(){if(r.activeClip){r.inSubmission=!0,r.showAlert=!0,r.alertColor="blue",r.alertMsg="Please Wait..! updating clip",t.preventDefault();try{yield r.clipService.editClip(r.activeClip.docID,r.title.value)}catch{return r.inSubmission=!1,r.showAlert=!0,r.alertColor="red",void(r.alertMsg="Oops...something went wrong. Please try again")}r.activeClip.title=r.title.value,r.update.emit(r.activeClip),r.showAlert=!0,r.alertColor="green",r.alertMsg="Clip Updated"}})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vC),c.Y36(yC))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-edit"]],inputs:{activeClip:"activeClip"},outputs:{update:"update"},features:[c.TTD],decls:12,vars:7,consts:[["modalID","editModal"],["heading","",1,"text-2xl","font-bold"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"]],template:function(t,r){1&t&&(c.TgZ(0,"app-modal",0)(1,"p",1),c._uU(2,"Edit Video"),c.qZA(),c.YNc(3,ZK,2,2,"app-alert",2),c.TgZ(4,"form",3),c.NdJ("ngSubmit",function(s){return r.editTitle(s)}),c.TgZ(5,"div",4)(6,"label",5),c._uU(7,"Title"),c.qZA(),c._UZ(8,"app-input",6),c.qZA(),c.TgZ(9,"div",7)(10,"button",8),c._uU(11," Update "),c.qZA()()()()),2&t&&(c.xp6(3),c.Q6J("ngIf",r.showAlert),c.xp6(1),c.Q6J("formGroup",r.editForm),c.xp6(4),c.Q6J("control",r.title),c.xp6(2),c.Q6J("disabled",r.inSubmission)("ngClass",c.VKq(5,YK,r.inSubmission)))},dependencies:[On,nr,EV,vO,NA,SC,bC,W0]}),n})();const DB=function(n){return["/","clip",n]};function XK(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10)(1,"a",11),c._UZ(2,"img",12),c.qZA(),c.TgZ(3,"div",13)(4,"a",14),c._uU(5),c.qZA(),c.TgZ(6,"a",15),c.NdJ("click",function(i){const l=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.copyToClipboard(i,null==l?null:l.docID))}),c._uU(7," Copy Link "),c.qZA()(),c.TgZ(8,"div",16)(9,"a",17),c.NdJ("click",function(i){const l=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.editClip(i,l))}),c.TgZ(10,"span",18),c._uU(11,"build"),c.qZA()(),c.TgZ(12,"a",19),c.NdJ("click",function(i){const l=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.deleteClip(i,l))}),c.TgZ(13,"span",18),c._uU(14,"delete"),c.qZA()()()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("routerLink",c.VKq(4,DB,null==t?null:t.docID)),c.xp6(1),c.Q6J("src",t.screenshotURL,c.LSH),c.xp6(2),c.Q6J("routerLink",c.VKq(6,DB,null==t?null:t.docID)),c.xp6(1),c.Oqu(t.title)}}const JK=function(){return["/upload"]};let eZ=(()=>{class n{constructor(t,r,i,s){this.route=t,this.router=r,this.clipService=i,this.modalService=s,this.videoOrder="1",this.clips=[],this.activeClip=null,t.queryParams.subscribe(l=>{this.videoOrder="1"===l.sort?l.sort:"2"})}ngOnInit(){this.clipService.getUserClips().subscribe(t=>{this.clips=[],t.forEach(r=>{this.clips.push({docID:r.id,...r.data()})})})}clipsOrder(t){const{value:r}=t.target;this.router.navigate([],{relativeTo:this.route,queryParams:{sort:r}})}editClip(t,r){t.preventDefault(),this.activeClip=r,this.modalService.toggleModal("editModal")}update(t){this.clips.filter(i=>{})[0].title=t.title}deleteClip(t,r){t.preventDefault(),this.clipService.deleteClip(r),this.clips.forEach((i,s)=>{r.docID===i.docID&&this.clips.splice(s,1)})}copyToClipboard(t,r){if(!r)return;const i=`${location.origin}/clip/${r}`;navigator.clipboard.writeText(i),alert("The link is copied to clipboard")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Nc),c.Y36(xi),c.Y36(yC),c.Y36(vC))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-manage"]],decls:13,vars:6,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],[1,"bg-indigo-400","text-white","py-4","px-10","text-xl",3,"routerLink"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary flex flex-col justify-start",4,"ngFor","ngForOf"],[3,"activeClip","update"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],[3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"p-6","text-2xl"],[1,"font-bold","mb-2",3,"routerLink"],[1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded","cursor-pointer",3,"click"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto"],["href","#",1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400",3,"click"],[1,"material-icons","text-base"],["href","#",1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"a",2),c._uU(3,"Upload Videos"),c.qZA(),c.TgZ(4,"select",3),c.NdJ("change",function(s){return r.clipsOrder(s)}),c.TgZ(5,"option",4),c._uU(6,"Recent Uploads"),c.qZA(),c.TgZ(7,"option",5),c._uU(8,"Oldest Uploads"),c.qZA()()()(),c.TgZ(9,"div",6)(10,"div",7),c.YNc(11,XK,15,8,"div",8),c.qZA()(),c.TgZ(12,"app-edit",9),c.NdJ("update",function(s){return r.update(s)}),c.qZA()),2&t&&(c.xp6(2),c.Q6J("routerLink",c.DdM(5,JK)),c.xp6(3),c.Q6J("selected","1"===r.videoOrder),c.xp6(2),c.Q6J("selected","2"===r.videoOrder),c.xp6(4),c.Q6J("ngForOf",r.clips),c.xp6(1),c.Q6J("activeClip",r.activeClip))},dependencies:[cs,h0,yB,_B,QK]}),n})();const AB={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let LA;const tZ=new Uint8Array(16);function nZ(){if(!LA&&(LA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!LA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return LA(tZ)}const Gs=[];for(let n=0;n<256;++n)Gs.push((n+256).toString(16).slice(1));const iZ=function rZ(n,e,t){if(AB.randomUUID&&!e&&!n)return AB.randomUUID();const r=(n=n||{}).random||(n.rng||nZ)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function kB(n,e=0){return(Gs[n[e+0]]+Gs[n[e+1]]+Gs[n[e+2]]+Gs[n[e+3]]+"-"+Gs[n[e+4]]+Gs[n[e+5]]+"-"+Gs[n[e+6]]+Gs[n[e+7]]+"-"+Gs[n[e+8]]+Gs[n[e+9]]+"-"+Gs[n[e+10]]+Gs[n[e+11]]+Gs[n[e+12]]+Gs[n[e+13]]+Gs[n[e+14]]+Gs[n[e+15]]).toLowerCase()}(r)};var MB=V(260);let sZ=(()=>{class n{constructor(){this.isReady=!1,this.isRunning=!1,this.ffmpeg=(0,MB.createFFmpeg)({log:!0})}init(){var t=this;return(0,De.Z)(function*(){t.isReady||(yield t.ffmpeg.load(),t.isReady=!0)})()}getScreenshot(t){var r=this;return(0,De.Z)(function*(){r.isRunning=!0;let i=yield(0,MB.fetchFile)(t);r.ffmpeg.FS("writeFile",t.name,i);const s=[1,2,3],l=[];s.forEach(p=>{l.push("-i",t.name,"-ss",`00:00:0${p}`,"-frames:v","1","-filter:v","scale=510:-1",`output_0${p}.png`)}),yield r.ffmpeg.run(...l);let d=[];return s.forEach(p=>{const v=r.ffmpeg.FS("readFile",`output_0${p}.png`),E=new Blob([v.buffer],{type:"image/png"}),D=URL.createObjectURL(E);d.push(D)}),r.isRunning=!1,d})()}blobFormURL(t){return(0,De.Z)(function*(){return yield(yield fetch(t)).blob()})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oZ=(()=>{class n{constructor(){}eventHandler(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","app-event-blocker",""]],hostBindings:function(t,r){1&t&&c.NdJ("drop",function(s){return r.eventHandler(s)})("dragover",function(s){return r.eventHandler(s)})}}),n})(),aZ=(()=>{class n{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustUrl(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Xl,16))},n.\u0275pipe=c.Yjl({name:"safeURL",type:n,pure:!0}),n})();function lZ(n,e){if(1&n&&(c.TgZ(0,"app-alert",6),c._uU(1),c.TgZ(2,"p"),c._uU(3),c.ALo(4,"percent"),c.qZA()()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.hij("",t.alertMsg," "),c.xp6(2),c.Oqu(c.lcZ(4,3,t.percentage))}}function uZ(n,e){1&n&&(c.ynx(0),c.TgZ(1,"span",7),c._uU(2,"settings"),c.qZA(),c.BQk())}function cZ(n,e){1&n&&(c.TgZ(0,"h5"),c._uU(1,"Drop your file here (mp4 only!)"),c.qZA())}function dZ(n,e){1&n&&(c.TgZ(0,"span",12),c._uU(1,"autorenew"),c.qZA())}const hZ=function(n){return{"bg-indigo-400 border-solid border-indigo-400":n}};function fZ(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",9),c.NdJ("dragover",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isDragover=!0)})("dragenter",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isDragover=!0)})("dragend",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isDragover=!1)})("dragleave",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isDragover=!1)})("mouseleave",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.isDragover=!1)})("drop",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.storeFile(i))}),c.YNc(2,cZ,2,0,"h5",8),c.YNc(3,dZ,2,0,"span",10),c.qZA(),c.TgZ(4,"app-input",11),c.NdJ("change",function(i){c.CHM(t);const s=c.oxw(2);return c.KtG(s.storeFile(i))}),c.qZA(),c.BQk()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngClass",c.VKq(3,hZ,t.isDragover)),c.xp6(1),c.Q6J("ngIf",!t.showForm),c.xp6(1),c.Q6J("ngIf",t.ffmpegService.isRunning)}}const pZ=function(n){return{"border-white-400 border-8":n}};function gZ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",22),c.NdJ("click",function(){const s=c.CHM(t).$implicit,l=c.oxw(3);return c.KtG(l.selectedScreenshot=s)}),c._UZ(1,"img",23),c.ALo(2,"safeURL"),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw(3);c.Q6J("ngClass",c.VKq(4,pZ,r.selectedScreenshot===t)),c.xp6(1),c.Q6J("src",c.lcZ(2,2,t),c.LSH)}}const mZ=function(n,e){return{"opacity-50":n,"hover:bg-indigo-700":e}};function yZ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"form",13),c.NdJ("ngSubmit",function(){c.CHM(t);const i=c.oxw(2);return c.KtG(i.uploadFile())}),c.TgZ(2,"h2",14),c._uU(3,"Select a Thumbnail"),c.qZA(),c.TgZ(4,"div",15),c.YNc(5,gZ,3,6,"div",16),c.qZA(),c.TgZ(6,"div",17)(7,"label",18),c._uU(8,"Title"),c.qZA(),c._UZ(9,"app-input",19),c.qZA(),c.TgZ(10,"div",20)(11,"button",21),c._uU(12," Publish "),c.qZA()()()()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("formGroup",t.uploadForm),c.xp6(4),c.Q6J("ngForOf",t.screenshots),c.xp6(4),c.Q6J("control",t.title),c.xp6(2),c.Q6J("disabled",t.inSubmission)("ngClass",c.WLB(5,mZ,t.inSubmission,!t.inSubmission))}}function vZ(n,e){if(1&n&&(c.YNc(0,fZ,5,5,"ng-container",8),c.YNc(1,yZ,13,8,"div",8)),2&n){const t=c.oxw();c.Q6J("ngIf",!t.showForm),c.xp6(1),c.Q6J("ngIf",t.showForm&&t.file)}}let _Z=(()=>{class n{constructor(t,r,i,s,l){this.storage=t,this.auth=r,this.clipsService=i,this.router=s,this.ffmpegService=l,this.isDragover=!1,this.file=null,this.showForm=!1,this.showAlert=!1,this.alertMsg="",this.alertColor="blue",this.inSubmission=!1,this.percentage=null,this.user=null,this.screenshots=[],this.selectedScreenshot="",this.title=new wu("",{validators:[Hs.required,Hs.minLength(3)],nonNullable:!0}),this.uploadForm=new z0({title:this.title}),r.user.subscribe(d=>this.user=d),l.init()}ngOnInit(){}ngOnDestroy(){this.task?.cancel()}storeFile(t){var r=this;return(0,De.Z)(function*(){if(!r.ffmpegService.isRunning){if(console.log(t),r.isDragover=!1,r.showAlert=!1,r.file=t.dataTransfer?t.dataTransfer?.files.item(0)??null:t.target.files?.item(0)??null,!r.file||"video/mp4"!==r.file.type)return r.showAlert=!0,r.alertColor="red",void(r.alertMsg="Please add a mp4 file");r.screenshots=yield r.ffmpegService.getScreenshot(r.file),r.selectedScreenshot=r.screenshots[0],r.showForm=!0,r.title.setValue(r.file.name.replace(/\.[^/.]+$/,""))}})()}uploadFile(){var t=this;return(0,De.Z)(function*(){if(!t.file)return;t.uploadForm.disable(),t.inSubmission=!0,t.showAlert=!0,t.alertColor="blue",t.alertMsg="Video is uploading.....";const r=iZ(),i=`clips/${r}.mp4`,s=yield t.ffmpegService.blobFormURL(t.selectedScreenshot),l=`screenshot/${r}.png`;t.task=t.storage.upload(i,t.file),t.screenshotUploadTask=t.storage.upload(l,s);const d=t.storage.ref(i),p=t.storage.ref(l);var v;eD([t.task.percentageChanges(),t.screenshotUploadTask.percentageChanges()]).subscribe(v=>{let[E,D]=v;!E||!D||(t.percentage=(E+D)/200)}),ZR([t.task.snapshotChanges(),t.screenshotUploadTask.snapshotChanges()]).pipe(cr(()=>ZR([d.getDownloadURL(),p.getDownloadURL()]))).subscribe({next:(v=(0,De.Z)(function*(E){const[D,j]=E,F={uid:t.user?.uid,title:t.title.value,displayName:t.user?.displayName,fileName:`${r}.mp4`,url:D,screenshotURL:j,screenshotFileName:`${r}.png`,timeStamp:Aa.Z.firestore.FieldValue.serverTimestamp()},Q=yield t.clipsService.createClip(F);t.alertColor="green",t.alertMsg="Video uploaded Succssfully...Share your clip to the world",t.percentage=null,setTimeout(()=>{t.router.navigate(["clip",Q.id])},1e3)}),function(D){return v.apply(this,arguments)}),error:v=>{t.uploadForm.enable(),t.inSubmission=!1,t.alertColor="red",t.alertMsg="failed...please try again later. Please ensure that the Network and file size is less than 20MB",t.percentage=null}})})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(zR),c.Y36(Xs),c.Y36(yC),c.Y36(xi),c.Y36(sZ))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-upload"]],decls:8,vars:3,consts:[["class","py-3 my-3",3,"color",4,"ngIf"],[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],[4,"ngIf","ngIfElse"],["uploadFormContainer",""],[1,"py-3","my-3",3,"color"],[1,"material-icons","text-center","p-8","text-6xl","animate-spin"],[4,"ngIf"],["app-event-blocker","",1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl",3,"ngClass","dragover","dragenter","dragend","dragleave","mouseleave","drop"],["class","material-icons text-center text-6xl p-8 animate-spin",4,"ngIf"],["type","file",1,"my-2",3,"change"],[1,"material-icons","text-center","text-6xl","p-8","animate-spin"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[1,"cursor-pointer",3,"ngClass","click"],[3,"src"]],template:function(t,r){if(1&t&&(c.YNc(0,lZ,5,5,"app-alert",0),c.TgZ(1,"section",1)(2,"div",2)(3,"div",3),c._uU(4,"Upload Video"),c.qZA(),c.YNc(5,uZ,3,0,"ng-container",4),c.YNc(6,vZ,2,2,"ng-template",null,5,c.W1O),c.qZA()()),2&t){const i=c.MAs(7);c.Q6J("ngIf",r.showAlert),c.xp6(5),c.Q6J("ngIf",!r.ffmpegService.isReady)("ngIfElse",i)}},dependencies:[On,cs,nr,vO,NA,oZ,SC,bC,W0,Ws,aZ]}),n})();const EO=(0,Zt.U)(n=>!!n);let wO=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(i,s)=>{const l=i.data.authGuardPipe||(()=>EO);return this.auth.user.pipe(Ys(1),l(i,s),(0,Zt.U)(d=>"boolean"==typeof d?d:Array.isArray(d)?this.router.createUrlTree(d):this.router.parseUrl(d)))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xi),c.LFG(Xs))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PB=()=>(0,nL.z)(EO,(0,Zt.U)(e=>e||"/"));const EZ=[{path:"manage",component:eZ,data:{authOnly:!0,authGuardPipe:PB},canActivate:[wO]},{path:"upload",component:_Z,data:{authOnly:!0,authGuardPipe:PB},canActivate:[wO]},{path:"manage-clips",redirectTo:"manage",data:{authOnly:!0}}];let wZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[TD.forChild(EZ),TD]}),n})(),CZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Cs,wZ,bO,yO,r7]}),n})();var SZ=V(1144);const xZ=["addListener","removeListener"],IZ=["addEventListener","removeEventListener"],DZ=["on","off"];function Qn(n,e,t,r){if((0,Zi.m)(t)&&(r=t,t=void 0),r)return Qn(n,e,t).pipe(EM(r));const[i,s]=function MZ(n){return(0,Zi.m)(n.addEventListener)&&(0,Zi.m)(n.removeEventListener)}(n)?IZ.map(l=>d=>n[l](e,d,t)):function AZ(n){return(0,Zi.m)(n.addListener)&&(0,Zi.m)(n.removeListener)}(n)?xZ.map(RB(n,e)):function kZ(n){return(0,Zi.m)(n.on)&&(0,Zi.m)(n.off)}(n)?DZ.map(RB(n,e)):[];if(!i&&(0,SZ.z)(n))return(0,Vs.z)(l=>Qn(l,e,t))((0,Ds.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new mr.y(l=>{const d=(...p)=>l.next(1<p.length?p:p[0]);return i(d),()=>s(d)})}function RB(n,e){return t=>r=>n[t](e,r)}let Rs=(()=>{class n{}return n.VG_ENDED="ended",n.VG_PAUSED="paused",n.VG_PLAYING="playing",n.VG_LOADING="waiting",n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qs=(()=>{class n{constructor(){this.medias={},this.playerReadyEvent=new c.vpe(!0),this.isPlayerReady=!1}onPlayerReady(t){this.fsAPI=t,this.isPlayerReady=!0,this.playerReadyEvent.emit(this)}getDefaultMedia(){for(const t in this.medias)if(this.medias[t])return this.medias[t]}getMasterMedia(){let t;for(const r in this.medias)if("true"===this.medias[r].vgMaster||!0===this.medias[r].vgMaster){t=this.medias[r];break}return t||this.getDefaultMedia()}isMasterDefined(){let t=!1;for(const r in this.medias)if("true"===this.medias[r].vgMaster||!0===this.medias[r].vgMaster){t=!0;break}return t}getMediaById(t=null){let r=this.medias[t];return(!t||"*"===t)&&(r=this),r}play(){for(const t in this.medias)this.medias[t]&&this.medias[t].play()}pause(){for(const t in this.medias)this.medias[t]&&this.medias[t].pause()}get duration(){return this.$$getAllProperties("duration")}set currentTime(t){this.$$setAllProperties("currentTime",t)}get currentTime(){return this.$$getAllProperties("currentTime")}set state(t){this.$$setAllProperties("state",t)}get state(){return this.$$getAllProperties("state")}set volume(t){this.$$setAllProperties("volume",t)}get volume(){return this.$$getAllProperties("volume")}set playbackRate(t){this.$$setAllProperties("playbackRate",t)}get playbackRate(){return this.$$getAllProperties("playbackRate")}get canPlay(){return this.$$getAllProperties("canPlay")}get canPlayThrough(){return this.$$getAllProperties("canPlayThrough")}get isMetadataLoaded(){return this.$$getAllProperties("isMetadataLoaded")}get isWaiting(){return this.$$getAllProperties("isWaiting")}get isCompleted(){return this.$$getAllProperties("isCompleted")}get isLive(){return this.$$getAllProperties("isLive")}get isMaster(){return this.$$getAllProperties("isMaster")}get time(){return this.$$getAllProperties("time")}get buffer(){return this.$$getAllProperties("buffer")}get buffered(){return this.$$getAllProperties("buffered")}get subscriptions(){return this.$$getAllProperties("subscriptions")}get textTracks(){return this.$$getAllProperties("textTracks")}seekTime(t,r=!1){for(const i in this.medias)this.medias[i]&&this.$$seek(this.medias[i],t,r)}$$seek(t,r,i=!1){let s,l=t.duration;i?(this.isMasterDefined()&&(l=this.getMasterMedia().duration),s=r*l/100):s=r,t.currentTime=s}addTextTrack(t,r,i){for(const s in this.medias)this.medias[s]&&this.$$addTextTrack(this.medias[s],t,r,i)}$$addTextTrack(t,r,i,s){t.addTextTrack(r,i,s)}$$getAllProperties(t){const r={};let i;for(const l in this.medias)this.medias[l]&&(r[l]=this.medias[l]);switch(Object.keys(r).length){case 0:switch(t){case"state":i=Rs.VG_PAUSED;break;case"playbackRate":case"volume":i=1;break;case"time":i={current:0,total:0,left:0}}break;case 1:i=r[Object.keys(r)[0]][t];break;default:i=r[this.getMasterMedia().id][t]}return i}$$setAllProperties(t,r){for(const i in this.medias)this.medias[i]&&(this.medias[i][t]=r)}registerElement(t){this.videogularElement=t}registerMedia(t){this.medias[t.id]=t}unregisterMedia(t){delete this.medias[t.id]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CO=(()=>{class n{constructor(){this.isHiddenSubject=new Oi.x,this.isHidden=this.isHiddenSubject.asObservable()}state(t){this.isHiddenSubject.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FA=(()=>{class n{static getZIndex(){let r,t=1;const i=document.getElementsByTagName("*");for(let s=0,l=i.length;s<l;s++)r=parseInt(window.getComputedStyle(i[s])["z-index"],10),r>t&&(t=r+1);return t}static isMobileDevice(){return typeof window.orientation<"u"||-1!==navigator.userAgent.indexOf("IEMobile")}static isiOSDevice(){return(navigator.userAgent.match(/ip(hone|ad|od)/i)||n.isIpadOS())&&!navigator.userAgent.match(/(iemobile)[\/\s]?([\w\.]*)/i)}static isIpadOS(){return navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}static isCordova(){return-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OB=(()=>{class n{constructor(){this.nativeFullscreen=!0,this.isFullscreen=!1,this.onChangeFullscreen=new c.vpe}init(t,r){this.videogularElement=t,this.medias=r;const i={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",onchange:"fullscreenchange",onerror:"fullscreenerror"},newWebkit:{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},oldWebkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",onchange:"mozfullscreenchange",onerror:"mozfullscreenerror"},ios:{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",onchange:"webkitendfullscreen",onerror:"webkitfullscreenerror"},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",onchange:"MSFullscreenChange",onerror:"MSFullscreenError"}};for(const l in i)if(i[l].enabled in document){this.polyfill=i[l];break}if(FA.isiOSDevice()&&(this.polyfill=i.ios),this.isAvailable=null!=this.polyfill,null==this.polyfill)return;let s;switch(this.polyfill.onchange){case"mozfullscreenchange":s=document;break;case"webkitendfullscreen":s=this.medias.toArray()[0].elem;break;default:s=t}this.fsChangeSubscription=Qn(s,this.polyfill.onchange).subscribe(()=>{this.onFullscreenChange()})}onFullscreenChange(){this.isFullscreen=!!document[this.polyfill.element],this.onChangeFullscreen.emit(this.isFullscreen)}toggleFullscreen(t=null){this.isFullscreen?this.exit():this.request(t)}request(t){t||(t=this.videogularElement),this.isFullscreen=!0,this.onChangeFullscreen.emit(!0),this.isAvailable&&this.nativeFullscreen&&(FA.isMobileDevice()?((!this.polyfill.enabled&&t===this.videogularElement||FA.isiOSDevice())&&(t=this.medias.toArray()[0].elem),this.enterElementInFullScreen(t)):this.enterElementInFullScreen(this.videogularElement))}enterElementInFullScreen(t){t[this.polyfill.request]()}exit(){this.isFullscreen=!1,this.onChangeFullscreen.emit(!1),this.isAvailable&&this.nativeFullscreen&&document[this.polyfill.exit]()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vr=(()=>{class n{}return n.VG_ABORT="abort",n.VG_CAN_PLAY="canplay",n.VG_CAN_PLAY_THROUGH="canplaythrough",n.VG_DURATION_CHANGE="durationchange",n.VG_EMPTIED="emptied",n.VG_ENCRYPTED="encrypted",n.VG_ENDED="ended",n.VG_ERROR="error",n.VG_LOADED_DATA="loadeddata",n.VG_LOADED_METADATA="loadedmetadata",n.VG_LOAD_START="loadstart",n.VG_PAUSE="pause",n.VG_PLAY="play",n.VG_PLAYING="playing",n.VG_PROGRESS="progress",n.VG_RATE_CHANGE="ratechange",n.VG_SEEK="seek",n.VG_SEEKED="seeked",n.VG_SEEKING="seeking",n.VG_STALLED="stalled",n.VG_SUSPEND="suspend",n.VG_TIME_UPDATE="timeupdate",n.VG_VOLUME_CHANGE="volumechange",n.VG_WAITING="waiting",n.VG_LOAD="load",n.VG_ENTER="enter",n.VG_EXIT="exit",n.VG_START_ADS="startads",n.VG_END_ADS="endads",n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const OZ=[qs,CO,OB,FA,vr,Rs];let jA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...OZ],imports:[Cs]}),n})(),zZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Cs,jA]}),n})(),WZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Cs,jA]}),n})(),KZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Cs,jA]}),n})(),ZZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[WK]}),n.\u0275inj=c.cJS({imports:[wd,CZ,KK,bO,yi.hO.initializeApp(TO_firebase),_b,QN,l7,jA,zZ,WZ,KZ]}),n})();(0,c.G48)(),Aa.Z.initializeApp(TO_firebase);let LB=!1;Aa.Z.auth().onAuthStateChanged(()=>{LB||ec().bootstrapModule(ZZ).catch(n=>console.error(n)),LB=!0})},3992:(it,Ie,V)=>{"use strict";var c=V(9226);it.exports=function(te,pe){return void 0===pe&&(pe=!1),function(_e,ve,Ce){if(_e)te(_e);else if(ve.statusCode>=400&&ve.statusCode<=599){var K=Ce;if(pe)if(c.TextDecoder){var ee=function U(ye){return void 0===ye&&(ye=""),ye.toLowerCase().split(";").reduce(function(te,pe){var _e=pe.split("="),Ce=_e[1];return"charset"===_e[0].trim()?Ce.trim():te},"utf-8")}(ve.headers&&ve.headers["content-type"]);try{K=new TextDecoder(ee).decode(Ce)}catch{}}else K=String.fromCharCode.apply(null,new Uint8Array(Ce));te({cause:K})}else te(null,Ce)}}},745:(it,Ie,V)=>{"use strict";var c=V(9226),oe=V(434),U=V(2703);function _e(Z,qe,Me){var Ue=Z;return U(qe)?(Me=qe,"string"==typeof Z&&(Ue={uri:Z})):Ue=oe({},qe,{uri:Z}),Ue.callback=Me,Ue}function ve(Z,qe,Me){return Ce(qe=_e(Z,qe,Me))}function Ce(Z){if(typeof Z.callback>"u")throw new Error("callback argument missing");var qe=!1,Me=function(he,se,ae){qe||(qe=!0,Z.callback(he,se,ae))};function Tt(){var le=void 0;if(le=Ke.response?Ke.response:Ke.responseText||function K(Z){try{if("document"===Z.responseType)return Z.responseXML;if(""===Z.responseType&&(!Z.responseXML||"parsererror"!==Z.responseXML.documentElement.nodeName))return Z.responseXML}catch{}return null}(Ke),$)try{le=JSON.parse(le)}catch{}return le}function Be(le){return clearTimeout(W),le instanceof Error||(le=new Error(""+(le||"Unknown XMLHttpRequest Error"))),le.statusCode=0,Me(le,re)}function me(){if(!Ge){var le;clearTimeout(W);var he=re,se=null;return 0!==(le=Z.useXDR&&void 0===Ke.status?200:1223===Ke.status?204:Ke.status)?(he={body:Tt(),statusCode:le,method:ze,headers:{},url:Se,rawRequest:Ke},Ke.getAllResponseHeaders&&(he.headers=function(qe){var Me={};return qe&&qe.trim().split("\n").forEach(function(Ue){var Tt=Ue.indexOf(":"),Be=Ue.slice(0,Tt).trim().toLowerCase(),me=Ue.slice(Tt+1).trim();typeof Me[Be]>"u"?Me[Be]=me:Array.isArray(Me[Be])?Me[Be].push(me):Me[Be]=[Me[Be],me]}),Me}(Ke.getAllResponseHeaders()))):se=new Error("Internal XMLHttpRequest Error"),Me(se,he,he.body)}}var Ke=Z.xhr||null;Ke||(Ke=Z.cors||Z.useXDR?new ve.XDomainRequest:new ve.XMLHttpRequest);var nt,Ge,W,Se=Ke.url=Z.uri||Z.url,ze=Ke.method=Z.method||"GET",rt=Z.body||Z.data,et=Ke.headers=Z.headers||{},O=!!Z.sync,$=!1,re={body:void 0,headers:{},statusCode:0,method:ze,url:Se,rawRequest:Ke};if("json"in Z&&!1!==Z.json&&($=!0,et.accept||et.Accept||(et.Accept="application/json"),"GET"!==ze&&"HEAD"!==ze&&(et["content-type"]||et["Content-Type"]||(et["Content-Type"]="application/json"),rt=JSON.stringify(!0===Z.json?rt:Z.json))),Ke.onreadystatechange=function Ue(){4===Ke.readyState&&setTimeout(me,0)},Ke.onload=me,Ke.onerror=Be,Ke.onprogress=function(){},Ke.onabort=function(){Ge=!0},Ke.ontimeout=Be,Ke.open(ze,Se,!O,Z.username,Z.password),O||(Ke.withCredentials=!!Z.withCredentials),!O&&Z.timeout>0&&(W=setTimeout(function(){if(!Ge){Ge=!0,Ke.abort("timeout");var le=new Error("XMLHttpRequest timeout");le.code="ETIMEDOUT",Be(le)}},Z.timeout)),Ke.setRequestHeader)for(nt in et)et.hasOwnProperty(nt)&&Ke.setRequestHeader(nt,et[nt]);else if(Z.headers&&!function pe(Z){for(var qe in Z)if(Z.hasOwnProperty(qe))return!1;return!0}(Z.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Z&&(Ke.responseType=Z.responseType),"beforeSend"in Z&&"function"==typeof Z.beforeSend&&Z.beforeSend(Ke),Ke.send(rt||null),Ke}ve.httpHandler=V(3992),it.exports=ve,it.exports.default=ve,ve.XMLHttpRequest=c.XMLHttpRequest||function ee(){},ve.XDomainRequest="withCredentials"in new ve.XMLHttpRequest?ve.XMLHttpRequest:c.XDomainRequest,function te(Z,qe){for(var Me=0;Me<Z.length;Me++)qe(Z[Me])}(["get","put","post","patch","head","delete"],function(Z){ve["delete"===Z?"del":Z]=function(qe,Me,Ue){return(Me=_e(qe,Me,Ue)).method=Z.toUpperCase(),Ce(Me)}})},9401:(it,Ie)=>{"use strict";function c(te,pe){return void 0===pe&&(pe=Object),pe&&"function"==typeof pe.freeze?pe.freeze(te):te}var U=c({HTML:"text/html",isHTML:function(te){return te===U.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ye=c({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(te){return te===ye.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Ie.assign=function oe(te,pe){if(null===te||"object"!=typeof te)throw new TypeError("target is not an object");for(var _e in pe)Object.prototype.hasOwnProperty.call(pe,_e)&&(te[_e]=pe[_e]);return te},Ie.find=function V(te,pe,_e){if(void 0===_e&&(_e=Array.prototype),te&&"function"==typeof _e.find)return _e.find.call(te,pe);for(var ve=0;ve<te.length;ve++)if(Object.prototype.hasOwnProperty.call(te,ve)){var Ce=te[ve];if(pe.call(void 0,Ce,ve,te))return Ce}},Ie.freeze=c,Ie.MIME_TYPE=U,Ie.NAMESPACE=ye},1991:(it,Ie,V)=>{var oe=V(9401),U=V(6853),ye=V(4436),te=V(8702),pe=U.DOMImplementation,_e=oe.NAMESPACE,ve=te.ParseError,Ce=te.XMLReader;function K(me){return me.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function ee(me){this.options=me||{locator:{}}}function qe(){this.cdata=!1}function Me(me,Ke){Ke.lineNumber=me.lineNumber,Ke.columnNumber=me.columnNumber}function Ue(me){if(me)return"\n@"+(me.systemId||"")+"#[line:"+me.lineNumber+",col:"+me.columnNumber+"]"}function Tt(me,Ke,nt){return"string"==typeof me?me.substr(Ke,nt):me.length>=Ke+nt||Ke?new java.lang.String(me,Ke,nt)+"":me}function Be(me,Ke){me.currentElement?me.currentElement.appendChild(Ke):me.doc.appendChild(Ke)}ee.prototype.parseFromString=function(me,Ke){var nt=this.options,Ge=new Ce,Se=nt.domBuilder||new qe,ze=nt.errorHandler,rt=nt.locator,et=nt.xmlns||{},O=/\/x?html?$/.test(Ke),$=O?ye.HTML_ENTITIES:ye.XML_ENTITIES;return rt&&Se.setDocumentLocator(rt),Ge.errorHandler=function Z(me,Ke,nt){if(!me){if(Ke instanceof qe)return Ke;me=Ke}var Ge={},Se=me instanceof Function;function ze(rt){var et=me[rt];!et&&Se&&(et=2==me.length?function(O){me(rt,O)}:me),Ge[rt]=et&&function(O){et("[xmldom "+rt+"]\t"+O+Ue(nt))}||function(){}}return nt=nt||{},ze("warning"),ze("error"),ze("fatalError"),Ge}(ze,Se,rt),Ge.domBuilder=nt.domBuilder||Se,O&&(et[""]=_e.HTML),et.xml=et.xml||_e.XML,me&&"string"==typeof me?Ge.parse((nt.normalizeLineEndings||K)(me),et,$):Ge.errorHandler.error("invalid doc source"),Se.doc},qe.prototype={startDocument:function(){this.doc=(new pe).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(me,Ke,nt,Ge){var Se=this.doc,ze=Se.createElementNS(me,nt||Ke),rt=Ge.length;Be(this,ze),this.currentElement=ze,this.locator&&Me(this.locator,ze);for(var et=0;et<rt;et++){me=Ge.getURI(et);var O=Ge.getValue(et),$=(nt=Ge.getQName(et),Se.createAttributeNS(me,nt));this.locator&&Me(Ge.getLocator(et),$),$.value=$.nodeValue=O,ze.setAttributeNode($)}},endElement:function(me,Ke,nt){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(me,Ke){},endPrefixMapping:function(me){},processingInstruction:function(me,Ke){var nt=this.doc.createProcessingInstruction(me,Ke);this.locator&&Me(this.locator,nt),Be(this,nt)},ignorableWhitespace:function(me,Ke,nt){},characters:function(me,Ke,nt){if(me=Tt.apply(this,arguments)){if(this.cdata)var Ge=this.doc.createCDATASection(me);else Ge=this.doc.createTextNode(me);this.currentElement?this.currentElement.appendChild(Ge):/^\s*$/.test(me)&&this.doc.appendChild(Ge),this.locator&&Me(this.locator,Ge)}},skippedEntity:function(me){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(me){(this.locator=me)&&(me.lineNumber=0)},comment:function(me,Ke,nt){me=Tt.apply(this,arguments);var Ge=this.doc.createComment(me);this.locator&&Me(this.locator,Ge),Be(this,Ge)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(me,Ke,nt){var Ge=this.doc.implementation;if(Ge&&Ge.createDocumentType){var Se=Ge.createDocumentType(me,Ke,nt);this.locator&&Me(this.locator,Se),Be(this,Se),this.doc.doctype=Se}},warning:function(me){console.warn("[xmldom warning]\t"+me,Ue(this.locator))},error:function(me){console.error("[xmldom error]\t"+me,Ue(this.locator))},fatalError:function(me){throw new ve(me,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(me){qe.prototype[me]=function(){return null}}),Ie.DOMParser=ee},6853:(it,Ie,V)=>{var c=V(9401),oe=c.find,U=c.NAMESPACE;function ye(H){return""!==H}function pe(H,B){return H.hasOwnProperty(B)||(H[B]=!0),H}function _e(H){if(!H)return[];var B=function te(H){return H?H.split(/[\t\n\f\r ]+/).filter(ye):[]}(H);return Object.keys(B.reduce(pe,{}))}function Ce(H,B){for(var Y in H)Object.prototype.hasOwnProperty.call(H,Y)&&(B[Y]=H[Y])}function K(H,B){var Y=H.prototype;if(!(Y instanceof B)){let vt=function(){};vt.prototype=B.prototype,vt=new vt,Ce(Y,vt),H.prototype=Y=vt}Y.constructor!=H&&("function"!=typeof H&&console.error("unknown Class:"+H),Y.constructor=H)}var ee={},Z=ee.ELEMENT_NODE=1,qe=ee.ATTRIBUTE_NODE=2,Me=ee.TEXT_NODE=3,Ue=ee.CDATA_SECTION_NODE=4,Tt=ee.ENTITY_REFERENCE_NODE=5,Be=ee.ENTITY_NODE=6,me=ee.PROCESSING_INSTRUCTION_NODE=7,Ke=ee.COMMENT_NODE=8,nt=ee.DOCUMENT_NODE=9,Ge=ee.DOCUMENT_TYPE_NODE=10,Se=ee.DOCUMENT_FRAGMENT_NODE=11,ze=ee.NOTATION_NODE=12,rt={},et={},W=(rt.INDEX_SIZE_ERR=(et[1]="Index size error",1),rt.DOMSTRING_SIZE_ERR=(et[2]="DOMString size error",2),rt.HIERARCHY_REQUEST_ERR=(et[3]="Hierarchy request error",3)),ae=(rt.WRONG_DOCUMENT_ERR=(et[4]="Wrong document",4),rt.INVALID_CHARACTER_ERR=(et[5]="Invalid character",5),rt.NO_DATA_ALLOWED_ERR=(et[6]="No data allowed",6),rt.NO_MODIFICATION_ALLOWED_ERR=(et[7]="No modification allowed",7),rt.NOT_FOUND_ERR=(et[8]="Not found",8)),He=(rt.NOT_SUPPORTED_ERR=(et[9]="Not supported",9),rt.INUSE_ATTRIBUTE_ERR=(et[10]="Attribute in use",10));function at(H,B){if(B instanceof Error)var Y=B;else Y=this,Error.call(this,et[H]),this.message=et[H],Error.captureStackTrace&&Error.captureStackTrace(this,at);return Y.code=H,B&&(this.message=this.message+": "+B),Y}function wt(){}function Rt(H,B){this._node=H,this._refresh=B,qt(this)}function qt(H){var B=H._node._inc||H._node.ownerDocument._inc;if(H._inc!=B){var Y=H._refresh(H._node);kn(H,"length",Y.length),Ce(Y,H),H._inc=B}}function Fn(){}function Xn(H,B){for(var Y=H.length;Y--;)if(H[Y]===B)return Y}function er(H,B,Y,Fe){if(Fe?B[Xn(B,Fe)]=Y:B[B.length++]=Y,H){Y.ownerElement=H;var vt=H.ownerDocument;vt&&(Fe&&Br(vt,H,Fe),function Pt(H,B,Y){H&&H._inc++,Y.namespaceURI===U.XMLNS&&(B._nsMap[Y.prefix?Y.localName:""]=Y.value)}(vt,H,Y))}}function Tr(H,B,Y){var Fe=Xn(B,Y);if(!(Fe>=0))throw new at(ae,new Error(H.tagName+"@"+Y));for(var vt=B.length-1;Fe<vt;)B[Fe]=B[++Fe];if(B.length=vt,H){var Wt=H.ownerDocument;Wt&&(Br(Wt,H,Y),Y.ownerElement=null)}}function ws(){}function hn(){}function Wn(H){return("<"==H?"&lt;":">"==H&&"&gt;")||"&"==H&&"&amp;"||'"'==H&&"&quot;"||"&#"+H.charCodeAt()+";"}function Er(H,B){if(B(H))return!0;if(H=H.firstChild)do{if(Er(H,B))return!0}while(H=H.nextSibling)}function Jn(){this.ownerDocument=this}function Br(H,B,Y,Fe){H&&H._inc++,Y.namespaceURI===U.XMLNS&&delete B._nsMap[Y.prefix?Y.localName:""]}function Ai(H,B,Y){if(H&&H._inc){H._inc++;var Fe=B.childNodes;if(Y)Fe[Fe.length++]=Y;else{for(var vt=B.firstChild,Wt=0;vt;)Fe[Wt++]=vt,vt=vt.nextSibling;Fe.length=Wt,delete Fe[Fe.length]}}}function pr(H,B){var Y=B.previousSibling,Fe=B.nextSibling;return Y?Y.nextSibling=Fe:H.firstChild=Fe,Fe?Fe.previousSibling=Y:H.lastChild=Y,B.parentNode=null,B.previousSibling=null,B.nextSibling=null,Ai(H.ownerDocument,H),B}function jn(H){return H&&H.nodeType===hn.DOCUMENT_TYPE_NODE}function zn(H){return H&&H.nodeType===hn.ELEMENT_NODE}function Kn(H){return H&&H.nodeType===hn.TEXT_NODE}function Qt(H,B){var Y=H.childNodes||[];if(oe(Y,zn)||jn(B))return!1;var Fe=oe(Y,jn);return!(B&&Fe&&Y.indexOf(Fe)>Y.indexOf(B))}function Gt(H,B){var Y=H.childNodes||[];if(oe(Y,function Fe(Wt){return zn(Wt)&&Wt!==B}))return!1;var vt=oe(Y,jn);return!(B&&vt&&Y.indexOf(vt)>Y.indexOf(B))}function ni(H,B,Y){var Fe=H.childNodes||[],vt=B.childNodes||[];if(B.nodeType===hn.DOCUMENT_FRAGMENT_NODE){var Wt=vt.filter(zn);if(Wt.length>1||oe(vt,Kn))throw new at(W,"More than one element or text in fragment");if(1===Wt.length&&!Qt(H,Y))throw new at(W,"Element in fragment can not be inserted before doctype")}if(zn(B)&&!Qt(H,Y))throw new at(W,"Only one element can be added and only after doctype");if(jn(B)){if(oe(Fe,jn))throw new at(W,"Only one doctype is allowed");var fn=oe(Fe,zn);if(Y&&Fe.indexOf(fn)<Fe.indexOf(Y))throw new at(W,"Doctype can only be inserted before an element");if(!Y&&fn)throw new at(W,"Doctype can not be appended since element is present")}}function wr(H,B,Y){var Fe=H.childNodes||[],vt=B.childNodes||[];if(B.nodeType===hn.DOCUMENT_FRAGMENT_NODE){var Wt=vt.filter(zn);if(Wt.length>1||oe(vt,Kn))throw new at(W,"More than one element or text in fragment");if(1===Wt.length&&!Gt(H,Y))throw new at(W,"Element in fragment can not be inserted before doctype")}if(zn(B)&&!Gt(H,Y))throw new at(W,"Only one element can be added and only after doctype");if(jn(B)){if(oe(Fe,function($r){return jn($r)&&$r!==Y}))throw new at(W,"Only one doctype is allowed");var fn=oe(Fe,zn);if(Y&&Fe.indexOf(fn)<Fe.indexOf(Y))throw new at(W,"Doctype can only be inserted before an element")}}function ri(H,B,Y,Fe){(function Hn(H,B,Y){if(!function xn(H){return H&&(H.nodeType===hn.DOCUMENT_NODE||H.nodeType===hn.DOCUMENT_FRAGMENT_NODE||H.nodeType===hn.ELEMENT_NODE)}(H))throw new at(W,"Unexpected parent node type "+H.nodeType);if(Y&&Y.parentNode!==H)throw new at(ae,"child not in parent");if(!function sr(H){return H&&(zn(H)||Kn(H)||jn(H)||H.nodeType===hn.DOCUMENT_FRAGMENT_NODE||H.nodeType===hn.COMMENT_NODE||H.nodeType===hn.PROCESSING_INSTRUCTION_NODE)}(B)||jn(B)&&H.nodeType!==hn.DOCUMENT_NODE)throw new at(W,"Unexpected node type "+B.nodeType+" for parent node type "+H.nodeType)})(H,B,Y),H.nodeType===hn.DOCUMENT_NODE&&(Fe||ni)(H,B,Y);var vt=B.parentNode;if(vt&&vt.removeChild(B),B.nodeType===Se){var Wt=B.firstChild;if(null==Wt)return B;var fn=B.lastChild}else Wt=fn=B;var kr=Y?Y.previousSibling:H.lastChild;Wt.previousSibling=kr,fn.nextSibling=Y,kr?kr.nextSibling=Wt:H.firstChild=Wt,null==Y?H.lastChild=fn:Y.previousSibling=fn;do{Wt.parentNode=H}while(Wt!==fn&&(Wt=Wt.nextSibling));return Ai(H.ownerDocument||H,H),B.nodeType==Se&&(B.firstChild=B.lastChild=null),B}function ki(){this._nsMap={}}function An(){}function Mi(){}function Mn(){}function Cr(){}function ii(){}function jt(){}function dt(){}function Vt(){}function tn(){}function nn(){}function gn(){}function Te(){}function fe(H,B){var Y=[],Fe=9==this.nodeType&&this.documentElement||this,vt=Fe.prefix,Wt=Fe.namespaceURI;if(Wt&&null==vt&&null==(vt=Fe.lookupPrefix(Wt)))var fn=[{namespace:Wt,prefix:null}];return Pe(this,Y,H,B,fn),Y.join("")}function ke(H,B,Y){var Fe=H.prefix||"",vt=H.namespaceURI;if(!vt||"xml"===Fe&&vt===U.XML||vt===U.XMLNS)return!1;for(var Wt=Y.length;Wt--;){var fn=Y[Wt];if(fn.prefix===Fe)return fn.namespace!==vt}return!0}function ot(H,B,Y){H.push(" ",B,'="',Y.replace(/[<>&"\t\n\r]/g,Wn),'"')}function Pe(H,B,Y,Fe,vt){if(vt||(vt=[]),Fe){if(!(H=Fe(H)))return;if("string"==typeof H)return void B.push(H)}switch(H.nodeType){case Z:var Wt=H.attributes,fn=Wt.length,ar=H.firstChild,kr=H.tagName,Pn=kr;if(!(Y=U.isHTML(H.namespaceURI)||Y)&&!H.prefix&&H.namespaceURI){for(var $r,Pi=0;Pi<Wt.length;Pi++)if("xmlns"===Wt.item(Pi).name){$r=Wt.item(Pi).value;break}if(!$r)for(var sn=vt.length-1;sn>=0;sn--)if(""===(Gn=vt[sn]).prefix&&Gn.namespace===H.namespaceURI){$r=Gn.namespace;break}if($r!==H.namespaceURI)for(sn=vt.length-1;sn>=0;sn--){var Gn;if((Gn=vt[sn]).namespace===H.namespaceURI){Gn.prefix&&(Pn=Gn.prefix+":"+kr);break}}}B.push("<",Pn);for(var qi=0;qi<fn;qi++)"xmlns"==(zi=Wt.item(qi)).prefix?vt.push({prefix:zi.localName,namespace:zi.value}):"xmlns"==zi.nodeName&&vt.push({prefix:"",namespace:zi.value});for(qi=0;qi<fn;qi++){var zi,si,or;ke(zi=Wt.item(qi),0,vt)&&(ot(B,(si=zi.prefix||"")?"xmlns:"+si:"xmlns",or=zi.namespaceURI),vt.push({prefix:si,namespace:or})),Pe(zi,B,Y,Fe,vt)}if(kr===Pn&&ke(H,0,vt)&&(ot(B,(si=H.prefix||"")?"xmlns:"+si:"xmlns",or=H.namespaceURI),vt.push({prefix:si,namespace:or})),ar||Y&&!/^(?:meta|link|img|br|hr|input)$/i.test(kr)){if(B.push(">"),Y&&/^script$/i.test(kr))for(;ar;)ar.data?B.push(ar.data):Pe(ar,B,Y,Fe,vt.slice()),ar=ar.nextSibling;else for(;ar;)Pe(ar,B,Y,Fe,vt.slice()),ar=ar.nextSibling;B.push("</",Pn,">")}else B.push("/>");return;case nt:case Se:for(ar=H.firstChild;ar;)Pe(ar,B,Y,Fe,vt.slice()),ar=ar.nextSibling;return;case qe:return ot(B,H.name,H.value);case Me:return B.push(H.data.replace(/[<&>]/g,Wn));case Ue:return B.push("<![CDATA[",H.data,"]]>");case Ke:return B.push("\x3c!--",H.data,"--\x3e");case Ge:var Os=H.publicId,gr=H.systemId;if(B.push("<!DOCTYPE ",H.name),Os)B.push(" PUBLIC ",Os),gr&&"."!=gr&&B.push(" ",gr),B.push(">");else if(gr&&"."!=gr)B.push(" SYSTEM ",gr,">");else{var Sr=H.internalSubset;Sr&&B.push(" [",Sr,"]"),B.push(">")}return;case me:return B.push("<?",H.target," ",H.data,"?>");case Tt:return B.push("&",H.nodeName,";");default:B.push("??",H.nodeName)}}function Dt(H,B,Y){var Fe;switch(B.nodeType){case Z:(Fe=B.cloneNode(!1)).ownerDocument=H;case Se:break;case qe:Y=!0}if(Fe||(Fe=B.cloneNode(!1)),Fe.ownerDocument=H,Fe.parentNode=null,Y)for(var vt=B.firstChild;vt;)Fe.appendChild(Dt(H,vt,Y)),vt=vt.nextSibling;return Fe}function zt(H,B,Y){var Fe=new B.constructor;for(var vt in B)if(Object.prototype.hasOwnProperty.call(B,vt)){var Wt=B[vt];"object"!=typeof Wt&&Wt!=Fe[vt]&&(Fe[vt]=Wt)}switch(B.childNodes&&(Fe.childNodes=new wt),Fe.ownerDocument=H,Fe.nodeType){case Z:var fn=B.attributes,kr=Fe.attributes=new Fn,Pn=fn.length;kr._ownerElement=Fe;for(var $r=0;$r<Pn;$r++)Fe.setAttributeNode(zt(H,fn.item($r),!0));break;case qe:Y=!0}if(Y)for(var Pi=B.firstChild;Pi;)Fe.appendChild(zt(H,Pi,Y)),Pi=Pi.nextSibling;return Fe}function kn(H,B,Y){H[B]=Y}rt.INVALID_STATE_ERR=(et[11]="Invalid state",11),rt.SYNTAX_ERR=(et[12]="Syntax error",12),rt.INVALID_MODIFICATION_ERR=(et[13]="Invalid modification",13),rt.NAMESPACE_ERR=(et[14]="Invalid namespace",14),rt.INVALID_ACCESS_ERR=(et[15]="Invalid access",15),at.prototype=Error.prototype,Ce(rt,at),wt.prototype={length:0,item:function(H){return this[H]||null},toString:function(H,B){for(var Y=[],Fe=0;Fe<this.length;Fe++)Pe(this[Fe],Y,H,B);return Y.join("")},filter:function(H){return Array.prototype.filter.call(this,H)},indexOf:function(H){return Array.prototype.indexOf.call(this,H)}},Rt.prototype.item=function(H){return qt(this),this[H]},K(Rt,wt),Fn.prototype={length:0,item:wt.prototype.item,getNamedItem:function(H){for(var B=this.length;B--;){var Y=this[B];if(Y.nodeName==H)return Y}},setNamedItem:function(H){var B=H.ownerElement;if(B&&B!=this._ownerElement)throw new at(He);var Y=this.getNamedItem(H.nodeName);return er(this._ownerElement,this,H,Y),Y},setNamedItemNS:function(H){var Y,B=H.ownerElement;if(B&&B!=this._ownerElement)throw new at(He);return Y=this.getNamedItemNS(H.namespaceURI,H.localName),er(this._ownerElement,this,H,Y),Y},removeNamedItem:function(H){var B=this.getNamedItem(H);return Tr(this._ownerElement,this,B),B},removeNamedItemNS:function(H,B){var Y=this.getNamedItemNS(H,B);return Tr(this._ownerElement,this,Y),Y},getNamedItemNS:function(H,B){for(var Y=this.length;Y--;){var Fe=this[Y];if(Fe.localName==B&&Fe.namespaceURI==H)return Fe}return null}},ws.prototype={hasFeature:function(H,B){return!0},createDocument:function(H,B,Y){var Fe=new Jn;if(Fe.implementation=this,Fe.childNodes=new wt,Fe.doctype=Y||null,Y&&Fe.appendChild(Y),B){var vt=Fe.createElementNS(H,B);Fe.appendChild(vt)}return Fe},createDocumentType:function(H,B,Y){var Fe=new jt;return Fe.name=H,Fe.nodeName=H,Fe.publicId=B||"",Fe.systemId=Y||"",Fe}},hn.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(H,B){return ri(this,H,B)},replaceChild:function(H,B){ri(this,H,B,wr),B&&this.removeChild(B)},removeChild:function(H){return pr(this,H)},appendChild:function(H){return this.insertBefore(H,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(H){return zt(this.ownerDocument||this,this,H)},normalize:function(){for(var H=this.firstChild;H;){var B=H.nextSibling;B&&B.nodeType==Me&&H.nodeType==Me?(this.removeChild(B),H.appendData(B.data)):(H.normalize(),H=B)}},isSupported:function(H,B){return this.ownerDocument.implementation.hasFeature(H,B)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(H){for(var B=this;B;){var Y=B._nsMap;if(Y)for(var Fe in Y)if(Object.prototype.hasOwnProperty.call(Y,Fe)&&Y[Fe]===H)return Fe;B=B.nodeType==qe?B.ownerDocument:B.parentNode}return null},lookupNamespaceURI:function(H){for(var B=this;B;){var Y=B._nsMap;if(Y&&Object.prototype.hasOwnProperty.call(Y,H))return Y[H];B=B.nodeType==qe?B.ownerDocument:B.parentNode}return null},isDefaultNamespace:function(H){return null==this.lookupPrefix(H)}},Ce(ee,hn),Ce(ee,hn.prototype),Jn.prototype={nodeName:"#document",nodeType:nt,doctype:null,documentElement:null,_inc:1,insertBefore:function(H,B){if(H.nodeType==Se){for(var Y=H.firstChild;Y;){var Fe=Y.nextSibling;this.insertBefore(Y,B),Y=Fe}return H}return ri(this,H,B),H.ownerDocument=this,null===this.documentElement&&H.nodeType===Z&&(this.documentElement=H),H},removeChild:function(H){return this.documentElement==H&&(this.documentElement=null),pr(this,H)},replaceChild:function(H,B){ri(this,H,B,wr),H.ownerDocument=this,B&&this.removeChild(B),zn(H)&&(this.documentElement=H)},importNode:function(H,B){return Dt(this,H,B)},getElementById:function(H){var B=null;return Er(this.documentElement,function(Y){if(Y.nodeType==Z&&Y.getAttribute("id")==H)return B=Y,!0}),B},getElementsByClassName:function(H){var B=_e(H);return new Rt(this,function(Y){var Fe=[];return B.length>0&&Er(Y.documentElement,function(vt){if(vt!==Y&&vt.nodeType===Z){var Wt=vt.getAttribute("class");if(Wt){var fn=H===Wt;if(!fn){var kr=_e(Wt);fn=B.every(function ve(H){return function(B){return H&&-1!==H.indexOf(B)}}(kr))}fn&&Fe.push(vt)}}}),Fe})},createElement:function(H){var B=new ki;return B.ownerDocument=this,B.nodeName=H,B.tagName=H,B.localName=H,B.childNodes=new wt,(B.attributes=new Fn)._ownerElement=B,B},createDocumentFragment:function(){var H=new nn;return H.ownerDocument=this,H.childNodes=new wt,H},createTextNode:function(H){var B=new Mn;return B.ownerDocument=this,B.appendData(H),B},createComment:function(H){var B=new Cr;return B.ownerDocument=this,B.appendData(H),B},createCDATASection:function(H){var B=new ii;return B.ownerDocument=this,B.appendData(H),B},createProcessingInstruction:function(H,B){var Y=new gn;return Y.ownerDocument=this,Y.tagName=Y.target=H,Y.nodeValue=Y.data=B,Y},createAttribute:function(H){var B=new An;return B.ownerDocument=this,B.name=H,B.nodeName=H,B.localName=H,B.specified=!0,B},createEntityReference:function(H){var B=new tn;return B.ownerDocument=this,B.nodeName=H,B},createElementNS:function(H,B){var Y=new ki,Fe=B.split(":"),vt=Y.attributes=new Fn;return Y.childNodes=new wt,Y.ownerDocument=this,Y.nodeName=B,Y.tagName=B,Y.namespaceURI=H,2==Fe.length?(Y.prefix=Fe[0],Y.localName=Fe[1]):Y.localName=B,vt._ownerElement=Y,Y},createAttributeNS:function(H,B){var Y=new An,Fe=B.split(":");return Y.ownerDocument=this,Y.nodeName=B,Y.name=B,Y.namespaceURI=H,Y.specified=!0,2==Fe.length?(Y.prefix=Fe[0],Y.localName=Fe[1]):Y.localName=B,Y}},K(Jn,hn),Jn.prototype.getElementsByTagName=(ki.prototype={nodeType:Z,hasAttribute:function(H){return null!=this.getAttributeNode(H)},getAttribute:function(H){var B=this.getAttributeNode(H);return B&&B.value||""},getAttributeNode:function(H){return this.attributes.getNamedItem(H)},setAttribute:function(H,B){var Y=this.ownerDocument.createAttribute(H);Y.value=Y.nodeValue=""+B,this.setAttributeNode(Y)},removeAttribute:function(H){var B=this.getAttributeNode(H);B&&this.removeAttributeNode(B)},appendChild:function(H){return H.nodeType===Se?this.insertBefore(H,null):function un(H,B){return B.parentNode&&B.parentNode.removeChild(B),B.parentNode=H,B.previousSibling=H.lastChild,B.nextSibling=null,B.previousSibling?B.previousSibling.nextSibling=B:H.firstChild=B,H.lastChild=B,Ai(H.ownerDocument,H,B),B}(this,H)},setAttributeNode:function(H){return this.attributes.setNamedItem(H)},setAttributeNodeNS:function(H){return this.attributes.setNamedItemNS(H)},removeAttributeNode:function(H){return this.attributes.removeNamedItem(H.nodeName)},removeAttributeNS:function(H,B){var Y=this.getAttributeNodeNS(H,B);Y&&this.removeAttributeNode(Y)},hasAttributeNS:function(H,B){return null!=this.getAttributeNodeNS(H,B)},getAttributeNS:function(H,B){var Y=this.getAttributeNodeNS(H,B);return Y&&Y.value||""},setAttributeNS:function(H,B,Y){var Fe=this.ownerDocument.createAttributeNS(H,B);Fe.value=Fe.nodeValue=""+Y,this.setAttributeNode(Fe)},getAttributeNodeNS:function(H,B){return this.attributes.getNamedItemNS(H,B)},getElementsByTagName:function(H){return new Rt(this,function(B){var Y=[];return Er(B,function(Fe){Fe!==B&&Fe.nodeType==Z&&("*"===H||Fe.tagName==H)&&Y.push(Fe)}),Y})},getElementsByTagNameNS:function(H,B){return new Rt(this,function(Y){var Fe=[];return Er(Y,function(vt){vt!==Y&&vt.nodeType===Z&&("*"===H||vt.namespaceURI===H)&&("*"===B||vt.localName==B)&&Fe.push(vt)}),Fe})}}).getElementsByTagName,Jn.prototype.getElementsByTagNameNS=ki.prototype.getElementsByTagNameNS,K(ki,hn),An.prototype.nodeType=qe,K(An,hn),Mi.prototype={data:"",substringData:function(H,B){return this.data.substring(H,H+B)},appendData:function(H){this.nodeValue=this.data=H=this.data+H,this.length=H.length},insertData:function(H,B){this.replaceData(H,0,B)},appendChild:function(H){throw new Error(et[W])},deleteData:function(H,B){this.replaceData(H,B,"")},replaceData:function(H,B,Y){var Fe=this.data.substring(0,H),vt=this.data.substring(H+B);this.nodeValue=this.data=Y=Fe+Y+vt,this.length=Y.length}},K(Mi,hn),Mn.prototype={nodeName:"#text",nodeType:Me,splitText:function(H){var B=this.data,Y=B.substring(H);B=B.substring(0,H),this.data=this.nodeValue=B,this.length=B.length;var Fe=this.ownerDocument.createTextNode(Y);return this.parentNode&&this.parentNode.insertBefore(Fe,this.nextSibling),Fe}},K(Mn,Mi),Cr.prototype={nodeName:"#comment",nodeType:Ke},K(Cr,Mi),ii.prototype={nodeName:"#cdata-section",nodeType:Ue},K(ii,Mi),jt.prototype.nodeType=Ge,K(jt,hn),dt.prototype.nodeType=ze,K(dt,hn),Vt.prototype.nodeType=Be,K(Vt,hn),tn.prototype.nodeType=Tt,K(tn,hn),nn.prototype.nodeName="#document-fragment",nn.prototype.nodeType=Se,K(nn,hn),gn.prototype.nodeType=me,K(gn,hn),Te.prototype.serializeToString=function(H,B,Y){return fe.call(H,B,Y)},hn.prototype.toString=fe;try{if(Object.defineProperty){let H=function(B){switch(B.nodeType){case Z:case Se:var Y=[];for(B=B.firstChild;B;)7!==B.nodeType&&8!==B.nodeType&&Y.push(H(B)),B=B.nextSibling;return Y.join("");default:return B.nodeValue}};Object.defineProperty(Rt.prototype,"length",{get:function(){return qt(this),this.$$length}}),Object.defineProperty(hn.prototype,"textContent",{get:function(){return H(this)},set:function(B){switch(this.nodeType){case Z:case Se:for(;this.firstChild;)this.removeChild(this.firstChild);(B||String(B))&&this.appendChild(this.ownerDocument.createTextNode(B));break;default:this.data=B,this.value=B,this.nodeValue=B}}}),kn=function(B,Y,Fe){B["$$"+Y]=Fe}}}catch{}Ie.DocumentType=jt,Ie.DOMException=at,Ie.DOMImplementation=ws,Ie.Element=ki,Ie.Node=hn,Ie.NodeList=wt,Ie.XMLSerializer=Te},4436:(it,Ie,V)=>{var c=V(9401).freeze;Ie.XML_ENTITIES=c({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),Ie.HTML_ENTITIES=c({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),Ie.entityMap=Ie.HTML_ENTITIES},978:(it,Ie,V)=>{V(6853);Ie.DOMParser=V(1991).DOMParser},8702:(it,Ie,V)=>{var c=V(9401).NAMESPACE,oe=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,U=new RegExp("[\\-\\.0-9"+oe.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ye=new RegExp("^"+oe.source+U.source+"*(?::"+oe.source+U.source+"*)?$");function qe(O,$){this.message=O,this.locator=$,Error.captureStackTrace&&Error.captureStackTrace(this,qe)}function Me(){}function Tt(O,$){return $.lineNumber=O.lineNumber,$.columnNumber=O.columnNumber,$}function Be(O,$,W,re,le,he){function se(ut,bt,at){W.attributeNames.hasOwnProperty(ut)&&he.fatalError("Attribute "+ut+" redefined"),W.addValue(ut,bt.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,le),at)}for(var ae,He=++$,Re=0;;){var Oe=O.charAt(He);switch(Oe){case"=":if(1===Re)ae=O.slice($,He),Re=3;else{if(2!==Re)throw new Error("attribute equal must after attrName");Re=3}break;case"'":case'"':if(3===Re||1===Re){if(1===Re&&(he.warning('attribute value must after "="'),ae=O.slice($,He)),!((He=O.indexOf(Oe,$=He+1))>0))throw new Error("attribute value no end '"+Oe+"' match");se(ae,we=O.slice($,He),$-1),Re=5}else{if(4!=Re)throw new Error('attribute value must after "="');se(ae,we=O.slice($,He),$),he.warning('attribute "'+ae+'" missed start quot('+Oe+")!!"),$=He+1,Re=5}break;case"/":switch(Re){case 0:W.setTagName(O.slice($,He));case 5:case 6:case 7:Re=7,W.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return he.error("unexpected end of input"),0==Re&&W.setTagName(O.slice($,He)),He;case">":switch(Re){case 0:W.setTagName(O.slice($,He));case 5:case 6:case 7:break;case 4:case 1:"/"===(we=O.slice($,He)).slice(-1)&&(W.closed=!0,we=we.slice(0,-1));case 2:2===Re&&(we=ae),4==Re?(he.warning('attribute "'+we+'" missed quot(")!'),se(ae,we,$)):((!c.isHTML(re[""])||!we.match(/^(?:disabled|checked|selected)$/i))&&he.warning('attribute "'+we+'" missed value!! "'+we+'" instead!!'),se(we,we,$));break;case 3:throw new Error("attribute value missed!!")}return He;case"\x80":Oe=" ";default:if(Oe<=" ")switch(Re){case 0:W.setTagName(O.slice($,He)),Re=6;break;case 1:ae=O.slice($,He),Re=2;break;case 4:var we=O.slice($,He);he.warning('attribute "'+we+'" missed quot(")!!'),se(ae,we,$);case 5:Re=6}else switch(Re){case 2:(!c.isHTML(re[""])||!ae.match(/^(?:disabled|checked|selected)$/i))&&he.warning('attribute "'+ae+'" missed value!! "'+ae+'" instead2!!'),se(ae,ae,$),$=He,Re=1;break;case 5:he.warning('attribute space is required"'+ae+'"!!');case 6:Re=1,$=He;break;case 3:Re=4,$=He;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}He++}}function me(O,$,W){for(var re=O.tagName,le=null,Oe=O.length;Oe--;){var he=O[Oe],se=he.qName,ae=he.value;if((gt=se.indexOf(":"))>0)var we=he.prefix=se.slice(0,gt),He=se.slice(gt+1),Re="xmlns"===we&&He;else He=se,we=null,Re="xmlns"===se&&"";he.localName=He,!1!==Re&&(null==le&&(le={},Ge(W,W={})),W[Re]=le[Re]=ae,he.uri=c.XMLNS,$.startPrefixMapping(Re,ae))}for(Oe=O.length;Oe--;)(we=(he=O[Oe]).prefix)&&("xml"===we&&(he.uri=c.XML),"xmlns"!==we&&(he.uri=W[we||""]));var gt;(gt=re.indexOf(":"))>0?(we=O.prefix=re.slice(0,gt),He=O.localName=re.slice(gt+1)):(we=null,He=O.localName=re);var ut=O.uri=W[we||""];if($.startElement(ut,He,re,O),!O.closed)return O.currentNSMap=W,O.localNSMap=le,!0;if($.endElement(ut,He,re),le)for(we in le)Object.prototype.hasOwnProperty.call(le,we)&&$.endPrefixMapping(we)}function Ke(O,$,W,re,le){if(/^(?:script|textarea)$/i.test(W)){var he=O.indexOf("</"+W+">",$),se=O.substring($+1,he);if(/[&<]/.test(se))return/^script$/i.test(W)?(le.characters(se,0,se.length),he):(se=se.replace(/&#?\w+;/g,re),le.characters(se,0,se.length),he)}return $+1}function nt(O,$,W,re){var le=re[W];return null==le&&((le=O.lastIndexOf("</"+W+">"))<$&&(le=O.lastIndexOf("</"+W)),re[W]=le),le<$}function Ge(O,$){for(var W in O)Object.prototype.hasOwnProperty.call(O,W)&&($[W]=O[W])}function Se(O,$,W,re){if("-"===O.charAt($+2))return"-"===O.charAt($+3)?(he=O.indexOf("--\x3e",$+4))>$?(W.comment(O,$+4,he-$-4),he+3):(re.error("Unclosed comment"),-1):-1;if("CDATA["==O.substr($+3,6)){var he=O.indexOf("]]>",$+9);return W.startCDATA(),W.characters(O,$+9,he-$-9),W.endCDATA(),he+3}var se=function et(O,$){var W,re=[],le=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(le.lastIndex=$,le.exec(O);W=le.exec(O);)if(re.push(W),W[1])return re}(O,$),ae=se.length;if(ae>1&&/!doctype/i.test(se[0][0])){var we=se[1][0],He=!1,Re=!1;ae>3&&(/^public$/i.test(se[2][0])?(He=se[3][0],Re=ae>4&&se[4][0]):/^system$/i.test(se[2][0])&&(Re=se[3][0]));var Oe=se[ae-1];return W.startDTD(we,He,Re),W.endDTD(),Oe.index+Oe[0].length}return-1}function ze(O,$,W){var re=O.indexOf("?>",$);if(re){var le=O.substring($,re).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return le?(W.processingInstruction(le[1],le[2]),re+2):-1}return-1}function rt(){this.attributeNames={}}(qe.prototype=new Error).name=qe.name,Me.prototype={parse:function(O,$,W){var re=this.domBuilder;re.startDocument(),Ge($,$={}),function Ue(O,$,W,re,le){function se(xn){var sr=xn.slice(1,-1);return Object.hasOwnProperty.call(W,sr)?W[sr]:"#"===sr.charAt(0)?function he(xn){return xn>65535?(xn-=65536,String.fromCharCode(55296+(xn>>10),56320+(1023&xn))):String.fromCharCode(xn)}(parseInt(sr.substr(1).replace("x","0x"))):(le.error("entity not found:"+xn),xn)}function ae(xn){if(xn>at){var sr=O.substring(at,xn).replace(/&#?\w+;/g,se);gt&&we(at),re.characters(sr,0,xn-at),at=xn}}function we(xn,sr){for(;xn>=Re&&(sr=Oe.exec(O));)Re=(He=sr.index)+sr[0].length,gt.lineNumber++;gt.columnNumber=xn-He+1}for(var He=0,Re=0,Oe=/.*(?:\r\n?|\n)|.*$/g,gt=re.locator,ut=[{currentNSMap:$}],bt={},at=0;;){try{var wt=O.indexOf("<",at);if(wt<0){if(!O.substr(at).match(/^\s*$/)){var Rt=re.doc,qt=Rt.createTextNode(O.substr(at));Rt.appendChild(qt),re.currentElement=qt}return}switch(wt>at&&ae(wt),O.charAt(wt+1)){case"/":var Jn=O.indexOf(">",wt+3),Fn=O.substring(wt+2,Jn).replace(/[ \t\n\r]+$/g,""),Xn=ut.pop();Jn<0?(Fn=O.substring(wt+2).replace(/[\s<].*/,""),le.error("end tag name: "+Fn+" is not complete:"+Xn.tagName),Jn=wt+1+Fn.length):Fn.match(/\s</)&&(Fn=Fn.replace(/[\s<].*/,""),le.error("end tag name: "+Fn+" maybe not complete"),Jn=wt+1+Fn.length);var er=Xn.localNSMap,Tr=Xn.tagName==Fn;if(Tr||Xn.tagName&&Xn.tagName.toLowerCase()==Fn.toLowerCase()){if(re.endElement(Xn.uri,Xn.localName,Fn),er)for(var hn in er)Object.prototype.hasOwnProperty.call(er,hn)&&re.endPrefixMapping(hn);Tr||le.fatalError("end tag name: "+Fn+" is not match the current start tagName:"+Xn.tagName)}else ut.push(Xn);Jn++;break;case"?":gt&&we(wt),Jn=ze(O,wt,re);break;case"!":gt&&we(wt),Jn=Se(O,wt,re,le);break;default:gt&&we(wt);var Wn=new rt,Er=ut[ut.length-1].currentNSMap,Pt=(Jn=Be(O,wt,Wn,Er,se,le),Wn.length);if(!Wn.closed&&nt(O,Jn,Wn.tagName,bt)&&(Wn.closed=!0,W.nbsp||le.warning("unclosed xml attribute")),gt&&Pt){for(var Br=Tt(gt,{}),Ai=0;Ai<Pt;Ai++){var pr=Wn[Ai];we(pr.offset),pr.locator=Tt(gt,{})}re.locator=Br,me(Wn,re,Er)&&ut.push(Wn),re.locator=gt}else me(Wn,re,Er)&&ut.push(Wn);c.isHTML(Wn.uri)&&!Wn.closed?Jn=Ke(O,Jn,Wn.tagName,se,re):Jn++}}catch(xn){if(xn instanceof qe)throw xn;le.error("element parse error: "+xn),Jn=-1}Jn>at?at=Jn:ae(Math.max(wt,at)+1)}}(O,$,W,re,this.errorHandler),re.endDocument()}},rt.prototype={setTagName:function(O){if(!ye.test(O))throw new Error("invalid tagName:"+O);this.tagName=O},addValue:function(O,$,W){if(!ye.test(O))throw new Error("invalid attribute:"+O);this.attributeNames[O]=this.length,this[this.length++]={qName:O,value:$,offset:W}},length:0,getLocalName:function(O){return this[O].localName},getLocator:function(O){return this[O].locator},getQName:function(O){return this[O].qName},getURI:function(O){return this[O].uri},getValue:function(O){return this[O].value}},Ie.XMLReader=Me,Ie.ParseError=qe},1421:(it,Ie,V)=>{var U,c=typeof global<"u"?global:typeof window<"u"?window:{},oe=V(5893);typeof document<"u"?U=document:(U=c["__GLOBAL_DOCUMENT_CACHE@4"])||(U=c["__GLOBAL_DOCUMENT_CACHE@4"]=oe),it.exports=U},9226:it=>{var Ie;Ie=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},it.exports=Ie},2703:it=>{it.exports=function V(c){if(!c)return!1;var oe=Ie.call(c);return"[object Function]"===oe||"function"==typeof c&&"[object RegExp]"!==oe||typeof window<"u"&&(c===window.setTimeout||c===window.alert||c===window.confirm||c===window.prompt)};var Ie=Object.prototype.toString},1234:(it,Ie)=>{function V(pe){if(pe&&"object"==typeof pe){var _e=pe.which||pe.keyCode||pe.charCode;_e&&(pe=_e)}if("number"==typeof pe)return ye[pe];var Ce,ve=String(pe);return(Ce=c[ve.toLowerCase()])?Ce:(Ce=oe[ve.toLowerCase()])||(1===ve.length?ve.charCodeAt(0):void 0)}V.isEventKey=function(_e,ve){if(_e&&"object"==typeof _e){var Ce=_e.which||_e.keyCode||_e.charCode;if(null==Ce)return!1;if("string"==typeof ve){var K;if(K=c[ve.toLowerCase()])return K===Ce;if(K=oe[ve.toLowerCase()])return K===Ce}else if("number"==typeof ve)return ve===Ce;return!1}};var c=(Ie=it.exports=V).code=Ie.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},oe=Ie.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(U=97;U<123;U++)c[String.fromCharCode(U)]=U-32;for(var U=48;U<58;U++)c[U-48]=U;for(U=1;U<13;U++)c["f"+U]=U+111;for(U=0;U<10;U++)c["numpad "+U]=U+96;var ye=Ie.names=Ie.title={};for(U in c)ye[c[U]]=U;for(var te in oe)c[te]=oe[te]},7459:(it,Ie,V)=>{var c=V(3357).getUint64;it.exports=function(U){var ye=new DataView(U.buffer,U.byteOffset,U.byteLength),te={version:U[0],flags:new Uint8Array(U.subarray(1,4)),references:[],referenceId:ye.getUint32(4),timescale:ye.getUint32(8)},pe=12;0===te.version?(te.earliestPresentationTime=ye.getUint32(pe),te.firstOffset=ye.getUint32(pe+4),pe+=8):(te.earliestPresentationTime=c(U.subarray(pe)),te.firstOffset=c(U.subarray(pe+8)),pe+=16);var _e=ye.getUint16(pe+=2);for(pe+=2;_e>0;pe+=12,_e--)te.references.push({referenceType:(128&U[pe])>>>7,referencedSize:2147483647&ye.getUint32(pe),subsegmentDuration:ye.getUint32(pe+4),startsWithSap:!!(128&U[pe+8]),sapType:(112&U[pe+8])>>>4,sapDeltaTime:268435455&ye.getUint32(pe+8)});return te}},6277:it=>{var V,c,oe,U,ye,te,pe;ye=function(_e,ve){return V(U(_e,ve))},te=function(_e,ve){return c(oe(_e),ve)},pe=function(_e,ve,Ce){return oe(Ce?_e:_e-ve)},it.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:V=function(_e){return 9e4*_e},secondsToAudioTs:c=function(_e,ve){return _e*ve},videoTsToSeconds:oe=function(_e){return _e/9e4},audioTsToSeconds:U=function(_e,ve){return _e/ve},audioTsToVideoTs:ye,videoTsToAudioTs:te,metadataTsToSeconds:pe}},3357:it=>{var Ie=Math.pow(2,32);it.exports={getUint64:function(c){var U,oe=new DataView(c.buffer,c.byteOffset,c.byteLength);return oe.getBigUint64?(U=oe.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(U):U:oe.getUint32(0)*Ie+oe.getUint32(4)},MAX_UINT32:Ie}},7854:it=>{var Ie=function(V){"use strict";var U,c=Object.prototype,oe=c.hasOwnProperty,ye="function"==typeof Symbol?Symbol:{},te=ye.iterator||"@@iterator",pe=ye.asyncIterator||"@@asyncIterator",_e=ye.toStringTag||"@@toStringTag";function ve(se,ae,we){return Object.defineProperty(se,ae,{value:we,enumerable:!0,configurable:!0,writable:!0}),se[ae]}try{ve({},"")}catch{ve=function(ae,we,He){return ae[we]=He}}function Ce(se,ae,we,He){var Oe=Object.create((ae&&ae.prototype instanceof Tt?ae:Tt).prototype),gt=new re(He||[]);return Oe._invoke=function et(se,ae,we){var He=ee;return function(Oe,gt){if(He===qe)throw new Error("Generator is already running");if(He===Me){if("throw"===Oe)throw gt;return he()}for(we.method=Oe,we.arg=gt;;){var ut=we.delegate;if(ut){var bt=O(ut,we);if(bt){if(bt===Ue)continue;return bt}}if("next"===we.method)we.sent=we._sent=we.arg;else if("throw"===we.method){if(He===ee)throw He=Me,we.arg;we.dispatchException(we.arg)}else"return"===we.method&&we.abrupt("return",we.arg);He=qe;var at=K(se,ae,we);if("normal"===at.type){if(He=we.done?Me:Z,at.arg===Ue)continue;return{value:at.arg,done:we.done}}"throw"===at.type&&(He=Me,we.method="throw",we.arg=at.arg)}}}(se,we,gt),Oe}function K(se,ae,we){try{return{type:"normal",arg:se.call(ae,we)}}catch(He){return{type:"throw",arg:He}}}V.wrap=Ce;var ee="suspendedStart",Z="suspendedYield",qe="executing",Me="completed",Ue={};function Tt(){}function Be(){}function me(){}var Ke={};ve(Ke,te,function(){return this});var nt=Object.getPrototypeOf,Ge=nt&&nt(nt(le([])));Ge&&Ge!==c&&oe.call(Ge,te)&&(Ke=Ge);var Se=me.prototype=Tt.prototype=Object.create(Ke);function ze(se){["next","throw","return"].forEach(function(ae){ve(se,ae,function(we){return this._invoke(ae,we)})})}function rt(se,ae){function we(Oe,gt,ut,bt){var at=K(se[Oe],se,gt);if("throw"!==at.type){var wt=at.arg,Rt=wt.value;return Rt&&"object"==typeof Rt&&oe.call(Rt,"__await")?ae.resolve(Rt.__await).then(function(qt){we("next",qt,ut,bt)},function(qt){we("throw",qt,ut,bt)}):ae.resolve(Rt).then(function(qt){wt.value=qt,ut(wt)},function(qt){return we("throw",qt,ut,bt)})}bt(at.arg)}var He;this._invoke=function Re(Oe,gt){function ut(){return new ae(function(bt,at){we(Oe,gt,bt,at)})}return He=He?He.then(ut,ut):ut()}}function O(se,ae){var we=se.iterator[ae.method];if(we===U){if(ae.delegate=null,"throw"===ae.method){if(se.iterator.return&&(ae.method="return",ae.arg=U,O(se,ae),"throw"===ae.method))return Ue;ae.method="throw",ae.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ue}var He=K(we,se.iterator,ae.arg);if("throw"===He.type)return ae.method="throw",ae.arg=He.arg,ae.delegate=null,Ue;var Re=He.arg;return Re?Re.done?(ae[se.resultName]=Re.value,ae.next=se.nextLoc,"return"!==ae.method&&(ae.method="next",ae.arg=U),ae.delegate=null,Ue):Re:(ae.method="throw",ae.arg=new TypeError("iterator result is not an object"),ae.delegate=null,Ue)}function $(se){var ae={tryLoc:se[0]};1 in se&&(ae.catchLoc=se[1]),2 in se&&(ae.finallyLoc=se[2],ae.afterLoc=se[3]),this.tryEntries.push(ae)}function W(se){var ae=se.completion||{};ae.type="normal",delete ae.arg,se.completion=ae}function re(se){this.tryEntries=[{tryLoc:"root"}],se.forEach($,this),this.reset(!0)}function le(se){if(se){var ae=se[te];if(ae)return ae.call(se);if("function"==typeof se.next)return se;if(!isNaN(se.length)){var we=-1,He=function Re(){for(;++we<se.length;)if(oe.call(se,we))return Re.value=se[we],Re.done=!1,Re;return Re.value=U,Re.done=!0,Re};return He.next=He}}return{next:he}}function he(){return{value:U,done:!0}}return Be.prototype=me,ve(Se,"constructor",me),ve(me,"constructor",Be),Be.displayName=ve(me,_e,"GeneratorFunction"),V.isGeneratorFunction=function(se){var ae="function"==typeof se&&se.constructor;return!!ae&&(ae===Be||"GeneratorFunction"===(ae.displayName||ae.name))},V.mark=function(se){return Object.setPrototypeOf?Object.setPrototypeOf(se,me):(se.__proto__=me,ve(se,_e,"GeneratorFunction")),se.prototype=Object.create(Se),se},V.awrap=function(se){return{__await:se}},ze(rt.prototype),ve(rt.prototype,pe,function(){return this}),V.AsyncIterator=rt,V.async=function(se,ae,we,He,Re){void 0===Re&&(Re=Promise);var Oe=new rt(Ce(se,ae,we,He),Re);return V.isGeneratorFunction(ae)?Oe:Oe.next().then(function(gt){return gt.done?gt.value:Oe.next()})},ze(Se),ve(Se,_e,"Generator"),ve(Se,te,function(){return this}),ve(Se,"toString",function(){return"[object Generator]"}),V.keys=function(se){var ae=[];for(var we in se)ae.push(we);return ae.reverse(),function He(){for(;ae.length;){var Re=ae.pop();if(Re in se)return He.value=Re,He.done=!1,He}return He.done=!0,He}},V.values=le,re.prototype={constructor:re,reset:function(se){if(this.prev=0,this.next=0,this.sent=this._sent=U,this.done=!1,this.delegate=null,this.method="next",this.arg=U,this.tryEntries.forEach(W),!se)for(var ae in this)"t"===ae.charAt(0)&&oe.call(this,ae)&&!isNaN(+ae.slice(1))&&(this[ae]=U)},stop:function(){this.done=!0;var ae=this.tryEntries[0].completion;if("throw"===ae.type)throw ae.arg;return this.rval},dispatchException:function(se){if(this.done)throw se;var ae=this;function we(bt,at){return Oe.type="throw",Oe.arg=se,ae.next=bt,at&&(ae.method="next",ae.arg=U),!!at}for(var He=this.tryEntries.length-1;He>=0;--He){var Re=this.tryEntries[He],Oe=Re.completion;if("root"===Re.tryLoc)return we("end");if(Re.tryLoc<=this.prev){var gt=oe.call(Re,"catchLoc"),ut=oe.call(Re,"finallyLoc");if(gt&&ut){if(this.prev<Re.catchLoc)return we(Re.catchLoc,!0);if(this.prev<Re.finallyLoc)return we(Re.finallyLoc)}else if(gt){if(this.prev<Re.catchLoc)return we(Re.catchLoc,!0)}else{if(!ut)throw new Error("try statement without catch or finally");if(this.prev<Re.finallyLoc)return we(Re.finallyLoc)}}}},abrupt:function(se,ae){for(var we=this.tryEntries.length-1;we>=0;--we){var He=this.tryEntries[we];if(He.tryLoc<=this.prev&&oe.call(He,"finallyLoc")&&this.prev<He.finallyLoc){var Re=He;break}}Re&&("break"===se||"continue"===se)&&Re.tryLoc<=ae&&ae<=Re.finallyLoc&&(Re=null);var Oe=Re?Re.completion:{};return Oe.type=se,Oe.arg=ae,Re?(this.method="next",this.next=Re.finallyLoc,Ue):this.complete(Oe)},complete:function(se,ae){if("throw"===se.type)throw se.arg;return"break"===se.type||"continue"===se.type?this.next=se.arg:"return"===se.type?(this.rval=this.arg=se.arg,this.method="return",this.next="end"):"normal"===se.type&&ae&&(this.next=ae),Ue},finish:function(se){for(var ae=this.tryEntries.length-1;ae>=0;--ae){var we=this.tryEntries[ae];if(we.finallyLoc===se)return this.complete(we.completion,we.afterLoc),W(we),Ue}},catch:function(se){for(var ae=this.tryEntries.length-1;ae>=0;--ae){var we=this.tryEntries[ae];if(we.tryLoc===se){var He=we.completion;if("throw"===He.type){var Re=He.arg;W(we)}return Re}}throw new Error("illegal catch attempt")},delegateYield:function(se,ae,we){return this.delegate={iterator:le(se),resultName:ae,nextLoc:we},"next"===this.method&&(this.arg=U),Ue}},V}(it.exports);try{regeneratorRuntime=Ie}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=Ie:Function("r","regeneratorRuntime = r")(Ie)}},9751:(it,Ie,V)=>{"use strict";V.d(Ie,{y:()=>ve});var c=V(930),oe=V(727),U=V(8822),ye=V(9635),te=V(2416),pe=V(576),_e=V(2806);let ve=(()=>{class Z{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Ue=new Z;return Ue.source=this,Ue.operator=Me,Ue}subscribe(Me,Ue,Tt){const Be=function ee(Z){return Z&&Z instanceof c.Lv||function K(Z){return Z&&(0,pe.m)(Z.next)&&(0,pe.m)(Z.error)&&(0,pe.m)(Z.complete)}(Z)&&(0,oe.Nn)(Z)}(Me)?Me:new c.Hp(Me,Ue,Tt);return(0,_e.x)(()=>{const{operator:me,source:Ke}=this;Be.add(me?me.call(Be,Ke):Ke?this._subscribe(Be):this._trySubscribe(Be))}),Be}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Ue){Me.error(Ue)}}forEach(Me,Ue){return new(Ue=Ce(Ue))((Tt,Be)=>{const me=new c.Hp({next:Ke=>{try{Me(Ke)}catch(nt){Be(nt),me.unsubscribe()}},error:Be,complete:Tt});this.subscribe(me)})}_subscribe(Me){var Ue;return null===(Ue=this.source)||void 0===Ue?void 0:Ue.subscribe(Me)}[U.L](){return this}pipe(...Me){return(0,ye.U)(Me)(this)}toPromise(Me){return new(Me=Ce(Me))((Ue,Tt)=>{let Be;this.subscribe(me=>Be=me,me=>Tt(me),()=>Ue(Be))})}}return Z.create=qe=>new Z(qe),Z})();function Ce(Z){var qe;return null!==(qe=Z??te.v.Promise)&&void 0!==qe?qe:Promise}},7579:(it,Ie,V)=>{"use strict";V.d(Ie,{x:()=>_e});var c=V(9751),oe=V(727);const ye=(0,V(3888).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=V(8737),pe=V(2806);let _e=(()=>{class Ce extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ee){const Z=new ve(this,this);return Z.operator=ee,Z}_throwIfClosed(){if(this.closed)throw new ye}next(ee){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(ee)}})}error(ee){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ee;const{observers:Z}=this;for(;Z.length;)Z.shift().error(ee)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ee}=this;for(;ee.length;)ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ee;return(null===(ee=this.observers)||void 0===ee?void 0:ee.length)>0}_trySubscribe(ee){return this._throwIfClosed(),super._trySubscribe(ee)}_subscribe(ee){return this._throwIfClosed(),this._checkFinalizedStatuses(ee),this._innerSubscribe(ee)}_innerSubscribe(ee){const{hasError:Z,isStopped:qe,observers:Me}=this;return Z||qe?oe.Lc:(this.currentObservers=null,Me.push(ee),new oe.w0(()=>{this.currentObservers=null,(0,te.P)(Me,ee)}))}_checkFinalizedStatuses(ee){const{hasError:Z,thrownError:qe,isStopped:Me}=this;Z?ee.error(qe):Me&&ee.complete()}asObservable(){const ee=new c.y;return ee.source=this,ee}}return Ce.create=(K,ee)=>new ve(K,ee),Ce})();class ve extends _e{constructor(K,ee){super(),this.destination=K,this.source=ee}next(K){var ee,Z;null===(Z=null===(ee=this.destination)||void 0===ee?void 0:ee.next)||void 0===Z||Z.call(ee,K)}error(K){var ee,Z;null===(Z=null===(ee=this.destination)||void 0===ee?void 0:ee.error)||void 0===Z||Z.call(ee,K)}complete(){var K,ee;null===(ee=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===ee||ee.call(K)}_subscribe(K){var ee,Z;return null!==(Z=null===(ee=this.source)||void 0===ee?void 0:ee.subscribe(K))&&void 0!==Z?Z:oe.Lc}}},930:(it,Ie,V)=>{"use strict";V.d(Ie,{Hp:()=>Tt,Lv:()=>Z});var c=V(576),oe=V(727),U=V(2416),ye=V(7849),te=V(5032);const pe=Ce("C",void 0,void 0);function Ce(Ge,Se,ze){return{kind:Ge,value:Se,error:ze}}var K=V(3410),ee=V(2806);class Z extends oe.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,oe.Nn)(Se)&&Se.add(this)):this.destination=nt}static create(Se,ze,rt){return new Tt(Se,ze,rt)}next(Se){this.isStopped?Ke(function ve(Ge){return Ce("N",Ge,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?Ke(function _e(Ge){return Ce("E",void 0,Ge)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?Ke(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Me(Ge,Se){return qe.call(Ge,Se)}class Ue{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:ze}=this;if(ze.next)try{ze.next(Se)}catch(rt){Be(rt)}}error(Se){const{partialObserver:ze}=this;if(ze.error)try{ze.error(Se)}catch(rt){Be(rt)}else Be(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(ze){Be(ze)}}}class Tt extends Z{constructor(Se,ze,rt){let et;if(super(),(0,c.m)(Se)||!Se)et={next:Se??void 0,error:ze??void 0,complete:rt??void 0};else{let O;this&&U.v.useDeprecatedNextContext?(O=Object.create(Se),O.unsubscribe=()=>this.unsubscribe(),et={next:Se.next&&Me(Se.next,O),error:Se.error&&Me(Se.error,O),complete:Se.complete&&Me(Se.complete,O)}):et=Se}this.destination=new Ue(et)}}function Be(Ge){U.v.useDeprecatedSynchronousErrorHandling?(0,ee.O)(Ge):(0,ye.h)(Ge)}function Ke(Ge,Se){const{onStoppedNotification:ze}=U.v;ze&&K.z.setTimeout(()=>ze(Ge,Se))}const nt={closed:!0,next:te.Z,error:function me(Ge){throw Ge},complete:te.Z}},727:(it,Ie,V)=>{"use strict";V.d(Ie,{Lc:()=>pe,w0:()=>te,Nn:()=>_e});var c=V(576);const U=(0,V(3888).d)(Ce=>function(ee){Ce(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((Z,qe)=>`${qe+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee});var ye=V(8737);class te{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:ee}=this;if(ee)if(this._parentage=null,Array.isArray(ee))for(const Me of ee)Me.remove(this);else ee.remove(this);const{initialTeardown:Z}=this;if((0,c.m)(Z))try{Z()}catch(Me){K=Me instanceof U?Me.errors:[Me]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Me of qe)try{ve(Me)}catch(Ue){K=K??[],Ue instanceof U?K=[...K,...Ue.errors]:K.push(Ue)}}if(K)throw new U(K)}}add(K){var ee;if(K&&K!==this)if(this.closed)ve(K);else{if(K instanceof te){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(ee=this._finalizers)&&void 0!==ee?ee:[]).push(K)}}_hasParent(K){const{_parentage:ee}=this;return ee===K||Array.isArray(ee)&&ee.includes(K)}_addParent(K){const{_parentage:ee}=this;this._parentage=Array.isArray(ee)?(ee.push(K),ee):ee?[ee,K]:K}_removeParent(K){const{_parentage:ee}=this;ee===K?this._parentage=null:Array.isArray(ee)&&(0,ye.P)(ee,K)}remove(K){const{_finalizers:ee}=this;ee&&(0,ye.P)(ee,K),K instanceof te&&K._removeParent(this)}}te.EMPTY=(()=>{const Ce=new te;return Ce.closed=!0,Ce})();const pe=te.EMPTY;function _e(Ce){return Ce instanceof te||Ce&&"closed"in Ce&&(0,c.m)(Ce.remove)&&(0,c.m)(Ce.add)&&(0,c.m)(Ce.unsubscribe)}function ve(Ce){(0,c.m)(Ce)?Ce():Ce.unsubscribe()}},2416:(it,Ie,V)=>{"use strict";V.d(Ie,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Ie,V)=>{"use strict";V.d(Ie,{E:()=>oe});const oe=new(V(9751).y)(te=>te.complete())},8996:(it,Ie,V)=>{"use strict";V.d(Ie,{D:()=>Se});var c=V(8421),oe=V(5363),U=V(9468),pe=V(9751),ve=V(2202),Ce=V(576),K=V(9672);function Z(ze,rt){if(!ze)throw new Error("Iterable cannot be null");return new pe.y(et=>{(0,K.f)(et,rt,()=>{const O=ze[Symbol.asyncIterator]();(0,K.f)(et,rt,()=>{O.next().then($=>{$.done?et.complete():et.next($.value)})},0,!0)})})}var qe=V(3670),Me=V(8239),Ue=V(1144),Tt=V(6495),Be=V(2206),me=V(4532),Ke=V(3260);function Se(ze,rt){return rt?function Ge(ze,rt){if(null!=ze){if((0,qe.c)(ze))return function ye(ze,rt){return(0,c.Xf)(ze).pipe((0,U.R)(rt),(0,oe.Q)(rt))}(ze,rt);if((0,Ue.z)(ze))return function _e(ze,rt){return new pe.y(et=>{let O=0;return rt.schedule(function(){O===ze.length?et.complete():(et.next(ze[O++]),et.closed||this.schedule())})})}(ze,rt);if((0,Me.t)(ze))return function te(ze,rt){return(0,c.Xf)(ze).pipe((0,U.R)(rt),(0,oe.Q)(rt))}(ze,rt);if((0,Be.D)(ze))return Z(ze,rt);if((0,Tt.T)(ze))return function ee(ze,rt){return new pe.y(et=>{let O;return(0,K.f)(et,rt,()=>{O=ze[ve.h](),(0,K.f)(et,rt,()=>{let $,W;try{({value:$,done:W}=O.next())}catch(re){return void et.error(re)}W?et.complete():et.next($)},0,!0)}),()=>(0,Ce.m)(O?.return)&&O.return()})}(ze,rt);if((0,Ke.L)(ze))return function nt(ze,rt){return Z((0,Ke.Q)(ze),rt)}(ze,rt)}throw(0,me.z)(ze)}(ze,rt):(0,c.Xf)(ze)}},8421:(it,Ie,V)=>{"use strict";V.d(Ie,{Xf:()=>qe});var c=V(655),oe=V(1144),U=V(8239),ye=V(9751),te=V(3670),pe=V(2206),_e=V(4532),ve=V(6495),Ce=V(3260),K=V(576),ee=V(7849),Z=V(8822);function qe(Ge){if(Ge instanceof ye.y)return Ge;if(null!=Ge){if((0,te.c)(Ge))return function Me(Ge){return new ye.y(Se=>{const ze=Ge[Z.L]();if((0,K.m)(ze.subscribe))return ze.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ge);if((0,oe.z)(Ge))return function Ue(Ge){return new ye.y(Se=>{for(let ze=0;ze<Ge.length&&!Se.closed;ze++)Se.next(Ge[ze]);Se.complete()})}(Ge);if((0,U.t)(Ge))return function Tt(Ge){return new ye.y(Se=>{Ge.then(ze=>{Se.closed||(Se.next(ze),Se.complete())},ze=>Se.error(ze)).then(null,ee.h)})}(Ge);if((0,pe.D)(Ge))return me(Ge);if((0,ve.T)(Ge))return function Be(Ge){return new ye.y(Se=>{for(const ze of Ge)if(Se.next(ze),Se.closed)return;Se.complete()})}(Ge);if((0,Ce.L)(Ge))return function Ke(Ge){return me((0,Ce.Q)(Ge))}(Ge)}throw(0,_e.z)(Ge)}function me(Ge){return new ye.y(Se=>{(function nt(Ge,Se){var ze,rt,et,O;return(0,c.mG)(this,void 0,void 0,function*(){try{for(ze=(0,c.KL)(Ge);!(rt=yield ze.next()).done;)if(Se.next(rt.value),Se.closed)return}catch($){et={error:$}}finally{try{rt&&!rt.done&&(O=ze.return)&&(yield O.call(ze))}finally{if(et)throw et.error}}Se.complete()})})(Ge,Se).catch(ze=>Se.error(ze))})}},6451:(it,Ie,V)=>{"use strict";V.d(Ie,{T:()=>pe});var c=V(8189),oe=V(8421),U=V(515),ye=V(3269),te=V(8996);function pe(..._e){const ve=(0,ye.yG)(_e),Ce=(0,ye._6)(_e,1/0),K=_e;return K.length?1===K.length?(0,oe.Xf)(K[0]):(0,c.J)(Ce)((0,te.D)(K,ve)):U.E}},5403:(it,Ie,V)=>{"use strict";V.d(Ie,{x:()=>oe});var c=V(930);function oe(ye,te,pe,_e,ve){return new U(ye,te,pe,_e,ve)}class U extends c.Lv{constructor(te,pe,_e,ve,Ce,K){super(te),this.onFinalize=Ce,this.shouldUnsubscribe=K,this._next=pe?function(ee){try{pe(ee)}catch(Z){te.error(Z)}}:super._next,this._error=ve?function(ee){try{ve(ee)}catch(Z){te.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(ee){te.error(ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(it,Ie,V)=>{"use strict";V.d(Ie,{U:()=>U});var c=V(4482),oe=V(5403);function U(ye,te){return(0,c.e)((pe,_e)=>{let ve=0;pe.subscribe((0,oe.x)(_e,Ce=>{_e.next(ye.call(te,Ce,ve++))}))})}},8189:(it,Ie,V)=>{"use strict";V.d(Ie,{J:()=>U});var c=V(5577),oe=V(4671);function U(ye=1/0){return(0,c.z)(oe.y,ye)}},5577:(it,Ie,V)=>{"use strict";V.d(Ie,{z:()=>ve});var c=V(4004),oe=V(8421),U=V(4482),ye=V(9672),te=V(5403),_e=V(576);function ve(Ce,K,ee=1/0){return(0,_e.m)(K)?ve((Z,qe)=>(0,c.U)((Me,Ue)=>K(Z,Me,qe,Ue))((0,oe.Xf)(Ce(Z,qe))),ee):("number"==typeof K&&(ee=K),(0,U.e)((Z,qe)=>function pe(Ce,K,ee,Z,qe,Me,Ue,Tt){const Be=[];let me=0,Ke=0,nt=!1;const Ge=()=>{nt&&!Be.length&&!me&&K.complete()},Se=rt=>me<Z?ze(rt):Be.push(rt),ze=rt=>{Me&&K.next(rt),me++;let et=!1;(0,oe.Xf)(ee(rt,Ke++)).subscribe((0,te.x)(K,O=>{qe?.(O),Me?Se(O):K.next(O)},()=>{et=!0},void 0,()=>{if(et)try{for(me--;Be.length&&me<Z;){const O=Be.shift();Ue?(0,ye.f)(K,Ue,()=>ze(O)):ze(O)}Ge()}catch(O){K.error(O)}}))};return Ce.subscribe((0,te.x)(K,Se,()=>{nt=!0,Ge()})),()=>{Tt?.()}}(Z,qe,Ce,ee)))}},5363:(it,Ie,V)=>{"use strict";V.d(Ie,{Q:()=>ye});var c=V(9672),oe=V(4482),U=V(5403);function ye(te,pe=0){return(0,oe.e)((_e,ve)=>{_e.subscribe((0,U.x)(ve,Ce=>(0,c.f)(ve,te,()=>ve.next(Ce),pe),()=>(0,c.f)(ve,te,()=>ve.complete(),pe),Ce=>(0,c.f)(ve,te,()=>ve.error(Ce),pe)))})}},3099:(it,Ie,V)=>{"use strict";V.d(Ie,{B:()=>te});var c=V(8421),oe=V(7579),U=V(930),ye=V(4482);function te(_e={}){const{connector:ve=(()=>new oe.x),resetOnError:Ce=!0,resetOnComplete:K=!0,resetOnRefCountZero:ee=!0}=_e;return Z=>{let qe,Me,Ue,Tt=0,Be=!1,me=!1;const Ke=()=>{Me?.unsubscribe(),Me=void 0},nt=()=>{Ke(),qe=Ue=void 0,Be=me=!1},Ge=()=>{const Se=qe;nt(),Se?.unsubscribe()};return(0,ye.e)((Se,ze)=>{Tt++,!me&&!Be&&Ke();const rt=Ue=Ue??ve();ze.add(()=>{Tt--,0===Tt&&!me&&!Be&&(Me=pe(Ge,ee))}),rt.subscribe(ze),!qe&&Tt>0&&(qe=new U.Hp({next:et=>rt.next(et),error:et=>{me=!0,Ke(),Me=pe(nt,Ce,et),rt.error(et)},complete:()=>{Be=!0,Ke(),Me=pe(nt,K),rt.complete()}}),(0,c.Xf)(Se).subscribe(qe))})(Z)}}function pe(_e,ve,...Ce){if(!0===ve)return void _e();if(!1===ve)return;const K=new U.Hp({next:()=>{K.unsubscribe(),_e()}});return ve(...Ce).subscribe(K)}},9468:(it,Ie,V)=>{"use strict";V.d(Ie,{R:()=>oe});var c=V(4482);function oe(U,ye=0){return(0,c.e)((te,pe)=>{pe.add(U.schedule(()=>te.subscribe(pe),ye))})}},8505:(it,Ie,V)=>{"use strict";V.d(Ie,{b:()=>te});var c=V(576),oe=V(4482),U=V(5403),ye=V(4671);function te(pe,_e,ve){const Ce=(0,c.m)(pe)||_e||ve?{next:pe,error:_e,complete:ve}:pe;return Ce?(0,oe.e)((K,ee)=>{var Z;null===(Z=Ce.subscribe)||void 0===Z||Z.call(Ce);let qe=!0;K.subscribe((0,U.x)(ee,Me=>{var Ue;null===(Ue=Ce.next)||void 0===Ue||Ue.call(Ce,Me),ee.next(Me)},()=>{var Me;qe=!1,null===(Me=Ce.complete)||void 0===Me||Me.call(Ce),ee.complete()},Me=>{var Ue;qe=!1,null===(Ue=Ce.error)||void 0===Ue||Ue.call(Ce,Me),ee.error(Me)},()=>{var Me,Ue;qe&&(null===(Me=Ce.unsubscribe)||void 0===Me||Me.call(Ce)),null===(Ue=Ce.finalize)||void 0===Ue||Ue.call(Ce)}))}):ye.y}},4408:(it,Ie,V)=>{"use strict";V.d(Ie,{o:()=>te});var c=V(727);class oe extends c.w0{constructor(_e,ve){super()}schedule(_e,ve=0){return this}}const U={setInterval(pe,_e,...ve){const{delegate:Ce}=U;return Ce?.setInterval?Ce.setInterval(pe,_e,...ve):setInterval(pe,_e,...ve)},clearInterval(pe){const{delegate:_e}=U;return(_e?.clearInterval||clearInterval)(pe)},delegate:void 0};var ye=V(8737);class te extends oe{constructor(_e,ve){super(_e,ve),this.scheduler=_e,this.work=ve,this.pending=!1}schedule(_e,ve=0){var Ce;if(this.closed)return this;this.state=_e;const K=this.id,ee=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(ee,K,ve)),this.pending=!0,this.delay=ve,this.id=null!==(Ce=this.id)&&void 0!==Ce?Ce:this.requestAsyncId(ee,this.id,ve),this}requestAsyncId(_e,ve,Ce=0){return U.setInterval(_e.flush.bind(_e,this),Ce)}recycleAsyncId(_e,ve,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return ve;null!=ve&&U.clearInterval(ve)}execute(_e,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(_e,ve);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,ve){let K,Ce=!1;try{this.work(_e)}catch(ee){Ce=!0,K=ee||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:_e,scheduler:ve}=this,{actions:Ce}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ye.P)(Ce,this),null!=_e&&(this.id=this.recycleAsyncId(ve,_e,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Ie,V)=>{"use strict";V.d(Ie,{v:()=>U});var c=V(6063);class oe{constructor(te,pe=oe.now){this.schedulerActionCtor=te,this.now=pe}schedule(te,pe=0,_e){return new this.schedulerActionCtor(this,te).schedule(_e,pe)}}oe.now=c.l.now;class U extends oe{constructor(te,pe=oe.now){super(te,pe),this.actions=[],this._active=!1}flush(te){const{actions:pe}=this;if(this._active)return void pe.push(te);let _e;this._active=!0;do{if(_e=te.execute(te.state,te.delay))break}while(te=pe.shift());if(this._active=!1,_e){for(;te=pe.shift();)te.unsubscribe();throw _e}}}},4986:(it,Ie,V)=>{"use strict";V.d(Ie,{P:()=>ye,z:()=>U});var c=V(4408);const U=new(V(7565).v)(c.o),ye=U},6063:(it,Ie,V)=>{"use strict";V.d(Ie,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(it,Ie,V)=>{"use strict";V.d(Ie,{z:()=>c});const c={setTimeout(oe,U,...ye){const{delegate:te}=c;return te?.setTimeout?te.setTimeout(oe,U,...ye):setTimeout(oe,U,...ye)},clearTimeout(oe){const{delegate:U}=c;return(U?.clearTimeout||clearTimeout)(oe)},delegate:void 0}},2202:(it,Ie,V)=>{"use strict";V.d(Ie,{h:()=>oe});const oe=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Ie,V)=>{"use strict";V.d(Ie,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(it,Ie,V)=>{"use strict";V.d(Ie,{_6:()=>pe,jO:()=>ye,yG:()=>te});var c=V(576),oe=V(3532);function U(_e){return _e[_e.length-1]}function ye(_e){return(0,c.m)(U(_e))?_e.pop():void 0}function te(_e){return(0,oe.K)(U(_e))?_e.pop():void 0}function pe(_e,ve){return"number"==typeof U(_e)?_e.pop():ve}},8737:(it,Ie,V)=>{"use strict";function c(oe,U){if(oe){const ye=oe.indexOf(U);0<=ye&&oe.splice(ye,1)}}V.d(Ie,{P:()=>c})},3888:(it,Ie,V)=>{"use strict";function c(oe){const ye=oe(te=>{Error.call(te),te.stack=(new Error).stack});return ye.prototype=Object.create(Error.prototype),ye.prototype.constructor=ye,ye}V.d(Ie,{d:()=>c})},2806:(it,Ie,V)=>{"use strict";V.d(Ie,{O:()=>ye,x:()=>U});var c=V(2416);let oe=null;function U(te){if(c.v.useDeprecatedSynchronousErrorHandling){const pe=!oe;if(pe&&(oe={errorThrown:!1,error:null}),te(),pe){const{errorThrown:_e,error:ve}=oe;if(oe=null,_e)throw ve}}else te()}function ye(te){c.v.useDeprecatedSynchronousErrorHandling&&oe&&(oe.errorThrown=!0,oe.error=te)}},9672:(it,Ie,V)=>{"use strict";function c(oe,U,ye,te=0,pe=!1){const _e=U.schedule(function(){ye(),pe?oe.add(this.schedule(null,te)):this.unsubscribe()},te);if(oe.add(_e),!pe)return _e}V.d(Ie,{f:()=>c})},4671:(it,Ie,V)=>{"use strict";function c(oe){return oe}V.d(Ie,{y:()=>c})},1144:(it,Ie,V)=>{"use strict";V.d(Ie,{z:()=>c});const c=oe=>oe&&"number"==typeof oe.length&&"function"!=typeof oe},2206:(it,Ie,V)=>{"use strict";V.d(Ie,{D:()=>oe});var c=V(576);function oe(U){return Symbol.asyncIterator&&(0,c.m)(U?.[Symbol.asyncIterator])}},576:(it,Ie,V)=>{"use strict";function c(oe){return"function"==typeof oe}V.d(Ie,{m:()=>c})},3670:(it,Ie,V)=>{"use strict";V.d(Ie,{c:()=>U});var c=V(8822),oe=V(576);function U(ye){return(0,oe.m)(ye[c.L])}},6495:(it,Ie,V)=>{"use strict";V.d(Ie,{T:()=>U});var c=V(2202),oe=V(576);function U(ye){return(0,oe.m)(ye?.[c.h])}},8239:(it,Ie,V)=>{"use strict";V.d(Ie,{t:()=>oe});var c=V(576);function oe(U){return(0,c.m)(U?.then)}},3260:(it,Ie,V)=>{"use strict";V.d(Ie,{L:()=>ye,Q:()=>U});var c=V(655),oe=V(576);function U(te){return(0,c.FC)(this,arguments,function*(){const _e=te.getReader();try{for(;;){const{value:ve,done:Ce}=yield(0,c.qq)(_e.read());if(Ce)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ve)}}finally{_e.releaseLock()}})}function ye(te){return(0,oe.m)(te?.getReader)}},3532:(it,Ie,V)=>{"use strict";V.d(Ie,{K:()=>oe});var c=V(576);function oe(U){return U&&(0,c.m)(U.schedule)}},4482:(it,Ie,V)=>{"use strict";V.d(Ie,{A:()=>oe,e:()=>U});var c=V(576);function oe(ye){return(0,c.m)(ye?.lift)}function U(ye){return te=>{if(oe(te))return te.lift(function(pe){try{return ye(pe,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(it,Ie,V)=>{"use strict";function c(){}V.d(Ie,{Z:()=>c})},9635:(it,Ie,V)=>{"use strict";V.d(Ie,{U:()=>U,z:()=>oe});var c=V(4671);function oe(...ye){return U(ye)}function U(ye){return 0===ye.length?c.y:1===ye.length?ye[0]:function(pe){return ye.reduce((_e,ve)=>ve(_e),pe)}}},7849:(it,Ie,V)=>{"use strict";V.d(Ie,{h:()=>U});var c=V(2416),oe=V(3410);function U(ye){oe.z.setTimeout(()=>{const{onUnhandledError:te}=c.v;if(!te)throw ye;te(ye)})}},4532:(it,Ie,V)=>{"use strict";function c(oe){return new TypeError(`You provided ${null!==oe&&"object"==typeof oe?"an invalid object":`'${oe}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ie,{z:()=>c})},8099:it=>{it.exports=function Ie(V,c){var oe,U=null;try{oe=JSON.parse(V,c)}catch(ye){U=ye}return[U,oe]}},3871:function(it){var V,c,oe,U,ye;V=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,c=/^(?=([^\/?#]*))\1([^]*)$/,oe=/(?:\/|^)\.(?=\/)/g,U=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,it.exports=ye={buildAbsoluteURL:function(te,pe,_e){if(_e=_e||{},te=te.trim(),!(pe=pe.trim())){if(!_e.alwaysNormalize)return te;var ve=ye.parseURL(te);if(!ve)throw new Error("Error trying to parse base URL.");return ve.path=ye.normalizePath(ve.path),ye.buildURLFromParts(ve)}var Ce=ye.parseURL(pe);if(!Ce)throw new Error("Error trying to parse relative URL.");if(Ce.scheme)return _e.alwaysNormalize?(Ce.path=ye.normalizePath(Ce.path),ye.buildURLFromParts(Ce)):pe;var K=ye.parseURL(te);if(!K)throw new Error("Error trying to parse base URL.");if(!K.netLoc&&K.path&&"/"!==K.path[0]){var ee=c.exec(K.path);K.netLoc=ee[1],K.path=ee[2]}K.netLoc&&!K.path&&(K.path="/");var Z={scheme:K.scheme,netLoc:Ce.netLoc,path:null,params:Ce.params,query:Ce.query,fragment:Ce.fragment};if(!Ce.netLoc&&(Z.netLoc=K.netLoc,"/"!==Ce.path[0]))if(Ce.path){var qe=K.path,Me=qe.substring(0,qe.lastIndexOf("/")+1)+Ce.path;Z.path=ye.normalizePath(Me)}else Z.path=K.path,Ce.params||(Z.params=K.params,Ce.query||(Z.query=K.query));return null===Z.path&&(Z.path=_e.alwaysNormalize?ye.normalizePath(Ce.path):Ce.path),ye.buildURLFromParts(Z)},parseURL:function(te){var pe=V.exec(te);return pe?{scheme:pe[1]||"",netLoc:pe[2]||"",path:pe[3]||"",params:pe[4]||"",query:pe[5]||"",fragment:pe[6]||""}:null},normalizePath:function(te){for(te=te.split("").reverse().join("").replace(oe,"");te.length!==(te=te.replace(U,"")).length;);return te.split("").reverse().join("")},buildURLFromParts:function(te){return te.scheme+te.netLoc+te.path+te.params+te.query+te.fragment}}},3629:(it,Ie,V)=>{var c=V(9226),oe=it.exports={WebVTT:V(8318),VTTCue:V(5713),VTTRegion:V(3872)};c.vttjs=oe,c.WebVTT=oe.WebVTT;var U=oe.VTTCue,ye=oe.VTTRegion,te=c.VTTCue,pe=c.VTTRegion;oe.shim=function(){c.VTTCue=U,c.VTTRegion=ye},oe.restore=function(){c.VTTCue=te,c.VTTRegion=pe},c.VTTCue||oe.shim()},8318:(it,Ie,V)=>{var c=V(1421),oe=Object.create||function(){function O(){}return function($){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return O.prototype=$,new O}}();function U(O,$){this.name="ParsingError",this.code=O.code,this.message=$||O.message}function ye(O){function $(re,le,he,se){return 3600*(0|re)+60*(0|le)+(0|he)+(0|se)/1e3}var W=O.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return W?W[3]?$(W[1],W[2],W[3].replace(":",""),W[4]):W[1]>59?$(W[1],W[2],0,W[4]):$(0,W[1],W[2],W[4]):null}function te(){this.values=oe(null)}function pe(O,$,W,re){var le=re?O.split(re):[O];for(var he in le)if("string"==typeof le[he]){var se=le[he].split(W);2===se.length&&$(se[0].trim(),se[1].trim())}}function _e(O,$,W){var re=O;function le(){var ae=ye(O);if(null===ae)throw new U(U.Errors.BadTimeStamp,"Malformed timestamp: "+re);return O=O.replace(/^[^\sa-zA-Z-]+/,""),ae}function se(){O=O.replace(/^\s+/,"")}if(se(),$.startTime=le(),se(),"--\x3e"!==O.substr(0,3))throw new U(U.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+re);O=O.substr(3),se(),$.endTime=le(),se(),function he(ae,we){var He=new te;pe(ae,function(Re,Oe){switch(Re){case"region":for(var gt=W.length-1;gt>=0;gt--)if(W[gt].id===Oe){He.set(Re,W[gt].region);break}break;case"vertical":He.alt(Re,Oe,["rl","lr"]);break;case"line":var ut=Oe.split(","),bt=ut[0];He.integer(Re,bt),He.percent(Re,bt)&&He.set("snapToLines",!1),He.alt(Re,bt,["auto"]),2===ut.length&&He.alt("lineAlign",ut[1],["start","center","end"]);break;case"position":ut=Oe.split(","),He.percent(Re,ut[0]),2===ut.length&&He.alt("positionAlign",ut[1],["start","center","end"]);break;case"size":He.percent(Re,Oe);break;case"align":He.alt(Re,Oe,["start","center","end","left","right"])}},/:/,/\s/),we.region=He.get("region",null),we.vertical=He.get("vertical","");try{we.line=He.get("line","auto")}catch{}we.lineAlign=He.get("lineAlign","start"),we.snapToLines=He.get("snapToLines",!0),we.size=He.get("size",100);try{we.align=He.get("align","center")}catch{we.align=He.get("align","middle")}try{we.position=He.get("position","auto")}catch{we.position=He.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},we.align)}we.positionAlign=He.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},we.align)}(O,$)}(U.prototype=oe(Error.prototype)).constructor=U,U.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},te.prototype={set:function(O,$){!this.get(O)&&""!==$&&(this.values[O]=$)},get:function(O,$,W){return W?this.has(O)?this.values[O]:$[W]:this.has(O)?this.values[O]:$},has:function(O){return O in this.values},alt:function(O,$,W){for(var re=0;re<W.length;++re)if($===W[re]){this.set(O,$);break}},integer:function(O,$){/^-?\d+$/.test($)&&this.set(O,parseInt($,10))},percent:function(O,$){return!!($.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&($=parseFloat($),$>=0&&$<=100))&&(this.set(O,$),!0)}};var ve=c.createElement&&c.createElement("textarea"),Ce={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},K={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},ee={v:"title",lang:"lang"},Z={rt:"ruby"};function qe(O,$){function W(){if(!$)return null;var at=$.match(/^([^<]*)(<[^>]*>?)?/);return function bt(wt){return $=$.substr(wt.length),wt}(at[1]?at[1]:at[2])}function re(bt){return ve.innerHTML=bt,bt=ve.textContent,ve.textContent="",bt}function he(bt,at){var wt=Ce[bt];if(!wt)return null;var Rt=O.document.createElement(wt),qt=ee[bt];return qt&&at&&(Rt[qt]=at.trim()),Rt}for(var we,se=O.document.createElement("div"),ae=se,He=[];null!==(we=W());)if("<"!==we[0])ae.appendChild(O.document.createTextNode(re(we)));else{if("/"===we[1]){He.length&&He[He.length-1]===we.substr(2).replace(">","")&&(He.pop(),ae=ae.parentNode);continue}var Oe,Re=ye(we.substr(1,we.length-2));if(Re){Oe=O.document.createProcessingInstruction("timestamp",Re),ae.appendChild(Oe);continue}var gt=we.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!gt||!(Oe=he(gt[1],gt[3]))||Z[(at=Oe).localName]&&Z[at.localName]!==ae.localName)continue;if(gt[2]){var ut=gt[2].split(".");ut.forEach(function(bt){var at=/^bg_/.test(bt),wt=at?bt.slice(3):bt;K.hasOwnProperty(wt)&&(Oe.style[at?"background-color":"color"]=K[wt])}),Oe.className=ut.join(" ")}He.push(gt[1]),ae.appendChild(Oe),ae=Oe}var at;return se}var Me=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Ue(O){for(var $=0;$<Me.length;$++){var W=Me[$];if(O>=W[0]&&O<=W[1])return!0}return!1}function Tt(O){var $=[],W="";if(!O||!O.childNodes)return"ltr";function le(ae,we){for(var He=we.childNodes.length-1;He>=0;He--)ae.push(we.childNodes[He])}function he(ae){if(!ae||!ae.length)return null;var we=ae.pop(),He=we.textContent||we.innerText;if(He){var Re=He.match(/^.*(\n|\r)/);return Re?(ae.length=0,Re[0]):He}return"ruby"===we.tagName?he(ae):we.childNodes?(le(ae,we),he(ae)):void 0}for(le($,O);W=he($);)for(var se=0;se<W.length;se++)if(Ue(W.charCodeAt(se)))return"rtl";return"ltr"}function me(){}function Ke(O,$,W){me.call(this),this.cue=$,this.cueDiv=qe(O,$.text);var re={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===$.vertical?"horizontal-tb":"lr"===$.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(re,this.cueDiv),this.div=O.document.createElement("div"),re={direction:Tt(this.cueDiv),writingMode:""===$.vertical?"horizontal-tb":"lr"===$.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===$.align?"center":$.align,font:W.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(re),this.div.appendChild(this.cueDiv);var le=0;switch($.positionAlign){case"start":le=$.position;break;case"center":le=$.position-$.size/2;break;case"end":le=$.position-$.size}this.applyStyles(""===$.vertical?{left:this.formatStyle(le,"%"),width:this.formatStyle($.size,"%")}:{top:this.formatStyle(le,"%"),height:this.formatStyle($.size,"%")}),this.move=function(he){this.applyStyles({top:this.formatStyle(he.top,"px"),bottom:this.formatStyle(he.bottom,"px"),left:this.formatStyle(he.left,"px"),right:this.formatStyle(he.right,"px"),height:this.formatStyle(he.height,"px"),width:this.formatStyle(he.width,"px")})}}function nt(O){var $,W,re,le;if(O.div){W=O.div.offsetHeight,re=O.div.offsetWidth,le=O.div.offsetTop;var he=(he=O.div.childNodes)&&(he=he[0])&&he.getClientRects&&he.getClientRects();O=O.div.getBoundingClientRect(),$=he?Math.max(he[0]&&he[0].height||0,O.height/he.length):0}this.left=O.left,this.right=O.right,this.top=O.top||le,this.height=O.height||W,this.bottom=O.bottom||le+(O.height||W),this.width=O.width||re,this.lineHeight=void 0!==$?$:O.lineHeight}function Ge(O,$,W,re){var he=new nt($),se=$.cue,ae=function Be(O){if("number"==typeof O.line&&(O.snapToLines||O.line>=0&&O.line<=100))return O.line;if(!O.track||!O.track.textTrackList||!O.track.textTrackList.mediaElement)return-1;for(var $=O.track,W=$.textTrackList,re=0,le=0;le<W.length&&W[le]!==$;le++)"showing"===W[le].mode&&re++;return-1*++re}(se),we=[];if(se.snapToLines){var He;switch(se.vertical){case"":we=["+y","-y"],He="height";break;case"rl":we=["+x","-x"],He="width";break;case"lr":we=["-x","+x"],He="width"}var Re=he.lineHeight,Oe=Re*Math.round(ae),gt=W[He]+Re,ut=we[0];Math.abs(Oe)>gt&&(Oe=Oe<0?-1:1,Oe*=Math.ceil(gt/Re)*Re),ae<0&&(Oe+=""===se.vertical?W.height:W.width,we=we.reverse()),he.move(ut,Oe)}else{var bt=he.lineHeight/W.height*100;switch(se.lineAlign){case"center":ae-=bt/2;break;case"end":ae-=bt}switch(se.vertical){case"":$.applyStyles({top:$.formatStyle(ae,"%")});break;case"rl":$.applyStyles({left:$.formatStyle(ae,"%")});break;case"lr":$.applyStyles({right:$.formatStyle(ae,"%")})}we=["+y","-x","+x","-y"],he=new nt($)}var at=function le(wt,Rt){for(var qt,Fn=new nt(wt),Xn=1,er=0;er<Rt.length;er++){for(;wt.overlapsOppositeAxis(W,Rt[er])||wt.within(W)&&wt.overlapsAny(re);)wt.move(Rt[er]);if(wt.within(W))return wt;var Tr=wt.intersectPercentage(W);Xn>Tr&&(qt=new nt(wt),Xn=Tr),wt=new nt(Fn)}return qt||Fn}(he,we);$.move(at.toCSSCompatValues(W))}function Se(){}me.prototype.applyStyles=function(O,$){for(var W in $=$||this.div,O)O.hasOwnProperty(W)&&($.style[W]=O[W])},me.prototype.formatStyle=function(O,$){return 0===O?0:O+$},(Ke.prototype=oe(me.prototype)).constructor=Ke,nt.prototype.move=function(O,$){switch($=void 0!==$?$:this.lineHeight,O){case"+x":this.left+=$,this.right+=$;break;case"-x":this.left-=$,this.right-=$;break;case"+y":this.top+=$,this.bottom+=$;break;case"-y":this.top-=$,this.bottom-=$}},nt.prototype.overlaps=function(O){return this.left<O.right&&this.right>O.left&&this.top<O.bottom&&this.bottom>O.top},nt.prototype.overlapsAny=function(O){for(var $=0;$<O.length;$++)if(this.overlaps(O[$]))return!0;return!1},nt.prototype.within=function(O){return this.top>=O.top&&this.bottom<=O.bottom&&this.left>=O.left&&this.right<=O.right},nt.prototype.overlapsOppositeAxis=function(O,$){switch($){case"+x":return this.left<O.left;case"-x":return this.right>O.right;case"+y":return this.top<O.top;case"-y":return this.bottom>O.bottom}},nt.prototype.intersectPercentage=function(O){return Math.max(0,Math.min(this.right,O.right)-Math.max(this.left,O.left))*Math.max(0,Math.min(this.bottom,O.bottom)-Math.max(this.top,O.top))/(this.height*this.width)},nt.prototype.toCSSCompatValues=function(O){return{top:this.top-O.top,bottom:O.bottom-this.bottom,left:this.left-O.left,right:O.right-this.right,height:this.height,width:this.width}},nt.getSimpleBoxPosition=function(O){var $=O.div?O.div.offsetHeight:O.tagName?O.offsetHeight:0,W=O.div?O.div.offsetWidth:O.tagName?O.offsetWidth:0,re=O.div?O.div.offsetTop:O.tagName?O.offsetTop:0;return{left:(O=O.div?O.div.getBoundingClientRect():O.tagName?O.getBoundingClientRect():O).left,right:O.right,top:O.top||re,height:O.height||$,bottom:O.bottom||re+(O.height||$),width:O.width||W}},Se.StringDecoder=function(){return{decode:function(O){if(!O)return"";if("string"!=typeof O)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(O))}}},Se.convertCueToDOMTree=function(O,$){return O&&$?qe(O,$):null},Se.processCues=function(O,$,W){if(!O||!$||!W)return null;for(;W.firstChild;)W.removeChild(W.firstChild);var re=O.document.createElement("div");if(re.style.position="absolute",re.style.left="0",re.style.right="0",re.style.top="0",re.style.bottom="0",re.style.margin="1.5%",W.appendChild(re),function le(Re){for(var Oe=0;Oe<Re.length;Oe++)if(Re[Oe].hasBeenReset||!Re[Oe].displayState)return!0;return!1}($)){var se=[],ae=nt.getSimpleBoxPosition(re),He={font:Math.round(.05*ae.height*100)/100+"px sans-serif"};!function(){for(var Re,Oe,gt=0;gt<$.length;gt++)Re=new Ke(O,Oe=$[gt],He),re.appendChild(Re.div),Ge(0,Re,ae,se),Oe.displayState=Re.div,se.push(nt.getSimpleBoxPosition(Re))}()}else for(var he=0;he<$.length;he++)re.appendChild($[he].displayState)},(Se.Parser=function(O,$,W){W||(W=$,$={}),$||($={}),this.window=O,this.vttjs=$,this.state="INITIAL",this.buffer="",this.decoder=W||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(O){if(!(O instanceof U))throw O;this.onparsingerror&&this.onparsingerror(O)},parse:function(O){var Re,$=this;function W(){for(var Re=$.buffer,Oe=0;Oe<Re.length&&"\r"!==Re[Oe]&&"\n"!==Re[Oe];)++Oe;var gt=Re.substr(0,Oe);return"\r"===Re[Oe]&&++Oe,"\n"===Re[Oe]&&++Oe,$.buffer=Re.substr(Oe),gt}O&&($.buffer+=$.decoder.decode(O,{stream:!0}));try{var se;if("INITIAL"===$.state){if(!/\r\n|\n/.test($.buffer))return this;var ae=(se=W()).match(/^WEBVTT([ \t].*)?$/);if(!ae||!ae[0])throw new U(U.Errors.BadSignature);$.state="HEADER"}for(var we=!1;$.buffer;){if(!/\r\n|\n/.test($.buffer))return this;switch(we?we=!1:se=W(),$.state){case"HEADER":/:/.test(se)?(Re=se).match(/X-TIMESTAMP-MAP/)?pe(Re,function(Oe,gt){"X-TIMESTAMP-MAP"===Oe&&function le(Re){var Oe=new te;pe(Re,function(gt,ut){switch(gt){case"MPEGT":Oe.integer(gt+"S",ut);break;case"LOCA":Oe.set(gt+"L",ye(ut))}},/[^\d]:/,/,/),$.ontimestampmap&&$.ontimestampmap({MPEGTS:Oe.get("MPEGTS"),LOCAL:Oe.get("LOCAL")})}(gt)},/=/):pe(Re,function(Oe,gt){"Region"===Oe&&function re(Re){var Oe=new te;if(pe(Re,function(ut,bt){switch(ut){case"id":Oe.set(ut,bt);break;case"width":Oe.percent(ut,bt);break;case"lines":Oe.integer(ut,bt);break;case"regionanchor":case"viewportanchor":var at=bt.split(",");if(2!==at.length)break;var wt=new te;if(wt.percent("x",at[0]),wt.percent("y",at[1]),!wt.has("x")||!wt.has("y"))break;Oe.set(ut+"X",wt.get("x")),Oe.set(ut+"Y",wt.get("y"));break;case"scroll":Oe.alt(ut,bt,["up"])}},/=/,/\s/),Oe.has("id")){var gt=new($.vttjs.VTTRegion||$.window.VTTRegion);gt.width=Oe.get("width",100),gt.lines=Oe.get("lines",3),gt.regionAnchorX=Oe.get("regionanchorX",0),gt.regionAnchorY=Oe.get("regionanchorY",100),gt.viewportAnchorX=Oe.get("viewportanchorX",0),gt.viewportAnchorY=Oe.get("viewportanchorY",100),gt.scroll=Oe.get("scroll",""),$.onregion&&$.onregion(gt),$.regionList.push({id:Oe.get("id"),region:gt})}}(gt)},/:/):se||($.state="ID");continue;case"NOTE":se||($.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(se)){$.state="NOTE";break}if(!se)continue;$.cue=new($.vttjs.VTTCue||$.window.VTTCue)(0,0,"");try{$.cue.align="center"}catch{$.cue.align="middle"}if($.state="CUE",-1===se.indexOf("--\x3e")){$.cue.id=se;continue}case"CUE":try{_e(se,$.cue,$.regionList)}catch(Re){$.reportOrThrowError(Re),$.cue=null,$.state="BADCUE";continue}$.state="CUETEXT";continue;case"CUETEXT":var He=-1!==se.indexOf("--\x3e");if(!se||He&&(we=!0)){$.oncue&&$.oncue($.cue),$.cue=null,$.state="ID";continue}$.cue.text&&($.cue.text+="\n"),$.cue.text+=se.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":se||($.state="ID");continue}}}catch(Re){$.reportOrThrowError(Re),"CUETEXT"===$.state&&$.cue&&$.oncue&&$.oncue($.cue),$.cue=null,$.state="INITIAL"===$.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var O=this;try{if(O.buffer+=O.decoder.decode(),(O.cue||"HEADER"===O.state)&&(O.buffer+="\n\n",O.parse()),"INITIAL"===O.state)throw new U(U.Errors.BadSignature)}catch($){O.reportOrThrowError($)}return O.onflush&&O.onflush(),this}},it.exports=Se},5713:it=>{var V={"":1,lr:1,rl:1},c={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function U(te){return"string"==typeof te&&!!c[te.toLowerCase()]&&te.toLowerCase()}function ye(te,pe,_e){this.hasBeenReset=!1;var ve="",Ce=!1,K=te,ee=pe,Z=_e,qe=null,Me="",Ue=!0,Tt="auto",Be="start",me="auto",Ke="auto",nt=100,Ge="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return ve},set:function(Se){ve=""+Se}},pauseOnExit:{enumerable:!0,get:function(){return Ce},set:function(Se){Ce=!!Se}},startTime:{enumerable:!0,get:function(){return K},set:function(Se){if("number"!=typeof Se)throw new TypeError("Start time must be set to a number.");K=Se,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return ee},set:function(Se){if("number"!=typeof Se)throw new TypeError("End time must be set to a number.");ee=Se,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Z},set:function(Se){Z=""+Se,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return qe},set:function(Se){qe=Se,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return Me},set:function(Se){var ze=function oe(te){return"string"==typeof te&&!!V[te.toLowerCase()]&&te.toLowerCase()}(Se);if(!1===ze)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");Me=ze,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return Ue},set:function(Se){Ue=!!Se,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return Tt},set:function(Se){if("number"!=typeof Se&&"auto"!==Se)throw new SyntaxError("Line: an invalid number or illegal string was specified.");Tt=Se,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Be},set:function(Se){var ze=U(Se);ze?(Be=ze,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return me},set:function(Se){if(Se<0||Se>100)throw new Error("Position must be between 0 and 100.");me=Se,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Ke},set:function(Se){var ze=U(Se);ze?(Ke=ze,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return nt},set:function(Se){if(Se<0||Se>100)throw new Error("Size must be between 0 and 100.");nt=Se,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Ge},set:function(Se){var ze=U(Se);if(!ze)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Ge=ze,this.hasBeenReset=!0}}}),this.displayState=void 0}ye.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},it.exports=ye},3872:it=>{var Ie={"":!0,up:!0};function c(U){return"number"==typeof U&&U>=0&&U<=100}it.exports=function oe(){var U=100,ye=3,te=0,pe=100,_e=0,ve=100,Ce="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return U},set:function(K){if(!c(K))throw new Error("Width must be between 0 and 100.");U=K}},lines:{enumerable:!0,get:function(){return ye},set:function(K){if("number"!=typeof K)throw new TypeError("Lines must be set to a number.");ye=K}},regionAnchorY:{enumerable:!0,get:function(){return pe},set:function(K){if(!c(K))throw new Error("RegionAnchorX must be between 0 and 100.");pe=K}},regionAnchorX:{enumerable:!0,get:function(){return te},set:function(K){if(!c(K))throw new Error("RegionAnchorY must be between 0 and 100.");te=K}},viewportAnchorY:{enumerable:!0,get:function(){return ve},set:function(K){if(!c(K))throw new Error("ViewportAnchorY must be between 0 and 100.");ve=K}},viewportAnchorX:{enumerable:!0,get:function(){return _e},set:function(K){if(!c(K))throw new Error("ViewportAnchorX must be between 0 and 100.");_e=K}},scroll:{enumerable:!0,get:function(){return Ce},set:function(K){var ee=function V(U){return"string"==typeof U&&!!Ie[U.toLowerCase()]&&U.toLowerCase()}(K);!1===ee?console.warn("Scroll: an invalid or illegal string was specified."):Ce=ee}}})}},655:(it,Ie,V)=>{"use strict";function ye(W,re){var le={};for(var he in W)Object.prototype.hasOwnProperty.call(W,he)&&re.indexOf(he)<0&&(le[he]=W[he]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var se=0;for(he=Object.getOwnPropertySymbols(W);se<he.length;se++)re.indexOf(he[se])<0&&Object.prototype.propertyIsEnumerable.call(W,he[se])&&(le[he[se]]=W[he[se]])}return le}function ve(W,re,le,he){return new(le||(le=Promise))(function(ae,we){function He(gt){try{Oe(he.next(gt))}catch(ut){we(ut)}}function Re(gt){try{Oe(he.throw(gt))}catch(ut){we(ut)}}function Oe(gt){gt.done?ae(gt.value):function se(ae){return ae instanceof le?ae:new le(function(we){we(ae)})}(gt.value).then(He,Re)}Oe((he=he.apply(W,re||[])).next())})}function Be(W){return this instanceof Be?(this.v=W,this):new Be(W)}function me(W,re,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,he=le.apply(W,re||[]),ae=[];return se={},we("next"),we("throw"),we("return"),se[Symbol.asyncIterator]=function(){return this},se;function we(bt){he[bt]&&(se[bt]=function(at){return new Promise(function(wt,Rt){ae.push([bt,at,wt,Rt])>1||He(bt,at)})})}function He(bt,at){try{!function Re(bt){bt.value instanceof Be?Promise.resolve(bt.value.v).then(Oe,gt):ut(ae[0][2],bt)}(he[bt](at))}catch(wt){ut(ae[0][3],wt)}}function Oe(bt){He("next",bt)}function gt(bt){He("throw",bt)}function ut(bt,at){bt(at),ae.shift(),ae.length&&He(ae[0][0],ae[0][1])}}function nt(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,re=W[Symbol.asyncIterator];return re?re.call(W):(W=function Z(W){var re="function"==typeof Symbol&&Symbol.iterator,le=re&&W[re],he=0;if(le)return le.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&he>=W.length&&(W=void 0),{value:W&&W[he++],done:!W}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),le={},he("next"),he("throw"),he("return"),le[Symbol.asyncIterator]=function(){return this},le);function he(ae){le[ae]=W[ae]&&function(we){return new Promise(function(He,Re){!function se(ae,we,He,Re){Promise.resolve(Re).then(function(Oe){ae({value:Oe,done:He})},we)}(He,Re,(we=W[ae](we)).done,we.value)})}}}V.d(Ie,{FC:()=>me,KL:()=>nt,_T:()=>ye,mG:()=>ve,qq:()=>Be})},5893:()=>{},7156:it=>{function Ie(c,oe,U,ye,te,pe,_e){try{var ve=c[pe](_e),Ce=ve.value}catch(K){return void U(K)}ve.done?oe(Ce):Promise.resolve(Ce).then(ye,te)}it.exports=function V(c){return function(){var oe=this,U=arguments;return new Promise(function(ye,te){var pe=c.apply(oe,U);function _e(Ce){Ie(pe,ye,te,_e,ve,"next",Ce)}function ve(Ce){Ie(pe,ye,te,_e,ve,"throw",Ce)}_e(void 0)})}},it.exports.__esModule=!0,it.exports.default=it.exports},434:it=>{function Ie(){return it.exports=Ie=Object.assign?Object.assign.bind():function(V){for(var c=1;c<arguments.length;c++){var oe=arguments[c];for(var U in oe)Object.prototype.hasOwnProperty.call(oe,U)&&(V[U]=oe[U])}return V},it.exports.__esModule=!0,it.exports.default=it.exports,Ie.apply(this,arguments)}it.exports=Ie,it.exports.__esModule=!0,it.exports.default=it.exports},4650:(it,Ie,V)=>{"use strict";V.d(Ie,{$8M:()=>rc,$Z:()=>fl,AFp:()=>El,ALo:()=>ty,AaK:()=>ve,AsE:()=>e_,BQk:()=>ih,CHM:()=>Uu,CRH:()=>Th,CZH:()=>Op,CqO:()=>Lm,D6c:()=>Dh,DdM:()=>vh,EJc:()=>rw,EiD:()=>xb,EpF:()=>wc,F$t:()=>jT,F4k:()=>Zv,FYo:()=>im,FiY:()=>Bt,G48:()=>eM,Gf:()=>x_,GfV:()=>Ms,Gpc:()=>ee,Hsn:()=>UT,JOm:()=>Qs,JVY:()=>cc,KtG:()=>Vu,L6k:()=>Ui,LAX:()=>Hg,LFG:()=>qr,LSH:()=>Db,Lbi:()=>Hk,Lck:()=>as,MAs:()=>Om,MGl:()=>Qv,MMx:()=>c_,NdJ:()=>sh,O4$:()=>_d,OlP:()=>ur,Oqu:()=>YT,PXZ:()=>mN,Q6J:()=>ap,QGY:()=>_s,QP$:()=>kn,Qsj:()=>JC,R0b:()=>no,RDi:()=>b,Rgc:()=>xp,SBq:()=>rm,Sil:()=>Kk,Suo:()=>$E,TTD:()=>Ws,TgZ:()=>oa,Udp:()=>qT,VKq:()=>_h,W1O:()=>lI,WLB:()=>p_,X6Q:()=>Jk,XFs:()=>Pt,Xpm:()=>dt,Xts:()=>Qg,Y36:()=>Zd,YKP:()=>u_,YNc:()=>Tc,Yjl:()=>ot,Yz7:()=>at,Z0I:()=>Fn,ZZ4:()=>Fp,_Bn:()=>Wx,_UZ:()=>Ec,_Vd:()=>nm,_c5:()=>Ew,_uU:()=>ZT,aQg:()=>my,c2e:()=>Gk,cJS:()=>Rt,cg1:()=>fp,dDg:()=>Nr,dqk:()=>Hn,eBb:()=>Ma,eFA:()=>VI,ekj:()=>ci,eoX:()=>ls,evT:()=>lm,f3M:()=>k,g9A:()=>MI,h0i:()=>Ep,hGG:()=>ZI,hij:()=>$m,iGM:()=>ay,ifc:()=>Gt,ip1:()=>kI,jDz:()=>Jm,kL8:()=>Tx,kcU:()=>Qh,lG2:()=>ke,lcZ:()=>y_,lqb:()=>$d,lri:()=>Np,mCW:()=>Vd,n5z:()=>_o,n_E:()=>Sp,oAB:()=>gn,oxw:()=>BS,pB0:()=>Gg,q3G:()=>Ei,q4F:()=>Hb,qLn:()=>Lf,qOj:()=>qv,qZA:()=>Nm,qzn:()=>ka,rWj:()=>cw,s9C:()=>up,sBO:()=>GI,sIi:()=>Dn,s_b:()=>Ip,soG:()=>F_,tb:()=>L_,tp0:()=>Ut,uIk:()=>kT,vHH:()=>Ue,vpe:()=>Ao,wAp:()=>ln,xi3:()=>UE,xp6:()=>jf,ynx:()=>lp,z2F:()=>Ch,z3N:()=>Ti,zSh:()=>Jg,zs3:()=>na});var c=V(7579),oe=V(727),U=V(9751),ye=V(6451),te=V(3099);function pe(o){for(let a in o)if(o[a]===pe)return a;throw Error("Could not find renamed property on target object.")}function _e(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function ve(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ve).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Ce(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const K=pe({__forward_ref__:pe});function ee(o){return o.__forward_ref__=ee,o.toString=function(){return ve(this())},o}function Z(o){return qe(o)?o():o}function qe(o){return"function"==typeof o&&o.hasOwnProperty(K)&&o.__forward_ref__===ee}class Ue extends Error{constructor(a,u){super(function Tt(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function Be(o){return"string"==typeof o?o:null==o?"":String(o)}function Se(o,a){throw new Ue(-201,!1)}function Re(o,a){null==o&&function Oe(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function at(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Rt(o){return{providers:o.providers||[],imports:o.imports||[]}}function qt(o){return Xn(o,hn)||Xn(o,Er)}function Fn(o){return null!==qt(o)}function Xn(o,a){return o.hasOwnProperty(a)?o[a]:null}function ws(o){return o&&(o.hasOwnProperty(Wn)||o.hasOwnProperty(Jn))?o[Wn]:null}const hn=pe({\u0275prov:pe}),Wn=pe({\u0275inj:pe}),Er=pe({ngInjectableDef:pe}),Jn=pe({ngInjectorDef:pe});var Pt=(()=>((Pt=Pt||{})[Pt.Default=0]="Default",Pt[Pt.Host=1]="Host",Pt[Pt.Self=2]="Self",Pt[Pt.SkipSelf=4]="SkipSelf",Pt[Pt.Optional=8]="Optional",Pt))();let Br;function pr(o){const a=Br;return Br=o,a}function xn(o,a,u){const h=qt(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&Pt.Optional?null:void 0!==a?a:void Se(ve(o))}function jn(o){return{toString:o}.toString()}var zn=(()=>((zn=zn||{})[zn.OnPush=0]="OnPush",zn[zn.Default=1]="Default",zn))(),Gt=(()=>{return(o=Gt||(Gt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Gt;var o})();const Hn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ri={},un=[],ki=pe({\u0275cmp:pe}),An=pe({\u0275dir:pe}),Mi=pe({\u0275pipe:pe}),Mn=pe({\u0275mod:pe}),Cr=pe({\u0275fac:pe}),ii=pe({__NG_ELEMENT_ID__:pe});let jt=0;function dt(o){return jn(()=>{const u=!0===o.standalone,h={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===zn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||un,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Gt.Emulated,id:"c"+jt++,styles:o.styles||un,_:null,setInput:null,schemas:o.schemas||null,tView:null},m=o.dependencies,T=o.features;return f.inputs=fe(o.inputs,h),f.outputs=fe(o.outputs),T&&T.forEach(C=>C(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(tn).filter(nn):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(zt).filter(nn):null,f})}function tn(o){return Pe(o)||Dt(o)}function nn(o){return null!==o}function gn(o){return jn(()=>({type:o.type,bootstrap:o.bootstrap||un,declarations:o.declarations||un,imports:o.imports||un,exports:o.exports||un,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function fe(o,a){if(null==o)return ri;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,a&&(a[f]=m)}return u}const ke=dt;function ot(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function Pe(o){return o[ki]||null}function Dt(o){return o[An]||null}function zt(o){return o[Mi]||null}function kn(o){const a=Pe(o)||Dt(o)||zt(o);return null!==a&&a.standalone}function tr(o,a){const u=o[Mn]||null;if(!u&&!0===a)throw new Error(`Type ${ve(o)} does not have '\u0275mod' property.`);return u}function pi(o){return Array.isArray(o)&&"object"==typeof o[1]}function ns(o){return Array.isArray(o)&&!0===o[1]}function Iu(o){return 0!=(8&o.flags)}function Ol(o){return 2==(2&o.flags)}function nd(o){return 1==(1&o.flags)}function Wi(o){return null!==o.template}function ig(o){return 0!=(256&o[2])}function zs(o,a){return o.hasOwnProperty(Cr)?o[Cr]:null}class fo{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Ws(){return fa}function fa(o){return o.type.prototype.ngOnChanges&&(o.setInput=ku),Nl}function Nl(){const o=ag(this),a=o?.current;if(a){const u=o.previous;if(u===ri)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function ku(o,a,u,h){const f=ag(o)||function Cs(o,a){return o[ad]=a}(o,{previous:ri,current:null}),m=f.current||(f.current={}),T=f.previous,C=this.declaredInputs[u],A=T[C];m[C]=new fo(A&&A.currentValue,a,T===ri),o[h]=a}Ws.ngInherit=!0;const ad="__ngSimpleChanges__";function ag(o){return o[ad]||null}function Mr(o){for(;Array.isArray(o);)o=o[0];return o}function xs(o,a){return Mr(a[o])}function Ki(o,a){return Mr(a[o.index])}function Za(o,a){return o.data[a]}function go(o,a){return o[a]}function Nn(o,a){const u=a[o];return pi(u)?u:u[0]}function pa(o){return 64==(64&o[2])}function Ls(o,a){return null==a?null:o[a]}function Nu(o){o[18]=0}function xr(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const dn={lFrame:yd(null),bindingsEnabled:!0};function mo(){return dn.bindingsEnabled}function ft(){return dn.lFrame.lView}function In(){return dn.lFrame.tView}function Uu(o){return dn.lFrame.contextLView=o,o[8]}function Vu(o){return dn.lFrame.contextLView=null,o}function Pr(){let o=Bu();for(;null!==o&&64===o.type;)o=o.parent;return o}function Bu(){return dn.lFrame.currentTNode}function Is(o,a){const u=dn.lFrame;u.currentTNode=o,u.isParent=a}function Fl(){return dn.lFrame.isParent}function jl(){dn.lFrame.isParent=!1}function Rr(){const o=dn.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function ga(){return dn.lFrame.bindingIndex++}function yo(o){const a=dn.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function Qy(o,a){const u=dn.lFrame;u.bindingIndex=u.bindingRootIndex=o,$u(a)}function $u(o){dn.lFrame.currentDirectiveIndex=o}function pd(){return dn.lFrame.currentQueryIndex}function $l(o){dn.lFrame.currentQueryIndex=o}function gd(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Hu(o,a,u){if(u&Pt.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&Pt.Host||(f=gd(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=dn.lFrame=md();return h.currentTNode=a,h.lView=o,!0}function Gu(o){const a=md(),u=o[1];dn.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function md(){const o=dn.lFrame,a=null===o?null:o.child;return null===a?yd(o):a}function yd(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function vd(){const o=dn.lFrame;return dn.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Yh=vd;function ma(){const o=vd();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ai(){return dn.lFrame.selectedIndex}function hs(o){dn.lFrame.selectedIndex=o}function lr(){const o=dn.lFrame;return Za(o.tView,o.selectedIndex)}function _d(){dn.lFrame.currentNamespace="svg"}function Qh(){!function Td(){dn.lFrame.currentNamespace=null}()}function Wu(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:C,ngAfterViewInit:A,ngAfterViewChecked:N,ngOnDestroy:q}=m;T&&(o.contentHooks||(o.contentHooks=[])).push(-u,T),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),A&&(o.viewHooks||(o.viewHooks=[])).push(-u,A),N&&((o.viewHooks||(o.viewHooks=[])).push(u,N),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,N)),null!=q&&(o.destroyHooks||(o.destroyHooks=[])).push(u,q)}}function va(o,a,u){Xa(o,a,3,u)}function Qa(o,a,u,h){(3&o[2])===u&&Xa(o,a,u,h)}function Jh(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function Xa(o,a,u,h){const m=h??-1,T=a.length-1;let C=0;for(let A=void 0!==h?65535&o[18]:0;A<T;A++)if("number"==typeof a[A+1]){if(C=a[A],null!=h&&C>=h)break}else a[A]<0&&(o[18]+=65536),(C<m||-1==m)&&(ef(o,u,a,A),o[18]=(4294901760&o[18])+A+2),A++}function ef(o,a,u,h){const f=u[h]<0,m=u[h+1],C=o[f?-u[h]:u[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class zo{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function el(o,a,u){let h=0;for(;h<u.length;){const f=u[h];if("number"==typeof f){if(0!==f)break;h++;const m=u[h++],T=u[h++],C=u[h++];o.setAttribute(a,T,C,m)}else{const m=f,T=u[++h];Qu(m)?o.setProperty(a,m,T):o.setAttribute(a,m,T),h++}}return h}function ba(o){return 3===o||4===o||6===o}function Qu(o){return 64===o.charCodeAt(0)}function Hl(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||nf(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function nf(o,a,u,h,f){let m=0,T=o.length;if(-1===a)T=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){T=-1;break}if(C>a){T=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==T&&(o.splice(T,0,a),m=T+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function rf(o){return-1!==o}function gi(o){return 32767&o}function ql(o,a){let u=function Gl(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let Zs=!0;function zl(o){const a=Zs;return Zs=o,a}let Hr=0;const Fs={};function Ta(o,a){const u=Ju(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,Kl(h.data,o),Kl(a,null),Kl(h.blueprint,null));const f=ec(o,a),m=o.injectorIndex;if(rf(f)){const T=gi(f),C=ql(f,a),A=C[1].data;for(let N=0;N<8;N++)a[m+N]=C[T+N]|A[T+N]}return a[m+8]=f,m}function Kl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Ju(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ec(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){if(h=rl(f),null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function Wo(o,a,u){!function Xu(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(ii)&&(h=u[ii]),null==h&&(h=u[ii]=Hr++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function Ko(o,a,u){if(u&Pt.Optional||void 0!==o)return o;Se()}function wd(o,a,u,h){if(u&Pt.Optional&&void 0===h&&(h=null),0==(u&(Pt.Self|Pt.Host))){const f=o[9],m=pr(void 0);try{return f?f.get(a,h,u&Pt.Optional):xn(a,h,u&Pt.Optional)}finally{pr(m)}}return Ko(h,0,u)}function Ea(o,a,u,h=Pt.Default,f){if(null!==o){if(1024&a[2]){const T=function nl(o,a,u,h,f){let m=o,T=a;for(;null!==m&&null!==T&&1024&T[2]&&!(256&T[2]);){const C=Zl(m,T,u,h|Pt.Self,Fs);if(C!==Fs)return C;let A=m.parent;if(!A){const N=T[21];if(N){const q=N.get(u,Fs,h);if(q!==Fs)return q}A=rl(T),T=T[15]}m=A}return f}(o,a,u,h,Fs);if(T!==Fs)return T}const m=Zl(o,a,u,h,Fs);if(m!==Fs)return m}return wd(a,u,h,f)}function Zl(o,a,u,h,f){const m=function Cd(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(ii)?o[ii]:void 0;return"number"==typeof a?a>=0?255&a:Sd:a}(u);if("function"==typeof m){if(!Hu(a,o,h))return h&Pt.Host?Ko(f,0,h):wd(a,u,h,f);try{const T=m(h);if(null!=T||h&Pt.Optional)return T;Se()}finally{Yh()}}else if("number"==typeof m){let T=null,C=Ju(o,a),A=-1,N=h&Pt.Host?a[16][6]:null;for((-1===C||h&Pt.SkipSelf)&&(A=-1===C?ec(o,a):a[C+8],-1!==A&&Yl(h,!1)?(T=a[1],C=gi(A),a=ql(A,a)):C=-1);-1!==C;){const q=a[1];if(tc(m,C,q.data)){const J=lf(C,a,u,T,h,N);if(J!==Fs)return J}A=a[C+8],-1!==A&&Yl(h,a[1].data[C+8]===N)&&tc(m,C,a)?(T=q,C=gi(A),a=ql(A,a)):C=-1}}return f}function lf(o,a,u,h,f,m){const T=a[1],C=T.data[o+8],q=tl(C,T,u,null==h?Ol(C)&&Zs:h!=T&&0!=(3&C.type),f&Pt.Host&&m===C);return null!==q?vo(a,T,q,C):Fs}function tl(o,a,u,h,f){const m=o.providerIndexes,T=a.data,C=1048575&m,A=o.directiveStart,q=m>>20,xe=f?C+q:o.directiveEnd;for(let $e=h?C:C+q;$e<xe;$e++){const lt=T[$e];if($e<A&&u===lt||$e>=A&&lt.type===u)return $e}if(f){const $e=T[A];if($e&&Wi($e)&&$e.type===u)return A}return null}function vo(o,a,u,h){let f=o[u];const m=a.data;if(function _a(o){return o instanceof zo}(f)){const T=f;T.resolving&&function Ke(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${o}${u}`)}(function me(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Be(o)}(m[u]));const C=zl(T.canSeeViewProviders);T.resolving=!0;const A=T.injectImpl?pr(T.injectImpl):null;Hu(o,h,Pt.Default);try{f=o[u]=T.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function Xh(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const T=fa(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,T),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,T)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==A&&pr(A),zl(C),T.resolving=!1,Yh()}}return f}function tc(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function Yl(o,a){return!(o&Pt.Self||o&Pt.Host&&a)}class wa{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return Ea(this._tNode,this._lView,a,h,u)}}function Sd(){return new wa(Pr(),ft())}function _o(o){return jn(()=>{const a=o.prototype.constructor,u=a[Cr]||nc(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[Cr]||nc(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function nc(o){return qe(o)?()=>{const a=nc(Z(o));return a&&a()}:zs(o)}function rl(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function rc(o){return function af(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(ba(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(Pr(),o)}const Zo="__parameters__";function ol(o,a,u){return jn(()=>{const h=function ic(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const T=new f(...m);return C.annotation=T,C;function C(A,N,q){const J=A.hasOwnProperty(Zo)?A[Zo]:Object.defineProperty(A,Zo,{value:[]})[Zo];for(;J.length<=q;)J.push(null);return(J[q]=J[q]||[]).push(T),A}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class ur{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=at({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ot(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),Ot(h,a)):a!==o&&a.push(h)}return a}function mr(o,a){o.forEach(u=>Array.isArray(u)?mr(u,a):a(u))}function uf(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function bo(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Ds(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function ps(o,a,u){let h=Yo(o,a);return h>=0?o[1|h]=u:(h=~h,function cr(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function ll(o,a){const u=Yo(o,a);if(u>=0)return o[1|u]}function Yo(o,a){return function Ni(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const m=h+(f-h>>1),T=o[m<<u];if(a===T)return m<<u;T>a?f=m:h=m+1}return~(f<<u)}(o,a,1)}const As={},rr="__NG_DI_FLAG__",Jl="ngTempTokenPath",xd=/\n/gm,df="__source";let Jo;function Ia(o){const a=Jo;return Jo=o,a}function gg(o,a=Pt.Default){if(void 0===Jo)throw new Ue(-203,!1);return null===Jo?xn(o,void 0,a):Jo.get(o,a&Pt.Optional?null:void 0,a)}function qr(o,a=Pt.Default){return(function Ai(){return Br}()||gg)(Z(o),a)}function k(o,a=Pt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),qr(o,a)}function R(o){const a=[];for(let u=0;u<o.length;u++){const h=Z(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Ue(900,!1);let f,m=Pt.Default;for(let T=0;T<h.length;T++){const C=h[T],A=ce(C);"number"==typeof A?-1===A?f=C.token:m|=A:f=C}a.push(qr(f,m))}else a.push(qr(h))}return a}function G(o,a){return o[rr]=a,o.prototype[rr]=a,o}function ce(o){return o[rr]}const Bt=G(ol("Optional"),8),Ut=G(ol("SkipSelf"),4);var Qs=(()=>((Qs=Qs||{})[Qs.Important=1]="Important",Qs[Qs.DashCase=2]="DashCase",Qs))();const lc=new Map;let uv=0;const Eo="__ngContext__";function ji(o,a){pi(a)?(o[Eo]=a[20],function cv(o){lc.set(o[20],o)}(a)):o[Eo]=a}function Pg(o,a){return undefined(o,a)}function dl(o){const a=o[3];return ns(a)?a[3]:a}function Rd(o){return gv(o[13])}function Od(o){return gv(o[4])}function gv(o){for(;null!==o&&!ns(o);)o=o[4];return o}function ea(o,a,u,h,f){if(null!=h){let m,T=!1;ns(h)?m=h:pi(h)&&(T=!0,h=h[0]);const C=Mr(h);0===o&&null!==u?null==f?mb(a,u,C):hl(a,u,C,f||null,!0):1===o&&null!==u?hl(a,u,C,f||null,!0):2===o?function If(o,a,u){const h=nu(o,a);h&&function yb(o,a,u,h){o.removeChild(a,u,h)}(o,h,a,u)}(a,C,T):3===o&&a.destroyNode(C),null!=m&&function Xs(o,a,u,h,f){const m=u[7];m!==Mr(u)&&ea(a,o,h,m,f);for(let C=10;C<u.length;C++){const A=u[C];ru(A[1],A,o,a,h,m)}}(a,o,m,u,f)}}function Ng(o,a,u){return o.createElement(a,u)}function Ef(o,a){const u=o[9],h=u.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,xr(f,-1)),u.splice(h,1)}function Fg(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const f=h[17];null!==f&&f!==o&&Ef(f,h),a>0&&(o[u-1][4]=h[4]);const m=bo(o,10+a);!function fb(o,a){ru(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const T=m[19];null!==T&&T.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function jg(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&ru(o,a,u,3,null,null),function Lg(o){let a=o[13];if(!a)return Nd(o[1],o);for(;a;){let u=null;if(pi(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)pi(a)&&Nd(a[1],a),a=a[3];null===a&&(a=o),pi(a)&&Nd(a[1],a),u=a&&a[4]}a=u}}(a)}}function Nd(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function gb(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof zo)){const m=u[h+1];if(Array.isArray(m))for(let T=0;T<m.length;T+=2){const C=f[m[T]],A=m[T+1];try{A.call(C)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function wf(o,a){const u=o.cleanup,h=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const T=u[m+1],C="function"==typeof T?T(a):Mr(a[T]),A=h[f=u[m+2]],N=u[m+3];"boolean"==typeof N?C.removeEventListener(u[m],A,N):N>=0?h[f=N]():h[f=-N].unsubscribe(),m+=2}else{const T=h[f=u[m+1]];u[m].call(T)}if(null!==h){for(let m=f+1;m<h.length;m++)(0,h[m])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&ns(a[3])){u!==a[3]&&Ef(u,a);const h=a[19];null!==h&&h.detachView(o)}!function Dg(o){lc.delete(o[20])}(a)}}function uc(o,a,u){return function Ug(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===Gt.None||f===Gt.Emulated)return null}return Ki(h,u)}(o,a.parent,u)}function hl(o,a,u,h,f){o.insertBefore(a,u,h,f)}function mb(o,a,u){o.appendChild(a,u)}function Cf(o,a,u,h,f){null!==h?hl(o,a,u,h,f):mb(o,a,u)}function nu(o,a){return o.parentNode(a)}function vb(o,a,u){return Bg(o,a,u)}let Fd,$g,Bg=function Vg(o,a,u){return 40&o.type?Ki(o,u):null};function Aa(o,a,u,h){const f=uc(o,h,a),m=a[11],C=vb(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let A=0;A<u.length;A++)Cf(m,f,u[A],C,!1);else Cf(m,f,u,C,!1)}function Co(o,a){if(null!==a){const u=a.type;if(3&u)return Ki(a,o);if(4&u)return xf(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return Co(o,h);{const f=o[a.index];return ns(f)?xf(-1,f):Mr(f)}}if(32&u)return Pg(a,o)()||Mr(o[a.index]);{const h=Sf(o,a);return null!==h?Array.isArray(h)?h[0]:Co(dl(o[16]),h):Co(o,a.next)}}return null}function Sf(o,a){return null!==a?o[16][6].projection[a.projection]:null}function xf(o,a){const u=10+o+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return Co(h,f)}return a[7]}function Df(o,a,u,h,f,m,T){for(;null!=u;){const C=h[u.index],A=u.type;if(T&&0===a&&(C&&ji(Mr(C),h),u.flags|=4),64!=(64&u.flags))if(8&A)Df(o,a,u.child,h,f,m,!1),ea(a,o,f,C,m);else if(32&A){const N=Pg(u,h);let q;for(;q=N();)ea(a,o,f,q,m);ea(a,o,f,C,m)}else 16&A?Ld(o,a,h,u,f,m):ea(a,o,f,C,m);u=T?u.projectionNext:u.next}}function ru(o,a,u,h,f,m){Df(u,h,o.firstChild,a,f,m,!1)}function Ld(o,a,u,h,f,m){const T=u[16],A=T[6].projection[h.projection];if(Array.isArray(A))for(let N=0;N<A.length;N++)ea(a,o,f,A[N],m);else Df(o,a,A,T[3],f,m,!0)}function js(o,a,u){o.setAttribute(a,"style",u)}function So(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function ta(o){return function iu(){if(void 0===Fd&&(Fd=null,Hn.trustedTypes))try{Fd=Hn.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Fd}()?.createHTML(o)||o}function b(o){$g=o}class Xe{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class xt extends Xe{getTypeName(){return"HTML"}}class Ft extends Xe{getTypeName(){return"Style"}}class on extends Xe{getTypeName(){return"Script"}}class Xt extends Xe{getTypeName(){return"URL"}}class bi extends Xe{getTypeName(){return"ResourceURL"}}function Ti(o){return o instanceof Xe?o.changingThisBreaksApplicationSecurity:o}function ka(o,a){const u=function Yi(o){return o instanceof Xe&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function cc(o){return new xt(o)}function Ui(o){return new Ft(o)}function Ma(o){return new on(o)}function Hg(o){return new Xt(o)}function Gg(o){return new bi(o)}class kf{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(ta(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class Qi{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=ta(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=ta(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const T=u.item(f).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&a.removeAttribute(T)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const dc=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Vd(o){return(o=String(o)).match(dc)?o:"unsafe:"+o}function Pa(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function hc(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const Ra=Pa("area,br,col,hr,img,wbr"),bv=Pa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$C=Pa("rp,rt"),zg=hc(Ra,hc(bv,Pa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),hc($C,Pa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hc($C,bv)),Tv=Pa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Wg=hc(Tv,Pa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Pa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),wb=Pa("script,style,template");class Cb{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!zg.hasOwnProperty(u))return this.sanitizedSomething=!0,!wb.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),T=m.name,C=T.toLowerCase();if(!Wg.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let A=m.value;Tv[C]&&(A=Vd(A)),this.buf.push(" ",T,'="',HC(A),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();zg.hasOwnProperty(u)&&!Ra.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(HC(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Sb=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g1=/([^\#-~ |!])/g;function HC(o){return o.replace(/&/g,"&amp;").replace(Sb,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(g1,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Mf;function xb(o,a){let u=null;try{Mf=Mf||function Ud(o){const a=new Qi(o);return function Eb(){try{return!!(new window.DOMParser).parseFromString(ta(""),"text/html")}catch{return!1}}()?new kf(a):a}(o);let h=a?String(a):"";u=Mf.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=u.innerHTML,u=Mf.getInertBodyElement(h)}while(h!==m);return ta((new Cb).sanitizeChildren(Ib(u)||u))}finally{if(u){const h=Ib(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function Ib(o){return"content"in o&&function Kg(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Ei=(()=>((Ei=Ei||{})[Ei.NONE=0]="NONE",Ei[Ei.HTML=1]="HTML",Ei[Ei.STYLE=2]="STYLE",Ei[Ei.SCRIPT=3]="SCRIPT",Ei[Ei.URL=4]="URL",Ei[Ei.RESOURCE_URL=5]="RESOURCE_URL",Ei))();function Db(o){const a=function Bd(){const o=ft();return o&&o[12]}();return a?a.sanitize(Ei.URL,o)||"":ka(o,"URL")?Ti(o):Vd(Be(o))}const Qg=new ur("ENVIRONMENT_INITIALIZER"),kb=new ur("INJECTOR",-1),Mb=new ur("INJECTOR_DEF_TYPES");class ZC{get(a,u=As){if(u===As){const h=new Error(`NullInjectorError: No provider for ${ve(a)}!`);throw h.name="NullInjectorError",h}return u}}function YC(...o){return{\u0275providers:Pb(0,o)}}function Pb(o,...a){const u=[],h=new Set;let f;return mr(a,m=>{const T=m;Cv(T,u,[],h)&&(f||(f=[]),f.push(T))}),void 0!==f&&wv(f,u),u}function wv(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];mr(f,m=>{a.push(m)})}}function Cv(o,a,u,h){if(!(o=Z(o)))return!1;let f=null,m=ws(o);const T=!m&&Pe(o);if(m||T){if(T&&!T.standalone)return!1;f=o}else{const A=o.ngModule;if(m=ws(A),!m)return!1;f=A}const C=h.has(f);if(T){if(C)return!1;if(h.add(f),T.dependencies){const A="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const N of A)Cv(N,a,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let N;h.add(f);try{mr(m.imports,q=>{Cv(q,a,u,h)&&(N||(N=[]),N.push(q))})}finally{}void 0!==N&&wv(N,a)}if(!C){const N=zs(f)||(()=>new f);a.push({provide:f,useFactory:N,deps:un},{provide:Mb,useValue:f,multi:!0},{provide:Qg,useValue:()=>qr(f),multi:!0})}const A=m.providers;null==A||C||mr(A,q=>{a.push(q)})}}return f!==o&&void 0!==o.providers}const Rb=pe({provide:String,useValue:pe});function Xg(o){return null!==o&&"object"==typeof o&&Rb in o}function Xr(o){return"function"==typeof o}const Jg=new ur("Set Injector scope."),Iv={},y1={};let Dv;function Av(){return void 0===Dv&&(Dv=new ZC),Dv}class $d{}class Ob extends $d{constructor(a,u,h,f){super(),this.parent=u,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ub(a,T=>this.processProvider(T)),this.records.set(kb,Pf(void 0,this)),f.has("environment")&&this.records.set($d,Pf(void 0,this));const m=this.records.get(Jg);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Mb.multi,un,Pt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Ia(this),h=pr(void 0);try{return a()}finally{Ia(u),pr(h)}}get(a,u=As,h=Pt.Default){this.assertNotDestroyed();const f=Ia(this),m=pr(void 0);try{if(!(h&Pt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const A=function jb(o){return"function"==typeof o||"object"==typeof o&&o instanceof ur}(a)&&qt(a);C=A&&this.injectableDefInScope(A)?Pf(em(a),Iv):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&Pt.Self?Av():this.parent).get(a,u=h&Pt.Optional&&u===As?null:u)}catch(T){if("NullInjectorError"===T.name){if((T[Jl]=T[Jl]||[]).unshift(ve(a)),f)throw T;return function Ne(o,a,u,h){const f=o[Jl];throw a[df]&&f.unshift(a[df]),o.message=function Ze(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=ve(a);if(Array.isArray(a))f=a.map(ve).join(" -> ");else if("object"==typeof a){let m=[];for(let T in a)if(a.hasOwnProperty(T)){let C=a[T];m.push(T+":"+("string"==typeof C?JSON.stringify(C):ve(C)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(xd,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[Jl]=null,o}(T,a,"R3InjectorError",this.source)}throw T}finally{pr(m),Ia(f)}}resolveInjectorInitializers(){const a=Ia(this),u=pr(void 0);try{const h=this.get(Qg.multi,un,Pt.Self);for(const f of h)f()}finally{Ia(a),pr(u)}}toString(){const a=[],u=this.records;for(const h of u.keys())a.push(ve(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processProvider(a){let u=Xr(a=Z(a))?a:Z(a&&a.provide);const h=function Nb(o){return Xg(o)?Pf(void 0,o.useValue):Pf(Lb(o),Iv)}(a);if(Xr(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=Pf(void 0,Iv,!0),f.factory=()=>R(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,h)}hydrate(a,u){return u.value===Iv&&(u.value=y1,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Fb(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=Z(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function em(o){const a=qt(o),u=null!==a?a.factory:zs(o);if(null!==u)return u;if(o instanceof ur)throw new Ue(204,!1);if(o instanceof Function)return function v1(o){const a=o.length;if(a>0)throw Ds(a,"?"),new Ue(204,!1);const u=function er(o){const a=o&&(o[hn]||o[Er]);if(a){const u=function Tr(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ue(204,!1)}function Lb(o,a,u){let h;if(Xr(o)){const f=Z(o);return zs(f)||em(f)}if(Xg(o))h=()=>Z(o.useValue);else if(function Xi(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...R(o.deps||[]));else if(function Sv(o){return!(!o||!o.useExisting)}(o))h=()=>qr(Z(o.useExisting));else{const f=Z(o&&(o.useClass||o.provide));if(!function kv(o){return!!o.deps}(o))return zs(f)||em(f);h=()=>new f(...R(o.deps))}return h}function Pf(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function QC(o){return!!o.\u0275providers}function Ub(o,a){for(const u of o)Array.isArray(u)?Ub(u,a):QC(u)?Ub(u.\u0275providers,a):a(u)}class Vb{}class _1{resolveComponentFactory(a){throw function XC(o){const a=Error(`No component factory found for ${ve(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let nm=(()=>{class o{}return o.NULL=new _1,o})();function Rf(){return Of(Pr(),ft())}function Of(o,a){return new rm(Ki(o,a))}let rm=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=Rf,o})();function Hd(o){return o instanceof rm?o.nativeElement:o}class im{}let JC=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function sm(){const o=ft(),u=Nn(Pr().index,o);return(pi(u)?u:o)[11]}(),o})(),eS=(()=>{class o{}return o.\u0275prov=at({token:o,providedIn:"root",factory:()=>null}),o})();class Ms{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Hb=new Ms("14.2.12"),Gd={};function om(o){return o.ngOriginalError}class Lf{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&om(a);for(;u&&om(u);)u=om(u);return u||null}}function lm(o){return o.ownerDocument}function su(o){return o instanceof Function?o():o}function iS(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}u=f+1}}const Zb="ng-template";function Rv(o,a,u){let h=0;for(;h<o.length;){let f=o[h++];if(u&&"class"===f){if(f=o[h],-1!==iS(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function Ff(o){return 4===o.type&&o.value!==Zb}function zd(o,a,u){return a===(4!==o.type||u?o.value:Zb)}function Yb(o,a,u){let h=4;const f=o.attrs||[],m=function C1(o){for(let a=0;a<o.length;a++)if(ba(o[a]))return a;return o.length}(f);let T=!1;for(let C=0;C<a.length;C++){const A=a[C];if("number"!=typeof A){if(!T)if(4&h){if(h=2|1&h,""!==A&&!zd(o,A,u)||""===A&&1===a.length){if(Oa(h))return!1;T=!0}}else{const N=8&h?A:a[++C];if(8&h&&null!==o.attrs){if(!Rv(o.attrs,N,u)){if(Oa(h))return!1;T=!0}continue}const J=w1(8&h?"class":A,f,Ff(o),u);if(-1===J){if(Oa(h))return!1;T=!0;continue}if(""!==N){let xe;xe=J>m?"":f[J+1].toLowerCase();const $e=8&h?xe:null;if($e&&-1!==iS($e,N,0)||2&h&&N!==xe){if(Oa(h))return!1;T=!0}}}}else{if(!T&&!Oa(h)&&!Oa(A))return!1;if(T&&Oa(A))continue;T=!1,h=A|1&h}}return Oa(h)||T}function Oa(o){return 0==(1&o)}function w1(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let m=!1;for(;f<a.length;){const T=a[f];if(T===o)return f;if(3===T||6===T)m=!0;else{if(1===T||2===T){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===T)break;if(0===T){f+=4;continue}}f+=m?1:2}return-1}return function Wd(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function Qb(o,a,u=!1){for(let h=0;h<a.length;h++)if(Yb(o,a[h],u))return!0;return!1}function ou(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function cm(o,a){return o?":not("+a.trim()+")":a}function Ov(o){let a=o[0],u=1,h=2,f="",m=!1;for(;u<o.length;){let T=o[u];if("string"==typeof T)if(2&h){const C=o[++u];f+="["+T+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?f+="."+T:4&h&&(f+=" "+T);else""!==f&&!Oa(T)&&(a+=cm(m,f),f=""),h=T,m=m||!Oa(h);u++}return""!==f&&(a+=cm(m,f)),a}const yn={};function jf(o){Uf(In(),ft(),ai()+o,!1)}function Uf(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&va(a,m,u)}else{const m=o.preOrderHooks;null!==m&&Qa(a,m,0,u)}hs(u)}function Xb(o,a=null,u=null,h){const f=Jb(o,a,u,h);return f.resolveInjectorInitializers(),f}function Jb(o,a=null,u=null,h,f=new Set){const m=[u||un,YC(o)];return h=h||("object"==typeof o?void 0:ve(o)),new Ob(m,a||Av(),h||null,f)}let na=(()=>{class o{static create(u,h){if(Array.isArray(u))return Xb({name:""},h,u,"");{const f=u.name??"";return Xb({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=As,o.NULL=new ZC,o.\u0275prov=at({token:o,providedIn:"any",factory:()=>qr(kb)}),o.__NG_ELEMENT_ID__=-1,o})();function Zd(o,a=Pt.Default){const u=ft();return null===u?qr(o,a):Ea(Pr(),u,Z(o),a)}function fl(){throw new Error("invalid")}function mm(o,a){return o<<17|a<<2}function xo(o){return o>>17&32767}function ym(o){return 2|o}function ra(o){return(131068&o)>>2}function Fv(o,a){return-131069&o|a<<2}function lT(o){return 1|o}function Je(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],m=u[h+1];if(-1!==m){const T=o.data[m];$l(f),T.contentQueries(2,a[m],m)}}}function Tm(o,a,u,h,f,m,T,C,A,N,q){const J=a.blueprint.slice();return J[0]=f,J[2]=76|h,(null!==q||o&&1024&o[2])&&(J[2]|=1024),Nu(J),J[3]=J[15]=o,J[8]=u,J[10]=T||o&&o[10],J[11]=C||o&&o[11],J[12]=A||o&&o[12]||null,J[9]=N||o&&o[9]||null,J[6]=m,J[20]=function xg(){return uv++}(),J[21]=q,J[16]=2==a.type?o[16]:J,J}function zf(o,a,u,h,f){let m=o.data[a];if(null===m)m=function mT(o,a,u,h,f){const m=Bu(),T=Fl(),A=o.data[a]=function Em(o,a,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?m:m&&m.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=A),null!==m&&(T?null==m.child&&null!==A.parent&&(m.child=A):null===m.next&&(m.next=A)),A}(o,a,u,h,f),function Yy(){return dn.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const T=function Ya(){const o=dn.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===T?-1:T.injectorIndex}return Is(m,!0),m}function Wf(o,a,u,h){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function yT(o,a,u){Gu(a);try{const h=o.viewQuery;null!==h&&Qd(1,h,u);const f=o.template;null!==f&&vT(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Je(o,a),o.staticViewQueries&&Qd(2,o.viewQuery,u);const m=o.components;null!==m&&function Ji(o,a){for(let u=0;u<a.length;u++)Do(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,ma()}}function Vv(o,a,u,h){const f=a[2];if(128!=(128&f)){Gu(a);try{Nu(a),function hd(o){return dn.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&vT(o,a,u,2,h);const T=3==(3&f);if(T){const N=o.preOrderCheckHooks;null!==N&&va(a,N,null)}else{const N=o.preOrderHooks;null!==N&&Qa(a,N,0,null),Jh(a,0)}if(function ST(o){for(let a=Rd(o);null!==a;a=Od(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],m=f[3];0==(512&f[2])&&xr(m,1),f[2]|=512}}}(a),function MS(o){for(let a=Rd(o);null!==a;a=Od(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];pa(h)&&Vv(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&Je(o,a),T){const N=o.contentCheckHooks;null!==N&&va(a,N)}else{const N=o.contentHooks;null!==N&&Qa(a,N,1),Jh(a,1)}!function Nt(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)hs(~f);else{const m=f,T=u[++h],C=u[++h];Qy(T,m),C(2,a[m])}}}finally{hs(-1)}}(o,a);const C=o.components;null!==C&&function yt(o,a){for(let u=0;u<a.length;u++)q1(o,a[u])}(a,C);const A=o.viewQuery;if(null!==A&&Qd(2,A,h),T){const N=o.viewCheckHooks;null!==N&&va(a,N)}else{const N=o.viewHooks;null!==N&&Qa(a,N,2),Jh(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,xr(a[3],-1))}finally{ma()}}}function vT(o,a,u,h,f){const m=ai(),T=2&h;try{hs(-1),T&&a.length>22&&Uf(o,a,22,!1),u(h,f)}finally{hs(m)}}function CS(o,a,u){if(Iu(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const T=o.data[m];T.contentQueries&&T.contentQueries(1,u[m],m)}}}function SS(o,a,u){!mo()||(function DS(o,a,u,h){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||Ta(u,a),ji(h,a);const T=u.initialInputs;for(let C=f;C<m;C++){const A=o.data[C],N=Wi(A);N&&$v(a,u,A);const q=vo(a,o,C,u);ji(q,a),null!==T&&Sm(0,C-f,q,A,0,T),N&&(Nn(u.index,a)[8]=q)}}(o,a,u,Ki(u,a)),128==(128&u.flags)&&function AS(o,a,u){const h=u.directiveStart,f=u.directiveEnd,m=u.index,T=function fd(){return dn.lFrame.currentDirectiveIndex}();try{hs(m);for(let C=h;C<f;C++){const A=o.data[C],N=a[C];$u(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Js(A,N)}}finally{hs(-1),$u(T)}}(o,a,u))}function _T(o,a,u=Ki){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const T=h[m+1],C=-1===T?u(a,o):o[T];o[f++]=C}}}function bT(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=vn(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function vn(o,a,u,h,f,m,T,C,A,N){const q=22+h,J=q+f,xe=function Kf(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:yn);return u}(q,J),$e="function"==typeof N?N():N;return xe[1]={type:o,blueprint:xe,template:u,queries:null,viewQuery:C,declTNode:a,data:xe.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:J,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:A,consts:$e,incompleteFirstPass:!1}}function Jt(o,a,u,h){const f=IT(a);null===u?f.push(h):(f.push(u),o.firstCreatePass&&PS(o).push(h,f.length-1))}function qn(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function xS(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,T=[];let C=null,A=null;for(let N=a.directiveStart;N<h;N++){const q=f[N],J=q.inputs,xe=null===m||Ff(a)?null:gc(J,m);T.push(xe),C=qn(J,N,C),A=qn(q.outputs,N,A)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=T,a.inputs=C,a.outputs=A}function It(o,a,u,h,f,m,T,C){const A=Ki(a,u);let q,N=a.inputs;!C&&null!=N&&(q=N[h])?(ml(o,u,q,h,f),Ol(a)&&wm(u,a.index)):3&a.type&&(h=function ui(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=T?T(f,a.value||"",h):f,m.setProperty(A,h,f))}function wm(o,a){const u=Nn(a,o);16&u[2]||(u[2]|=32)}function Yf(o,a,u,h){let f=!1;if(mo()){const m=function ET(o,a,u){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const T=h[m];Qb(u,T.selectors,!1)&&(f||(f=[]),Wo(Ta(u,a),o,T.type),Wi(T)?(wT(o,u),f.unshift(T)):f.push(T))}return f}(o,a,u),T=null===h?null:{"":-1};if(null!==m){f=!0,Bv(u,o.data.length,m.length);for(let q=0;q<m.length;q++){const J=m[q];J.providersResolver&&J.providersResolver(J)}let C=!1,A=!1,N=Wf(o,a,m.length,null);for(let q=0;q<m.length;q++){const J=m[q];u.mergedAttrs=Hl(u.mergedAttrs,J.hostAttrs),Ye(o,u,a,N,J),pc(N,J,T),null!==J.contentQueries&&(u.flags|=8),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(u.flags|=128);const xe=J.type.prototype;!C&&(xe.ngOnChanges||xe.ngOnInit||xe.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!A&&(xe.ngOnChanges||xe.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),A=!0),N++}xS(o,u)}T&&function kS(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new Ue(-301,!1);h.push(a[f],m)}}}(u,h,T)}return u.mergedAttrs=Hl(u.mergedAttrs,u.attrs),f}function IS(o,a,u,h,f,m){const T=m.hostBindings;if(T){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const A=~a.index;(function Cm(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=A&&C.push(A),C.push(h,f,T)}}function Js(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function wT(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function pc(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;Wi(a)&&(u[""]=o)}}function Bv(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function Ye(o,a,u,h,f){o.data[h]=f;const m=f.factory||(f.factory=zs(f.type)),T=new zo(m,Wi(f),Zd);o.blueprint[h]=T,u[h]=T,IS(o,a,0,h,Wf(o,u,f.hostVars,yn),f)}function $v(o,a,u){const h=Ki(a,o),f=bT(u),m=o[10],T=Na(o,Tm(o,f,null,u.onPush?32:16,h,a,m,m.createRenderer(h,u),null,null,null));o[a.index]=T}function Vi(o,a,u,h,f,m){const T=Ki(o,a);!function CT(o,a,u,h,f,m,T){if(null==m)o.removeAttribute(a,f,u);else{const C=null==T?Be(m):T(m,h||"",f);o.setAttribute(a,f,C,u)}}(a[11],T,m,o.value,u,h,f)}function Sm(o,a,u,h,f,m){const T=m[a];if(null!==T){const C=h.setInput;for(let A=0;A<T.length;){const N=T[A++],q=T[A++],J=T[A++];null!==C?h.setInput(u,J,N,q):u[q]=J}}}function gc(o,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function mc(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function q1(o,a){const u=Nn(a,o);if(pa(u)){const h=u[1];48&u[2]?Vv(h,u,h.template,u[8]):u[5]>0&&xT(u)}}function xT(o){for(let h=Rd(o);null!==h;h=Od(h))for(let f=10;f<h.length;f++){const m=h[f];if(pa(m))if(512&m[2]){const T=m[1];Vv(T,m,T.template,m[8])}else m[5]>0&&xT(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=Nn(u[h],o);pa(f)&&f[5]>0&&xT(f)}}function Do(o,a){const u=Nn(a,o),h=u[1];(function z1(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),yT(h,u,u[8])}function Na(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Hv(o){for(;o;){o[2]|=32;const a=dl(o);if(ig(o)&&!a)return o;o=a}return null}function gl(o,a,u,h=!0){const f=a[10];f.begin&&f.begin();try{Vv(o,a,o.template,u)}catch(T){throw h&&RS(a,T),T}finally{f.end&&f.end()}}function Qd(o,a,u){$l(0),a(o,u)}function IT(o){return o[7]||(o[7]=[])}function PS(o){return o.cleanup||(o.cleanup=[])}function RS(o,a){const u=o[9],h=u?u.get(Lf,null):null;h&&h.handleError(a)}function ml(o,a,u,h,f){for(let m=0;m<u.length;){const T=u[m++],C=u[m++],A=a[T],N=o.data[T];null!==N.setInput?N.setInput(A,f,h,C):A[C]=f}}function ir(o,a,u){const h=xs(a,o);!function Og(o,a,u){o.setValue(a,u)}(o[11],h,u)}function yl(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let T=0;T<a.length;T++){const C=a[T];"number"==typeof C?m=C:1==m?f=Ce(f,C):2==m&&(h=Ce(h,C+": "+a[++T]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}function Qf(o,a,u,h,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(Mr(m)),ns(m))for(let C=10;C<m.length;C++){const A=m[C],N=A[1].firstChild;null!==N&&Qf(A[1],A,N,h)}const T=u.type;if(8&T)Qf(o,a,u.child,h);else if(32&T){const C=Pg(u,a);let A;for(;A=C();)h.push(A)}else if(16&T){const C=Sf(a,u);if(Array.isArray(C))h.push(...C);else{const A=dl(a[16]);Qf(A[1],A,C,h,!0)}}u=f?u.projectionNext:u.next}return h}class Xf{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return Qf(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(ns(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(Fg(a,h),bo(u,h))}this._attachedToViewContainer=!1}jg(this._lView[1],this._lView)}onDestroy(a){Jt(this._lView[1],this._lView,null,a)}markForCheck(){Hv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){gl(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function BC(o,a){ru(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ue(902,!1);this._appRef=a}}class xm extends Xf{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;gl(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class vl extends nm{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=Pe(a);return new lu(u,this.ngModule)}}function Im(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class _l{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,h){const f=this.injector.get(a,Gd,h);return f!==Gd||u===Gd?f:this.parentInjector.get(a,u,h)}}class lu extends Vb{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function oS(o){return o.map(Ov).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Im(this.componentDef.inputs)}get outputs(){return Im(this.componentDef.outputs)}create(a,u,h,f){let m=(f=f||this.ngModule)instanceof $d?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const T=m?new _l(a,m):a,C=T.get(im,null);if(null===C)throw new Ue(407,!1);const A=T.get(eS,null),N=C.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",J=h?function Wr(o,a,u){return o.selectRootElement(a,u===Gt.ShadowDom)}(N,h,this.componentDef.encapsulation):Ng(N,q,function Xd(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(q)),xe=this.componentDef.onPush?288:272,$e=vn(0,null,null,1,0,null,null,null,null,null),lt=Tm(null,$e,null,xe,null,null,C,N,A,T,null);let St,At;Gu(lt);try{const Kt=function Jd(o,a,u,h,f,m){const T=u[1];u[22]=o;const A=zf(T,22,2,"#host",null),N=A.mergedAttrs=a.hostAttrs;null!==N&&(yl(A,N,!0),null!==o&&(el(f,o,N),null!==A.classes&&So(f,o,A.classes),null!==A.styles&&js(f,o,A.styles)));const q=h.createRenderer(o,a),J=Tm(u,bT(a),null,a.onPush?32:16,u[22],A,h,q,m||null,null,null);return T.firstCreatePass&&(Wo(Ta(A,u),T,a.type),wT(T,A),Bv(A,u.length,1)),Na(u,J),u[22]=J}(J,this.componentDef,lt,C,N);if(J)if(h)el(N,J,["ng-version",Hb.full]);else{const{attrs:rn,classes:pt}=function zr(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&u.push(m);else{if(!Oa(f))break;f=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);rn&&el(N,J,rn),pt&&pt.length>0&&So(N,J,pt.join(" "))}if(At=Za($e,22),void 0!==u){const rn=At.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const cn=u[pt];rn.push(null!=cn?Array.from(cn):null)}}St=function DT(o,a,u,h){const f=u[1],m=function G1(o,a,u){const h=Pr();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Ye(o,h,a,Wf(o,a,1,null),u),xS(o,h));const f=vo(a,o,h.directiveStart,h);ji(f,a);const m=Ki(h,a);return m&&ji(m,a),f}(f,u,a);if(o[8]=u[8]=m,null!==h)for(const C of h)C(m,a);if(a.contentQueries){const C=Pr();a.contentQueries(1,m,C.directiveStart)}const T=Pr();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(hs(T.index),IS(u[1],T,0,T.directiveStart,T.directiveEnd,a),Js(a,m)),m}(Kt,this.componentDef,lt,[Dm]),yT($e,lt,null)}finally{ma()}return new Jf(this.componentType,St,Of(At,lt),lt,At)}}class Jf extends class tm{}{constructor(a,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new xm(f),this.componentType=a}setInput(a,u){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[a])){const m=this._rootLView;ml(m[1],m,f,a,u),wm(m,this._tNode.index)}}get injector(){return new wa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function Dm(){const o=Pr();Wu(ft()[1],o)}function qv(o){let a=function AT(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(Wi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ue(903,!1);f=a.\u0275dir}if(f){if(u){h.push(f);const T=o;T.inputs=eh(o.inputs),T.declaredInputs=eh(o.declaredInputs),T.outputs=eh(o.outputs);const C=f.hostBindings;C&&Y1(o,C);const A=f.viewQuery,N=f.contentQueries;if(A&&NS(o,A),N&&Z1(o,N),_e(o.inputs,f.inputs),_e(o.declaredInputs,f.declaredInputs),_e(o.outputs,f.outputs),Wi(f)&&f.data.animation){const q=o.data;q.animation=(q.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let T=0;T<m.length;T++){const C=m[T];C&&C.ngInherit&&C(o),C===qv&&(u=!1)}}a=Object.getPrototypeOf(a)}!function zv(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=Hl(f.hostAttrs,u=Hl(u,f.hostAttrs))}}(h)}function eh(o){return o===ri?{}:o===un?[]:o}function NS(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function Z1(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,m)=>{a(h,f,m),u(h,f,m)}:a}function Y1(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let Am=null;function _c(){if(!Am){const o=Hn.Symbol;if(o&&o.iterator)Am=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Am=h)}}}return Am}function Dn(o){return!!km(o)&&(Array.isArray(o)||!(o instanceof Map)&&_c()in o)}function km(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function La(o,a,u){return o[a]=u}function vs(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function bc(o,a,u,h){const f=vs(o,a,u);return vs(o,a+1,h)||f}function kT(o,a,u,h){const f=ft();return vs(f,ga(),a)&&(In(),Vi(lr(),f,o,a,u,h)),kT}function th(o,a,u,h){return vs(o,ga(),u)?a+Be(u)+h:yn}function rp(o,a,u,h,f,m){const C=bc(o,function Ks(){return dn.lFrame.bindingIndex}(),u,f);return yo(2),C?a+Be(u)+h+Be(f)+m:yn}function Tc(o,a,u,h,f,m,T,C){const A=ft(),N=In(),q=o+22,J=N.firstCreatePass?function RT(o,a,u,h,f,m,T,C,A){const N=a.consts,q=zf(a,o,4,T||null,Ls(N,C));Yf(a,u,q,Ls(N,A)),Wu(a,q);const J=q.tViews=vn(2,q,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,N);return null!==a.queries&&(a.queries.template(a,q),J.queries=a.queries.embeddedTView(q)),q}(q,N,A,a,u,h,f,m,T):N.data[q];Is(J,!1);const xe=A[11].createComment("");Aa(N,A,xe,J),ji(xe,A),Na(A,A[q]=mc(xe,A,xe,J)),nd(J)&&SS(N,A,J),null!=T&&_T(A,J,C)}function Om(o){return go(function dd(){return dn.lFrame.contextLView}(),22+o)}function ap(o,a,u){const h=ft();return vs(h,ga(),a)&&It(In(),lr(),h,o,a,h[11],u,!1),ap}function Wv(o,a,u,h,f){const T=f?"class":"style";ml(o,u,a.inputs[T],T,h)}function oa(o,a,u,h){const f=ft(),m=In(),T=22+o,C=f[11],A=f[T]=Ng(C,a,function zu(){return dn.lFrame.currentNamespace}()),N=m.firstCreatePass?function US(o,a,u,h,f,m,T){const C=a.consts,N=zf(a,o,2,f,Ls(C,m));return Yf(a,u,N,Ls(C,T)),null!==N.attrs&&yl(N,N.attrs,!1),null!==N.mergedAttrs&&yl(N,N.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,N),N}(T,m,f,0,a,u,h):m.data[T];Is(N,!0);const q=N.mergedAttrs;null!==q&&el(C,A,q);const J=N.classes;null!==J&&So(C,A,J);const xe=N.styles;return null!==xe&&js(C,A,xe),64!=(64&N.flags)&&Aa(m,f,A,N),0===function Fu(){return dn.lFrame.elementDepthCount}()&&ji(A,f),function ju(){dn.lFrame.elementDepthCount++}(),nd(N)&&(SS(m,f,N),CS(m,N,f)),null!==h&&_T(f,N),oa}function Nm(){let o=Pr();Fl()?jl():(o=o.parent,Is(o,!1));const a=o;!function ld(){dn.lFrame.elementDepthCount--}();const u=In();return u.firstCreatePass&&(Wu(u,o),Iu(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Yu(o){return 0!=(16&o.flags)}(a)&&Wv(u,a,ft(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function tf(o){return 0!=(32&o.flags)}(a)&&Wv(u,a,ft(),a.stylesWithoutHost,!1),Nm}function Ec(o,a,u,h){return oa(o,a,u,h),Nm(),Ec}function lp(o,a,u){const h=ft(),f=In(),m=o+22,T=f.firstCreatePass?function VS(o,a,u,h,f){const m=a.consts,T=Ls(m,h),C=zf(a,o,8,"ng-container",T);return null!==T&&yl(C,T,!0),Yf(a,u,C,Ls(m,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,f,h,a,u):f.data[m];Is(T,!0);const C=h[m]=h[11].createComment("");return Aa(f,h,C,T),ji(C,h),nd(T)&&(SS(f,h,T),CS(f,T,h)),null!=u&&_T(h,T),lp}function ih(){let o=Pr();const a=In();return Fl()?jl():(o=o.parent,Is(o,!1)),a.firstCreatePass&&(Wu(a,o),Iu(o)&&a.queries.elementEnd(o)),ih}function wc(){return ft()}function _s(o){return!!o&&"function"==typeof o.then}function Zv(o){return!!o&&"function"==typeof o.subscribe}const Lm=Zv;function sh(o,a,u,h){const f=ft(),m=In(),T=Pr();return function Yv(o,a,u,h,f,m,T,C){const A=nd(h),q=o.firstCreatePass&&PS(o),J=a[8],xe=IT(a);let $e=!0;if(3&h.type||C){const At=Ki(h,a),Kt=C?C(At):At,rn=xe.length,pt=C?Yn=>C(Mr(Yn[h.index])):h.index;let cn=null;if(!C&&A&&(cn=function NT(o,a,u,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const T=f[m];if(T===u&&f[m+1]===h){const C=a[7],A=f[m+2];return C.length>A?C[A]:null}"string"==typeof T&&(m+=2)}return null}(o,a,f,h.index)),null!==cn)(cn.__ngLastListenerFn__||cn).__ngNextListenerFn__=m,cn.__ngLastListenerFn__=m,$e=!1;else{m=FT(h,a,J,m,!1);const Yn=u.listen(Kt,f,m);xe.push(m,Yn),q&&q.push(f,pt,rn,rn+1)}}else m=FT(h,a,J,m,!1);const lt=h.outputs;let St;if($e&&null!==lt&&(St=lt[f])){const At=St.length;if(At)for(let Kt=0;Kt<At;Kt+=2){const Fr=a[St[Kt]][St[Kt+1]].subscribe(m),Rc=xe.length;xe.push(m,Fr),q&&q.push(f,h.index,Rc,-(Rc+1))}}}(m,f,f[11],T,o,a,0,h),sh}function LT(o,a,u,h){try{return!1!==u(h)}catch(f){return RS(o,f),!1}}function FT(o,a,u,h,f){return function m(T){if(T===Function)return h;Hv(2&o.flags?Nn(o.index,a):a);let A=LT(a,0,h,T),N=m.__ngNextListenerFn__;for(;N;)A=LT(a,0,N,T)&&A,N=N.__ngNextListenerFn__;return f&&!1===A&&(T.preventDefault(),T.returnValue=!1),A}}function BS(o=1){return function ya(o){return(dn.lFrame.contextLView=function qu(o,a){for(;o>0;)a=a[15],o--;return a}(o,dn.lFrame.contextLView))[8]}(o)}function $S(o,a){let u=null;const h=function sS(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?Qb(o,m,!0):ou(h,m))return f}else u=f}return u}function jT(o){const a=ft()[16][6];if(!a.projection){const h=a.projection=Ds(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const T=o?$S(m,o):0;null!==T&&(f[T]?f[T].projectionNext=m:h[T]=m,f[T]=m),m=m.next}}}function UT(o,a=0,u){const h=ft(),f=In(),m=zf(f,22+o,16,null,u||null);null===m.projection&&(m.projection=a),jl(),64!=(64&m.flags)&&function ms(o,a,u){Ld(a[11],0,a,u,uc(o,u,a),vb(u.parent||a[6],u,a))}(f,h,m)}function up(o,a,u){return Qv(o,"",a,"",u),up}function Qv(o,a,u,h,f){const m=ft(),T=th(m,a,u,h);return T!==yn&&It(In(),lr(),m,o,T,m[11],f,!1),Qv}function qS(o,a,u,h,f){const m=o[u+1],T=null===a;let C=h?xo(m):ra(m),A=!1;for(;0!==C&&(!1===A||T);){const q=o[C+1];ek(o[C],a)&&(A=!0,o[C+1]=h?lT(q):ym(q)),C=h?xo(q):ra(q)}A&&(o[u+1]=h?ym(m):lT(m))}function ek(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Yo(o,a)>=0}function qT(o,a,u){return Ua(o,a,u,!1),qT}function ci(o,a){return Ua(o,a,null,!0),ci}function Ua(o,a,u,h){const f=ft(),m=In(),T=yo(2);m.firstUpdatePass&&function cp(o,a,u,h){const f=o.data;if(null===f[u+1]){const m=f[ai()],T=function zT(o,a){return a>=o.expandoStartIndex}(o,u);(function KT(o,a){return 0!=(o.flags&(a?16:32))})(m,h)&&null===a&&!T&&(a=!1),a=function ex(o,a,u,h){const f=function Bl(o){const a=dn.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=Bm(u=WT(null,o,a,u,h),a.attrs,h),m=null);else{const T=a.directiveStylingLast;if(-1===T||o[T]!==f)if(u=WT(f,o,a,u,h),null===m){let A=function bl(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==ra(h))return o[xo(h)]}(o,a,h);void 0!==A&&Array.isArray(A)&&(A=WT(null,o,a,A[1],h),A=Bm(A,a.attrs,h),function tx(o,a,u,h){o[xo(u?a.classBindings:a.styleBindings)]=h}(o,a,h,A))}else m=function Vm(o,a,u){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=Bm(h,o[m].hostAttrs,u);return Bm(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,h),function GS(o,a,u,h,f,m){let T=m?a.classBindings:a.styleBindings,C=xo(T),A=ra(T);o[h]=u;let q,N=!1;if(Array.isArray(u)){const J=u;q=J[1],(null===q||Yo(J,q)>0)&&(N=!0)}else q=u;if(f)if(0!==A){const xe=xo(o[C+1]);o[h+1]=mm(xe,C),0!==xe&&(o[xe+1]=Fv(o[xe+1],h)),o[C+1]=function vS(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=mm(C,0),0!==C&&(o[C+1]=Fv(o[C+1],h)),C=h;else o[h+1]=mm(A,0),0===C?C=h:o[A+1]=Fv(o[A+1],h),A=h;N&&(o[h+1]=ym(o[h+1])),qS(o,q,h,!0),qS(o,q,h,!1),function Fm(o,a,u,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&Yo(m,a)>=0&&(u[h+1]=lT(u[h+1]))}(a,q,o,h,m),T=mm(C,A),m?a.classBindings=T:a.styleBindings=T}(f,m,a,u,T,h)}}(m,o,T,h),a!==yn&&vs(f,T,a)&&function dp(o,a,u,h,f,m,T,C){if(!(3&a.type))return;const A=o.data,N=A[C+1];uh(function vm(o){return 1==(1&o)}(N)?hp(A,a,u,f,ra(N),T):void 0)||(uh(m)||function Bf(o){return 2==(2&o)}(N)&&(m=hp(A,null,u,f,C,T)),function _b(o,a,u,h,f){if(a)f?o.addClass(u,h):o.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:Qs.DashCase;null==f?o.removeStyle(u,h,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Qs.Important),o.setStyle(u,h,f,m))}}(h,T,xs(ai(),u),f,m))}(m,m.data[ai()],f,f[11],o,f[T+1]=function rx(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ve(Ti(o)))),o}(a,u),h,T)}function WT(o,a,u,h,f){let m=null;const T=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<T&&(m=a[C],h=Bm(h,m.hostAttrs,f),m!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function Bm(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const T=a[m];"number"==typeof T?f=T:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),ps(o,T,!!u||a[++m]))}return void 0===o?null:o}function hp(o,a,u,h,f,m){const T=null===a;let C;for(;f>0;){const A=o[f],N=Array.isArray(A),q=N?A[1]:A,J=null===q;let xe=u[f+1];xe===yn&&(xe=J?un:void 0);let $e=J?ll(xe,h):q===h?xe:void 0;if(N&&!uh($e)&&($e=ll(A,h)),uh($e)&&(C=$e,T))return C;const lt=o[f+1];f=T?xo(lt):ra(lt)}if(null!==a){let A=m?a.residualClasses:a.residualStyles;null!=A&&(C=ll(A,h))}return C}function uh(o){return void 0!==o}function ZT(o,a=""){const u=ft(),h=In(),f=o+22,m=h.firstCreatePass?zf(h,f,1,a,null):h.data[f],T=u[f]=function bf(o,a){return o.createText(a)}(u[11],a);Aa(h,u,T,m),Is(m,!1)}function YT(o){return $m("",o,""),YT}function $m(o,a,u){const h=ft(),f=th(h,o,a,u);return f!==yn&&ir(h,ai(),f),$m}function e_(o,a,u,h,f){const m=ft(),T=rp(m,o,a,u,h,f);return T!==yn&&ir(m,ai(),T),e_}const Ci=void 0;var bx=["en",[["a","p"],["AM","PM"],Ci],[["AM","PM"],Ci,Ci],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ci,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ci,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ci,"{1} 'at' {0}",Ci],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ik(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Us={};function fp(o){const a=function ak(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=Ex(a);if(u)return u;const h=a.split("-")[0];if(u=Ex(h),u)return u;if("en"===h)return bx;throw new Ue(701,!1)}function Tx(o){return fp(o)[ln.PluralCase]}function Ex(o){return o in Us||(Us[o]=Hn.ng&&Hn.ng.common&&Hn.ng.common.locales&&Hn.ng.common.locales[o]),Us[o]}var ln=(()=>((ln=ln||{})[ln.LocaleId=0]="LocaleId",ln[ln.DayPeriodsFormat=1]="DayPeriodsFormat",ln[ln.DayPeriodsStandalone=2]="DayPeriodsStandalone",ln[ln.DaysFormat=3]="DaysFormat",ln[ln.DaysStandalone=4]="DaysStandalone",ln[ln.MonthsFormat=5]="MonthsFormat",ln[ln.MonthsStandalone=6]="MonthsStandalone",ln[ln.Eras=7]="Eras",ln[ln.FirstDayOfWeek=8]="FirstDayOfWeek",ln[ln.WeekendRange=9]="WeekendRange",ln[ln.DateFormat=10]="DateFormat",ln[ln.TimeFormat=11]="TimeFormat",ln[ln.DateTimeFormat=12]="DateTimeFormat",ln[ln.NumberSymbols=13]="NumberSymbols",ln[ln.NumberFormats=14]="NumberFormats",ln[ln.CurrencyCode=15]="CurrencyCode",ln[ln.CurrencySymbol=16]="CurrencySymbol",ln[ln.CurrencyName=17]="CurrencyName",ln[ln.Currencies=18]="Currencies",ln[ln.Directionality=19]="Directionality",ln[ln.PluralCase=20]="PluralCase",ln[ln.ExtraData=21]="ExtraData",ln))();const pp="en-US";let wx=pp;function xE(o,a,u,h,f){if(o=Z(o),Array.isArray(o))for(let m=0;m<o.length;m++)xE(o[m],a,u,h,f);else{const m=In(),T=ft();let C=Xr(o)?o:Z(o.provide),A=Lb(o);const N=Pr(),q=1048575&N.providerIndexes,J=N.directiveStart,xe=N.providerIndexes>>20;if(Xr(o)||!o.multi){const $e=new zo(A,f,Zd),lt=yh(C,a,f?q:q+xe,J);-1===lt?(Wo(Ta(N,T),m,C),l_(m,o,a.length),a.push(C),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),u.push($e),T.push($e)):(u[lt]=$e,T[lt]=$e)}else{const $e=yh(C,a,q+xe,J),lt=yh(C,a,q,q+xe),St=$e>=0&&u[$e],At=lt>=0&&u[lt];if(f&&!At||!f&&!St){Wo(Ta(N,T),m,C);const Kt=function zx(o,a,u,h,f){const m=new zo(o,u,Zd);return m.multi=[],m.index=a,m.componentProviders=0,Ac(m,f,h&&!u),m}(f?qx:Gx,u.length,f,h,A);!f&&At&&(u[lt].providerFactory=Kt),l_(m,o,a.length,0),a.push(C),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),u.push(Kt),T.push(Kt)}else l_(m,o,$e>-1?$e:lt,Ac(u[f?lt:$e],A,!f&&h));!f&&h&&At&&u[lt].componentProviders++}}}function l_(o,a,u,h){const f=Xr(a),m=function xv(o){return!!o.useClass}(a);if(f||m){const A=(m?Z(a.useClass):a).prototype.ngOnDestroy;if(A){const N=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const q=N.indexOf(u);-1===q?N.push(u,[h,A]):N[q+1].push(h,A)}else N.push(u,A)}}}function Ac(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function yh(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function Gx(o,a,u,h){return IE(this.multi,[])}function qx(o,a,u,h){const f=this.multi;let m;if(this.providerFactory){const T=this.providerFactory.componentProviders,C=vo(u,u[1],this.providerFactory.index,h);m=C.slice(0,T),IE(f,m);for(let A=T;A<C.length;A++)m.push(C[A])}else m=[],IE(f,m);return m}function IE(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Wx(o,a=[]){return u=>{u.providersResolver=(h,f)=>function Hx(o,a,u){const h=In();if(h.firstCreatePass){const f=Wi(o);xE(u,h.data,h.blueprint,f,!0),xE(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class Ep{}class u_{}function as(o,a){return new Kx(o,a??null)}class Kx extends Ep{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vl(this);const h=tr(a);this._bootstrapComponents=su(h.bootstrap),this._r3Injector=Jb(a,u,[{provide:Ep,useValue:this},{provide:nm,useValue:this.componentFactoryResolver}],ve(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class DE extends u_{constructor(a){super(),this.moduleType=a}create(a){return new Kx(this.moduleType,a)}}class _k extends Ep{constructor(a,u,h){super(),this.componentFactoryResolver=new vl(this),this.instance=null;const f=new Ob([...a,{provide:Ep,useValue:this},{provide:nm,useValue:this.componentFactoryResolver}],u||Av(),h,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function c_(o,a,u=null){return new _k(o,a,u).injector}let bk=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=Pb(0,u.type),f=h.length>0?c_([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=at({token:o,providedIn:"environment",factory:()=>new o(qr($d))}),o})();function Jm(o){o.getStandaloneInjector=a=>a.get(bk).getOrCreateStandaloneInjector(o)}function vh(o,a,u){const h=Rr()+o,f=ft();return f[h]===yn?La(f,h,u?a.call(u):a()):function tp(o,a){return o[a]}(f,h)}function _h(o,a,u,h){return LE(ft(),Rr(),o,a,u,h)}function p_(o,a,u,h,f){return FE(ft(),Rr(),o,a,u,h,f)}function bh(o,a){const u=o[a];return u===yn?void 0:u}function LE(o,a,u,h,f,m){const T=a+u;return vs(o,T,f)?La(o,T+1,m?h.call(m,f):h(f)):bh(o,T+1)}function FE(o,a,u,h,f,m,T){const C=a+u;return bc(o,C,f,m)?La(o,C+2,T?h.call(T,f,m):h(f,m)):bh(o,C+2)}function ty(o,a){const u=In();let h;const f=o+22;u.firstCreatePass?(h=function jE(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const m=h.factory||(h.factory=zs(h.type)),T=pr(Zd);try{const C=zl(!1),A=m();return zl(C),function Rm(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,ft(),f,A),A}finally{pr(T)}}function y_(o,a,u){const h=o+22,f=ft(),m=go(f,h);return ny(f,h)?LE(f,Rr(),a,m.transform,u,m):m.transform(u)}function UE(o,a,u,h){const f=o+22,m=ft(),T=go(m,f);return ny(m,f)?FE(m,Rr(),a,T.transform,u,h,T):T.transform(u,h)}function ny(o,a){return o[1].data[a].pure}function v_(o){return a=>{setTimeout(o,void 0,a)}}const Ao=class Ak extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){let f=a,m=u||(()=>null),T=h;if(a&&"object"==typeof a){const A=a;f=A.next?.bind(A),m=A.error?.bind(A),T=A.complete?.bind(A)}this.__isAsync&&(m=v_(m),f&&(f=v_(f)),T&&(T=v_(T)));const C=super.subscribe({next:f,error:m,complete:T});return a instanceof oe.w0&&a.add(C),C}};function ry(){return this._results[_c()]()}class Sp{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=_c(),h=Sp.prototype;h[u]||(h[u]=ry)}get changes(){return this._changes||(this._changes=new Ao)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=Ot(a);(this._changesDetected=!function Un(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let xp=(()=>{class o{}return o.__NG_ELEMENT_ID__=Pk,o})();const kk=xp,Mk=class extends kk{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a,u){const h=this._declarationTContainer.tViews,f=Tm(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[19];return null!==T&&(f[19]=T.createEmbeddedView(h)),yT(h,f,a),new Xf(f)}};function Pk(){return __(Pr(),ft())}function __(o,a){return 4&o.type?new Mk(a,o,Of(o,a)):null}let Ip=(()=>{class o{}return o.__NG_ELEMENT_ID__=Rk,o})();function Rk(){return T_(Pr(),ft())}const Ok=Ip,Dp=class extends Ok{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return Of(this._hostTNode,this._hostLView)}get injector(){return new wa(this._hostTNode,this._hostLView)}get parentInjector(){const a=ec(this._hostTNode,this._hostLView);if(rf(a)){const u=ql(a,this._hostLView),h=gi(a);return new wa(u[1].data[h+8],u)}return new wa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=b_(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){let f,m;"number"==typeof h?f=h:null!=h&&(f=h.index,m=h.injector);const T=a.createEmbeddedView(u||{},m);return this.insert(T,f),T}createComponent(a,u,h,f,m){const T=a&&!function Oi(o){return"function"==typeof o}(a);let C;if(T)C=u;else{const J=u||{};C=J.index,h=J.injector,f=J.projectableNodes,m=J.environmentInjector||J.ngModuleRef}const A=T?a:new lu(Pe(a)),N=h||this.parentInjector;if(!m&&null==A.ngModule){const xe=(T?N:this.parentInjector).get($d,null);xe&&(m=xe)}const q=A.create(N,f,void 0,m);return this.insert(q.hostView,C),q}insert(a,u){const h=a._lView,f=h[1];if(function Ou(o){return ns(o[3])}(h)){const q=this.indexOf(a);if(-1!==q)this.detach(q);else{const J=h[3],xe=new Dp(J,J[6],J[3]);xe.detach(xe.indexOf(a))}}const m=this._adjustIndex(u),T=this._lContainer;!function Tf(o,a,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=a),h<m-10?(a[4]=u[f],uf(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const T=a[17];null!==T&&u!==T&&function pb(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(T,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=64}(f,h,T,m);const C=xf(m,T),A=h[11],N=nu(A,T[7]);return null!==N&&function VC(o,a,u,h,f,m){h[0]=f,h[6]=a,ru(o,h,u,1,f,m)}(f,T[6],A,h,N,C),a.attachToViewContainerRef(),uf(kc(T),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=b_(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=Fg(this._lContainer,u);h&&(bo(kc(this._lContainer),u),jg(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=Fg(this._lContainer,u);return h&&null!=bo(kc(this._lContainer),u)?new Xf(h):null}_adjustIndex(a,u=0){return a??this.length+u}};function b_(o){return o[8]}function kc(o){return o[8]||(o[8]=[])}function T_(o,a){let u;const h=a[o.index];if(ns(h))u=h;else{let f;if(8&o.type)f=Mr(h);else{const m=a[11];f=m.createComment("");const T=Ki(o,a);hl(m,nu(m,T),f,function yv(o,a){return o.nextSibling(a)}(m,T),!1)}a[o.index]=u=mc(h,a,f,o),Na(a,u)}return new Dp(u,o,a)}class w_{constructor(a){this.queryList=a,this.matches=null}clone(){return new w_(this.queryList)}setDirty(){this.queryList.setDirty()}}class sy{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const T=u.getByIndex(m);f.push(this.queries[T.indexInDeclarationView].clone())}return new sy(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==GE(a,u).matches&&this.queries[u].setDirty()}}class C_{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class Ba{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new Ba(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class S_{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new S_(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,u,Nk(u,m)),this.matchTNodeWithReadOption(a,u,tl(u,a,m,!1,!1))}else h===xp?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,tl(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===rm||f===Ip||f===xp&&4&u.type)this.addMatch(u.index,-2);else{const m=tl(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function Nk(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function Lk(o,a,u,h){return-1===u?function VE(o,a){return 11&o.type?Of(o,a):4&o.type?__(o,a):null}(a,o):-2===u?function BE(o,a,u){return u===rm?Of(a,o):u===xp?__(a,o):u===Ip?T_(a,o):void 0}(o,a,h):vo(o,o[1],u,a)}function iI(o,a,u,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,T=u.matches,C=[];for(let A=0;A<T.length;A+=2){const N=T[A];C.push(N<0?null:Lk(a,m[N],T[A+1],u.metadata.read))}f.matches=C}return f.matches}function oy(o,a,u,h){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const T=iI(o,a,f,u);for(let C=0;C<m.length;C+=2){const A=m[C];if(A>0)h.push(T[C/2]);else{const N=m[C+1],q=a[-A];for(let J=10;J<q.length;J++){const xe=q[J];xe[17]===xe[3]&&oy(xe[1],xe,N,h)}if(null!==q[9]){const J=q[9];for(let xe=0;xe<J.length;xe++){const $e=J[xe];oy($e[1],$e,N,h)}}}}}return h}function ay(o){const a=ft(),u=In(),h=pd();$l(h+1);const f=GE(u,h);if(o.dirty&&function Ru(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?oy(u,a,h,[]):iI(u,a,f,h);o.reset(m,Hd),o.notifyOnChanges()}return!0}return!1}function x_(o,a,u){const h=In();h.firstCreatePass&&(oI(h,new C_(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),sI(h,ft(),a)}function $E(o,a,u,h){const f=In();if(f.firstCreatePass){const m=Pr();oI(f,new C_(a,u,h),m.index),function aI(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}sI(f,ft(),u)}function Th(){return function HE(o,a){return o[19].queries[a].queryList}(ft(),pd())}function sI(o,a,u){const h=new Sp(4==(4&u));Jt(o,a,h,h.destroy),null===a[19]&&(a[19]=new sy),a[19].queries.push(new w_(h))}function oI(o,a,u){null===o.queries&&(o.queries=new Ba),o.queries.track(new S_(a,u))}function GE(o,a){return o.queries.getByIndex(a)}function lI(o,a){return __(o,a)}function dy(...o){}const kI=new ur("Application Initializer");let Op=(()=>{class o{constructor(u){this.appInits=u,this.resolve=dy,this.reject=dy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(_s(m))u.push(m);else if(Lm(m)){const T=new Promise((C,A)=>{m.subscribe({complete:C,error:A})});u.push(T)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(qr(kI,8))},o.\u0275prov=at({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const El=new ur("AppId",{providedIn:"root",factory:function N_(){return`${hy()}${hy()}${hy()}`}});function hy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const MI=new ur("Platform Initializer"),Hk=new ur("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),L_=new ur("appBootstrapListener");let Gk=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=at({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const F_=new ur("LocaleId",{providedIn:"root",factory:()=>k(F_,Pt.Optional|Pt.SkipSelf)||function nw(){return typeof $localize<"u"&&$localize.locale||pp}()}),rw=new ur("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Wk{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let Kk=(()=>{class o{compileModuleSync(u){return new DE(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=su(tr(u).declarations).reduce((T,C)=>{const A=Pe(C);return A&&T.push(new lu(A)),T},[]);return new Wk(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=at({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const OI=(()=>Promise.resolve(0))();function ow(o){typeof Zone>"u"?OI.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class no{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ao(!1),this.onMicrotaskEmpty=new Ao(!1),this.onStable=new Ao(!1),this.onError=new Ao(!1),typeof Zone>"u")throw new Ue(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function aw(){let o=Hn.requestAnimationFrame,a=Hn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function B_(o){const a=()=>{!function LI(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Hn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Rn(o),o.isCheckStableRunning=!0,V_(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Rn(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,T,C)=>{try{return lw(o),u.invokeTask(f,m,T,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),uw(o)}},onInvoke:(u,h,f,m,T,C,A)=>{try{return lw(o),u.invoke(f,m,T,C,A)}finally{o.shouldCoalesceRunChangeDetection&&a(),uw(o)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,Rn(o),V_(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!no.isInAngularZone())throw new Ue(909,!1)}static assertNotInAngularZone(){if(no.isInAngularZone())throw new Ue(909,!1)}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const m=this._inner,T=m.scheduleEventTask("NgZoneEvent: "+f,a,NI,dy,dy);try{return m.runTask(T,u,h)}finally{m.cancelTask(T)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const NI={};function V_(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Rn(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function lw(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function uw(o){o._nesting--,V_(o)}class FI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ao,this.onMicrotaskEmpty=new Ao,this.onStable=new Ao,this.onError=new Ao}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}const Np=new ur(""),cw=new ur("");let $_,Nr=(()=>{class o{constructor(u,h,f){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$_||(function wl(o){$_=o}(f),f.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{no.assertNotInAngularZone(),ow(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ow(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(qr(no),qr(ls),qr(cw))},o.\u0275prov=at({token:o,factory:o.\u0275fac}),o})(),ls=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return $_?.findTestabilityInTree(this,u,h)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=at({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Mc=null;const fy=new ur("AllowMultipleToken"),H_=new ur("PlatformDestroyListeners");class mN{constructor(a,u){this.name=a,this.token=u}}function VI(o,a,u=[]){const h=`Platform: ${a}`,f=new ur(h);return(m=[])=>{let T=py();if(!T||T.injector.get(fy,!1)){const C=[...u,...m,{provide:f,useValue:!0}];o?o(C):function Yk(o){if(Mc&&!Mc.get(fy,!1))throw new Ue(400,!1);Mc=o;const a=o.get(q_);(function UI(o){const a=o.get(MI,null);a&&a.forEach(u=>u())})(o)}(function G_(o=[],a){return na.create({name:a,providers:[{provide:Jg,useValue:"platform"},{provide:H_,useValue:new Set([()=>Mc=null])},...o]})}(C,h))}return function BI(o){const a=py();if(!a)throw new Ue(401,!1);return a}()}}function py(){return Mc?.get(q_)??null}let q_=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const f=function gy(o,a){let u;return u="noop"===o?new FI:("zone.js"===o?void 0:o)||new no(a),u}(h?.ngZone,function z_(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:no,useValue:f}];return f.run(()=>{const T=na.create({providers:m,parent:this.injector,name:u.moduleType.name}),C=u.create(T),A=C.injector.get(Lf,null);if(!A)throw new Ue(402,!1);return f.runOutsideAngular(()=>{const N=f.onError.subscribe({next:q=>{A.handleError(q)}});C.onDestroy(()=>{Lp(this._modules,C),N.unsubscribe()})}),function W_(o,a,u){try{const h=u();return _s(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(A,f,()=>{const N=C.injector.get(Op);return N.runInitializers(),N.donePromise.then(()=>(function Cx(o){Re(o,"Expected localeId to be defined"),"string"==typeof o&&(wx=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(F_,pp)||pp),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,h=[]){const f=hw({},h);return function jI(o,a,u){const h=new DE(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(Ch);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ue(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(H_,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(qr(na))},o.\u0275prov=at({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function hw(o,a){return Array.isArray(a)?a.reduce(hw,o):{...o,...a}}let Ch=(()=>{class o{constructor(u,h,f){this._zone=u,this._injector=h,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new U.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),T=new U.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{no.assertNotInAngularZone(),ow(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{no.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ye.T)(m,T.pipe((0,te.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const f=u instanceof Vb;if(!this._injector.get(Op).done)throw!f&&kn(u),new Ue(405,false);let T;T=f?u:this._injector.get(nm).resolveComponentFactory(u),this.componentTypes.push(T.componentType);const C=function Zk(o){return o.isBoundToModule}(T)?void 0:this._injector.get(Ep),N=T.create(na.NULL,[],h||T.selector,C),q=N.location.nativeElement,J=N.injector.get(Np,null);return J?.registerApplication(q),N.onDestroy(()=>{this.detachView(N.hostView),Lp(this.components,N),J?.unregisterApplication(q)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new Ue(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Lp(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(L_,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Lp(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ue(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(qr(no),qr($d),qr(Lf))},o.\u0275prov=at({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Lp(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let Sh=!0,Z_=!1;function Jk(){return Z_=!0,Sh}function eM(){if(Z_)throw new Error("Cannot enable prod mode after platform setup.");Sh=!1}let GI=(()=>{class o{}return o.__NG_ELEMENT_ID__=nM,o})();function nM(o){return function rM(o,a,u){if(Ol(o)&&!u){const h=Nn(o.index,a);return new Xf(h,h)}return 47&o.type?new Xf(a[16],a):null}(Pr(),ft(),16==(16&o))}class Cl{constructor(){}supports(a){return Dn(a)}create(a){return new Ih(a)}}const xN=(o,a)=>a;class Ih{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||xN}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const T=!h||u&&u.currentIndex<_w(h,f,m)?u:h,C=_w(T,f,m),A=T.currentIndex;if(T===h)f--,h=h._nextRemoved;else if(u=u._next,null==T.previousIndex)f++;else{m||(m=[]);const N=C-f,q=A-f;if(N!=q){for(let xe=0;xe<N;xe++){const $e=xe<m.length?m[xe]:m[xe]=0,lt=$e+xe;q<=lt&&lt<N&&(m[xe]=$e+1)}m[T.previousIndex]=q-N}}C!==A&&a(T,C,A)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Dn(a))throw new Ue(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,T,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],T=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,T)?(h&&(u=this._verifyReinsertion(u,m,T,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,T,C),h=!0),u=u._next}else f=0,function ep(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[_c()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{T=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,T)?(h&&(u=this._verifyReinsertion(u,C,T,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,T,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new Q_(u,h),m,f),a}_verifyReinsertion(a,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new WI),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WI),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Q_{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oM{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class WI{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new oM,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _w(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class bw{constructor(){}supports(a){return a instanceof Map||km(a)}create(){return new X_}}class X_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||km(a)))throw new Ue(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,T=f._next;return m&&(m._next=T),T&&(T._prev=m),f._next=null,f._prev=null,f}const h=new aM(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class aM{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Pc(){return new Fp([new Cl])}let Fp=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||Pc()),deps:[[o,new Ut,new Bt]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Ue(901,!1)}}return o.\u0275prov=at({token:o,providedIn:"root",factory:Pc}),o})();function Tw(){return new my([new bw])}let my=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||Tw()),deps:[[o,new Ut,new Bt]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new Ue(901,!1)}}return o.\u0275prov=at({token:o,providedIn:"root",factory:Tw}),o})();const Ew=VI(null,"core",[]);let ZI=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(qr(Ch))},o.\u0275mod=gn({type:o}),o.\u0275inj=Rt({}),o})();function Dh(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(it,Ie,V)=>{"use strict";V.d(Ie,{Z:()=>Ue});var c=V(2090),oe=V(4859),U=V(9681),ye=V(1877);class te{constructor(Be,me){this._delegate=Be,this.firebase=me,(0,U._addComponent)(Be,new oe.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(Be,me=U._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(Be);return!nt.isInitialized()&&"EXPLICIT"===(null===(Ke=nt.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:me})}_removeServiceInstance(Be,me=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(me)}_addComponent(Be){(0,U._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,U._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function Ce(){const Tt=function ve(Tt){const Be={},me={__esModule:!0,initializeApp:function Ge(et,O={}){const $=U.initializeApp(et,O);if((0,c.r3)(Be,$.name))return Be[$.name];const W=new Tt($,me);return Be[$.name]=W,W},app:nt,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function ze(et){const O=et.name,$=O.replace("-compat","");if(U._registerComponent(et)&&"PUBLIC"===et.type){const W=(re=nt())=>{if("function"!=typeof re[$])throw _e.create("invalid-app-argument",{appName:O});return re[$]()};void 0!==et.serviceProps&&(0,c.ZB)(W,et.serviceProps),me[$]=W,Tt.prototype[$]=function(...re){return this._getService.bind(this,O).apply(this,et.multipleInstances?re:[])}}return"PUBLIC"===et.type?me[$]:null},removeApp:function Ke(et){delete Be[et]},useAsService:function rt(et,O){return"serverAuth"===O?null:O},modularAPIs:U}};function nt(et){if(!(0,c.r3)(Be,et=et||U._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:et});return Be[et]}return me.default=me,Object.defineProperty(me,"apps",{get:function Se(){return Object.keys(Be).map(et=>Be[et])}}),nt.App=Tt,me}(te);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function Be(me){(0,c.ZB)(Tt,me)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Tt}(),ee=new ye.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Tt=self.firebase.SDK_VERSION;Tt&&Tt.indexOf("LITE")>=0&&ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ue=K;!function Me(Tt){(0,U.registerVersion)("@firebase/app-compat","0.2.0",Tt)}()},9681:(it,Ie,V)=>{"use strict";V.r(Ie),V.d(Ie,{FirebaseError:()=>ye.ZR,SDK_VERSION:()=>ws,_DEFAULT_ENTRY_NAME:()=>Re,_addComponent:()=>bt,_addOrOverwriteComponent:()=>at,_apps:()=>gt,_clearComponents:()=>Fn,_components:()=>ut,_getProvider:()=>Rt,_registerComponent:()=>wt,_removeServiceInstance:()=>qt,deleteApp:()=>Jn,getApp:()=>Wn,getApps:()=>Er,initializeApp:()=>hn,onLog:()=>Ai,registerVersion:()=>Br,setLogLevel:()=>pr});var c=V(5861),oe=V(4859),U=V(1877),ye=V(2090),te=V(8766);class pe{constructor(dt){this.container=dt}getPlatformInfoString(){return this.container.getProviders().map(Vt=>{if(function _e(jt){return"VERSION"===jt.getComponent()?.type}(Vt)){const tn=Vt.getImmediate();return`${tn.library}/${tn.version}`}return null}).filter(Vt=>Vt).join(" ")}}const ve="@firebase/app",K=new U.Yd("@firebase/app"),Re="[DEFAULT]",Oe={[ve]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gt=new Map,ut=new Map;function bt(jt,dt){try{jt.container.addComponent(dt)}catch(Vt){K.debug(`Component ${dt.name} failed to register with FirebaseApp ${jt.name}`,Vt)}}function at(jt,dt){jt.container.addOrOverwriteComponent(dt)}function wt(jt){const dt=jt.name;if(ut.has(dt))return K.debug(`There were multiple attempts to register component ${dt}.`),!1;ut.set(dt,jt);for(const Vt of gt.values())bt(Vt,jt);return!0}function Rt(jt,dt){const Vt=jt.container.getProvider("heartbeat").getImmediate({optional:!0});return Vt&&Vt.triggerHeartbeat(),jt.container.getProvider(dt)}function qt(jt,dt,Vt=Re){Rt(jt,dt).clearInstance(Vt)}function Fn(){ut.clear()}const er=new ye.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tr{constructor(dt,Vt,tn){this._isDeleted=!1,this._options=Object.assign({},dt),this._config=Object.assign({},Vt),this._name=Vt.name,this._automaticDataCollectionEnabled=Vt.automaticDataCollectionEnabled,this._container=tn,this.container.addComponent(new oe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(dt){this.checkDestroyed(),this._automaticDataCollectionEnabled=dt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(dt){this._isDeleted=dt}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}const ws="9.15.0";function hn(jt,dt={}){let Vt=jt;"object"!=typeof dt&&(dt={name:dt});const tn=Object.assign({name:Re,automaticDataCollectionEnabled:!1},dt),nn=tn.name;if("string"!=typeof nn||!nn)throw er.create("bad-app-name",{appName:String(nn)});if(Vt||(Vt=(0,ye.aH)()),!Vt)throw er.create("no-options");const gn=gt.get(nn);if(gn){if((0,ye.vZ)(Vt,gn.options)&&(0,ye.vZ)(tn,gn.config))return gn;throw er.create("duplicate-app",{appName:nn})}const Te=new oe.H0(nn);for(const ke of ut.values())Te.addComponent(ke);const fe=new Tr(Vt,tn,Te);return gt.set(nn,fe),fe}function Wn(jt=Re){const dt=gt.get(jt);if(!dt&&jt===Re)return hn();if(!dt)throw er.create("no-app",{appName:jt});return dt}function Er(){return Array.from(gt.values())}function Jn(jt){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,c.Z)(function*(jt){const dt=jt.name;gt.has(dt)&&(gt.delete(dt),yield Promise.all(jt.container.getProviders().map(Vt=>Vt.delete())),jt.isDeleted=!0)})).apply(this,arguments)}function Br(jt,dt,Vt){var tn;let nn=null!==(tn=Oe[jt])&&void 0!==tn?tn:jt;Vt&&(nn+=`-${Vt}`);const gn=nn.match(/\s|\//),Te=dt.match(/\s|\//);if(gn||Te){const fe=[`Unable to register library "${nn}" with version "${dt}":`];return gn&&fe.push(`library name "${nn}" contains illegal characters (whitespace or "/")`),gn&&Te&&fe.push("and"),Te&&fe.push(`version name "${dt}" contains illegal characters (whitespace or "/")`),void K.warn(fe.join(" "))}wt(new oe.wA(`${nn}-version`,()=>({library:nn,version:dt}),"VERSION"))}function Ai(jt,dt){if(null!==jt&&"function"!=typeof jt)throw er.create("invalid-log-argument");(0,U.Am)(jt,dt)}function pr(jt){(0,U.Ub)(jt)}const jn="firebase-heartbeat-store";let zn=null;function Kn(){return zn||(zn=(0,te.X3)("firebase-heartbeat-database",1,{upgrade:(jt,dt)=>{0===dt&&jt.createObjectStore(jn)}}).catch(jt=>{throw er.create("idb-open",{originalErrorMessage:jt.message})})),zn}function Gt(){return(Gt=(0,c.Z)(function*(jt){try{return(yield Kn()).transaction(jn).objectStore(jn).get(wr(jt))}catch(dt){if(dt instanceof ye.ZR)K.warn(dt.message);else{const Vt=er.create("idb-get",{originalErrorMessage:dt?.message});K.warn(Vt.message)}}})).apply(this,arguments)}function Hn(jt,dt){return ni.apply(this,arguments)}function ni(){return(ni=(0,c.Z)(function*(jt,dt){try{const tn=(yield Kn()).transaction(jn,"readwrite");return yield tn.objectStore(jn).put(dt,wr(jt)),tn.done}catch(Vt){if(Vt instanceof ye.ZR)K.warn(Vt.message);else{const tn=er.create("idb-set",{originalErrorMessage:Vt?.message});K.warn(tn.message)}}})).apply(this,arguments)}function wr(jt){return`${jt.name}!${jt.options.appId}`}class ki{constructor(dt){this.container=dt,this._heartbeatsCache=null;const Vt=this.container.getProvider("app").getImmediate();this._storage=new Mn(Vt),this._heartbeatsCachePromise=this._storage.read().then(tn=>(this._heartbeatsCache=tn,tn))}triggerHeartbeat(){var dt=this;return(0,c.Z)(function*(){const tn=dt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),nn=An();if(null===dt._heartbeatsCache&&(dt._heartbeatsCache=yield dt._heartbeatsCachePromise),dt._heartbeatsCache.lastSentHeartbeatDate!==nn&&!dt._heartbeatsCache.heartbeats.some(gn=>gn.date===nn))return dt._heartbeatsCache.heartbeats.push({date:nn,agent:tn}),dt._heartbeatsCache.heartbeats=dt._heartbeatsCache.heartbeats.filter(gn=>{const Te=new Date(gn.date).valueOf();return Date.now()-Te<=2592e6}),dt._storage.overwrite(dt._heartbeatsCache)})()}getHeartbeatsHeader(){var dt=this;return(0,c.Z)(function*(){if(null===dt._heartbeatsCache&&(yield dt._heartbeatsCachePromise),null===dt._heartbeatsCache||0===dt._heartbeatsCache.heartbeats.length)return"";const Vt=An(),{heartbeatsToSend:tn,unsentEntries:nn}=function Mi(jt,dt=1024){const Vt=[];let tn=jt.slice();for(const nn of jt){const gn=Vt.find(Te=>Te.agent===nn.agent);if(gn){if(gn.dates.push(nn.date),Cr(Vt)>dt){gn.dates.pop();break}}else if(Vt.push({agent:nn.agent,dates:[nn.date]}),Cr(Vt)>dt){Vt.pop();break}tn=tn.slice(1)}return{heartbeatsToSend:Vt,unsentEntries:tn}}(dt._heartbeatsCache.heartbeats),gn=(0,ye.L)(JSON.stringify({version:2,heartbeats:tn}));return dt._heartbeatsCache.lastSentHeartbeatDate=Vt,nn.length>0?(dt._heartbeatsCache.heartbeats=nn,yield dt._storage.overwrite(dt._heartbeatsCache)):(dt._heartbeatsCache.heartbeats=[],dt._storage.overwrite(dt._heartbeatsCache)),gn})()}}function An(){return(new Date).toISOString().substring(0,10)}class Mn{constructor(dt){this.app=dt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ye.hl)()&&(0,ye.eu)().then(()=>!0).catch(()=>!1)})()}read(){var dt=this;return(0,c.Z)(function*(){return(yield dt._canUseIndexedDBPromise)&&(yield function Qt(jt){return Gt.apply(this,arguments)}(dt.app))||{heartbeats:[]}})()}overwrite(dt){var Vt=this;return(0,c.Z)(function*(){var tn;if(yield Vt._canUseIndexedDBPromise){const gn=yield Vt.read();return Hn(Vt.app,{lastSentHeartbeatDate:null!==(tn=dt.lastSentHeartbeatDate)&&void 0!==tn?tn:gn.lastSentHeartbeatDate,heartbeats:dt.heartbeats})}})()}add(dt){var Vt=this;return(0,c.Z)(function*(){var tn;if(yield Vt._canUseIndexedDBPromise){const gn=yield Vt.read();return Hn(Vt.app,{lastSentHeartbeatDate:null!==(tn=dt.lastSentHeartbeatDate)&&void 0!==tn?tn:gn.lastSentHeartbeatDate,heartbeats:[...gn.heartbeats,...dt.heartbeats]})}})()}}function Cr(jt){return(0,ye.L)(JSON.stringify({version:2,heartbeats:jt})).length}!function ii(jt){wt(new oe.wA("platform-logger",dt=>new pe(dt),"PRIVATE")),wt(new oe.wA("heartbeat",dt=>new ki(dt),"PRIVATE")),Br(ve,"0.9.0",jt),Br(ve,"0.9.0","esm2017"),Br("fire-js","")}("")},4859:(it,Ie,V)=>{"use strict";V.d(Ie,{H0:()=>ve,wA:()=>U});var c=V(5861),oe=V(2090);class U{constructor(K,ee,Z){this.name=K,this.instanceFactory=ee,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ye="[DEFAULT]";class te{constructor(K,ee){this.name=K,this.container=ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const ee=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(ee)){const Z=new oe.BH;if(this.instancesDeferred.set(ee,Z),this.isInitialized(ee)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:ee});qe&&Z.resolve(qe)}catch{}}return this.instancesDeferred.get(ee).promise}getImmediate(K){var ee;const Z=this.normalizeInstanceIdentifier(K?.identifier),qe=null!==(ee=K?.optional)&&void 0!==ee&&ee;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Me){if(qe)return null;throw Me}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function _e(Ce){return"EAGER"===Ce.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ye})}catch{}for(const[ee,Z]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(ee);try{const Me=this.getOrInitializeService({instanceIdentifier:qe});Z.resolve(Me)}catch{}}}}clearInstance(K=ye){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,c.Z)(function*(){const ee=Array.from(K.instances.values());yield Promise.all([...ee.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...ee.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ye){return this.instances.has(K)}getOptions(K=ye){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:ee={}}=K,Z=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:Z,options:ee});for(const[Me,Ue]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Me)&&Ue.resolve(qe);return qe}onInit(K,ee){var Z;const qe=this.normalizeInstanceIdentifier(ee),Me=null!==(Z=this.onInitCallbacks.get(qe))&&void 0!==Z?Z:new Set;Me.add(K),this.onInitCallbacks.set(qe,Me);const Ue=this.instances.get(qe);return Ue&&K(Ue,qe),()=>{Me.delete(K)}}invokeOnInitCallbacks(K,ee){const Z=this.onInitCallbacks.get(ee);if(Z)for(const qe of Z)try{qe(K,ee)}catch{}}getOrInitializeService({instanceIdentifier:K,options:ee={}}){let Z=this.instances.get(K);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=K,Ce===ye?void 0:Ce),options:ee}),this.instances.set(K,Z),this.instancesOptions.set(K,ee),this.invokeOnInitCallbacks(Z,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,Z)}catch{}var Ce;return Z||null}normalizeInstanceIdentifier(K=ye){return this.component?this.component.multipleInstances?K:ye:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const ee=this.getProvider(K.name);if(ee.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);ee.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const ee=new te(K,this);return this.providers.set(K,ee),ee}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Ie,V)=>{"use strict";V.d(Ie,{Am:()=>Ce,Ub:()=>ve,Yd:()=>_e,in:()=>oe});const c=[];var oe=(()=>{return(K=oe||(oe={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",oe;var K})();const U={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},ye=oe.INFO,te={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},pe=(K,ee,...Z)=>{if(ee<K.logLevel)return;const qe=(new Date).toISOString(),Me=te[ee];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${ee})`);console[Me](`[${qe}]  ${K.name}:`,...Z)};class _e{constructor(ee){this.name=ee,this._logLevel=ye,this._logHandler=pe,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(ee){if(!(ee in oe))throw new TypeError(`Invalid value "${ee}" assigned to \`logLevel\``);this._logLevel=ee}setLogLevel(ee){this._logLevel="string"==typeof ee?U[ee]:ee}get logHandler(){return this._logHandler}set logHandler(ee){if("function"!=typeof ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(ee){this._userLogHandler=ee}debug(...ee){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...ee),this._logHandler(this,oe.DEBUG,...ee)}log(...ee){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...ee),this._logHandler(this,oe.VERBOSE,...ee)}info(...ee){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...ee),this._logHandler(this,oe.INFO,...ee)}warn(...ee){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...ee),this._logHandler(this,oe.WARN,...ee)}error(...ee){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...ee),this._logHandler(this,oe.ERROR,...ee)}}function ve(K){c.forEach(ee=>{ee.setLogLevel(K)})}function Ce(K,ee){for(const Z of c){let qe=null;ee&&ee.level&&(qe=U[ee.level]),Z.userLogHandler=null===K?null:(Me,Ue,...Tt)=>{const Be=Tt.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Ue>=(qe??Me.logLevel)&&K({level:oe[Ue].toLowerCase(),message:Be,args:Tt,type:Me.name})}}}},259:(it,Ie,V)=>{"use strict";V.d(Ie,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=V(9681);(0,c.registerVersion)("firebase","9.15.0","app")},9260:(it,Ie,V)=>{"use strict";V.d(Ie,{Z:()=>c.Z});var c=V(3942);c.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(it,Ie,V)=>{"use strict";V.r(Ie);var c=V(5861),oe=V(3942),U=V(2090),ye=V(9681),te=V(1877),pe=V(655),_e=V(4859);const Ue=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Tt=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Be=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new te.Yd("@firebase/auth");function nt(b,...g){Ke.logLevel<=te.in.ERROR&&Ke.error(`Auth (${ye.SDK_VERSION}): ${b}`,...g)}function Ge(b,...g){throw et(b,...g)}function Se(b,...g){return et(b,...g)}function ze(b,g,y){const w=Object.assign(Object.assign({},Tt()),{[g]:y});return new U.LL("auth","Firebase",w).create(g,{appName:b.name})}function rt(b,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Ge(b,"argument-error"),ze(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function et(b,...g){if("string"!=typeof b){const y=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=b.name),b._errorFactory.create(y,...w)}return Be.create(b,...g)}function O(b,g,...y){if(!b)throw et(g,...y)}function $(b){const g="INTERNAL ASSERTION FAILED: "+b;throw nt(g),new Error(g)}function W(b,g){b||$(g)}const re=new Map;function le(b){W(b instanceof Function,"Expected a class definition");let g=re.get(b);return g?(W(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,re.set(b,g),g)}function ae(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function we(){return"http:"===He()||"https:"===He()}function He(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class gt{constructor(g,y){this.shortDelay=g,this.longDelay=y,W(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function Re(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(we()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ut(b,g){W(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class bt{static initialize(g,y,w){this.fetchImpl=g,y&&(this.headersImpl=y),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void $("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void $("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void $("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const at={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},wt=new gt(3e4,6e4);function Rt(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function qt(b,g,y,w){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,c.Z)(function*(b,g,y,w,P={}){return Xn(b,P,(0,c.Z)(function*(){let z={},ge={};w&&("GET"===g?ge=w:z={body:JSON.stringify(w)});const Xe=(0,U.xO)(Object.assign({key:b.config.apiKey},ge)).slice(1),xt=yield b._getAdditionalHeaders();return xt["Content-Type"]="application/json",b.languageCode&&(xt["X-Firebase-Locale"]=b.languageCode),bt.fetch()(hn(b,b.config.apiHost,y,Xe),Object.assign({method:g,headers:xt,referrerPolicy:"no-referrer"},z))}))})).apply(this,arguments)}function Xn(b,g,y){return er.apply(this,arguments)}function er(){return(er=(0,c.Z)(function*(b,g,y){b._canInitEmulator=!1;const w=Object.assign(Object.assign({},at),g);try{const P=new Wn(b),z=yield Promise.race([y(),P.promise]);P.clearNetworkTimeout();const ge=yield z.json();if("needConfirmation"in ge)throw Er(b,"account-exists-with-different-credential",ge);if(z.ok&&!("errorMessage"in ge))return ge;{const Xe=z.ok?ge.errorMessage:ge.error.message,[xt,Ft]=Xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xt)throw Er(b,"credential-already-in-use",ge);if("EMAIL_EXISTS"===xt)throw Er(b,"email-already-in-use",ge);if("USER_DISABLED"===xt)throw Er(b,"user-disabled",ge);const on=w[xt]||xt.toLowerCase().replace(/[_\s]+/g,"-");if(Ft)throw ze(b,on,Ft);Ge(b,on)}}catch(P){if(P instanceof U.ZR)throw P;Ge(b,"network-request-failed")}})).apply(this,arguments)}function Tr(b,g,y,w){return ws.apply(this,arguments)}function ws(){return(ws=(0,c.Z)(function*(b,g,y,w,P={}){const z=yield qt(b,g,y,w,P);return"mfaPendingCredential"in z&&Ge(b,"multi-factor-auth-required",{_serverResponse:z}),z})).apply(this,arguments)}function hn(b,g,y,w){const P=`${g}${y}?${w}`;return b.config.emulator?ut(b.config,P):`${b.config.apiScheme}://${P}`}class Wn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,w)=>{this.timer=setTimeout(()=>w(Se(this.auth,"network-request-failed")),wt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Er(b,g,y){const w={appName:b.name};y.email&&(w.email=y.email),y.phoneNumber&&(w.phoneNumber=y.phoneNumber);const P=Se(b,g,w);return P.customData._tokenResponse=y,P}function Pt(){return(Pt=(0,c.Z)(function*(b,g){return qt(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Br(b,g){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,c.Z)(function*(b,g){return qt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function pr(b,g){return xn.apply(this,arguments)}function xn(){return(xn=(0,c.Z)(function*(b,g){return qt(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function sr(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Kn(){return(Kn=(0,c.Z)(function*(b,g=!1){const y=(0,U.m9)(b),w=yield y.getIdToken(g),P=Gt(w);O(P&&P.exp&&P.auth_time&&P.iat,y.auth,"internal-error");const z="object"==typeof P.firebase?P.firebase:void 0,ge=z?.sign_in_provider;return{claims:P,token:w,authTime:sr(Qt(P.auth_time)),issuedAtTime:sr(Qt(P.iat)),expirationTime:sr(Qt(P.exp)),signInProvider:ge||null,signInSecondFactor:z?.sign_in_second_factor||null}})).apply(this,arguments)}function Qt(b){return 1e3*Number(b)}function Gt(b){const[g,y,w]=b.split(".");if(void 0===g||void 0===y||void 0===w)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,U.tV)(y);return P?JSON.parse(P):(nt("Failed to decode base64 JWT payload"),null)}catch(P){return nt("Caught error parsing JWT payload as JSON",P?.toString()),null}}function ni(b,g){return wr.apply(this,arguments)}function wr(){return(wr=(0,c.Z)(function*(b,g,y=!1){if(y)return g;try{return yield g}catch(w){throw w instanceof U.ZR&&ri(w)&&b.auth.currentUser===b&&(yield b.auth.signOut()),w}})).apply(this,arguments)}function ri({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class un{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const P=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,c.Z)(function*(){yield y.iteration()}),w)}iteration(){var g=this;return(0,c.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&g.schedule(!0))}g.schedule()})()}}class ki{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=sr(this.lastLoginAt),this.creationTime=sr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function An(b){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,c.Z)(function*(b){var g;const y=b.auth,w=yield b.getIdToken(),P=yield ni(b,pr(y,{idToken:w}));O(P?.users.length,y,"internal-error");const z=P.users[0];b._notifyReloadListener(z);const ge=null!==(g=z.providerUserInfo)&&void 0!==g&&g.length?jt(z.providerUserInfo):[],Xe=ii(b.providerData,ge),on=!!b.isAnonymous&&!(b.email&&z.passwordHash||Xe?.length),Xt={uid:z.localId,displayName:z.displayName||null,photoURL:z.photoUrl||null,email:z.email||null,emailVerified:z.emailVerified||!1,phoneNumber:z.phoneNumber||null,tenantId:z.tenantId||null,providerData:Xe,metadata:new ki(z.createdAt,z.lastLoginAt),isAnonymous:on};Object.assign(b,Xt)})).apply(this,arguments)}function Cr(){return(Cr=(0,c.Z)(function*(b){const g=(0,U.m9)(b);yield An(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ii(b,g){return[...b.filter(w=>!g.some(P=>P.providerId===w.providerId)),...g]}function jt(b){return b.map(g=>{var{providerId:y}=g,w=(0,pe._T)(g,["providerId"]);return{providerId:y,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Vt(){return(Vt=(0,c.Z)(function*(b,g){const y=yield Xn(b,{},(0,c.Z)(function*(){const w=(0,U.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:P,apiKey:z}=b.config,ge=hn(b,P,"/v1/token",`key=${z}`),Xe=yield b._getAdditionalHeaders();return Xe["Content-Type"]="application/x-www-form-urlencoded",bt.fetch()(ge,{method:"POST",headers:Xe,body:w})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class tn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){O(g.idToken,"internal-error"),O(typeof g.idToken<"u","internal-error"),O(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Hn(b){const g=Gt(b);return O(g,"internal-error"),O(typeof g.exp<"u","internal-error"),O(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var w=this;return(0,c.Z)(function*(){return O(!w.accessToken||w.refreshToken,g,"user-token-expired"),y||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var w=this;return(0,c.Z)(function*(){const{accessToken:P,refreshToken:z,expiresIn:ge}=yield function dt(b,g){return Vt.apply(this,arguments)}(g,y);w.updateTokensAndExpiration(P,z,Number(ge))})()}updateTokensAndExpiration(g,y,w){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,y){const{refreshToken:w,accessToken:P,expirationTime:z}=y,ge=new tn;return w&&(O("string"==typeof w,"internal-error",{appName:g}),ge.refreshToken=w),P&&(O("string"==typeof P,"internal-error",{appName:g}),ge.accessToken=P),z&&(O("number"==typeof z,"internal-error",{appName:g}),ge.expirationTime=z),ge}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new tn,this.toJSON())}_performRefresh(){return $("not implemented")}}function nn(b,g){O("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class gn{constructor(g){var{uid:y,auth:w,stsTokenManager:P}=g,z=(0,pe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=w,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=z.displayName||null,this.email=z.email||null,this.emailVerified=z.emailVerified||!1,this.phoneNumber=z.phoneNumber||null,this.photoURL=z.photoURL||null,this.isAnonymous=z.isAnonymous||!1,this.tenantId=z.tenantId||null,this.providerData=z.providerData?[...z.providerData]:[],this.metadata=new ki(z.createdAt||void 0,z.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,c.Z)(function*(){const w=yield ni(y,y.stsTokenManager.getToken(y.auth,g));return O(w,y.auth,"internal-error"),y.accessToken!==w&&(y.accessToken=w,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),w})()}getIdTokenResult(g){return function zn(b){return Kn.apply(this,arguments)}(this,g)}reload(){return function Mn(b){return Cr.apply(this,arguments)}(this)}_assign(g){this!==g&&(O(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new gn(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var w=this;return(0,c.Z)(function*(){let P=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),P=!0),y&&(yield An(w)),yield w.auth._persistUserIfCurrent(w),P&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,c.Z)(function*(){const y=yield g.getIdToken();return yield ni(g,function Jn(b,g){return Pt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var w,P,z,ge,Xe,xt,Ft,on;const Xt=null!==(w=y.displayName)&&void 0!==w?w:void 0,bi=null!==(P=y.email)&&void 0!==P?P:void 0,Ti=null!==(z=y.phoneNumber)&&void 0!==z?z:void 0,ka=null!==(ge=y.photoURL)&&void 0!==ge?ge:void 0,Yi=null!==(Xe=y.tenantId)&&void 0!==Xe?Xe:void 0,cc=null!==(xt=y._redirectEventId)&&void 0!==xt?xt:void 0,Ui=null!==(Ft=y.createdAt)&&void 0!==Ft?Ft:void 0,Ma=null!==(on=y.lastLoginAt)&&void 0!==on?on:void 0,{uid:Hg,emailVerified:Gg,isAnonymous:Ud,providerData:kf,stsTokenManager:Qi}=y;O(Hg&&Qi,g,"internal-error");const Eb=tn.fromJSON(this.name,Qi);O("string"==typeof Hg,g,"internal-error"),nn(Xt,g.name),nn(bi,g.name),O("boolean"==typeof Gg,g,"internal-error"),O("boolean"==typeof Ud,g,"internal-error"),nn(Ti,g.name),nn(ka,g.name),nn(Yi,g.name),nn(cc,g.name),nn(Ui,g.name),nn(Ma,g.name);const dc=new gn({uid:Hg,auth:g,email:bi,emailVerified:Gg,displayName:Xt,isAnonymous:Ud,photoURL:ka,phoneNumber:Ti,tenantId:Yi,stsTokenManager:Eb,createdAt:Ui,lastLoginAt:Ma});return kf&&Array.isArray(kf)&&(dc.providerData=kf.map(Vd=>Object.assign({},Vd))),cc&&(dc._redirectEventId=cc),dc}static _fromIdTokenResponse(g,y,w=!1){return(0,c.Z)(function*(){const P=new tn;P.updateFromServerResponse(y);const z=new gn({uid:y.localId,auth:g,stsTokenManager:P,isAnonymous:w});return yield An(z),z})()}}const fe=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(y,w){var P=this;return(0,c.Z)(function*(){P.storage[y]=w})()}_get(y){var w=this;return(0,c.Z)(function*(){const P=w.storage[y];return void 0===P?null:P})()}_remove(y){var w=this;return(0,c.Z)(function*(){delete w.storage[y]})()}_addListener(y,w){}_removeListener(y,w){}}return b.type="NONE",b})();function ke(b,g,y){return`firebase:${b}:${g}:${y}`}class ot{constructor(g,y,w){this.persistence=g,this.auth=y,this.userKey=w;const{config:P,name:z}=this.auth;this.fullUserKey=ke(this.userKey,P.apiKey,z),this.fullPersistenceKey=ke("persistence",P.apiKey,z),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,c.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?gn._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,c.Z)(function*(){if(y.persistence===g)return;const w=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,w?y.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,w="authUser"){return(0,c.Z)(function*(){if(!y.length)return new ot(le(fe),g,w);const P=(yield Promise.all(y.map(function(){var Ft=(0,c.Z)(function*(on){if(yield on._isAvailable())return on});return function(on){return Ft.apply(this,arguments)}}()))).filter(Ft=>Ft);let z=P[0]||le(fe);const ge=ke(w,g.config.apiKey,g.name);let Xe=null;for(const Ft of y)try{const on=yield Ft._get(ge);if(on){const Xt=gn._fromJSON(g,on);Ft!==z&&(Xe=Xt),z=Ft;break}}catch{}const xt=P.filter(Ft=>Ft._shouldAllowMigration);return z._shouldAllowMigration&&xt.length?(z=xt[0],Xe&&(yield z._set(ge,Xe.toJSON())),yield Promise.all(y.map(function(){var Ft=(0,c.Z)(function*(on){if(on!==z)try{yield on._remove(ge)}catch{}});return function(on){return Ft.apply(this,arguments)}}())),new ot(z,g,w)):new ot(z,g,w)})()}}function Pe(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(tr(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Dt(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(B(g))return"Blackberry";if(Y(g))return"Webos";if(zt(g))return"Safari";if((g.includes("chrome/")||kn(g))&&!g.includes("edge/"))return"Chrome";if(H(g))return"Android";{const w=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Dt(b=(0,U.z$)()){return/firefox\//i.test(b)}function zt(b=(0,U.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function kn(b=(0,U.z$)()){return/crios\//i.test(b)}function tr(b=(0,U.z$)()){return/iemobile/i.test(b)}function H(b=(0,U.z$)()){return/android/i.test(b)}function B(b=(0,U.z$)()){return/blackberry/i.test(b)}function Y(b=(0,U.z$)()){return/webos/i.test(b)}function Fe(b=(0,U.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function kr(b=(0,U.z$)()){return Fe(b)||H(b)||Y(b)||B(b)||/windows phone/i.test(b)||tr(b)}function $r(b,g=[]){let y;switch(b){case"Browser":y=Pe((0,U.z$)());break;case"Worker":y=`${Pe((0,U.z$)())}-${b}`;break;default:y=b}const w=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${ye.SDK_VERSION}/${w}`}class Pi{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const w=z=>new Promise((ge,Xe)=>{try{ge(g(z))}catch(xt){Xe(xt)}});w.onAbort=y,this.queue.push(w);const P=this.queue.length-1;return()=>{this.queue[P]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,c.Z)(function*(){if(y.auth.currentUser===g)return;const w=[];try{for(const P of y.queue)yield P(g),P.onAbort&&w.push(P.onAbort)}catch(P){w.reverse();for(const z of w)try{z()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:P?.message})}})()}}class sn{constructor(g,y,w){this.app=g,this.heartbeatServiceProvider=y,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qi(this),this.idTokenSubscription=new qi(this),this.beforeStateQueue=new Pi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,y){var w=this;return y&&(this._popupRedirectResolver=le(y)),this._initializationPromise=this.queue((0,c.Z)(function*(){var P,z;if(!w._deleted&&(w.persistenceManager=yield ot.create(w,g),!w._deleted)){if(null!==(P=w._popupRedirectResolver)&&void 0!==P&&P._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(y),w.lastNotifiedUid=(null===(z=w.currentUser)||void 0===z?void 0:z.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,c.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,c.Z)(function*(){var w;const P=yield y.assertedPersistence.getCurrentUser();let z=P,ge=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Xe=null===(w=y.redirectUser)||void 0===w?void 0:w._redirectEventId,xt=z?._redirectEventId,Ft=yield y.tryRedirectSignIn(g);(!Xe||Xe===xt)&&Ft?.user&&(z=Ft.user,ge=!0)}if(!z)return y.directlySetCurrentUser(null);if(!z._redirectEventId){if(ge)try{yield y.beforeStateQueue.runMiddleware(z)}catch(Xe){z=P,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Xe))}return z?y.reloadAndSetCurrentUserOrClear(z):y.directlySetCurrentUser(null)}return O(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===z._redirectEventId?y.directlySetCurrentUser(z):y.reloadAndSetCurrentUserOrClear(z)})()}tryRedirectSignIn(g){var y=this;return(0,c.Z)(function*(){let w=null;try{w=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,c.Z)(function*(){try{yield An(g)}catch(w){if("auth/network-request-failed"!==w?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Oe(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,c.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,c.Z)(function*(){const w=g?(0,U.m9)(g):null;return w&&O(w.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(w&&w._clone(y))})()}_updateCurrentUser(g,y=!1){var w=this;return(0,c.Z)(function*(){if(!w._deleted)return g&&O(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),y||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,c.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,c.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,c.Z)(function*(){yield y.assertedPersistence.setPersistence(le(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new U.LL("auth","Firebase",g())}onAuthStateChanged(g,y,w){return this.registerStateListener(this.authStateSubscription,g,y,w)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,w){return this.registerStateListener(this.idTokenSubscription,g,y,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var w=this;return(0,c.Z)(function*(){const P=yield w.getOrInitRedirectPersistenceManager(y);return null===g?P.removeCurrentUser():P.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,c.Z)(function*(){if(!y.redirectPersistenceManager){const w=g&&le(g)||y._popupRedirectResolver;O(w,y,"argument-error"),y.redirectPersistenceManager=yield ot.create(y,[le(w._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,c.Z)(function*(){var w,P;return y._isInitialized&&(yield y.queue((0,c.Z)(function*(){}))),(null===(w=y._currentUser)||void 0===w?void 0:w._redirectEventId)===g?y._currentUser:(null===(P=y.redirectUser)||void 0===P?void 0:P._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,c.Z)(function*(){if(g===y.currentUser)return y.queue((0,c.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,w,P){if(this._deleted)return()=>{};const z="function"==typeof y?y:y.next.bind(y),ge=this._isInitialized?Promise.resolve():this._initializationPromise;return O(ge,this,"internal-error"),ge.then(()=>z(this.currentUser)),"function"==typeof y?g.addObserver(y,w,P):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,c.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=$r(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,c.Z)(function*(){var y;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const P=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return P&&(w["X-Firebase-Client"]=P),w})()}}function Gn(b){return(0,U.m9)(b)}class qi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,U.ne)(y=>this.observer=y)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function si(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function ar(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class gr{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return $("not implemented")}_getIdTokenResponse(g){return $("not implemented")}_linkToIdToken(g,y){return $("not implemented")}_getReauthenticationResolver(g){return $("not implemented")}}function Sr(b,g){return xu.apply(this,arguments)}function xu(){return(xu=(0,c.Z)(function*(b,g){return qt(b,"POST","/v1/accounts:resetPassword",Rt(b,g))})).apply(this,arguments)}function On(b,g){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,c.Z)(function*(b,g){return qt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ed(b,g){return ha.apply(this,arguments)}function ha(){return(ha=(0,c.Z)(function*(b,g){return qt(b,"POST","/v1/accounts:update",Rt(b,g))})).apply(this,arguments)}function cs(){return(cs=(0,c.Z)(function*(b,g){return Tr(b,"POST","/v1/accounts:signInWithPassword",Rt(b,g))})).apply(this,arguments)}function $o(b,g){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,c.Z)(function*(b,g){return qt(b,"POST","/v1/accounts:sendOobCode",Rt(b,g))})).apply(this,arguments)}function nr(b,g){return td.apply(this,arguments)}function td(){return(td=(0,c.Z)(function*(b,g){return $o(b,g)})).apply(this,arguments)}function pi(b,g){return ns.apply(this,arguments)}function ns(){return(ns=(0,c.Z)(function*(b,g){return $o(b,g)})).apply(this,arguments)}function Iu(b,g){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,c.Z)(function*(b,g){return $o(b,g)})).apply(this,arguments)}function nd(b,g){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,c.Z)(function*(b,g){return $o(b,g)})).apply(this,arguments)}function $h(){return($h=(0,c.Z)(function*(b,g){return Tr(b,"POST","/v1/accounts:signInWithEmailLink",Rt(b,g))})).apply(this,arguments)}function rd(){return(rd=(0,c.Z)(function*(b,g){return Tr(b,"POST","/v1/accounts:signInWithEmailLink",Rt(b,g))})).apply(this,arguments)}class id extends gr{constructor(g,y,w,P=null){super("password",w),this._email=g,this._password=y,this._tenantId=P}static _fromEmailAndPassword(g,y){return new id(g,y,"password")}static _fromEmailAndCode(g,y,w=null){return new id(g,y,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,c.Z)(function*(){switch(y.signInMethod){case"password":return function Rl(b,g){return cs.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function ig(b,g){return $h.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Ge(g,"internal-error")}})()}_linkToIdToken(g,y){var w=this;return(0,c.Z)(function*(){switch(w.signInMethod){case"password":return On(g,{idToken:y,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function sg(b,g){return rd.apply(this,arguments)}(g,{idToken:y,email:w._email,oobCode:w._password});default:Ge(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function oi(b,g){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,c.Z)(function*(b,g){return Tr(b,"POST","/v1/accounts:signInWithIdp",Rt(b,g))})).apply(this,arguments)}class ho extends gr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new ho(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Ge("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:P}=y,z=(0,pe._T)(y,["providerId","signInMethod"]);if(!w||!P)return null;const ge=new ho(w,P);return ge.idToken=z.idToken||void 0,ge.accessToken=z.accessToken||void 0,ge.secret=z.secret,ge.nonce=z.nonce,ge.pendingToken=z.pendingToken||null,ge}_getIdTokenResponse(g){return oi(g,this.buildRequest())}_linkToIdToken(g,y){const w=this.buildRequest();return w.idToken=y,oi(g,w)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,oi(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,U.xO)(y)}return g}}function Wy(b,g){return Du.apply(this,arguments)}function Du(){return(Du=(0,c.Z)(function*(b,g){return qt(b,"POST","/v1/accounts:sendVerificationCode",Rt(b,g))})).apply(this,arguments)}function Ho(){return(Ho=(0,c.Z)(function*(b,g){return Tr(b,"POST","/v1/accounts:signInWithPhoneNumber",Rt(b,g))})).apply(this,arguments)}function Gh(){return(Gh=(0,c.Z)(function*(b,g){const y=yield Tr(b,"POST","/v1/accounts:signInWithPhoneNumber",Rt(b,g));if(y.temporaryProof)throw Er(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Zy={USER_NOT_FOUND:"user-not-found"};function qh(){return(qh=(0,c.Z)(function*(b,g){return Tr(b,"POST","/v1/accounts:signInWithPhoneNumber",Rt(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Zy)})).apply(this,arguments)}class Go extends gr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Go({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Go({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function sd(b,g){return Ho.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function Ky(b,g){return Gh.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function od(b,g){return qh.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:w,verificationCode:P}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:w,code:P}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:w,phoneNumber:P,temporaryProof:z}=g;return w||y||P||z?new Go({verificationId:y,verificationCode:w,phoneNumber:P,temporaryProof:z}):null}}class Au{constructor(g){var y,w,P,z,ge,Xe;const xt=(0,U.zd)((0,U.pd)(g)),Ft=null!==(y=xt.apiKey)&&void 0!==y?y:null,on=null!==(w=xt.oobCode)&&void 0!==w?w:null,Xt=function zh(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=xt.mode)&&void 0!==P?P:null);O(Ft&&on&&Xt,"argument-error"),this.apiKey=Ft,this.operation=Xt,this.code=on,this.continueUrl=null!==(z=xt.continueUrl)&&void 0!==z?z:null,this.languageCode=null!==(ge=xt.languageCode)&&void 0!==ge?ge:null,this.tenantId=null!==(Xe=xt.tenantId)&&void 0!==Xe?Xe:null}static parseLink(g){const y=function Wh(b){const g=(0,U.zd)((0,U.pd)(b)).link,y=g?(0,U.zd)((0,U.pd)(g)).deep_link_id:null,w=(0,U.zd)((0,U.pd)(b)).deep_link_id;return(w?(0,U.zd)((0,U.pd)(w)).link:null)||w||y||g||b}(g);try{return new Au(y)}catch{return null}}}let zs=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,w){return id._fromEmailAndPassword(y,w)}static credentialWithLink(y,w){const P=Au.parseLink(w);return O(P,"argument-error"),id._fromEmailAndCode(y,P.code,P.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class fo{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ws extends fo{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class fa extends Ws{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return O("providerId"in y&&"signInMethod"in y,"argument-error"),ho._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return O(g.idToken||g.accessToken,"argument-error"),ho._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return fa.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return fa.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:w,oauthTokenSecret:P,pendingToken:z,nonce:ge,providerId:Xe}=g;if(!w&&!P&&!y&&!z||!Xe)return null;try{return new fa(Xe)._credential({idToken:y,accessToken:w,nonce:ge,pendingToken:z})}catch{return null}}}let Nl=(()=>{class b extends Ws{constructor(){super("facebook.com")}static credential(y){return ho._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),ku=(()=>{class b extends Ws{constructor(){super("google.com"),this.addScope("profile")}static credential(y,w){return ho._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:w})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:w,oauthAccessToken:P}=y;if(!w&&!P)return null;try{return b.credential(w,P)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),ad=(()=>{class b extends Ws{constructor(){super("github.com")}static credential(y){return ho._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Cs extends gr{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return oi(g,this.buildRequest())}_linkToIdToken(g,y){const w=this.buildRequest();return w.idToken=y,oi(g,w)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,oi(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:P,pendingToken:z}=y;return w&&P&&z&&w===P?new Cs(w,z):null}static _create(g,y){return new Cs(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ss extends fo{constructor(g){O(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ss.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ss.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Cs.fromJSON(g);return O(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:w}=g;if(!y||!w)return null;try{return Cs._create(w,y)}catch{return null}}}let ds=(()=>{class b extends Ws{constructor(){super("twitter.com")}static credential(y,w){return ho._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:w})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:w,oauthTokenSecret:P}=y;if(!w||!P)return null;try{return b.credential(w,P)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Ka(b,g){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,c.Z)(function*(b,g){return Tr(b,"POST","/v1/accounts:signUp",Rt(b,g))})).apply(this,arguments)}class Ri{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,w,P=!1){return(0,c.Z)(function*(){const z=yield gn._fromIdTokenResponse(g,w,P),ge=lg(w);return new Ri({user:z,providerId:ge,_tokenResponse:w,operationType:y})})()}static _forOperation(g,y,w){return(0,c.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const P=lg(w);return new Ri({user:g,providerId:P,_tokenResponse:w,operationType:y})})()}}function lg(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Mr(){return(Mr=(0,c.Z)(function*(b){var g;const y=Gn(b);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new Ri({user:y.currentUser,providerId:null,operationType:"signIn"});const w=yield Ka(y,{returnSecureToken:!0}),P=yield Ri._fromIdTokenResponse(y,"signIn",w,!0);return yield y._updateCurrentUser(P.user),P})).apply(this,arguments)}class Mu extends U.ZR{constructor(g,y,w,P){var z;super(y.code,y.message),this.operationType=w,this.user=P,Object.setPrototypeOf(this,Mu.prototype),this.customData={appName:g.name,tenantId:null!==(z=g.tenantId)&&void 0!==z?z:void 0,_serverResponse:y.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,y,w,P){return new Mu(g,y,w,P)}}function cg(b,g,y,w){return("reauthenticate"===g?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(z=>{throw"auth/multi-factor-auth-required"===z.code?Mu._fromErrorAndOperation(b,z,g,w):z})}function xs(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function Pu(){return(Pu=(0,c.Z)(function*(b,g){const y=(0,U.m9)(b);yield Nn(!0,y,g);const{providerUserInfo:w}=yield Br(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),P=xs(w||[]);return y.providerData=y.providerData.filter(z=>P.has(z.providerId)),P.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Za(b,g){return go.apply(this,arguments)}function go(){return(go=(0,c.Z)(function*(b,g,y=!1){const w=yield ni(b,g._linkToIdToken(b.auth,yield b.getIdToken()),y);return Ri._forOperation(b,"link",w)})).apply(this,arguments)}function Nn(b,g,y){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,c.Z)(function*(b,g,y){yield An(g);const P=!1===b?"provider-already-linked":"no-such-provider";O(xs(g.providerData).has(y)===b,g.auth,P)})).apply(this,arguments)}function pa(b,g){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,c.Z)(function*(b,g,y=!1){const{auth:w}=b,P="reauthenticate";try{const z=yield ni(b,cg(w,P,g,b),y);O(z.idToken,w,"internal-error");const ge=Gt(z.idToken);O(ge,w,"internal-error");const{sub:Xe}=ge;return O(b.uid===Xe,w,"user-mismatch"),Ri._forOperation(b,P,z)}catch(z){throw"auth/user-not-found"===z?.code&&Ge(w,"user-mismatch"),z}})).apply(this,arguments)}function Ls(b,g){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,c.Z)(function*(b,g,y=!1){const w="signIn",P=yield cg(b,w,g),z=yield Ri._fromIdTokenResponse(b,w,P);return y||(yield b._updateCurrentUser(z.user)),z})).apply(this,arguments)}function xr(b,g){return dn.apply(this,arguments)}function dn(){return(dn=(0,c.Z)(function*(b,g){return Ls(Gn(b),g)})).apply(this,arguments)}function Lu(b,g){return dg.apply(this,arguments)}function dg(){return(dg=(0,c.Z)(function*(b,g){const y=(0,U.m9)(b);return yield Nn(!1,y,g.providerId),Za(y,g)})).apply(this,arguments)}function Fu(b,g){return ju.apply(this,arguments)}function ju(){return(ju=(0,c.Z)(function*(b,g){return pa((0,U.m9)(b),g)})).apply(this,arguments)}function ld(b,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,c.Z)(function*(b,g){return Tr(b,"POST","/v1/accounts:signInWithCustomToken",Rt(b,g))})).apply(this,arguments)}function Ll(){return(Ll=(0,c.Z)(function*(b,g){const y=Gn(b),w=yield ld(y,{token:g,returnSecureToken:!0}),P=yield Ri._fromIdTokenResponse(y,"signIn",w);return yield y._updateCurrentUser(P.user),P})).apply(this,arguments)}class ft{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?In._fromServerResponse(g,y):Ge(g,"internal-error")}}class In extends ft{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new In(y)}}function Uu(b,g,y){var w;O((null===(w=y.url)||void 0===w?void 0:w.length)>0,b,"invalid-continue-uri"),O(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(O(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(O(y.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Pr(){return(Pr=(0,c.Z)(function*(b,g,y){const w=(0,U.m9)(b),P={requestType:"PASSWORD_RESET",email:g};y&&Uu(w,P,y),yield pi(w,P)})).apply(this,arguments)}function Ya(){return(Ya=(0,c.Z)(function*(b,g,y){yield Sr((0,U.m9)(b),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Fl(){return(Fl=(0,c.Z)(function*(b,g){yield ed((0,U.m9)(b),{oobCode:g})})).apply(this,arguments)}function jl(b,g){return cd.apply(this,arguments)}function cd(){return(cd=(0,c.Z)(function*(b,g){const y=(0,U.m9)(b),w=yield Sr(y,{oobCode:g}),P=w.requestType;switch(O(P,y,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":O(w.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":O(w.mfaInfo,y,"internal-error");default:O(w.email,y,"internal-error")}let z=null;return w.mfaInfo&&(z=ft._fromServerResponse(Gn(y),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:z},operation:P}})).apply(this,arguments)}function Zh(){return(Zh=(0,c.Z)(function*(b,g){const{data:y}=yield jl((0,U.m9)(b),g);return y.email})).apply(this,arguments)}function Rr(){return(Rr=(0,c.Z)(function*(b,g,y){const w=Gn(b),P=yield Ka(w,{returnSecureToken:!0,email:g,password:y}),z=yield Ri._fromIdTokenResponse(w,"signIn",P);return yield w._updateCurrentUser(z.user),z})).apply(this,arguments)}function ga(){return(ga=(0,c.Z)(function*(b,g,y){const w=(0,U.m9)(b),P={requestType:"EMAIL_SIGNIN",email:g};O(y.handleCodeInApp,w,"argument-error"),y&&Uu(w,P,y),yield Iu(w,P)})).apply(this,arguments)}function Vl(){return(Vl=(0,c.Z)(function*(b,g,y){const w=(0,U.m9)(b),P=zs.credentialWithLink(g,y||ae());return O(P._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),xr(w,P)})).apply(this,arguments)}function Qy(b,g){return fd.apply(this,arguments)}function fd(){return(fd=(0,c.Z)(function*(b,g){return qt(b,"POST","/v1/accounts:createAuthUri",Rt(b,g))})).apply(this,arguments)}function Bl(){return(Bl=(0,c.Z)(function*(b,g){const w={identifier:g,continueUri:we()?ae():"http://localhost"},{signinMethods:P}=yield Qy((0,U.m9)(b),w);return P||[]})).apply(this,arguments)}function $l(){return($l=(0,c.Z)(function*(b,g){const y=(0,U.m9)(b),P={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&Uu(y.auth,P,g);const{email:z}=yield nr(y.auth,P);z!==b.email&&(yield b.reload())})).apply(this,arguments)}function Hu(){return(Hu=(0,c.Z)(function*(b,g,y){const w=(0,U.m9)(b),z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};y&&Uu(w.auth,z,y);const{email:ge}=yield nd(w.auth,z);ge!==b.email&&(yield b.reload())})).apply(this,arguments)}function Gu(b,g){return md.apply(this,arguments)}function md(){return(md=(0,c.Z)(function*(b,g){return qt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function vd(){return(vd=(0,c.Z)(function*(b,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const w=(0,U.m9)(b),z={idToken:yield w.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},ge=yield ni(w,Gu(w.auth,z));w.displayName=ge.displayName||null,w.photoURL=ge.photoUrl||null;const Xe=w.providerData.find(({providerId:xt})=>"password"===xt);Xe&&(Xe.displayName=w.displayName,Xe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(ge)})).apply(this,arguments)}function ya(b,g,y){return qu.apply(this,arguments)}function qu(){return(qu=(0,c.Z)(function*(b,g,y){const{auth:w}=b,z={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(z.email=g),y&&(z.password=y);const ge=yield ni(b,On(w,z));yield b._updateTokensIfNecessary(ge,!0)})).apply(this,arguments)}class hs{constructor(g,y,w={}){this.isNewUser=g,this.providerId=y,this.profile=w}}class lr extends hs{constructor(g,y,w,P){super(g,y,w),this.username=P}}class _d extends hs{constructor(g,y){super(g,"facebook.com",y)}}class bd extends lr{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Qh extends hs{constructor(g,y){super(g,"google.com",y)}}class Td extends lr{constructor(g,y,w){super(g,"twitter.com",y,w)}}function zu(b){const{user:g,_tokenResponse:y}=b;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function ai(b){var g,y;if(!b)return null;const{providerId:w}=b,P=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},z=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!w&&b?.idToken){const ge=null===(y=null===(g=Gt(b.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(ge)return new hs(z,"anonymous"!==ge&&"custom"!==ge?ge:null)}if(!w)return null;switch(w){case"facebook.com":return new _d(z,P);case"github.com":return new bd(z,P);case"google.com":return new Qh(z,P);case"twitter.com":return new Td(z,P,b.screenName||null);case"custom":case"anonymous":return new hs(z,null);default:return new hs(z,w,P)}}(y)}class _a{constructor(g,y,w){this.type=g,this.credential=y,this.auth=w}static _fromIdtoken(g,y){return new _a("enroll",g,y)}static _fromMfaPendingCredential(g){return new _a("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,w;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return _a._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(w=g.multiFactorSession)&&void 0!==w&&w.idToken)return _a._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ku{constructor(g,y,w){this.session=g,this.hints=y,this.signInResolver=w}static _fromError(g,y){const w=Gn(g),P=y.customData._serverResponse,z=(P.mfaInfo||[]).map(Xe=>ft._fromServerResponse(w,Xe));O(P.mfaPendingCredential,w,"internal-error");const ge=_a._fromMfaPendingCredential(P.mfaPendingCredential);return new Ku(ge,z,function(){var Xe=(0,c.Z)(function*(xt){const Ft=yield xt._process(w,ge);delete P.mfaInfo,delete P.mfaPendingCredential;const on=Object.assign(Object.assign({},P),{idToken:Ft.idToken,refreshToken:Ft.refreshToken});switch(y.operationType){case"signIn":const Xt=yield Ri._fromIdTokenResponse(w,y.operationType,on);return yield w._updateCurrentUser(Xt.user),Xt;case"reauthenticate":return O(y.user,w,"internal-error"),Ri._forOperation(y.user,y.operationType,on);default:Ge(w,"internal-error")}});return function(xt){return Xe.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,c.Z)(function*(){return y.signInResolver(g)})()}}function Zu(b,g){return qt(b,"POST","/v2/accounts/mfaEnrollment:start",Rt(b,g))}class hg{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(w=>ft._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new hg(g)}getSession(){var g=this;return(0,c.Z)(function*(){return _a._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var w=this;return(0,c.Z)(function*(){const P=g,z=yield w.getSession(),ge=yield ni(w.user,P._process(w.user.auth,z,y));return yield w.user._updateTokensIfNecessary(ge),w.user.reload()})()}unenroll(g){var y=this;return(0,c.Z)(function*(){const w="string"==typeof g?g:g.uid,P=yield y.user.getIdToken(),z=yield ni(y.user,function tf(b,g){return qt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(b,g))}(y.user.auth,{idToken:P,mfaEnrollmentId:w}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ge})=>ge!==w),yield y.user._updateTokensIfNecessary(z);try{yield y.user.reload()}catch(ge){if("auth/user-token-expired"!==ge?.code)throw ge}})()}}const Ja=new WeakMap,ba="__sak";class Qu{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(ba,"1"),this.storage.removeItem(ba),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gl=(()=>{class b extends Qu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,w)=>this.onStorageEvent(y,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Hl(){const b=(0,U.z$)();return zt(b)||Fe(b)}()&&function Pn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=kr(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const w of Object.keys(this.listeners)){const P=this.storage.getItem(w),z=this.localCache[w];P!==z&&y(w,z,P)}}onStorageEvent(y,w=!1){if(!y.key)return void this.forAllChangedKeys((Xe,xt,Ft)=>{this.notifyListeners(Xe,Ft)});const P=y.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Xe=this.storage.getItem(P);if(y.newValue!==Xe)null!==y.newValue?this.storage.setItem(P,y.newValue):this.storage.removeItem(P);else if(this.localCache[P]===y.newValue&&!w)return}const z=()=>{const Xe=this.storage.getItem(P);!w&&this.localCache[P]===Xe||this.notifyListeners(P,Xe)},ge=this.storage.getItem(P);!function fn(){return(0,U.w1)()&&10===document.documentMode}()||ge===y.newValue||y.newValue===y.oldValue?z():setTimeout(z,10)}notifyListeners(y,w){this.localCache[y]=w;const P=this.listeners[y];if(P)for(const z of Array.from(P))z(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,w,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:w,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(w)}_removeListener(y,w){this.listeners[y]&&(this.listeners[y].delete(w),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,w){var P=()=>super._set,z=this;return(0,c.Z)(function*(){yield P().call(z,y,w),z.localCache[y]=JSON.stringify(w)})()}_get(y){var w=()=>super._get,P=this;return(0,c.Z)(function*(){const z=yield w().call(P,y);return P.localCache[y]=JSON.stringify(z),z})()}_remove(y){var w=()=>super._remove,P=this;return(0,c.Z)(function*(){yield w().call(P,y),delete P.localCache[y]})()}}return b.type="LOCAL",b})(),Zs=(()=>{class b extends Qu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,w){}_removeListener(y,w){}}return b.type="SESSION",b})();let sf=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const w=this.receivers.find(z=>z.isListeningto(y));if(w)return w;const P=new b(y);return this.receivers.push(P),P}isListeningto(y){return this.eventTarget===y}handleEvent(y){var w=this;return(0,c.Z)(function*(){const P=y,{eventId:z,eventType:ge,data:Xe}=P.data,xt=w.handlersMap[ge];if(!xt?.size)return;P.ports[0].postMessage({status:"ack",eventId:z,eventType:ge});const Ft=Array.from(xt).map(function(){var Xt=(0,c.Z)(function*(bi){return bi(P.origin,Xe)});return function(bi){return Xt.apply(this,arguments)}}()),on=yield function zl(b){return Promise.all(b.map(function(){var g=(0,c.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(w){return{fulfilled:!1,reason:w}}});return function(y){return g.apply(this,arguments)}}()))}(Ft);P.ports[0].postMessage({status:"done",eventId:z,eventType:ge,response:on})})()}_subscribe(y,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(w)}_unsubscribe(y,w){this.handlersMap[y]&&w&&this.handlersMap[y].delete(w),(!w||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Wl(b="",g=10){let y="";for(let w=0;w<g;w++)y+=Math.floor(10*Math.random());return b+y}class Ed{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,w=50){var P=this;return(0,c.Z)(function*(){const z=typeof MessageChannel<"u"?new MessageChannel:null;if(!z)throw new Error("connection_unavailable");let ge,Xe;return new Promise((xt,Ft)=>{const on=Wl("",20);z.port1.start();const Xt=setTimeout(()=>{Ft(new Error("unsupported_event"))},w);Xe={messageChannel:z,onMessage(bi){const Ti=bi;if(Ti.data.eventId===on)switch(Ti.data.status){case"ack":clearTimeout(Xt),ge=setTimeout(()=>{Ft(new Error("timeout"))},3e3);break;case"done":clearTimeout(ge),xt(Ti.data.response);break;default:clearTimeout(Xt),clearTimeout(ge),Ft(new Error("invalid_response"))}}},P.handlers.add(Xe),z.port1.addEventListener("message",Xe.onMessage),P.target.postMessage({eventType:g,eventId:on,data:y},[z.port2])}).finally(()=>{Xe&&P.removeMessageHandler(Xe)})})()}}function Hr(){return window}function Xu(){return typeof Hr().WorkerGlobalScope<"u"&&"function"==typeof Hr().importScripts}function Kl(){return(Kl=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Wo="firebaseLocalStorageDb",Ko="firebaseLocalStorage",wd="fbase_key";class Ea{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Zl(b,g){return b.transaction([Ko],g?"readwrite":"readonly").objectStore(Ko)}function tl(){const b=indexedDB.open(Wo,1);return new Promise((g,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const w=b.result;try{w.createObjectStore(Ko,{keyPath:wd})}catch(P){y(P)}}),b.addEventListener("success",(0,c.Z)(function*(){const w=b.result;w.objectStoreNames.contains(Ko)?g(w):(w.close(),yield function lf(){const b=indexedDB.deleteDatabase(Wo);return new Ea(b).toPromise()}(),g(yield tl()))}))})}function vo(b,g,y){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,c.Z)(function*(b,g,y){const w=Zl(b,!0).put({[wd]:g,value:y});return new Ea(w).toPromise()})).apply(this,arguments)}function Yl(){return(Yl=(0,c.Z)(function*(b,g){const y=Zl(b,!1).get(g),w=yield new Ea(y).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function wa(b,g){const y=Zl(b,!0).delete(g);return new Ea(y).toPromise()}const nl=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,c.Z)(function*(){return y.db||(y.db=yield tl()),y.db})()}_withRetries(y){var w=this;return(0,c.Z)(function*(){let P=0;for(;;)try{const z=yield w._openDb();return yield y(z)}catch(z){if(P++>3)throw z;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,c.Z)(function*(){return Xu()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,c.Z)(function*(){y.receiver=sf._getInstance(function ec(){return Xu()?self:null}()),y.receiver._subscribe("keyChanged",function(){var w=(0,c.Z)(function*(P,z){return{keyProcessed:(yield y._poll()).includes(z.key)}});return function(P,z){return w.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var w=(0,c.Z)(function*(P,z){return["keyChanged"]});return function(P,z){return w.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,c.Z)(function*(){var w,P;if(y.activeServiceWorker=yield function Ta(){return Kl.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Ed(y.activeServiceWorker);const z=yield y.sender._send("ping",{},800);!z||(null===(w=z[0])||void 0===w?void 0:w.fulfilled)&&(null===(P=z[0])||void 0===P?void 0:P.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var w=this;return(0,c.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Ju(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:y},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const y=yield tl();return yield vo(y,ba,"1"),yield wa(y,ba),!0}catch{}return!1})()}_withPendingWrite(y){var w=this;return(0,c.Z)(function*(){w.pendingWrites++;try{yield y()}finally{w.pendingWrites--}})()}_set(y,w){var P=this;return(0,c.Z)(function*(){return P._withPendingWrite((0,c.Z)(function*(){return yield P._withRetries(z=>vo(z,y,w)),P.localCache[y]=w,P.notifyServiceWorker(y)}))})()}_get(y){var w=this;return(0,c.Z)(function*(){const P=yield w._withRetries(z=>function tc(b,g){return Yl.apply(this,arguments)}(z,y));return w.localCache[y]=P,P})()}_remove(y){var w=this;return(0,c.Z)(function*(){return w._withPendingWrite((0,c.Z)(function*(){return yield w._withRetries(P=>wa(P,y)),delete w.localCache[y],w.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,c.Z)(function*(){const w=yield y._withRetries(ge=>{const Xe=Zl(ge,!1).getAll();return new Ea(Xe).toPromise()});if(!w)return[];if(0!==y.pendingWrites)return[];const P=[],z=new Set;for(const{fbase_key:ge,value:Xe}of w)z.add(ge),JSON.stringify(y.localCache[ge])!==JSON.stringify(Xe)&&(y.notifyListeners(ge,Xe),P.push(ge));for(const ge of Object.keys(y.localCache))y.localCache[ge]&&!z.has(ge)&&(y.notifyListeners(ge,null),P.push(ge));return P})()}notifyListeners(y,w){this.localCache[y]=w;const P=this.listeners[y];if(P)for(const z of Array.from(P))z(w)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(w)}_removeListener(y,w){this.listeners[y]&&(this.listeners[y].delete(w),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function rl(b,g){return qt(b,"POST","/v2/accounts/mfaSignIn:start",Rt(b,g))}function Zo(){return(Zo=(0,c.Z)(function*(b){return(yield qt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function sl(b){return new Promise((g,y)=>{const w=document.createElement("script");w.setAttribute("src",b),w.onload=g,w.onerror=P=>{const z=Se("internal-error");z.customData=P,y(z)},w.type="text/javascript",w.charset="UTF-8",function il(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(w)})}function ic(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Ql=1e12;class ur{constructor(g){this.auth=g,this.counter=Ql,this._widgets=new Map}render(g,y){const w=this.counter;return this._widgets.set(w,new Xy(g,this.auth.name,y||{})),this.counter++,w}reset(g){var y;const w=g||Ql;null===(y=this._widgets.get(w))||void 0===y||y.delete(),this._widgets.delete(w)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Ql))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,c.Z)(function*(){var w;return null===(w=y._widgets.get(g||Ql))||void 0===w||w.execute(),""})()}}class Xy{constructor(g,y,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof g?document.getElementById(g):g;O(P,"argument-error",{appName:y}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function X0(b){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<b;w++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jy=ic("rcb"),J0=new gt(3e4,6e4);class fg{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Hr().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return O(function LC(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Hr().grecaptcha):new Promise((w,P)=>{const z=Hr().setTimeout(()=>{P(Se(g,"network-request-failed"))},J0.get());Hr()[Jy]=()=>{Hr().clearTimeout(z),delete Hr()[Jy];const Xe=Hr().grecaptcha;if(!Xe)return void P(Se(g,"internal-error"));const xt=Xe.render;Xe.render=(Ft,on)=>{const Xt=xt(Ft,on);return this.counter++,Xt},this.hostLanguage=y,w(Xe)},sl(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Jy,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(z),P(Se(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=Hr().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xl{load(g){return(0,c.Z)(function*(){return new ur(g)})()}clearedOneInstance(){}}const ev="recaptcha",tv={theme:"light",type:"image"};class mi{constructor(g,y=Object.assign({},tv),w){this.parameters=y,this.type=ev,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gn(w),this.isInvisible="invisible"===this.parameters.size,O(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof g?document.getElementById(g):g;O(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xl:new fg,this.validateStartingState()}verify(){var g=this;return(0,c.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(y)||new Promise(z=>{const ge=Xe=>{!Xe||(g.tokenChangeListeners.delete(ge),z(Xe))};g.tokenChangeListeners.add(ge),g.isInvisible&&w.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){O(!this.parameters.sitekey,this.auth,"argument-error"),O(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),O(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(w=>w(y)),"function"==typeof g)g(y);else if("string"==typeof g){const w=Hr()[g];"function"==typeof w&&w(y)}}}assertNotDestroyed(){O(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,c.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const w=document.createElement("div");y.appendChild(w),y=w}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,c.Z)(function*(){O(we()&&!Xu(),g.auth,"internal-error"),yield function yi(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function fs(b){return Zo.apply(this,arguments)}(g.auth);O(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return O(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Oi{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Go._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Un(){return(Un=(0,c.Z)(function*(b,g,y){const w=Gn(b),P=yield Ds(w,g,(0,U.m9)(y));return new Oi(P,z=>xr(w,z))})).apply(this,arguments)}function mr(){return(mr=(0,c.Z)(function*(b,g,y){const w=(0,U.m9)(b);yield Nn(!1,w,"phone");const P=yield Ds(w.auth,g,(0,U.m9)(y));return new Oi(P,z=>Lu(w,z))})).apply(this,arguments)}function bo(){return(bo=(0,c.Z)(function*(b,g,y){const w=(0,U.m9)(b),P=yield Ds(w.auth,g,(0,U.m9)(y));return new Oi(P,z=>Fu(w,z))})).apply(this,arguments)}function Ds(b,g,y){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,c.Z)(function*(b,g,y){var w;const P=yield y.verify();try{let z;if(O("string"==typeof P,b,"argument-error"),O(y.type===ev,b,"argument-error"),z="string"==typeof g?{phoneNumber:g}:g,"session"in z){const ge=z.session;if("phoneNumber"in z)return O("enroll"===ge.type,b,"internal-error"),(yield Zu(b,{idToken:ge.credential,phoneEnrollmentInfo:{phoneNumber:z.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{O("signin"===ge.type,b,"internal-error");const Xe=(null===(w=z.multiFactorHint)||void 0===w?void 0:w.uid)||z.multiFactorUid;return O(Xe,b,"missing-multi-factor-info"),(yield rl(b,{mfaPendingCredential:ge.credential,mfaEnrollmentId:Xe,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ge}=yield Wy(b,{phoneNumber:z.phoneNumber,recaptchaToken:P});return ge}}finally{y._reset()}})).apply(this,arguments)}function cr(){return(cr=(0,c.Z)(function*(b,g){yield Za((0,U.m9)(b),g)})).apply(this,arguments)}let Zt=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=Gn(y)}verifyPhoneNumber(y,w){return Ds(this.auth,y,(0,U.m9)(w))}static credential(y,w){return Go._fromVerification(y,w)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:w,temporaryProof:P}=y;return w&&P?Go._fromTokenResponse(w,P):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Sa(b,g){return g?le(g):(O(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class sc extends gr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return oi(g,this._buildIdpRequest())}_linkToIdToken(g,y){return oi(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return oi(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function ps(b){return Ls(b.auth,new sc(b),b.bypassAuthState)}function ll(b){const{auth:g,user:y}=b;return O(y,g,"internal-error"),pa(y,new sc(b),b.bypassAuthState)}function Yo(b){return xa.apply(this,arguments)}function xa(){return(xa=(0,c.Z)(function*(b){const{auth:g,user:y}=b;return O(y,g,"internal-error"),Za(y,new sc(b),b.bypassAuthState)})).apply(this,arguments)}class Ni{constructor(g,y,w,P,z=!1){this.auth=g,this.resolver=w,this.user=P,this.bypassAuthState=z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,c.Z)(function*(w,P){g.pendingPromise={resolve:w,reject:P};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(z){g.reject(z)}});return function(w,P){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,c.Z)(function*(){const{urlResponse:w,sessionId:P,postBody:z,tenantId:ge,error:Xe,type:xt}=g;if(Xe)return void y.reject(Xe);const Ft={auth:y.auth,requestUri:w,sessionId:P,tenantId:ge||void 0,postBody:z||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(xt)(Ft))}catch(on){y.reject(on)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ps;case"linkViaPopup":case"linkViaRedirect":return Yo;case"reauthViaPopup":case"reauthViaRedirect":return ll;default:Ge(this.auth,"internal-error")}}resolve(g){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const To=new gt(2e3,1e4);function Qo(){return(Qo=(0,c.Z)(function*(b,g,y){const w=Gn(b);rt(b,g,fo);const P=Sa(w,y);return new Zi(w,"signInViaPopup",g,P).executeNotNull()})).apply(this,arguments)}function cf(){return(cf=(0,c.Z)(function*(b,g,y){const w=(0,U.m9)(b);rt(w.auth,g,fo);const P=Sa(w.auth,y);return new Zi(w.auth,"reauthViaPopup",g,P,w).executeNotNull()})).apply(this,arguments)}function gs(){return(gs=(0,c.Z)(function*(b,g,y){const w=(0,U.m9)(b);rt(w.auth,g,fo);const P=Sa(w.auth,y);return new Zi(w.auth,"linkViaPopup",g,P,w).executeNotNull()})).apply(this,arguments)}let Zi=(()=>{class b extends Ni{constructor(y,w,P,z,ge){super(y,w,z,ge),this.provider=P,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,c.Z)(function*(){const w=yield y.execute();return O(w,y.auth,"internal-error"),w})()}onExecution(){var y=this;return(0,c.Z)(function*(){W(1===y.filter.length,"Popup operations only handle one event");const w=Wl();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],w),y.authWindow.associatedEvent=w,y.resolver._originValidation(y.auth).catch(P=>{y.reject(P)}),y.resolver._isIframeWebStorageSupported(y.auth,P=>{P||y.reject(Se(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var w,P;this.pollId=null!==(P=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==P&&P.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,To.get())};y()}}return b.currentPopupAction=null,b})();const As=new Map;class rr extends Ni{constructor(g,y,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,c.Z)(function*(){let w=As.get(y.auth._key());if(!w){try{const z=(yield function Jl(b,g){return ks.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;w=()=>Promise.resolve(z)}catch(P){w=()=>Promise.reject(P)}As.set(y.auth._key(),w)}return y.bypassAuthState||As.set(y.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,w=this;return(0,c.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(w,g);if("unknown"!==g.type){if(g.eventId){const P=yield w.auth._redirectUserForId(g.eventId);if(P)return w.user=P,y().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function ks(){return(ks=(0,c.Z)(function*(b,g){const y=gg(g),w=Ia(b);if(!(yield w._isAvailable()))return!1;const P="true"===(yield w._get(y));return yield w._remove(y),P})).apply(this,arguments)}function xd(b,g){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,c.Z)(function*(b,g){return Ia(b)._set(gg(g),"true")})).apply(this,arguments)}function Jo(b,g){As.set(b._key(),g)}function Ia(b){return le(b._redirectPersistence)}function gg(b){return ke("pendingRedirect",b.config.apiKey,b.name)}function k(){return(k=(0,c.Z)(function*(b,g,y){const w=Gn(b);rt(b,g,fo);const P=Sa(w,y);return yield xd(P,w),P._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function ce(){return(ce=(0,c.Z)(function*(b,g,y){const w=(0,U.m9)(b);rt(w.auth,g,fo);const P=Sa(w.auth,y);yield xd(P,w.auth);const z=yield Ct(w);return P._openRedirect(w.auth,g,"reauthViaRedirect",z)})).apply(this,arguments)}function mt(){return(mt=(0,c.Z)(function*(b,g,y){const w=(0,U.m9)(b);rt(w.auth,g,fo);const P=Sa(w.auth,y);yield Nn(!1,w,g.providerId),yield xd(P,w.auth);const z=yield Ct(w);return P._openRedirect(w.auth,g,"linkViaRedirect",z)})).apply(this,arguments)}function De(){return(De=(0,c.Z)(function*(b,g){return yield Gn(b)._initializationPromise,Ut(b,g,!1)})).apply(this,arguments)}function Ut(b,g){return mn.apply(this,arguments)}function mn(){return(mn=(0,c.Z)(function*(b,g,y=!1){const w=Gn(b),P=Sa(w,g),ge=yield new rr(w,P,y).execute();return ge&&!y&&(delete ge.user._redirectEventId,yield w._persistUserIfCurrent(ge.user),yield w._setRedirectUser(null,g)),ge})).apply(this,arguments)}function Ct(b){return dr.apply(this,arguments)}function dr(){return(dr=(0,c.Z)(function*(b){const g=Wl(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Da{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(y=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Li(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dr(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var w;if(g.error&&!Dr(g)){const P=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";y.onError(Se(this.auth,P))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const w=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ac(g))}saveEventToCache(g){this.cachedEventUids.add(ac(g)),this.lastProcessedEventTime=Date.now()}}function ac(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function Dr({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function Fi(b){return cl.apply(this,arguments)}function cl(){return(cl=(0,c.Z)(function*(b,g={}){return qt(b,"GET","/v1/projects",g)})).apply(this,arguments)}const FC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nv=/^https?/;function yg(){return(yg=(0,c.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Fi(b);for(const y of g)try{if(nb(y))return}catch{}Ge(b,"unauthorized-domain")})).apply(this,arguments)}function nb(b){const g=ae(),{protocol:y,hostname:w}=new URL(g);if(b.startsWith("chrome-extension://")){const ge=new URL(b);return""===ge.hostname&&""===w?"chrome-extension:"===y&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&ge.hostname===w}if(!nv.test(y))return!1;if(FC.test(b))return w===b;const P=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(w)}const rb=new gt(3e4,6e4);function rv(){const b=Hr().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let _i=null;function ff(b){return _i=_i||function hf(b){return new Promise((g,y)=>{var w,P,z;function ge(){rv(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{rv(),y(Se(b,"network-request-failed"))},timeout:rb.get()})}if(null!==(P=null===(w=Hr().gapi)||void 0===w?void 0:w.iframes)&&void 0!==P&&P.Iframe)g(gapi.iframes.getContext());else{if(null===(z=Hr().gapi)||void 0===z||!z.load){const Xe=ic("iframefcb");return Hr()[Xe]=()=>{gapi.load?ge():y(Se(b,"network-request-failed"))},sl(`https://apis.google.com/js/api.js?onload=${Xe}`).catch(xt=>y(xt))}ge()}}).catch(g=>{throw _i=null,g})}(b),_i}const vg=new gt(5e3,15e3),sv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_g=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ib(b){const g=b.config;O(g.authDomain,b,"auth-domain-config-required");const y=g.emulator?ut(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:b.name,v:ye.SDK_VERSION},P=_g.get(b.config.apiHost);P&&(w.eid=P);const z=b._getFrameworks();return z.length&&(w.fw=z.join(",")),`${y}?${(0,U.xO)(w).slice(1)}`}function ov(){return ov=(0,c.Z)(function*(b){const g=yield ff(b),y=Hr().gapi;return O(y,b,"internal-error"),g.open({where:document.body,url:ib(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sv,dontclear:!0},w=>new Promise(function(){var P=(0,c.Z)(function*(z,ge){yield w.restyle({setHideOnLeave:!1});const Xe=Se(b,"network-request-failed"),xt=Hr().setTimeout(()=>{ge(Xe)},vg.get());function Ft(){Hr().clearTimeout(xt),z(w)}w.ping(Ft).then(Ft,()=>{ge(Xe)})});return function(z,ge){return P.apply(this,arguments)}}()))}),ov.apply(this,arguments)}const jC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class av{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dd(b,g,y,w,P,z){O(b.config.authDomain,b,"auth-domain-config-required"),O(b.config.apiKey,b,"invalid-api-key");const ge={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:w,v:ye.SDK_VERSION,eventId:P};if(g instanceof fo){g.setDefaultLanguage(b.languageCode),ge.providerId=g.providerId||"",(0,U.xb)(g.getCustomParameters())||(ge.customParameters=JSON.stringify(g.getCustomParameters()));for(const[xt,Ft]of Object.entries(z||{}))ge[xt]=Ft}if(g instanceof Ws){const xt=g.getScopes().filter(Ft=>""!==Ft);xt.length>0&&(ge.scopes=xt.join(","))}b.tenantId&&(ge.tid=b.tenantId);const Xe=ge;for(const xt of Object.keys(Xe))void 0===Xe[xt]&&delete Xe[xt];return`${function gf({config:b}){return b.emulator?ut(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,U.xO)(Xe).slice(1)}`}const Ad="webStorageSupport";class Sg extends class kd{constructor(g){this.factorId=g}_process(g,y,w){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,w);case"signin":return this._finalizeSignIn(g,y.credential);default:return $("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Sg(g)}_finalizeEnroll(g,y,w){return function Yu(b,g){return qt(b,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(b,g))}(g,{idToken:y,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function rc(b,g){return qt(b,"POST","/v2/accounts/mfaSignIn:finalize",Rt(b,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let mf=(()=>{class b{constructor(){}static assertion(y){return Sg._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var lc="@firebase/auth";class xg{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,c.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(w=>{g(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Eo(){return window}function Md(){return(Md=(0,c.Z)(function*(b,g,y){var w;const{BuildInfo:P}=Eo();W(g.sessionId,"AuthEvent did not contain a session ID");const z=yield hv(g.sessionId),ge={};return Fe()?ge.ibi=P.packageName:H()?ge.apn=P.packageName:Ge(b,"operation-not-supported-in-this-environment"),P.displayName&&(ge.appDisplayName=P.displayName),ge.sessionId=z,Dd(b,y,g.type,void 0,null!==(w=g.eventId)&&void 0!==w?w:void 0,ge)})).apply(this,arguments)}function vf(){return(vf=(0,c.Z)(function*(b){const{BuildInfo:g}=Eo(),y={};Fe()?y.iosBundleId=g.packageName:H()?y.androidPackageName=g.packageName:Ge(b,"operation-not-supported-in-this-environment"),yield Fi(b,y)})).apply(this,arguments)}function _f(){return(_f=(0,c.Z)(function*(b,g,y){const{cordova:w}=Eo();let P=()=>{};try{yield new Promise((z,ge)=>{let Xe=null;function xt(){var Xt;z();const bi=null===(Xt=w.plugins.browsertab)||void 0===Xt?void 0:Xt.close;"function"==typeof bi&&bi(),"function"==typeof y?.close&&y.close()}function Ft(){Xe||(Xe=window.setTimeout(()=>{ge(Se(b,"redirect-cancelled-by-user"))},2e3))}function on(){"visible"===document?.visibilityState&&Ft()}g.addPassiveListener(xt),document.addEventListener("resume",Ft,!1),H()&&document.addEventListener("visibilitychange",on,!1),P=()=>{g.removePassiveListener(xt),document.removeEventListener("resume",Ft,!1),document.removeEventListener("visibilitychange",on,!1),Xe&&window.clearTimeout(Xe)}})}finally{P()}})).apply(this,arguments)}function hv(b){return kg.apply(this,arguments)}function kg(){return(kg=(0,c.Z)(function*(b){const g=cb(b),y=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(y)).map(P=>P.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function cb(b){if(W(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const g=new ArrayBuffer(b.length),y=new Uint8Array(g);for(let w=0;w<b.length;w++)y[w]=b.charCodeAt(w);return y}(0,U.Pz)("authIdTokenMaxAge"),function Ig(b){(0,ye._registerComponent)(new _e.wA("auth",(g,{options:y})=>{const w=g.getProvider("app").getImmediate(),P=g.getProvider("heartbeat"),{apiKey:z,authDomain:ge}=w.options;return((Xe,xt)=>{O(z&&!z.includes(":"),"invalid-api-key",{appName:Xe.name}),O(!ge?.includes(":"),"argument-error",{appName:Xe.name});const Ft={apiKey:z,authDomain:ge,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$r(b)},on=new sn(Xe,xt,Ft);return function se(b,g){const y=g?.persistence||[],w=(Array.isArray(y)?y:[y]).map(le);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(w,g?.popupRedirectResolver)}(on,y),on})(w,P)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,w)=>{g.getProvider("auth-internal").initialize()})),(0,ye._registerComponent)(new _e.wA("auth-internal",g=>{const y=Gn(g.getProvider("auth").getImmediate());return new xg(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ye.registerVersion)(lc,"0.21.0",function cv(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,ye.registerVersion)(lc,"0.21.0","esm2017")}("Browser");class Pg extends Da{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(g)),super.onEvent(g)}initialized(){var g=this;return(0,c.Z)(function*(){yield g.initPromise})()}}function Pd(b){return dl.apply(this,arguments)}function dl(){return(dl=(0,c.Z)(function*(b){const g=yield Rd()._get(Od(b));return g&&(yield Rd()._remove(Od(b))),g})).apply(this,arguments)}function Rg(){const b=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const w=Math.floor(Math.random()*g.length);b.push(g.charAt(w))}return b.join("")}function Rd(){return le(Gl)}function Od(b){return ke("authEvent",b.config.apiKey,b.name)}function ea(b){if(!b?.includes("?"))return{};const[g,...y]=b.split("?");return(0,U.zd)(y.join("?"))}function Ng(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Se("no-auth-event")}}function Tf(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function Ef(b=(0,U.z$)()){return!("file:"!==Tf()&&"ionic:"!==Tf()&&"capacitor:"!==Tf()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function gb(){try{const b=self.localStorage,g=Wl();if(b)return b.setItem(g,"1"),b.removeItem(g),!function wf(b=(0,U.z$)()){return function jg(){return(0,U.w1)()&&11===document?.documentMode}()||function Nd(b=(0,U.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,U.hl)()}catch{return uc()&&(0,U.hl)()}return!1}function uc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ug(){return(function pb(){return"http:"===Tf()||"https:"===Tf()}()||(0,U.ru)()||Ef())&&!function Fg(){return(0,U.b$)()||(0,U.UG)()}()&&gb()&&!uc()}function hl(){return Ef()&&typeof document<"u"}function Cf(){return(Cf=(0,c.Z)(function*(){return!!hl()&&new Promise(b=>{const g=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),b(!0)})})})).apply(this,arguments)}const wo={LOCAL:"local",NONE:"none",SESSION:"session"},nu=O,yv="persistence";function Vg(b){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,c.Z)(function*(b){yield b._initializationPromise;const g=_v(),y=ke(yv,b.config.apiKey,b.name);g&&g.setItem(y,b._getPersistence())})).apply(this,arguments)}function _v(){var b;try{return(null===(b=function yb(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const Aa=O;class Co{constructor(){this.browserResolver=le(class Qs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zs,this._completeRedirectFn=Ut,this._overrideRedirectResult=Jo}_openPopup(g,y,w,P){var z=this;return(0,c.Z)(function*(){var ge;W(null===(ge=z.eventManagers[g._key()])||void 0===ge?void 0:ge.manager,"_initialize() not called before _openPopup()");const Xe=Dd(g,y,w,ae(),P);return function UC(b,g,y,w=500,P=600){const z=Math.max((window.screen.availHeight-P)/2,0).toString(),ge=Math.max((window.screen.availWidth-w)/2,0).toString();let Xe="";const xt=Object.assign(Object.assign({},jC),{width:w.toString(),height:P.toString(),top:z,left:ge}),Ft=(0,U.z$)().toLowerCase();y&&(Xe=kn(Ft)?"_blank":y),Dt(Ft)&&(g=g||"http://localhost",xt.scrollbars="yes");const on=Object.entries(xt).reduce((bi,[Ti,ka])=>`${bi}${Ti}=${ka},`,"");if(function Wt(b=(0,U.z$)()){var g;return Fe(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Ft)&&"_self"!==Xe)return function ob(b,g){const y=document.createElement("a");y.href=b,y.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(w)}(g||"",Xe),new av(null);const Xt=window.open(g||"",Xe,on);O(Xt,b,"popup-blocked");try{Xt.focus()}catch{}return new av(Xt)}(g,Xe,Wl())})()}_openRedirect(g,y,w,P){var z=this;return(0,c.Z)(function*(){return yield z._originValidation(g),function Fs(b){Hr().location.href=b}(Dd(g,y,w,ae(),P)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:P,promise:z}=this.eventManagers[y];return P?Promise.resolve(P):(W(z,"If manager is not set, promise should be"),z)}const w=this.initAndGetManager(g);return this.eventManagers[y]={promise:w},w.catch(()=>{delete this.eventManagers[y]}),w}initAndGetManager(g){var y=this;return(0,c.Z)(function*(){const w=yield function bg(b){return ov.apply(this,arguments)}(g),P=new Da(g);return w.register("authEvent",z=>(O(z?.authEvent,g,"invalid-auth-event"),{status:P.onEvent(z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:P},y.iframes[g._key()]=w,P})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Ad,{type:Ad},P=>{var z;const ge=null===(z=P?.[0])||void 0===z?void 0:z[Ad];void 0!==ge&&y(!!ge),Ge(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function tb(b){return yg.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return kr()||zt()||Fe()}}),this.cordovaResolver=le(class Og{constructor(){this._redirectPersistence=Zs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ut,this._overrideRedirectResult=Jo}_initialize(g){var y=this;return(0,c.Z)(function*(){const w=g._key();let P=y.eventManagers.get(w);return P||(P=new Pg(g),y.eventManagers.set(w,P),y.attachCallbackListeners(g,P)),P})()}_openPopup(g){Ge(g,"operation-not-supported-in-this-environment")}_openRedirect(g,y,w,P){var z=this;return(0,c.Z)(function*(){!function ub(b){var g,y,w,P,z,ge,Xe,xt,Ft,on;const Xt=Eo();O("function"==typeof(null===(g=Xt?.universalLinks)||void 0===g?void 0:g.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),O(typeof(null===(y=Xt?.BuildInfo)||void 0===y?void 0:y.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),O("function"==typeof(null===(z=null===(P=null===(w=Xt?.cordova)||void 0===w?void 0:w.plugins)||void 0===P?void 0:P.browsertab)||void 0===z?void 0:z.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O("function"==typeof(null===(xt=null===(Xe=null===(ge=Xt?.cordova)||void 0===ge?void 0:ge.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===xt?void 0:xt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),O("function"==typeof(null===(on=null===(Ft=Xt?.cordova)||void 0===Ft?void 0:Ft.InAppBrowser)||void 0===on?void 0:on.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const ge=yield z._initialize(g);yield ge.initialized(),ge.resetRedirect(),function df(){As.clear()}(),yield z._originValidation(g);const Xe=function db(b,g,y=null){return{type:g,eventId:y,urlResponse:null,sessionId:Rg(),postBody:null,tenantId:b.tenantId,error:Se(b,"no-auth-event")}}(g,w,P);yield function fv(b,g){return Rd()._set(Od(b),g)}(g,Xe);const xt=yield function eu(b,g,y){return Md.apply(this,arguments)}(g,Xe,y),Ft=yield function tu(b){const{cordova:g}=Eo();return new Promise(y=>{g.plugins.browsertab.isAvailable(w=>{let P=null;w?g.plugins.browsertab.openUrl(b):P=g.InAppBrowser.open(b,function vt(b=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),y(P)})})}(xt);return function dv(b,g,y){return _f.apply(this,arguments)}(g,ge,Ft)})()}_isIframeWebStorageSupported(g,y){throw new Error("Method not implemented.")}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function lb(b){return vf.apply(this,arguments)}(g)),this.originValidationPromises[y]}attachCallbackListeners(g,y){const{universalLinks:w,handleOpenURL:P,BuildInfo:z}=Eo(),ge=setTimeout((0,c.Z)(function*(){yield Pd(g),y.onEvent(Ng())}),500),Xe=function(){var on=(0,c.Z)(function*(Xt){clearTimeout(ge);const bi=yield Pd(g);let Ti=null;bi&&Xt?.url&&(Ti=function pv(b,g){var y,w;const P=function hb(b){const g=ea(b),y=g.link?decodeURIComponent(g.link):void 0,w=ea(y).link,P=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return ea(P).link||P||w||y||b}(g);if(P.includes("/__/auth/callback")){const z=ea(P),ge=z.firebaseError?function gv(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(z.firebaseError)):null,Xe=null===(w=null===(y=ge?.code)||void 0===y?void 0:y.split("auth/"))||void 0===w?void 0:w[1],xt=Xe?Se(Xe):null;return xt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:xt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:P,postBody:null}}return null}(bi,Xt.url)),y.onEvent(Ti||Ng())});return function(bi){return on.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,Xe);const xt=P,Ft=`${z.packageName.toLowerCase()}://`;Eo().handleOpenURL=function(){var on=(0,c.Z)(function*(Xt){if(Xt.toLowerCase().startsWith(Ft)&&Xe({url:Xt}),"function"==typeof xt)try{xt(Xt)}catch(bi){console.error(bi)}});return function(Xt){return on.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Zs,this._completeRedirectFn=Ut,this._overrideRedirectResult=Jo}_initialize(g){var y=this;return(0,c.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,y,w,P){var z=this;return(0,c.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._openPopup(g,y,w,P)})()}_openRedirect(g,y,w,P){var z=this;return(0,c.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._openRedirect(g,y,w,P)})()}_isIframeWebStorageSupported(g,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,y)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return hl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Aa(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,c.Z)(function*(){if(g.underlyingResolver)return;const y=yield function mb(){return Cf.apply(this,arguments)}();g.underlyingResolver=y?g.cordovaResolver:g.browserResolver})()}}function Sf(b){return b.unwrap()}function If(b){return ru(b)}function ru(b){const{_tokenResponse:g}=b instanceof U.ZR?b.customData:b;if(!g)return null;if(!(b instanceof U.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Zt.credentialFromResult(b);const y=g.providerId;if(!y||"password"===y)return null;let w;switch(y){case"google.com":w=ku;break;case"facebook.com":w=Nl;break;case"github.com":w=ad;break;case"twitter.com":w=ds;break;default:const{oauthIdToken:P,oauthAccessToken:z,oauthTokenSecret:ge,pendingToken:Xe,nonce:xt}=g;return z||ge||P||Xe?Xe?y.startsWith("saml.")?Cs._create(y,Xe):ho._fromParams({providerId:y,signInMethod:y,pendingToken:Xe,idToken:P,accessToken:z}):new fa(y).credential({idToken:P,accessToken:z,rawNonce:xt}):null}return b instanceof U.ZR?w.credentialFromError(b):w.credentialFromResult(b)}function ms(b,g){return g.catch(y=>{throw y instanceof U.ZR&&function Df(b,g){var y;const w=null===(y=g.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new _b(b,function Or(b,g){var y;const w=(0,U.m9)(b),P=g;return O(g.customData.operationType,w,"argument-error"),O(null===(y=P.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,w,"argument-error"),Ku._fromError(w,P)}(b,g));else if(w){const P=ru(g),z=g;P&&(z.credential=P,z.tenantId=w.tenantId||void 0,z.email=w.email||void 0,z.phoneNumber=w.phoneNumber||void 0)}}(b,y),y}).then(y=>{const P=y.user;return{operationType:y.operationType,credential:If(y),additionalUserInfo:zu(y),user:js.getOrCreate(P)}})}function Ld(b,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,c.Z)(function*(b,g){const y=yield g;return{verificationId:y.verificationId,confirm:w=>ms(b,y.confirm(w))}})).apply(this,arguments)}class _b{constructor(g,y){this.resolver=y,this.auth=function xf(b){return b.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return ms(Sf(this.auth),this.resolver.resolveSignIn(g))}}class js{constructor(g){this._delegate=g,this.multiFactor=function el(b){const g=(0,U.m9)(b);return Ja.has(g)||Ja.set(g,hg._fromUser(g)),Ja.get(g)}(g)}static getOrCreate(g){return js.USER_MAP.has(g)||js.USER_MAP.set(g,new js(g)),js.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var y=this;return(0,c.Z)(function*(){return ms(y.auth,Lu(y._delegate,g))})()}linkWithPhoneNumber(g,y){var w=this;return(0,c.Z)(function*(){return Ld(w.auth,function Ot(b,g,y){return mr.apply(this,arguments)}(w._delegate,g,y))})()}linkWithPopup(g){var y=this;return(0,c.Z)(function*(){return ms(y.auth,function oc(b,g,y){return gs.apply(this,arguments)}(y._delegate,g,Co))})()}linkWithRedirect(g){var y=this;return(0,c.Z)(function*(){return yield Vg(Gn(y.auth)),function Ne(b,g,y){return function Ze(b,g,y){return mt.apply(this,arguments)}(b,g,y)}(y._delegate,g,Co)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var y=this;return(0,c.Z)(function*(){return ms(y.auth,Fu(y._delegate,g))})()}reauthenticateWithPhoneNumber(g,y){return Ld(this.auth,function uf(b,g,y){return bo.apply(this,arguments)}(this._delegate,g,y))}reauthenticateWithPopup(g){return ms(this.auth,function pg(b,g,y){return cf.apply(this,arguments)}(this._delegate,g,Co))}reauthenticateWithRedirect(g){var y=this;return(0,c.Z)(function*(){return yield Vg(Gn(y.auth)),function R(b,g,y){return function G(b,g,y){return ce.apply(this,arguments)}(b,g,y)}(y._delegate,g,Co)})()}sendEmailVerification(g){return function pd(b,g){return $l.apply(this,arguments)}(this._delegate,g)}unlink(g){var y=this;return(0,c.Z)(function*(){return yield function Ki(b,g){return Pu.apply(this,arguments)}(y._delegate,g),y})()}updateEmail(g){return function Yh(b,g){return ya((0,U.m9)(b),g,null)}(this._delegate,g)}updatePassword(g){return function ma(b,g){return ya((0,U.m9)(b),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function vi(b,g){return cr.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function yd(b,g){return vd.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,y){return function gd(b,g,y){return Hu.apply(this,arguments)}(this._delegate,g,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}js.USER_MAP=new WeakMap;const So=O;let Fd=(()=>{class b{constructor(y,w){if(this.app=y,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:P}=y.options;So(P,"invalid-api-key",{appName:y.name}),So(P,"invalid-api-key",{appName:y.name});const z=typeof window<"u"?Co:void 0;this._delegate=w.initialize({options:{persistence:ta(P,y.name),popupRedirectResolver:z}}),this._delegate._updateErrorMap(Ue),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?js.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,w){!function zi(b,g,y){const w=Gn(b);O(w._canInitEmulator,w,"emulator-config-failed"),O(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const P=!!y?.disableWarnings,z=si(g),{host:ge,port:Xe}=function or(b){const g=si(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!y)return{host:"",port:null};const w=y[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(w);if(P){const z=P[1];return{host:z,port:ar(w.substr(z.length+1))}}{const[z,ge]=w.split(":");return{host:z,port:ar(ge)}}}(g);w.config.emulator={url:`${z}//${ge}${null===Xe?"":`:${Xe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:ge,port:Xe,protocol:z.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function Os(){function b(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,y,w)}applyActionCode(y){return function Is(b,g){return Fl.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return jl(this._delegate,y)}confirmPasswordReset(y,w){return function Bu(b,g,y){return Ya.apply(this,arguments)}(this._delegate,y,w)}createUserWithEmailAndPassword(y,w){var P=this;return(0,c.Z)(function*(){return ms(P._delegate,function Ul(b,g,y){return Rr.apply(this,arguments)}(P._delegate,y,w))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function $u(b,g){return Bl.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function yo(b,g){return"EMAIL_SIGNIN"===Au.parseLink(g)?.operation}(0,y)}getRedirectResult(){var y=this;return(0,c.Z)(function*(){So(Ug(),y._delegate,"operation-not-supported-in-this-environment");const w=yield function Bt(b,g){return De.apply(this,arguments)}(y._delegate,Co);return w?ms(y._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function fb(b,g){Gn(b)._logFramework(g)}(this._delegate,y)}onAuthStateChanged(y,w,P){const{next:z,error:ge,complete:Xe}=iu(y,w,P);return this._delegate.onAuthStateChanged(z,ge,Xe)}onIdTokenChanged(y,w,P){const{next:z,error:ge,complete:Xe}=iu(y,w,P);return this._delegate.onIdTokenChanged(z,ge,Xe)}sendSignInLinkToEmail(y,w){return function hd(b,g,y){return ga.apply(this,arguments)}(this._delegate,y,w)}sendPasswordResetEmail(y,w){return function Vu(b,g,y){return Pr.apply(this,arguments)}(this._delegate,y,w||void 0)}setPersistence(y){var w=this;return(0,c.Z)(function*(){let P;switch(function vb(b,g){nu(Object.values(wo).includes(g),b,"invalid-persistence-type"),(0,U.b$)()?nu(g!==wo.SESSION,b,"unsupported-persistence-type"):(0,U.UG)()?nu(g===wo.NONE,b,"unsupported-persistence-type"):uc()?nu(g===wo.NONE||g===wo.LOCAL&&(0,U.hl)(),b,"unsupported-persistence-type"):nu(g===wo.NONE||gb(),b,"unsupported-persistence-type")}(w._delegate,y),y){case wo.SESSION:P=Zs;break;case wo.LOCAL:P=(yield le(nl)._isAvailable())?nl:Gl;break;case wo.NONE:P=fe;break;default:return Ge("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(P)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return ms(this._delegate,function ug(b){return Mr.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return ms(this._delegate,xr(this._delegate,y))}signInWithCustomToken(y){return ms(this._delegate,function ud(b,g){return Ll.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,w){return ms(this._delegate,function Ks(b,g,y){return xr((0,U.m9)(b),zs.credential(g,y))}(this._delegate,y,w))}signInWithEmailLink(y,w){return ms(this._delegate,function Yy(b,g,y){return Vl.apply(this,arguments)}(this._delegate,y,w))}signInWithPhoneNumber(y,w){return Ld(this._delegate,function al(b,g,y){return Un.apply(this,arguments)}(this._delegate,y,w))}signInWithPopup(y){var w=this;return(0,c.Z)(function*(){return So(Ug(),w._delegate,"operation-not-supported-in-this-environment"),ms(w._delegate,function Ys(b,g,y){return Qo.apply(this,arguments)}(w._delegate,y,Co))})()}signInWithRedirect(y){var w=this;return(0,c.Z)(function*(){return So(Ug(),w._delegate,"operation-not-supported-in-this-environment"),yield Vg(w._delegate),function qr(b,g,y){return function mg(b,g,y){return k.apply(this,arguments)}(b,g,y)}(w._delegate,y,Co)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function dd(b,g){return Zh.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=wo,b})();function iu(b,g,y){let w=b;"function"!=typeof b&&({next:w,error:g,complete:y}=b);const P=w;return{next:ge=>P(ge&&js.getOrCreate(ge)),error:g,complete:y}}function ta(b,g){const y=function vv(b,g){const y=_v();if(!y)return[];const w=ke(yv,b,g);switch(y.getItem(w)){case wo.NONE:return[fe];case wo.LOCAL:return[nl,Zs];case wo.SESSION:return[Zs];default:return[]}}(b,g);if(typeof self<"u"&&!y.includes(nl)&&y.push(nl),typeof window<"u")for(const w of[Gl,Zs])y.includes(w)||y.push(w);return y.includes(fe)||y.push(fe),y}class jd{constructor(){this.providerId="phone",this._delegate=new Zt(Sf(oe.Z.auth()))}static credential(g,y){return Zt.credential(g,y)}verifyPhoneNumber(g,y){return this._delegate.verifyPhoneNumber(g,y)}unwrap(){return this._delegate}}jd.PHONE_SIGN_IN_METHOD=Zt.PHONE_SIGN_IN_METHOD,jd.PROVIDER_ID=Zt.PROVIDER_ID;const bb=O;class Af{constructor(g,y,w=oe.Z.app()){var P;bb(null===(P=w.options)||void 0===P?void 0:P.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new mi(g,y,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $g(b){b.INTERNAL.registerComponent(new _e.wA("auth-compat",g=>{const y=g.getProvider("app-compat").getImmediate(),w=g.getProvider("auth");return new Fd(y,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zs,FacebookAuthProvider:Nl,GithubAuthProvider:ad,GoogleAuthProvider:ku,OAuthProvider:fa,SAMLAuthProvider:Ss,PhoneAuthProvider:jd,PhoneMultiFactorGenerator:mf,RecaptchaVerifier:Af,TwitterAuthProvider:ds,Auth:Fd,AuthCredential:gr,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.3.0")}(oe.Z)},8766:(it,Ie,V)=>{"use strict";V.d(Ie,{Lj:()=>Ge,X3:()=>nt});var c=V(5861);let U,ye;const _e=new WeakMap,ve=new WeakMap,Ce=new WeakMap,K=new WeakMap,ee=new WeakMap;let Me={get(O,$,W){if(O instanceof IDBTransaction){if("done"===$)return ve.get(O);if("objectStoreNames"===$)return O.objectStoreNames||Ce.get(O);if("store"===$)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return me(O[$])},set:(O,$,W)=>(O[$]=W,!0),has:(O,$)=>O instanceof IDBTransaction&&("done"===$||"store"===$)||$ in O};function Be(O){return"function"==typeof O?function Tt(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...$){return O.apply(Ke(this),$),me(_e.get(this))}:function(...$){return me(O.apply(Ke(this),$))}:function($,...W){const re=O.call(Ke(this),$,...W);return Ce.set(re,$.sort?$.sort():[$]),me(re)}}(O):(O instanceof IDBTransaction&&function qe(O){if(ve.has(O))return;const $=new Promise((W,re)=>{const le=()=>{O.removeEventListener("complete",he),O.removeEventListener("error",se),O.removeEventListener("abort",se)},he=()=>{W(),le()},se=()=>{re(O.error||new DOMException("AbortError","AbortError")),le()};O.addEventListener("complete",he),O.addEventListener("error",se),O.addEventListener("abort",se)});ve.set(O,$)}(O),((O,$)=>$.some(W=>O instanceof W))(O,function te(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,Me):O)}function me(O){if(O instanceof IDBRequest)return function Z(O){const $=new Promise((W,re)=>{const le=()=>{O.removeEventListener("success",he),O.removeEventListener("error",se)},he=()=>{W(me(O.result)),le()},se=()=>{re(O.error),le()};O.addEventListener("success",he),O.addEventListener("error",se)});return $.then(W=>{W instanceof IDBCursor&&_e.set(W,O)}).catch(()=>{}),ee.set($,O),$}(O);if(K.has(O))return K.get(O);const $=Be(O);return $!==O&&(K.set(O,$),ee.set($,O)),$}const Ke=O=>ee.get(O);function nt(O,$,{blocked:W,upgrade:re,blocking:le,terminated:he}={}){const se=indexedDB.open(O,$),ae=me(se);return re&&se.addEventListener("upgradeneeded",we=>{re(me(se.result),we.oldVersion,we.newVersion,me(se.transaction))}),W&&se.addEventListener("blocked",()=>W()),ae.then(we=>{he&&we.addEventListener("close",()=>he()),le&&we.addEventListener("versionchange",()=>le())}).catch(()=>{}),ae}function Ge(O,{blocked:$}={}){const W=indexedDB.deleteDatabase(O);return $&&W.addEventListener("blocked",()=>$()),me(W).then(()=>{})}const Se=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],rt=new Map;function et(O,$){if(!(O instanceof IDBDatabase)||$ in O||"string"!=typeof $)return;if(rt.get($))return rt.get($);const W=$.replace(/FromIndex$/,""),re=$!==W,le=ze.includes(W);if(!(W in(re?IDBIndex:IDBObjectStore).prototype)||!le&&!Se.includes(W))return;const he=function(){var se=(0,c.Z)(function*(ae,...we){const He=this.transaction(ae,le?"readwrite":"readonly");let Re=He.store;return re&&(Re=Re.index(we.shift())),(yield Promise.all([Re[W](...we),le&&He.done]))[0]});return function(we){return se.apply(this,arguments)}}();return rt.set($,he),he}!function Ue(O){Me=O(Me)}(O=>({...O,get:($,W,re)=>et($,W)||O.get($,W,re),has:($,W)=>!!et($,W)||O.has($,W)}))},5861:(it,Ie,V)=>{"use strict";function c(U,ye,te,pe,_e,ve,Ce){try{var K=U[ve](Ce),ee=K.value}catch(Z){return void te(Z)}K.done?ye(ee):Promise.resolve(ee).then(pe,_e)}function oe(U){return function(){var ye=this,te=arguments;return new Promise(function(pe,_e){var ve=U.apply(ye,te);function Ce(ee){c(ve,pe,_e,Ce,K,"next",ee)}function K(ee){c(ve,pe,_e,Ce,K,"throw",ee)}Ce(void 0)})}}V.d(Ie,{Z:()=>oe})},3681:it=>{"use strict";it.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.11.6","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","start:worker":"node scripts/worker-server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","build:worker":"rimraf dist && webpack --config scripts/webpack.config.worker.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node node_modules/mocha/bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.11.0","@types/emscripten":"^1.39.4","babel-eslint":"^10.1.0","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')}},it=>{it(it.s=6202)}]);